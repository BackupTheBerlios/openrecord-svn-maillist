From skinner at sheep.berlios.de  Fri Jul  1 00:14:04 2005
From: skinner at sheep.berlios.de (Brian Douglas Skinner at BerliOS)
Date: Fri, 1 Jul 2005 00:14:04 +0200
Subject: [openrecord-svn] r201 - in trunk: . source source/model source/util
Message-ID: <200506302214.j5UME4S2011534@sheep.berlios.de>

Author: skinner
Date: 2005-07-01 00:14:03 +0200 (Fri, 01 Jul 2005)
New Revision: 201

Added:
   trunk/source/util/
   trunk/source/util/LintTest.html
   trunk/source/util/LintTest.js
   trunk/source/util/Uuid.js
Modified:
   trunk/dashboard.html
   trunk/demo_page.html
   trunk/dogfood.html
   trunk/source/TestSuite.html
   trunk/source/Util.js
   trunk/source/UtilTest.html
   trunk/source/UtilTest.js
   trunk/source/base_style.css
   trunk/source/model/ModelTest.html
   trunk/source/model/Record.js
   trunk/source/model/StubVirtualServer.js
Log:
Created a "util" directory for utility code.  Broke the UUID methods out of Util.js and moved them into a new Uuid.js file in the util directory.  Updated other code as necessary.

Modified: trunk/dashboard.html
===================================================================
--- trunk/dashboard.html	2005-06-30 18:19:00 UTC (rev 200)
+++ trunk/dashboard.html	2005-06-30 22:14:03 UTC (rev 201)
@@ -14,6 +14,8 @@
     <title>Dashboard Demo Page</title>
     <link rel="stylesheet" type="text/css" href="source/base_style.css" />
     <script type="text/javascript" src="third_party/md5/md5.js"></script>
+    
+    <script type="text/javascript" src="source/util/Uuid.js"></script>
     <script type="text/javascript" src="source/Util.js"></script>
     <script type="text/javascript" src="source/Cookie.js"></script>
 

Modified: trunk/demo_page.html
===================================================================
--- trunk/demo_page.html	2005-06-30 18:19:00 UTC (rev 200)
+++ trunk/demo_page.html	2005-06-30 22:14:03 UTC (rev 201)
@@ -14,6 +14,8 @@
     <title>openrecord.org - Demo Page</title>
     <link rel="stylesheet" type="text/css" href="source/base_style.css" />
     <script type="text/javascript" src="third_party/md5/md5.js"></script>
+    
+    <script type="text/javascript" src="source/util/Uuid.js"></script>
     <script type="text/javascript" src="source/Util.js"></script>
     <script type="text/javascript" src="source/Cookie.js"></script>
 

Modified: trunk/dogfood.html
===================================================================
--- trunk/dogfood.html	2005-06-30 18:19:00 UTC (rev 200)
+++ trunk/dogfood.html	2005-06-30 22:14:03 UTC (rev 201)
@@ -14,6 +14,8 @@
     <title>openrecord.org - Dogfood Page</title>
     <link rel="stylesheet" type="text/css" href="source/base_style.css" />
     <script type="text/javascript" src="third_party/md5/md5.js"></script>
+    
+    <script type="text/javascript" src="source/util/Uuid.js"></script>
     <script type="text/javascript" src="source/Util.js"></script>
     <script type="text/javascript" src="source/Cookie.js"></script>
 

Modified: trunk/source/TestSuite.html
===================================================================
--- trunk/source/TestSuite.html	2005-06-30 18:19:00 UTC (rev 200)
+++ trunk/source/TestSuite.html	2005-06-30 22:14:03 UTC (rev 201)
@@ -26,6 +26,7 @@
         testSuite.addTestPage("../../../source/UtilTest.html");
         testSuite.addTestPage("../../../source/LintTest.html");
         testSuite.addTestPage("../../../source/model/TestSuite.html");
+        testSuite.addTestPage("../../../source/util/LintTest.html");
         return testSuite;
       }
     </script>

Modified: trunk/source/Util.js
===================================================================
--- trunk/source/Util.js	2005-06-30 18:19:00 UTC (rev 200)
+++ trunk/source/Util.js	2005-06-30 22:14:03 UTC (rev 201)
@@ -37,6 +37,7 @@
 /*global window, document, hex_md5 */
 // -------------------------------------------------------------------
 
+
 /**
  * The Util class offers general utility methods that might
  * be useful in a wide variety of applications.
@@ -71,20 +72,9 @@
 Util.ASCII_VALUE_FOR_RIGHT_ARROW = 39; // 124
 Util.ASCII_VALUE_FOR_DOWN_ARROW = 40;  // 125
 
-// Number of seconds between October 15, 1582 and January 1, 1970
-// Util.GREGORIAN_CHANGE_OFFSET_IN_SECONDS = 12219292800;
-Util.GREGORIAN_CHANGE_OFFSET_IN_HOURS = 3394248;
 
-Util.HEX_RADIX = 16;
 
 // -------------------------------------------------------------------
-// Util global class variables
-// -------------------------------------------------------------------
-Util._ourUuidClockSeqString = null;
-Util._ourDateValueOfPreviousUuid = null;
-Util._ourNextIntraMillisecondIncrement = 0;
-
-// -------------------------------------------------------------------
 // String manipulation methods
 // -------------------------------------------------------------------
 
@@ -525,226 +515,7 @@
 };
 
 
-// -------------------------------------------------------------------
-// Methods for working with UUIDs
-// -------------------------------------------------------------------
 
-Util.getRandom32bitNumber = function () {
-  return Math.floor( (Math.random() % 1) * Math.pow(2, 32) );
-};
-
-
-Util.getRandomEightCharacterHexString = function () {
-  // PENDING: 
-  // This isn't really random.  We should find some source of real 
-  // randomness, and feed it to an MD5 hash algorithm.     
-  var eightCharacterString = Util.getRandom32bitNumber().toString(Util.HEX_RADIX);
-  while (eightCharacterString.length < 8) {
-    eightCharacterString = "0" + eightCharacterString;
-  }
-  return eightCharacterString;
-};
-
-
-/**
- * Generates a random UUID, meaning a "version 4" UUID.  Hopefully this 
- * implementation conforms to the existing standards for UUIDs and GUIDs.  
- * For more info, see 
- * http://www.webdav.org/specs/draft-leach-uuids-guids-01.txt
- * 
- * @scope    public class method
- * @return   Returns a 36 character string, which will look something like "3B12F1DF-5232-4804-897E-917BF397618A".
- */
-Util.generateRandomUuid = function () {
-  var hyphen = "-";
-  var versionCodeForRandomlyGeneratedUuids = "4"; // 8 == binary2hex("0100")
-  var variantCodeForDCEUuids = "8"; // 8 == binary2hex("1000")
-  var a = Util.getRandomEightCharacterHexString();
-  var b = Util.getRandomEightCharacterHexString();
-  b = b.substring(0, 4) + hyphen + versionCodeForRandomlyGeneratedUuids + b.substring(5, 8);
-  var c = Util.getRandomEightCharacterHexString();
-  c = variantCodeForDCEUuids + c.substring(1, 4) + hyphen + c.substring(4, 8);
-  var d = Util.getRandomEightCharacterHexString();
-  var result = a + hyphen + b + hyphen + c + d;
-  
-  return result;
-};
-
-Util.carry = function(a) {
-  a[2] += a[3] >>> 16;
-  a[3] &= 0xFFFF;
-  a[1] += a[2] >>> 16;
-  a[2] &= 0xFFFF;
-  a[0] += a[1] >>> 16;
-  a[1] &= 0xFFFF;
-  Util.assert((a[0] >>> 16) === 0);
-};
-
-Util.get64bitArrayFromFloat = function(x) {
-  var result = new Array(0, 0, 0, 0);
-  result[3] = x % 0x10000;
-  x -= result[3];
-  x /= 0x10000;
-  result[2] = x % 0x10000;
-  x -= result[2];
-  x /= 0x10000;
-  result[1] = x % 0x10000;
-  x -= result[1];
-  x /= 0x10000;
-  result[0] = x;
-  return result;
-};
-
-Util.addTwo64bitArrays = function(a, b) {
-  Util.assert(Util.isArray(a));
-  Util.assert(a.length == 4);
-  Util.assert(Util.isArray(b));
-  Util.assert(b.length == 4);
-  var result = new Array(0, 0, 0, 0);
-  result[3] = a[3] + b[3];
-  result[2] = a[2] + b[2];
-  result[1] = a[1] + b[1];
-  result[0] = a[0] + b[0];
-  Util.carry(result);
-  return result;
-};
-
-Util.multiplyTwo64bitArrays = function(a, b) {
-  Util.assert(Util.isArray(a));
-  Util.assert(a.length == 4);
-  Util.assert(Util.isArray(b));
-  Util.assert(b.length == 4);
-  var overflow = false;
-  if (a[0] * b[0] !== 0) { overflow = true; }
-  if (a[0] * b[1] !== 0) { overflow = true; }
-  if (a[0] * b[2] !== 0) { overflow = true; }
-  if (a[1] * b[0] !== 0) { overflow = true; }
-  if (a[1] * b[1] !== 0) { overflow = true; }
-  if (a[2] * b[0] !== 0) { overflow = true; }
-  Util.assert(!overflow);
-  
-  var result = new Array(0, 0, 0, 0);
-  result[0] += a[0] * b[3];
-  Util.carry(result);
-  result[0] += a[1] * b[2];
-  Util.carry(result);
-  result[0] += a[2] * b[1];
-  Util.carry(result);
-  result[0] += a[3] * b[0];
-  Util.carry(result);
-  result[1] += a[1] * b[3];
-  Util.carry(result);
-  result[1] += a[2] * b[2];
-  Util.carry(result);
-  result[1] += a[3] * b[1];
-  Util.carry(result);
-  result[2] += a[2] * b[3];
-  Util.carry(result);
-  result[2] += a[3] * b[2];
-  Util.carry(result);
-  result[3] += a[3] * b[3];
-  Util.carry(result);
-  return result;
-};
-
-Util.padWithLeadingZeros = function(string, desiredLength) {
-  while (string.length < desiredLength) {
-    string = "0" + string;
-  }
-  return string;
-};
-
-/**
- * Generates a time-based UUID, meaning a "version 1" UUID.  JavaScript
- * code running in a browser doesn't have access to the IEEE 802.3 address
- * of the computer, so we generate a random pseudonode value instead.
- * Hopefully this implementation conforms to the existing standards for 
- * UUIDs and GUIDs.  
- * 
- * For more info, see 
- *   http://www.webdav.org/specs/draft-leach-uuids-guids-01.txt
- *   http://www.infonuovo.com/dma/csdocs/sketch/instidid.htm
- *   http://kruithof.xs4all.nl/uuid/uuidgen
- *   http://www.opengroup.org/onlinepubs/009629399/apdxa.htm#tagcjh_20
- *   http://jakarta.apache.org/commons/sandbox/id/apidocs/org/apache/commons/id/uuid/clock/Clock.html
- *
- * @scope    public class method
- * @return   Returns a 36 character string, which will look something like "3B12F1DF-5232-1804-897E-917BF397618A".
- */
-Util.generateTimeBasedUuid = function(pseudoNode) {
-  Util.assert(!pseudoNode || Util.isString(pseudoNode));  
-  if (pseudoNode) {
-    Util.assert(pseudoNode.length == 12);  
-  }
-  else {
-    var pseudoNodeIndicatorBit = 0x8000;
-    var random15bitNumber = Math.floor( (Math.random() % 1) * Math.pow(2, 15) );
-    var leftmost4HexCharacters = (pseudoNodeIndicatorBit | random15bitNumber).toString(Util.HEX_RADIX);
-    pseudoNode = leftmost4HexCharacters + Util.getRandomEightCharacterHexString();
-  }
-  if (!Util._ourUuidClockSeqString) {
-    var variantCodeForDCEUuids = 0x8000; // 10--------------, i.e. uses only first two of 16 bits.
-    var random14bitNumber = Math.floor( (Math.random() % 1) * Math.pow(2, 14) );
-    Util._ourUuidClockSeqString = (variantCodeForDCEUuids | random14bitNumber).toString(Util.HEX_RADIX);
-  }
-
-  // Maybe someday think about trying to make the code more readable to
-  // newcomers by creating a class called "WholeNumber" that encapsulates
-  // the methods and data structures for working with these arrays that 
-  // hold 4 16-bit numbers?  And then these variables below have names  
-  // like "wholeSecondsPerHour" rather than "arraySecondsPerHour"?
-  var now = new Date();
-  var nowArray = Util.get64bitArrayFromFloat(now.valueOf());
-  var arraySecondsPerHour = Util.get64bitArrayFromFloat(60 * 60);
-  var arrayHoursBetween1582and1970 = Util.get64bitArrayFromFloat(Util.GREGORIAN_CHANGE_OFFSET_IN_HOURS);
-  var arraySecondsBetween1582and1970 = Util.multiplyTwo64bitArrays(arrayHoursBetween1582and1970, arraySecondsPerHour);
-  var arrayMillisecondsPerSecond = Util.get64bitArrayFromFloat(1000);
-  var arrayMillisecondsBetween1582and1970 = Util.multiplyTwo64bitArrays(arraySecondsBetween1582and1970, arrayMillisecondsPerSecond);
-  var arrayMillisecondsSince1970 = nowArray;
-  var arrayMillisecondsSince1582 = Util.addTwo64bitArrays(arrayMillisecondsBetween1582and1970, arrayMillisecondsSince1970);
-  var arrayMicrosecondsPerMillisecond = Util.get64bitArrayFromFloat(1000);
-  var arrayMicrosecondsSince1582 = Util.multiplyTwo64bitArrays(arrayMillisecondsSince1582, arrayMicrosecondsPerMillisecond);
-  var arrayHundredNanosecondIntervalsPerMicrosecond = Util.get64bitArrayFromFloat(10);
-  var arrayHundredNanosecondIntervalsSince1582 = Util.multiplyTwo64bitArrays(arrayMicrosecondsSince1582, arrayHundredNanosecondIntervalsPerMicrosecond);
-  
-  if (now.valueOf() == Util._ourDateValueOfPreviousUuid) {
-    arrayHundredNanosecondIntervalsSince1582[3] += Util._ourNextIntraMillisecondIncrement;
-    Util.carry(arrayHundredNanosecondIntervalsSince1582);
-    Util._ourNextIntraMillisecondIncrement += 1;
-    if (Util._ourNextIntraMillisecondIncrement == 10000) {
-      // If we've gotten to here, it means we've already generated 10,000
-      // UUIDs in this single milliseconds, which is the most that the UUID
-      // timestamp field allows for.  So now we'll just sit here and wait
-      // for a fraction of a millisecond, so as to ensure that the next 
-      // time this method is called there will be a different millisecond 
-      // value in the timestamp field.
-      while (now.valueOf() == Util._ourDateValueOfPreviousUuid) {
-        now = new Date();
-      }
-    }
-  }
-  else {
-    Util._ourDateValueOfPreviousUuid = now.valueOf();
-    Util._ourNextIntraMillisecondIncrement = 1;
-  }
-  
-  var hexTimeLowLeftHalf  = arrayHundredNanosecondIntervalsSince1582[2].toString(Util.HEX_RADIX);
-  var hexTimeLowRightHalf = arrayHundredNanosecondIntervalsSince1582[3].toString(Util.HEX_RADIX);
-  var hexTimeLow = Util.padWithLeadingZeros(hexTimeLowLeftHalf, 4) + Util.padWithLeadingZeros(hexTimeLowRightHalf, 4);
-  var hexTimeMid = arrayHundredNanosecondIntervalsSince1582[1].toString(Util.HEX_RADIX);
-  hexTimeMid = Util.padWithLeadingZeros(hexTimeMid, 4);
-  var hexTimeHigh = arrayHundredNanosecondIntervalsSince1582[0].toString(Util.HEX_RADIX);
-  hexTimeHigh = Util.padWithLeadingZeros(hexTimeHigh, 3);
-  var hyphen = "-";
-  var versionCodeForTimeBasedUuids = "1"; // binary2hex("0001")
-  var resultUuid = hexTimeLow + hyphen + hexTimeMid + hyphen +
-        versionCodeForTimeBasedUuids + hexTimeHigh + hyphen +
-        Util._ourUuidClockSeqString + hyphen + pseudoNode;
-//alert(resultUuid);
-  return resultUuid;
-};
-
-
 // -------------------------------------------------------------------
 // Methods that deal with event handling
 // -------------------------------------------------------------------

Modified: trunk/source/UtilTest.html
===================================================================
--- trunk/source/UtilTest.html	2005-06-30 18:19:00 UTC (rev 200)
+++ trunk/source/UtilTest.html	2005-06-30 22:14:03 UTC (rev 201)
@@ -16,6 +16,7 @@
     <script type="text/javascript" src="../third_party/jsunit/jsunit2_1/app/jsUnitCore.js"></script>
     <script type="text/javascript" src="../third_party/md5/md5.js"></script>
     <script type="text/javascript" src="Util.js"></script>
+    <script type="text/javascript" src="util/Uuid.js"></script>
     <script type="text/javascript" src="UtilTest.js"></script>
   </head>
   

Modified: trunk/source/UtilTest.js
===================================================================
--- trunk/source/UtilTest.js	2005-06-30 18:19:00 UTC (rev 200)
+++ trunk/source/UtilTest.js	2005-06-30 22:14:03 UTC (rev 201)
@@ -78,7 +78,7 @@
 
 function testGet64bitArrayFromFloat() {
   var x = Math.pow(2, 63) + Math.pow(2, 15);
-  var result = Util.get64bitArrayFromFloat(x);
+  var result = Uuid._get64bitArrayFromFloat(x);
   assertTrue("result[0] == 0x8000", result[0] === 0x8000);
   assertTrue("result[1] == 0x0000", result[1] === 0x0000);
   assertTrue("result[2] == 0x0000", result[2] === 0x0000);
@@ -86,7 +86,7 @@
   
   var date = new Date();
   x = date.valueOf();
-  result = Util.get64bitArrayFromFloat(x);
+  result = Uuid._get64bitArrayFromFloat(x);
   var reconstructedFloat = result[0];
   reconstructedFloat *= 0x10000;
   reconstructedFloat += result[1];
@@ -101,7 +101,7 @@
 function testAddTwo64bitArrays() {
   var a = [0x0000, 0x0000, 0x0000, 0x0001];
   var b = [0x0FFF, 0xFFFF, 0xFFFF, 0xFFFF];
-  var result = Util.addTwo64bitArrays(a, b);
+  var result = Uuid._addTwo64bitArrays(a, b);
   assert(result[0] === 0x1000);
   assert(result[1] === 0x0000);
   assert(result[2] === 0x0000);
@@ -109,7 +109,7 @@
   
   a = [0x4000, 0x8000, 0x8000, 0x8000];
   b = [0x8000, 0x8000, 0x8000, 0x8000];
-  result = Util.addTwo64bitArrays(a, b);
+  result = Uuid._addTwo64bitArrays(a, b);
   assert(result[0] === 0xC001);
   assert(result[1] === 0x0001);
   assert(result[2] === 0x0001);
@@ -117,7 +117,7 @@
   
   a = [7, 6, 2, 5];
   b = [1, 0, 3, 4];
-  result = Util.addTwo64bitArrays(a, b);
+  result = Uuid._addTwo64bitArrays(a, b);
   assert(result[0] === 8);
   assert(result[1] === 6);
   assert(result[2] === 5);
@@ -127,7 +127,7 @@
 function testMultiplyTwo64bitArrays() {
   var a = [     0, 0x0000, 0x0000, 0x0003];
   var b = [0x1111, 0x1234, 0x0000, 0xFFFF];
-  var result = Util.multiplyTwo64bitArrays(a, b);
+  var result = Uuid._multiplyTwo64bitArrays(a, b);
   assert(result[0] === 0x3333);
   assert(result[1] === 0x369C);
   assert(result[2] === 0x0002);
@@ -135,7 +135,7 @@
   
   a = [0, 0, 0, 5];
   b = [0, 0, 0, 4];
-  result = Util.multiplyTwo64bitArrays(a, b);
+  result = Uuid._multiplyTwo64bitArrays(a, b);
   assert(result[0] === 0);
   assert(result[1] === 0);
   assert(result[2] === 0);
@@ -143,7 +143,7 @@
   
   a = [0, 0, 2, 5];
   b = [0, 0, 3, 4];
-  result = Util.multiplyTwo64bitArrays(a, b);
+  result = Uuid._multiplyTwo64bitArrays(a, b);
   assert(result[0] === 0);
   assert(result[1] === 6);
   assert(result[2] === 23);
@@ -171,7 +171,7 @@
   assertTrue('Section 4 has 8 characters', (arrayOfParts[4].length == 12));
   
   var section3 = arrayOfParts[3];
-  var hex3 = parseInt(section3, Util.HEX_RADIX);
+  var hex3 = parseInt(section3, Uuid.HEX_RADIX);
   var binaryString = hex3.toString(2);
   // alert("section3 = " + section3 + "\n binaryString = " + binaryString);
   assertTrue('section 3 has 16 bits', binaryString.length == 16);
@@ -181,8 +181,8 @@
 }
 
 function testMethodsForWorkingWithRandomUuids() {
-  var uuid1 = Util.generateRandomUuid();
-  var uuid2 = Util.generateRandomUuid();
+  var uuid1 = Uuid.generateRandomUuid();
+  var uuid2 = Uuid.generateRandomUuid();
   // alert(uuid1 + "\n" + uuid2);
   subtestOnUuid(uuid1);
   subtestOnUuid(uuid2);
@@ -195,9 +195,9 @@
 }
 
 function testMethodsForWorkingWithTimeBasedUuids() {
-  var uuid1 = Util.generateTimeBasedUuid();
-  var uuid2 = Util.generateTimeBasedUuid();
-  var uuid3 = Util.generateTimeBasedUuid();
+  var uuid1 = Uuid.generateTimeBasedUuid();
+  var uuid2 = Uuid.generateTimeBasedUuid();
+  var uuid3 = Uuid.generateTimeBasedUuid();
   
   subtestOnUuid(uuid1);
   subtestOnUuid(uuid2);
@@ -212,7 +212,7 @@
 
   var section4 = arrayOfParts[4];
   var firstChar = section4.charAt(0);
-  var hexFirstChar = parseInt(firstChar, Util.HEX_RADIX);
+  var hexFirstChar = parseInt(firstChar, Uuid.HEX_RADIX);
   binaryString = hexFirstChar.toString(2);
   var firstBit;
   if (binaryString.length == 4) {
@@ -224,7 +224,7 @@
   //      "\n in binary = " + binaryString + "\n first bit = " + firstBit);
   assertTrue("first bit of section 4 is 1", firstBit == '1');
 
-  var uuid4 = Util.generateTimeBasedUuid("123456789ABC");
+  var uuid4 = Uuid.generateTimeBasedUuid("123456789ABC");
   subtestOnUuid(uuid4);
   arrayOfParts = uuid4.split("-");
   section4 = arrayOfParts[4];
@@ -239,30 +239,30 @@
   while (now.valueOf() == then.valueOf()) {
     then = new Date();
   }
-  array.push(Util.generateTimeBasedUuid());
-  array.push(Util.generateTimeBasedUuid());
-  array.push(Util.generateTimeBasedUuid());
-  array.push(Util.generateTimeBasedUuid());
-  array.push(Util.generateTimeBasedUuid());
-  array.push(Util.generateTimeBasedUuid());
-  array.push(Util.generateTimeBasedUuid());
-  array.push(Util.generateTimeBasedUuid());
-  array.push(Util.generateTimeBasedUuid());
-  array.push(Util.generateTimeBasedUuid());
-  array.push(Util.generateTimeBasedUuid());
-  array.push(Util.generateTimeBasedUuid());
-  array.push(Util.generateTimeBasedUuid());
-  array.push(Util.generateTimeBasedUuid());
-  array.push(Util.generateTimeBasedUuid());
-  array.push(Util.generateTimeBasedUuid());
-  array.push(Util.generateTimeBasedUuid());
-  array.push(Util.generateTimeBasedUuid());
-  array.push(Util.generateTimeBasedUuid());
-  array.push(Util.generateTimeBasedUuid());
-  array.push(Util.generateTimeBasedUuid());
-  array.push(Util.generateTimeBasedUuid());
-  array.push(Util.generateTimeBasedUuid());
-  array.push(Util.generateTimeBasedUuid());
+  array.push(Uuid.generateTimeBasedUuid());
+  array.push(Uuid.generateTimeBasedUuid());
+  array.push(Uuid.generateTimeBasedUuid());
+  array.push(Uuid.generateTimeBasedUuid());
+  array.push(Uuid.generateTimeBasedUuid());
+  array.push(Uuid.generateTimeBasedUuid());
+  array.push(Uuid.generateTimeBasedUuid());
+  array.push(Uuid.generateTimeBasedUuid());
+  array.push(Uuid.generateTimeBasedUuid());
+  array.push(Uuid.generateTimeBasedUuid());
+  array.push(Uuid.generateTimeBasedUuid());
+  array.push(Uuid.generateTimeBasedUuid());
+  array.push(Uuid.generateTimeBasedUuid());
+  array.push(Uuid.generateTimeBasedUuid());
+  array.push(Uuid.generateTimeBasedUuid());
+  array.push(Uuid.generateTimeBasedUuid());
+  array.push(Uuid.generateTimeBasedUuid());
+  array.push(Uuid.generateTimeBasedUuid());
+  array.push(Uuid.generateTimeBasedUuid());
+  array.push(Uuid.generateTimeBasedUuid());
+  array.push(Uuid.generateTimeBasedUuid());
+  array.push(Uuid.generateTimeBasedUuid());
+  array.push(Uuid.generateTimeBasedUuid());
+  array.push(Uuid.generateTimeBasedUuid());
   alert(array[0] + "\n" + 
         array[1] + "\n" + 
         array[2] + "\n" + 

Modified: trunk/source/base_style.css
===================================================================
--- trunk/source/base_style.css	2005-06-30 18:19:00 UTC (rev 200)
+++ trunk/source/base_style.css	2005-06-30 22:14:03 UTC (rev 201)
@@ -338,7 +338,9 @@
   width: 100%;
   font-family: Arial, Verdana, sans-serif;
   font-weight: bold;
-  border: none; 
+  border-width: thin;
+  border-style: solid;
+  border-color: rgb(70%, 70%, 70%);
   padding: 0pt;
 }
 
@@ -347,7 +349,9 @@
   background: rgb(100%, 100%, 40%);
   width: 100%;
   font-family: Arial, Verdana, sans-serif;
-  border: none; 
+  border-width: thin;
+  border-style: solid;
+  border-color: rgb(70%, 70%, 70%);
   padding: 0pt;
   margin: 0px;
 }
@@ -619,10 +623,10 @@
 }
 
 .textViewItem {
-	background-color:#DEE7F8;
-	padding: 1px;
-	border: thin solid #A4BDEC;	
-	-moz-border-radius: 6px; //WARNING: Mozilla only attribute. This just makes a rect, a rounded-rect
+  background-color:#DEE7F8;
+  padding: 1px;
+  border: thin solid #A4BDEC;	
+  -moz-border-radius: 6px; // WARNING: Mozilla only attribute. This just makes a rect, a rounded-rect
 }
 
 /* obsolete? 

Modified: trunk/source/model/ModelTest.html
===================================================================
--- trunk/source/model/ModelTest.html	2005-06-30 18:19:00 UTC (rev 200)
+++ trunk/source/model/ModelTest.html	2005-06-30 22:14:03 UTC (rev 201)
@@ -16,6 +16,7 @@
     <script type="text/javascript" src="../../third_party/jsunit/jsunit2_1/app/jsUnitCore.js"></script>
     <script type="text/javascript" src="../../third_party/md5/md5.js"></script>
     <script type="text/javascript" src="../Util.js"></script>
+    <script type="text/javascript" src="../util/Uuid.js"></script>
     <script type="text/javascript" src="Record.js"></script>
     <script type="text/javascript" src="Ordinal.js"></script>
     <script type="text/javascript" src="Vote.js"></script>

Modified: trunk/source/model/Record.js
===================================================================
--- trunk/source/model/Record.js	2005-06-30 18:19:00 UTC (rev 200)
+++ trunk/source/model/Record.js	2005-06-30 22:14:03 UTC (rev 201)
@@ -110,9 +110,9 @@
     return this._creationUserstamp;
   }
   var allUsers = this._world.getUsers();
-  var myPseudonode = this._uuid.split('-')[4];
+  var myPseudonode = Uuid.getNodeFromUuid(this._uuid);
   for (var key in allUsers) {
-    var usersPseudonode = allUsers[key]._getUuid().split('-')[4];
+    var usersPseudonode = Uuid.getNodeFromUuid(allUsers[key]._getUuid());
     if (usersPseudonode == myPseudonode) {
       this._creationUserstamp = allUsers[key];
       return this._creationUserstamp;
@@ -129,38 +129,10 @@
  * @return   ???.
  */
 Record.prototype.getTimestamp = function() {
-  if (this._creationTimestamp) {
-    return this._creationTimestamp;
+  if (!this._creationTimestamp) {
+    this._creationTimestamp = this.getGetCreationDate().valueOf();
   }
-  var hexTimeLow = this._uuid.split('-')[0];
-  var hexTimeMid = this._uuid.split('-')[1];
-  var hexTimeHigh = this._uuid.split('-')[2];
-  var timeLow = parseInt(hexTimeLow, Util.HEX_RADIX);
-  var timeMid = parseInt(hexTimeMid, Util.HEX_RADIX);
-  var timeHigh = parseInt(hexTimeHigh, Util.HEX_RADIX);
-  var hundredNanosecondIntervalsSince1582 = timeHigh & 0x0FFF;
-  hundredNanosecondIntervalsSince1582 <<= 16;
-  hundredNanosecondIntervalsSince1582 += timeMid;
-  // What we really want to do next is shift left 32 bits, but the result will be too big
-  // to fit in an int, so we'll multiply by 2^32, and the result will be a floating point approximation.
-  hundredNanosecondIntervalsSince1582 *= 0x100000000;
-  hundredNanosecondIntervalsSince1582 += timeLow;
-  var millisecondsSince1582 = hundredNanosecondIntervalsSince1582 / 10000;
-
-  // Again, this will be a floating point approximation.
-  // We can make things exact later if we need to.
-  var secondsPerHour = 60 * 60;
-  var hoursBetween1582and1970 = Util.GREGORIAN_CHANGE_OFFSET_IN_HOURS;
-  var secondsBetween1582and1970 = hoursBetween1582and1970 * secondsPerHour;
-  var millisecondsBetween1582and1970 = secondsBetween1582and1970 * 1000;
-
-  var millisecondsSince1970 = millisecondsSince1582 - millisecondsBetween1582and1970;
-
-  // PENDING: 
-  // Do we want this to return a Date object rather than a floating point
-  // value?
-  this._creationTimestamp = millisecondsSince1970;
-  return millisecondsSince1970;
+  return this._creationTimestamp;
 };
 
 
@@ -171,8 +143,10 @@
  * @return   A Date object.
  */
 Record.prototype.getGetCreationDate = function() {
-  var date = new Date(this.getTimestamp());
-  return date;
+  if (!this._creationDate) {
+    this._creationDate = Uuid.getDateFromUuid(this._uuid);
+  }
+  return this._creationDate;
 };
 
 

Modified: trunk/source/model/StubVirtualServer.js
===================================================================
--- trunk/source/model/StubVirtualServer.js	2005-06-30 18:19:00 UTC (rev 200)
+++ trunk/source/model/StubVirtualServer.js	2005-06-30 22:14:03 UTC (rev 201)
@@ -694,10 +694,10 @@
     var uuidOfCurrentUser = this._currentUser._getUuid();
     var arrayOfParts = uuidOfCurrentUser.split("-");
     var pseudoNodeOfCurrentUser = arrayOfParts[4];//"0123456789AB";
-    newUuid = Util.generateTimeBasedUuid(pseudoNodeOfCurrentUser);
+    newUuid = Uuid.generateTimeBasedUuid(pseudoNodeOfCurrentUser);
   }
   else {
-    newUuid = Util.generateTimeBasedUuid();
+    newUuid = Uuid.generateTimeBasedUuid();
   }
   return newUuid;
 };

Added: trunk/source/util/LintTest.html
===================================================================
--- trunk/source/util/LintTest.html	2005-06-30 18:19:00 UTC (rev 200)
+++ trunk/source/util/LintTest.html	2005-06-30 22:14:03 UTC (rev 201)
@@ -0,0 +1,86 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
+<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" >
+
+<!-- 
+ Written in 2005 by Brian Douglas Skinner <brian.skinner at gumption.org>
+  
+ Copyright rights relinquished under the Creative Commons  
+ Public Domain Dedication:
+    http://creativecommons.org/licenses/publicdomain/
+-->
+
+  <head>
+    <title>Unit tests using jslint</title>
+
+    <script type="text/javascript" src="../../third_party/jsunit/jsunit2_1/app/jsUnitCore.js"></script>
+    <script type="text/javascript" src="../../third_party/jslint/fulljslint.js"></script>
+    <script type="text/javascript" src="../Util.js"></script>
+    <script type="text/javascript" src="../LintTool.js"></script>
+    <script type="text/javascript" src="LintTest.js"></script>
+  </head>
+  
+  <body>
+    <h1>Unit tests using jslint</h1>
+
+    <p>This page is used to run unit tests for the JavaScript code in the 
+    OpenRecord project.</p>
+    
+    <p>&nbsp;</p>
+    <hr/>
+    <p>To see the tests, open this .html file in a text editor. Or, within a  
+    web browser, you should be able see the source for this file by using 
+    some menu like <b>View</b> followed by <b>Page Source</b>. The tests 
+    may be in this file, or they may be in a separate file that has the
+    same name as this one, except with a .js extension instead of a .html
+    extension.</p>
+ 
+    <p>The unit tests are set up to run in the
+    <a href="http://www.edwardh.com/jsunit/" rel="external">JsUnit framework</a>
+    written by 
+    <a href="http://www.edwardh.com/" rel="external">Edward Hieatt</a>. </p>
+
+    <p>If you're looking at this page across an "http://" connection, rather
+    than having loaded it as a "file:///", then you may be able to run the
+    unit tests. The web server that served you this page may also have a
+    JsUnit testRunner available. If so, you should be able to run these unit
+    tests by going to
+    <a href="../../third_party/jsunit/jsunit2_1/testRunner.html?testpage=" 
+    onclick="href+=window.location.href;" rel="external">the local testRunner 
+    page</a>, and hitting the <b>Run</b> button.</p>
+
+    <p>You can also run these unit tests on your local computer. To do that you 
+    first need to download <a href="http://www.edwardh.com/jsunit/" 
+    rel="external">JsUnit</a>.</p>
+    
+    <p>&nbsp;</p>
+    <hr/>
+    <p class="copyright">You can copy freely from this work &mdash; copyright 
+    rights relinquished under the Creative Commons  
+    <a rel="license external" 
+    href="http://creativecommons.org/licenses/publicdomain/">Public Domain 
+    Dedication</a>.</p>
+
+<!-- Creative Commons metadata for Public Domain License 
+
+<rdf:RDF xmlns="http://web.resource.org/cc/"
+    xmlns:dc="http://purl.org/dc/elements/1.1/"
+    xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
+<Work rdf:about="">
+   <dc:title>openrecord.org</dc:title>
+   <dc:type rdf:resource="http://purl.org/dc/dcmitype/Text" />
+   <license rdf:resource="http://web.resource.org/cc/PublicDomain" />
+</Work>
+
+<License rdf:about="http://web.resource.org/cc/PublicDomain">
+   <permits rdf:resource="http://web.resource.org/cc/Reproduction" />
+   <permits rdf:resource="http://web.resource.org/cc/Distribution" />
+   <permits rdf:resource="http://web.resource.org/cc/DerivativeWorks" />
+</License>
+
+</rdf:RDF>
+
+-->
+  </body>
+</html>
+

Added: trunk/source/util/LintTest.js
===================================================================
--- trunk/source/util/LintTest.js	2005-06-30 18:19:00 UTC (rev 200)
+++ trunk/source/util/LintTest.js	2005-06-30 22:14:03 UTC (rev 201)
@@ -0,0 +1,55 @@
+/*****************************************************************************
+ LintTest.js
+ 
+******************************************************************************
+ Written in 2005 by Brian Douglas Skinner <brian.skinner at gumption.org>
+  
+ Copyright rights relinquished under the Creative Commons  
+ Public Domain Dedication:
+    http://creativecommons.org/licenses/publicdomain/
+  
+ You can copy freely from this file.  This work may be freely reproduced, 
+ distributed, transmitted, used, modified, built upon, or otherwise exploited
+ by anyone for any purpose.
+  
+ This work is provided on an "AS IS" basis, without warranties or conditions 
+ of any kind, either express or implied, including, without limitation, any 
+ warranties or conditions of title, non-infringement, merchantability, or 
+ fitness for a particular purpose. You are solely responsible for determining 
+ the appropriateness of using or distributing the work and assume all risks 
+ associated with use of this work, including but not limited to the risks and 
+ costs of errors, compliance with applicable laws, damage to or loss of data 
+ or equipment, and unavailability or interruption of operations.
+
+ In no event shall the authors or contributors have any liability for any 
+ direct, indirect, incidental, special, exemplary, or consequential damages,
+ however caused and on any theory of liability, whether in contract, strict 
+ liability, or tort (including negligence), arising in any way out of or in 
+ connection with the use or distribution of the work.
+*****************************************************************************/
+ 
+// -------------------------------------------------------------------
+// Dependencies, expressed in the syntax that JSLint understands:
+// 
+/*global LintTool, assertTrue, setUp, tearDown */
+// -------------------------------------------------------------------
+
+function setUp() {
+}
+
+function testJsLintOnOpenRecordCode() {
+  var listOfSourceCodeFiles = [
+    "Uuid.js"];
+  var prefix = "../../../source/util/";
+  var errorReport = LintTool.getErrorReportFromListOfFilesnames(listOfSourceCodeFiles, prefix);
+  var message = "Lint check \n" + errorReport;
+  assertTrue(message, !errorReport);
+}
+
+function tearDown() {
+}
+
+
+// -------------------------------------------------------------------
+// End of file
+// -------------------------------------------------------------------

Added: trunk/source/util/Uuid.js
===================================================================
--- trunk/source/util/Uuid.js	2005-06-30 18:19:00 UTC (rev 200)
+++ trunk/source/util/Uuid.js	2005-06-30 22:14:03 UTC (rev 201)
@@ -0,0 +1,380 @@
+/*****************************************************************************
+ Uuid.js
+ 
+******************************************************************************
+ Written in 2005 by 
+    Brian Douglas Skinner <brian.skinner at gumption.org>
+    Mignon Belongie
+  
+ Copyright rights relinquished under the Creative Commons  
+ Public Domain Dedication:
+    http://creativecommons.org/licenses/publicdomain/
+  
+ You can copy freely from this file.  This work may be freely reproduced, 
+ distributed, transmitted, used, modified, built upon, or otherwise exploited
+ by anyone for any purpose.
+  
+ This work is provided on an "AS IS" basis, without warranties or conditions 
+ of any kind, either express or implied, including, without limitation, any 
+ warranties or conditions of title, non-infringement, merchantability, or 
+ fitness for a particular purpose. You are solely responsible for determining 
+ the appropriateness of using or distributing the work and assume all risks 
+ associated with use of this work, including but not limited to the risks and 
+ costs of errors, compliance with applicable laws, damage to or loss of data 
+ or equipment, and unavailability or interruption of operations.
+
+ In no event shall the authors or contributors have any liability for any 
+ direct, indirect, incidental, special, exemplary, or consequential damages,
+ however caused and on any theory of liability, whether in contract, strict 
+ liability, or tort (including negligence), arising in any way out of or in 
+ connection with the use or distribution of the work.
+*****************************************************************************/
+
+
+// -------------------------------------------------------------------
+// Dependencies, expressed in the syntax that JSLint understands:
+/*global Util  */
+// -------------------------------------------------------------------
+
+
+/**
+ * The Uuid class offers methods for generating UUIDs and 
+ * inspecting existing UUIDs.
+ * 
+ * There is no need to ever call this constructor.  All the Uuid
+ * methods are class methods, not instance methods, and the only 
+ * reason this constructor exists is to cause the name "Uuid"
+ * to be a globally-scoped class name, which the class methods 
+ * can then be attached to.
+ *
+ * @scope    public instance constructor
+ * @syntax   DO NOT CALL THIS CONSTRUCTOR
+ */
+function Uuid() {
+  throw new Error("Uuid is a static class. You can't create instances of it.");
+}
+
+
+// -------------------------------------------------------------------
+// Uuid public class constants
+// -------------------------------------------------------------------
+// Number of seconds between October 15, 1582 and January 1, 1970
+// Util.GREGORIAN_CHANGE_OFFSET_IN_SECONDS = 12219292800;
+Uuid.GREGORIAN_CHANGE_OFFSET_IN_HOURS = 3394248;
+Uuid.HEX_RADIX = 16;
+
+
+// -------------------------------------------------------------------
+// Uuid private global class variables
+// -------------------------------------------------------------------
+Uuid._ourUuidClockSeqString = null;
+Uuid._ourDateValueOfPreviousUuid = null;
+Uuid._ourNextIntraMillisecondIncrement = 0;
+
+
+// -------------------------------------------------------------------
+// Public methods for working with UUIDs
+// -------------------------------------------------------------------
+
+/**
+ * Generates a time-based UUID, meaning a "version 1" UUID.  JavaScript
+ * code running in a browser doesn't have access to the IEEE 802.3 address
+ * of the computer, so we generate a random pseudonode value instead.
+ * Hopefully this implementation conforms to the existing standards for 
+ * UUIDs and GUIDs.  
+ * 
+ * For more info, see 
+ *   http://www.webdav.org/specs/draft-leach-uuids-guids-01.txt
+ *   http://www.infonuovo.com/dma/csdocs/sketch/instidid.htm
+ *   http://kruithof.xs4all.nl/uuid/uuidgen
+ *   http://www.opengroup.org/onlinepubs/009629399/apdxa.htm#tagcjh_20
+ *   http://jakarta.apache.org/commons/sandbox/id/apidocs/org/apache/commons/id/uuid/clock/Clock.html
+ *
+ * @scope    public class method
+ * @param    pseudoNode    Optional. A 12-character string to use as the node in the new UUID.
+ * @return   Returns a 36 character string, which will look something like "3B12F1DF-5232-1804-897E-917BF397618A".
+ */
+Uuid.generateTimeBasedUuid = function(pseudoNode) {
+  Util.assert(!pseudoNode || Util.isString(pseudoNode));  
+  if (pseudoNode) {
+    Util.assert(pseudoNode.length == 12);  
+  }
+  else {
+    var pseudoNodeIndicatorBit = 0x8000;
+    var random15bitNumber = Math.floor( (Math.random() % 1) * Math.pow(2, 15) );
+    var leftmost4HexCharacters = (pseudoNodeIndicatorBit | random15bitNumber).toString(Uuid.HEX_RADIX);
+    pseudoNode = leftmost4HexCharacters + Uuid._getRandomEightCharacterHexString();
+  }
+  if (!Uuid._ourUuidClockSeqString) {
+    var variantCodeForDCEUuids = 0x8000; // 10--------------, i.e. uses only first two of 16 bits.
+    var random14bitNumber = Math.floor( (Math.random() % 1) * Math.pow(2, 14) );
+    Uuid._ourUuidClockSeqString = (variantCodeForDCEUuids | random14bitNumber).toString(Uuid.HEX_RADIX);
+  }
+
+  // Maybe someday think about trying to make the code more readable to
+  // newcomers by creating a class called "WholeNumber" that encapsulates
+  // the methods and data structures for working with these arrays that 
+  // hold 4 16-bit numbers?  And then these variables below have names  
+  // like "wholeSecondsPerHour" rather than "arraySecondsPerHour"?
+  var now = new Date();
+  var nowArray = Uuid._get64bitArrayFromFloat(now.valueOf());
+  var arraySecondsPerHour = Uuid._get64bitArrayFromFloat(60 * 60);
+  var arrayHoursBetween1582and1970 = Uuid._get64bitArrayFromFloat(Uuid.GREGORIAN_CHANGE_OFFSET_IN_HOURS);
+  var arraySecondsBetween1582and1970 = Uuid._multiplyTwo64bitArrays(arrayHoursBetween1582and1970, arraySecondsPerHour);
+  var arrayMillisecondsPerSecond = Uuid._get64bitArrayFromFloat(1000);
+  var arrayMillisecondsBetween1582and1970 = Uuid._multiplyTwo64bitArrays(arraySecondsBetween1582and1970, arrayMillisecondsPerSecond);
+  var arrayMillisecondsSince1970 = nowArray;
+  var arrayMillisecondsSince1582 = Uuid._addTwo64bitArrays(arrayMillisecondsBetween1582and1970, arrayMillisecondsSince1970);
+  var arrayMicrosecondsPerMillisecond = Uuid._get64bitArrayFromFloat(1000);
+  var arrayMicrosecondsSince1582 = Uuid._multiplyTwo64bitArrays(arrayMillisecondsSince1582, arrayMicrosecondsPerMillisecond);
+  var arrayHundredNanosecondIntervalsPerMicrosecond = Uuid._get64bitArrayFromFloat(10);
+  var arrayHundredNanosecondIntervalsSince1582 = Uuid._multiplyTwo64bitArrays(arrayMicrosecondsSince1582, arrayHundredNanosecondIntervalsPerMicrosecond);
+  
+  if (now.valueOf() == Uuid._ourDateValueOfPreviousUuid) {
+    arrayHundredNanosecondIntervalsSince1582[3] += Uuid._ourNextIntraMillisecondIncrement;
+    Uuid._carry(arrayHundredNanosecondIntervalsSince1582);
+    Uuid._ourNextIntraMillisecondIncrement += 1;
+    if (Uuid._ourNextIntraMillisecondIncrement == 10000) {
+      // If we've gotten to here, it means we've already generated 10,000
+      // UUIDs in this single milliseconds, which is the most that the UUID
+      // timestamp field allows for.  So now we'll just sit here and wait
+      // for a fraction of a millisecond, so as to ensure that the next 
+      // time this method is called there will be a different millisecond 
+      // value in the timestamp field.
+      while (now.valueOf() == Uuid._ourDateValueOfPreviousUuid) {
+        now = new Date();
+      }
+    }
+  }
+  else {
+    Uuid._ourDateValueOfPreviousUuid = now.valueOf();
+    Uuid._ourNextIntraMillisecondIncrement = 1;
+  }
+  
+  var hexTimeLowLeftHalf  = arrayHundredNanosecondIntervalsSince1582[2].toString(Uuid.HEX_RADIX);
+  var hexTimeLowRightHalf = arrayHundredNanosecondIntervalsSince1582[3].toString(Uuid.HEX_RADIX);
+  var hexTimeLow = Uuid._padWithLeadingZeros(hexTimeLowLeftHalf, 4) + Uuid._padWithLeadingZeros(hexTimeLowRightHalf, 4);
+  var hexTimeMid = arrayHundredNanosecondIntervalsSince1582[1].toString(Uuid.HEX_RADIX);
+  hexTimeMid = Uuid._padWithLeadingZeros(hexTimeMid, 4);
+  var hexTimeHigh = arrayHundredNanosecondIntervalsSince1582[0].toString(Uuid.HEX_RADIX);
+  hexTimeHigh = Uuid._padWithLeadingZeros(hexTimeHigh, 3);
+  var hyphen = "-";
+  var versionCodeForTimeBasedUuids = "1"; // binary2hex("0001")
+  var resultUuid = hexTimeLow + hyphen + hexTimeMid + hyphen +
+        versionCodeForTimeBasedUuids + hexTimeHigh + hyphen +
+        Uuid._ourUuidClockSeqString + hyphen + pseudoNode;
+  return resultUuid;
+};
+
+
+/**
+ * Generates a random UUID, meaning a "version 4" UUID.  Hopefully this 
+ * implementation conforms to the existing standards for UUIDs and GUIDs.  
+ * For more info, see 
+ * http://www.webdav.org/specs/draft-leach-uuids-guids-01.txt
+ * 
+ * @scope    public class method
+ * @return   Returns a 36 character string, which will look something like "3B12F1DF-5232-4804-897E-917BF397618A".
+ */
+Uuid.generateRandomUuid = function() {
+  var hyphen = "-";
+  var versionCodeForRandomlyGeneratedUuids = "4"; // 8 == binary2hex("0100")
+  var variantCodeForDCEUuids = "8"; // 8 == binary2hex("1000")
+  var a = Uuid._getRandomEightCharacterHexString();
+  var b = Uuid._getRandomEightCharacterHexString();
+  b = b.substring(0, 4) + hyphen + versionCodeForRandomlyGeneratedUuids + b.substring(5, 8);
+  var c = Uuid._getRandomEightCharacterHexString();
+  c = variantCodeForDCEUuids + c.substring(1, 4) + hyphen + c.substring(4, 8);
+  var d = Uuid._getRandomEightCharacterHexString();
+  var result = a + hyphen + b + hyphen + c + d;
+  
+  return result;
+};
+
+
+/**
+ * Given a 36-character UUID string, this method returns the "node" or 
+ * "pseudonode" portion of the UUID, which is the rightmost 12 characters.
+ * 
+ * @scope    public class method
+ * @param    uuid    A 36-character UUID string.
+ * @return   Returns a 12-character string, which will look something like "917BF397618A".
+ */
+Uuid.getNodeFromUuid = function(uuid) {
+  var arrayOfStrings = uuid.split('-');
+  var nodeString = arrayOfStrings[4];
+  return nodeString;
+};
+
+
+/**
+ * Given a 36-character UUID string for a time-based UUID, this method 
+ * returns a JavaScript Date object.
+ * 
+ * @scope    public class method
+ * @param    uuid    A 36-character UUID string for a time-based UUID.
+ * @return   Returns a JavaScript Date objects
+ */
+Uuid.getDateFromUuid = function(uuid) {
+  var hexTimeLow = uuid.split('-')[0];
+  var hexTimeMid = uuid.split('-')[1];
+  var hexTimeHigh = uuid.split('-')[2];
+  var timeLow = parseInt(hexTimeLow, Uuid.HEX_RADIX);
+  var timeMid = parseInt(hexTimeMid, Uuid.HEX_RADIX);
+  var timeHigh = parseInt(hexTimeHigh, Uuid.HEX_RADIX);
+  var hundredNanosecondIntervalsSince1582 = timeHigh & 0x0FFF;
+  hundredNanosecondIntervalsSince1582 <<= 16;
+  hundredNanosecondIntervalsSince1582 += timeMid;
+  // What we really want to do next is shift left 32 bits, but the result will be too big
+  // to fit in an int, so we'll multiply by 2^32, and the result will be a floating point approximation.
+  hundredNanosecondIntervalsSince1582 *= 0x100000000;
+  hundredNanosecondIntervalsSince1582 += timeLow;
+  var millisecondsSince1582 = hundredNanosecondIntervalsSince1582 / 10000;
+
+  // Again, this will be a floating point approximation.
+  // We can make things exact later if we need to.
+  var secondsPerHour = 60 * 60;
+  var hoursBetween1582and1970 = Uuid.GREGORIAN_CHANGE_OFFSET_IN_HOURS;
+  var secondsBetween1582and1970 = hoursBetween1582and1970 * secondsPerHour;
+  var millisecondsBetween1582and1970 = secondsBetween1582and1970 * 1000;
+
+  var millisecondsSince1970 = millisecondsSince1582 - millisecondsBetween1582and1970;
+
+  var date = new Date(millisecondsSince1970);
+  return date;
+};
+
+
+// -------------------------------------------------------------------
+// Private methods
+// -------------------------------------------------------------------
+
+/**
+ * 
+ */
+Uuid._getRandom32bitNumber = function() {
+  return Math.floor( (Math.random() % 1) * Math.pow(2, 32) );
+};
+
+
+/**
+ * 
+ */
+Uuid._getRandomEightCharacterHexString = function() {
+  // PENDING: 
+  // This isn't really random.  We should find some source of real 
+  // randomness, and feed it to an MD5 hash algorithm.     
+  var eightCharacterString = Uuid._getRandom32bitNumber().toString(Uuid.HEX_RADIX);
+  while (eightCharacterString.length < 8) {
+    eightCharacterString = "0" + eightCharacterString;
+  }
+  return eightCharacterString;
+};
+
+
+/**
+ * 
+ */
+Uuid._carry = function(a) {
+  a[2] += a[3] >>> 16;
+  a[3] &= 0xFFFF;
+  a[1] += a[2] >>> 16;
+  a[2] &= 0xFFFF;
+  a[0] += a[1] >>> 16;
+  a[1] &= 0xFFFF;
+  Util.assert((a[0] >>> 16) === 0);
+};
+
+
+/**
+ * 
+ */
+Uuid._get64bitArrayFromFloat = function(x) {
+  var result = new Array(0, 0, 0, 0);
+  result[3] = x % 0x10000;
+  x -= result[3];
+  x /= 0x10000;
+  result[2] = x % 0x10000;
+  x -= result[2];
+  x /= 0x10000;
+  result[1] = x % 0x10000;
+  x -= result[1];
+  x /= 0x10000;
+  result[0] = x;
+  return result;
+};
+
+
+/**
+ * 
+ */
+Uuid._addTwo64bitArrays = function(a, b) {
+  Util.assert(Util.isArray(a));
+  Util.assert(a.length == 4);
+  Util.assert(Util.isArray(b));
+  Util.assert(b.length == 4);
+  var result = new Array(0, 0, 0, 0);
+  result[3] = a[3] + b[3];
+  result[2] = a[2] + b[2];
+  result[1] = a[1] + b[1];
+  result[0] = a[0] + b[0];
+  Uuid._carry(result);
+  return result;
+};
+
+
+/**
+ * 
+ */
+Uuid._multiplyTwo64bitArrays = function(a, b) {
+  Util.assert(Util.isArray(a));
+  Util.assert(a.length == 4);
+  Util.assert(Util.isArray(b));
+  Util.assert(b.length == 4);
+  var overflow = false;
+  if (a[0] * b[0] !== 0) { overflow = true; }
+  if (a[0] * b[1] !== 0) { overflow = true; }
+  if (a[0] * b[2] !== 0) { overflow = true; }
+  if (a[1] * b[0] !== 0) { overflow = true; }
+  if (a[1] * b[1] !== 0) { overflow = true; }
+  if (a[2] * b[0] !== 0) { overflow = true; }
+  Util.assert(!overflow);
+  
+  var result = new Array(0, 0, 0, 0);
+  result[0] += a[0] * b[3];
+  Uuid._carry(result);
+  result[0] += a[1] * b[2];
+  Uuid._carry(result);
+  result[0] += a[2] * b[1];
+  Uuid._carry(result);
+  result[0] += a[3] * b[0];
+  Uuid._carry(result);
+  result[1] += a[1] * b[3];
+  Uuid._carry(result);
+  result[1] += a[2] * b[2];
+  Uuid._carry(result);
+  result[1] += a[3] * b[1];
+  Uuid._carry(result);
+  result[2] += a[2] * b[3];
+  Uuid._carry(result);
+  result[2] += a[3] * b[2];
+  Uuid._carry(result);
+  result[3] += a[3] * b[3];
+  Uuid._carry(result);
+  return result;
+};
+
+
+/**
+ * 
+ */
+Uuid._padWithLeadingZeros = function(string, desiredLength) {
+  while (string.length < desiredLength) {
+    string = "0" + string;
+  }
+  return string;
+};
+
+// -------------------------------------------------------------------
+// End of file
+// -------------------------------------------------------------------



From skinner at sheep.berlios.de  Fri Jul  1 03:31:42 2005
From: skinner at sheep.berlios.de (Brian Douglas Skinner at BerliOS)
Date: Fri, 1 Jul 2005 03:31:42 +0200
Subject: [openrecord-svn] r202 - trunk/source
Message-ID: <200507010131.j611VgKj023636@sheep.berlios.de>

Author: skinner
Date: 2005-07-01 03:31:33 +0200 (Fri, 01 Jul 2005)
New Revision: 202

Modified:
   trunk/source/Util.js
Log:
compulsive coding-standards clean-up

Modified: trunk/source/Util.js
===================================================================
--- trunk/source/Util.js	2005-06-30 22:14:03 UTC (rev 201)
+++ trunk/source/Util.js	2005-07-01 01:31:33 UTC (rev 202)
@@ -62,7 +62,6 @@
 Util.ASCII_VALUE_FOR_RETURN = 13;
 Util.ASCII_VALUE_FOR_TAB = 9;
 Util.ASCII_VALUE_FOR_ESCAPE = 27;
-Util.ABBREV_MONTHS_ARRAY = new Array("Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec");
 // &#37; = %
 // &#38; = &
 // &#39; = '
@@ -72,6 +71,7 @@
 Util.ASCII_VALUE_FOR_RIGHT_ARROW = 39; // 124
 Util.ASCII_VALUE_FOR_DOWN_ARROW = 40;  // 125
 
+Util.ABBREV_MONTHS_ARRAY = new Array("Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec");
 
 
 // -------------------------------------------------------------------
@@ -88,13 +88,13 @@
  *
  * @scope    public class method
  * @syntax   var cleanString = Util.getCleanString(dirtyString);
- * @param    inString    A dirty string to be cleaned up.
+ * @param    string    A dirty string to be cleaned up.
  * @return   String
  */
-Util.getCleanString = function(inString) {
-  Util.assert(Util.isString(inString));
+Util.getCleanString = function(string) {
+  Util.assert(Util.isString(string));
   
-  var returnString = inString;
+  var returnString = string;
   returnString = returnString.replace(/&/g, "&amp;");
   returnString = returnString.replace(/</g, "&lt;");
   returnString = returnString.replace(/>/g, "&gt;");
@@ -112,10 +112,10 @@
  * Registers a function to be used to report errors.
  *
  * @scope    public class method
- * @param    inFunction    A function which takes a single string argument. 
+ * @param    errorReporterFunction    A function which takes a single string argument. 
  */
-Util.setErrorReportCallback = function (inFunction) {
-  Util.ourErrorReporter = inFunction;
+Util.setErrorReportCallback = function(errorReporterFunction) {
+  Util.ourErrorReporter = errorReporterFunction;
 };
 
 
@@ -125,8 +125,8 @@
  * @scope    public class method
  * @param    inText    The error message to be reported. 
  */
-Util.defaultErrorReporter = function (inText) {
-  window.alert(inText);
+Util.defaultErrorReporter = function(text) {
+  window.alert(text);
 };
 Util.ourErrorReporter = Util.defaultErrorReporter;
 
@@ -135,12 +135,12 @@
  * Pops up an alert box showing an error message.
  *
  * @scope    public class method
- * @param    inMessage    A string describing the error.
- * @param    inUrl    A string that gives the name of the file where the error was found.
- * @param    inLine    The line number where the error was found.
+ * @param    message    A string describing the error.
+ * @param    url    A string that gives the name of the file where the error was found.
+ * @param    line    The line number where the error was found.
  */
-Util.handleError = function (inMessage, inUrl, inLine) {
-  Util.ourErrorReporter("Util.handleError()\n" + inMessage + "\nline: " + inLine + "\nURL: " + inUrl);
+Util.handleError = function(message, url, line) {
+  Util.ourErrorReporter("Util.handleError()\n" + message + "\nline: " + line + "\nURL: " + url);
 };
 
 
@@ -153,12 +153,12 @@
  * number where the assertion failed.
  *
  * @scope    public class method
- * @param    inBoolean    A boolean value, which needs to be true for the assertion to succeed. 
- * @param    inMessage    Optional. A string describing the assertion.
+ * @param    booleanValue    A boolean value, which needs to be true for the assertion to succeed. 
+ * @param    message    Optional. A string describing the assertion.
  */
-Util.assert = function (inBoolean, inMessage) {
-  if (Util.isBoolean(inBoolean)) {
-    if (!inBoolean) {    
+Util.assert = function(booleanValue, message) {
+  if (Util.isBoolean(booleanValue)) {
+    if (!booleanValue) {    
       var exception = new Error();  // create an exception, just to get a stack trace
       var stackString = exception.stack;
       var stackList = stackString.split("\n");
@@ -173,7 +173,7 @@
       }
       stackString = stackList.join("\n");
 
-      Util.ourErrorReporter("An assert statement failed with message: \n" + inMessage + " \nThe method Util.assert() was called with a 'false' value.\nHere's the stack trace, with the line number where the assert statement failed:\n" + (stackString || ""));
+      Util.ourErrorReporter("An assert statement failed with message: \n" + message + " \nThe method Util.assert() was called with a 'false' value.\nHere's the stack trace, with the line number where the assert statement failed:\n" + (stackString || ""));
     }
   } else {
     Util.ourErrorReporter("An assert statement went sour.\nThe method Util.assert() was passed a non-boolean argument.\nHere's the stack trace, with the line number where the assert statement failed:\n" + (stackString || ""));
@@ -185,10 +185,10 @@
  * Registers a function to be used to report status messages to the user.
  *
  * @scope    public class method
- * @param    inFunction    A function which takes a single string argument. 
+ * @param    statusReporterFunction    A function which takes a single string argument. 
  */
-Util.setStatusReporter = function (inFunction) {
-  Util.ourStatusReporter = inFunction;
+Util.setStatusReporter = function(statusReporterFunction) {
+  Util.ourStatusReporter = statusReporterFunction;
 };
 
 
@@ -196,10 +196,10 @@
  * Reports a status message to the user.
  *
  * @scope    public class method
- * @param    inMessage    A string with a status message.
+ * @param    message    A string with a status message.
  */
-Util.displayStatusBlurb = function (inMessage) {
-  Util.ourStatusReporter(inMessage);
+Util.displayStatusBlurb = function(message) {
+  Util.ourStatusReporter(message);
 };
 
 
@@ -207,9 +207,9 @@
  * This defaultStatusReporter simply ignores the status report.
  *
  * @scope    public class method
- * @param    inText    The status message to be reported. 
+ * @param    text    The status message to be reported. 
  */
-Util.defaultStatusReporter = function (inText) {
+Util.defaultStatusReporter = function(text) {
   // do nothing!
 };
 Util.ourStatusReporter = Util.defaultStatusReporter;
@@ -223,11 +223,11 @@
  * Returns true if the given value is a function.
  *
  * @scope    public class method
- * @param    inValue    Any object or literal value. 
+ * @param    value    Any object or literal value. 
  * @return   A boolean value. True if inValue is a function.
  */
-Util.isFunction = function (inValue) {
-  return ((typeof inValue) == "function");
+Util.isFunction = function(value) {
+  return ((typeof value) == "function");
 };
 
 
@@ -235,11 +235,11 @@
  * Returns true if the given value is a string.
  *
  * @scope    public class method
- * @param    inValue    Any object or literal value. 
+ * @param    value    Any object or literal value. 
  * @return   A boolean value. True if inValue is a string.
  */
-Util.isString = function (inValue) {
-  return ((typeof inValue) == "string");
+Util.isString = function(value) {
+  return ((typeof value) == "string");
 };
 
 
@@ -247,11 +247,11 @@
  * Returns true if the given value is a number (and is finite number).
  *
  * @scope    public class method
- * @param    inValue    Any object or literal value. 
+ * @param    value    Any object or literal value. 
  * @return   A boolean value. True if inValue is a number.
  */
-Util.isNumber = function (inValue) {
-  return (((typeof inValue) == "number") && isFinite(inValue));
+Util.isNumber = function(value) {
+  return (((typeof value) == "number") && isFinite(value));
 };
 
 
@@ -260,15 +260,15 @@
  * represents a number.
  *
  * @scope    public class method
- * @param    inValue    Any object or literal value. 
+ * @param    value    Any object or literal value. 
  * @return   A boolean value. True if inValue is a number or a string that represents a number.
  */
-Util.isNumeric = function (inValue) {
-  var isNumber = Util.isNumber(inValue);
+Util.isNumeric = function(value) {
+  var isNumber = Util.isNumber(value);
   if (isNumber) {
     return true;
   }
-  var isNumeric = Util.isString(inValue) && Util.isNumber(parseInt(inValue));
+  var isNumeric = Util.isString(value) && Util.isNumber(parseInt(value));
   return isNumeric;
 };
 
@@ -277,11 +277,11 @@
  * Returns true if the given value is a boolean.
  *
  * @scope    public class method
- * @param    inValue    Any object or literal value. 
+ * @param    value    Any object or literal value. 
  * @return   A boolean value. True if inValue is a boolean.
  */
-Util.isBoolean = function (inValue) {
-  return ((typeof inValue) == "boolean");
+Util.isBoolean = function(value) {
+  return ((typeof value) == "boolean");
 };
 
 
@@ -289,11 +289,11 @@
  * Returns true if the given value is an object.
  *
  * @scope    public class method
- * @param    inValue    Any object or literal value. 
+ * @param    value    Any object or literal value. 
  * @return   A boolean value. True if inValue is an object.
  */
-Util.isObject = function (inValue) {
-  return (inValue && ((typeof inValue) == "object"));
+Util.isObject = function(value) {
+  return (value && ((typeof value) == "object"));
 };
 
 
@@ -301,11 +301,11 @@
  * Returns true if the given value is a Date.
  *
  * @scope    public class method
- * @param    inValue    Any object or literal value. 
+ * @param    value    Any object or literal value. 
  * @return   A boolean value. True if inValue is a Date.
  */
-Util.isDate = function (inValue) {
-  return (inValue instanceof Date);
+Util.isDate = function(value) {
+  return (value instanceof Date);
 };
 
 
@@ -314,17 +314,17 @@
  * a valid UUID: "e3bf3e14-e8f4-43e2-866c-121c5ab70c0b".
  *
  * @scope    public class method
- * @param    inValue    Any object or literal value. 
+ * @param    value    Any object or literal value. 
  * @return   A boolean value. True if inValue is a UUID.
  */
-Util.isUuid = function (inValue) {
+Util.isUuid = function(value) {
   // PENDING: 
   // We should include more rigorous tests, to make sure this
   // is really a UUID, not just a string with 36 characters.
-  if ((typeof inValue) != "string") {
+  if ((typeof value) != "string") {
     return false;
   }
-  return (inValue.length == 36);  
+  return (value.length == 36);  
 };
 
 
@@ -332,14 +332,14 @@
  * Returns true if the given value is an array.
  *
  * @scope    public class method
- * @param    inValue    Any object or literal value. 
+ * @param    value    Any object or literal value. 
  * @return   A boolean value. True if inValue is an array.
  */
-Util.isArray = function (inValue) {
-  if (!inValue) {
+Util.isArray = function(value) {
+  if (!value) {
     return false;
   }
-  return (((typeof inValue) == "object") && (inValue.constructor == Array));
+  return (((typeof value) == "object") && (value.constructor == Array));
 };
 
 
@@ -347,11 +347,11 @@
  * Returns true if the given value is a hash table.
  *
  * @scope    public class method
- * @param    inValue    Any object or literal value. 
+ * @param    value    Any object or literal value. 
  * @return   A boolean value. True if inValue is a hash table.
  */
-Util.isHashTable = function (inValue) {
-  return (inValue && ((typeof inValue) == "object"));  // PENDING: we should be more restrictive!
+Util.isHashTable = function(value) {
+  return (value && ((typeof value) == "object"));  // PENDING: we should be more restrictive!
 };
 
 
@@ -359,13 +359,25 @@
 // Methods that operate on Arrays
 // -------------------------------------------------------------------
 
-Util.getArrayIndex = function(inArray, inElt) {
-  for (var i=0; i<inArray.length; ++i) {
-    if (inArray[i] == inElt) {return i;}
+/**
+ * Given an element in an array, returns the position of the element in
+ * the array.  
+ * 
+ * @scope    public class method
+ * @param    array    The Array to look for the element in. 
+ * @param    value    The array element to find the position of. 
+ * @return   Returns a number between 0 and array.length, or -1 if the element was not in the array.
+ */
+Util.getArrayIndex = function(array, value) {
+  for (var i=0; i<array.length; ++i) {
+    if (array[i] == value) {
+      return i;
+    }
   }
   return -1;
 };
 
+
 // -------------------------------------------------------------------
 // Methods that operate on Sets
 // -------------------------------------------------------------------
@@ -374,15 +386,20 @@
  * Returns true if the given object is a member of the set.  
  * 
  * @scope    public class method
- * @param    inObject    The object to look for. 
- * @param    inSet    The Array to look for the object in. 
+ * @param    object    The object to look for. 
+ * @param    set    The Array to look for the object in. 
  * @return   Returns true if the object was found in the set.
  */
-Util.isObjectInSet = function (inObject, inSet) {
-  Util.assert(Util.isArray(inSet));
+Util.isObjectInSet = function(object, set) {
+  Util.assert(Util.isArray(set));
   
-  for (var i=0; i<inSet.length; i+=1) {
-    if (inSet[i] == inObject) {
+//  for (var i=0; i<set.length; i+=1) {
+//    if (set[i] == object) {
+//      return true;
+//    }
+//  }
+  for (var key in set) {
+    if (set[key] == object) {
       return true;
     }
   }
@@ -394,17 +411,17 @@
  * Returns true if each of the given objects is a member of the set.  
  * 
  * @scope    public class method
- * @param    inArray    An array of objects to look for. 
- * @param    inSet    The Array to look for the objects in. 
+ * @param    array    An array of objects to look for. 
+ * @param    set    The Array to look for the objects in. 
  * @return   Returns true if each of the objects was found in the set.
  */
-Util.areObjectsInSet = function (inArray, inSet) {
-  Util.assert(Util.isArray(inArray));
-  Util.assert(Util.isArray(inSet));
+Util.areObjectsInSet = function(array, set) {
+  Util.assert(Util.isArray(array));
+  Util.assert(Util.isArray(set));
   
-  for (var key in inArray) {
-    var object = inArray[key];
-    var objectIsInSet = Util.isObjectInSet(object, inSet);
+  for (var key in array) {
+    var object = array[key];
+    var objectIsInSet = Util.isObjectInSet(object, set);
     if (!objectIsInSet) {
       return false;
     }
@@ -417,19 +434,19 @@
  * Removes an object from an array.  
  * 
  * @scope    public class method
- * @param    inObject    The object to be removed. 
- * @param    inSet    The Array that the object should be removed from. 
+ * @param    object    The object to be removed. 
+ * @param    set    The Array that the object should be removed from. 
  * @return   Returns true if the object was removed from the array.
  */
-Util.removeObjectFromSet = function (inObject, inSet) {
-  Util.assert(Util.isArray(inSet));
+Util.removeObjectFromSet = function(object, set) {
+  Util.assert(Util.isArray(set));
   
-  if (!inObject) {
+  if (!object) {
     return false;
   }
-  for (var i=0; i<inSet.length; i+=1) {
-    if (inSet[i] == inObject) {
-      inSet.splice(i, 1);
+  for (var i=0; i<set.length; i+=1) {
+    if (set[i] == object) {
+      set.splice(i, 1);
       return true;
     }
   }
@@ -442,20 +459,20 @@
  * object to the array if the object is not already in the array.  
  * 
  * @scope    public class method
- * @param    inObject    The object to be added. 
- * @param    inSet    The Array that the object should be added to. 
+ * @param    object    The object to be added. 
+ * @param    set    The Array that the object should be added to. 
  * @return   Returns true if the object was added to the array.
  */
-Util.addObjectToSet = function (inObject, inSet) {
-  Util.assert(Util.isArray(inSet));
+Util.addObjectToSet = function(object, set) {
+  Util.assert(Util.isArray(set));
 
-  if (!inObject) {
+  if (!object) {
     return false;
   }
-  if (Util.isObjectInSet(inObject, inSet)) {
+  if (Util.isObjectInSet(object, set)) {
     return false;
   }
-  inSet.push(inObject);
+  set.push(object);
   return true;
 };
 
@@ -464,13 +481,13 @@
  * Returns the number of values in a hash table. 
  * 
  * @scope    public class method
- * @param    inHashTable   A hashTable containing values.
+ * @param    hashTable   A hashTable containing values.
  * @return   The number of values in inHashTable.
  */
-Util.lengthOfHashTable = function(inHashTable) {
-  Util.assert(Util.isHashTable(inHashTable));
+Util.lengthOfHashTable = function(hashTable) {
+  Util.assert(Util.isHashTable(hashTable));
   var count = 0;
-  for (var key in inHashTable) {
+  for (var key in hashTable) {
     count += 1;
   }
   return count;
@@ -482,14 +499,14 @@
  * Analogous to Python hash.values() 
  * 
  * @scope    public class method
- * @param    inHashTable   A hashTable containing values.
+ * @param    hashTable   A hashTable containing values.
  * @return   An array containing the values that are in inHashTable.
  */
-Util.hashTableValues = function(inHashTable) {
-  Util.assert(Util.isHashTable(inHashTable));
+Util.hashTableValues = function(hashTable) {
+  Util.assert(Util.isHashTable(hashTable));
   var returnArray = [];
-  for (var key in inHashTable) {
-    returnArray.push(inHashTable[key]);
+  for (var key in hashTable) {
+    returnArray.push(hashTable[key]);
   }
   return returnArray;
 };
@@ -509,9 +526,9 @@
 // Methods for doing encryption
 // -------------------------------------------------------------------
 
-Util.hex_md5 = function (inString) {
+Util.hex_md5 = function(string) {
   // Calls the hex_md5() function in .../trunk/third_party/md5/md5.js
-  return hex_md5(inString);
+  return hex_md5(string);
 };
 
 
@@ -527,16 +544,16 @@
  * Should work for IE, Mozilla, and _some_ other browsers.  
  *
  * @scope    public class method
- * @param    inEventObject    An event object. 
+ * @param    eventObject    An event object. 
  * @return   An HTML element.
  */
-Util.getTargetFromEvent = function (inEventObject) {
+Util.getTargetFromEvent = function(eventObject) {
   var target = null;
-  if (inEventObject.target) {
-    target = inEventObject.target;
+  if (eventObject.target) {
+    target = eventObject.target;
   } else {
-    if (inEventObject.srcElement) {
-      target = inEventObject.srcElement;
+    if (eventObject.srcElement) {
+      target = eventObject.srcElement;
     }
   }
   if (target && target.nodeType == 3) { // defeat Safari bug
@@ -550,19 +567,19 @@
  * A cross-browser compatibility method for registering event listeners. 
  *
  * @scope public class method
- * @param inElement    An HTMLElement.
- * @param inEventType    The type of event (e.g. "mousedown", "click").
- * @param inCallback    The function to call when the event happens.
- * @param inCaptures    True if the event should be captured by this function.
+ * @param element    An HTMLElement.
+ * @param eventType    The type of event (e.g. "mousedown", "click").
+ * @param callback    The function to call when the event happens.
+ * @param captures    True if the event should be captured by this function.
  */
-Util.addEventListener = function (inElement, inEventType, inCallback, inCaptures) {
-  if (inElement.addEventListener) {
+Util.addEventListener = function(element, eventType, callback, captures) {
+  if (element.addEventListener) {
     // for DOM Level 2 browsers, like Firefox
-    inElement.addEventListener(inEventType, inCallback, inCaptures);
+    element.addEventListener(eventType, callback, captures);
   } else {
-    if (inElement.attachEvent) {
+    if (element.attachEvent) {
       // for Internet Explorer
-      inElement.attachEvent("on"+inEventType, inCallback, inCaptures);
+      element.attachEvent("on"+eventType, callback, captures);
     }
   } 
 };
@@ -579,7 +596,7 @@
  * However, empirically, arguments is not an array in Firefox and cannot be
  * concat'd with an array, hence the mod.
  */
-Function.prototype.bindAsEventListener = function (object) {
+Function.prototype.bindAsEventListener = function(object) {
   var method = this;
   var preappliedArguments = arguments;
   return function (event) {
@@ -600,12 +617,12 @@
  * Given the URL of a file, returns the contents of the file as a text string.
  *
  * @scope    public class method
- * @param    inUrl    A string with the URL of a file containing JavaScript code. 
+ * @param    url    A string with the URL of a file containing JavaScript code. 
  * @return   A string containing the contents of the file.
  */
-Util.getStringContentsOfFileAtURL = function (inUrl) {
+Util.getStringContentsOfFileAtURL = function(url) {
   var anXMLHttpRequestObject = new window.XMLHttpRequest();
-  anXMLHttpRequestObject.open("GET", inUrl, false);
+  anXMLHttpRequestObject.open("GET", url, false);
   anXMLHttpRequestObject.send(null);
   var fileContents = anXMLHttpRequestObject.responseText;
   return fileContents;
@@ -623,7 +640,7 @@
  * 
  * @scope    public class method
  */
-Util.setTargetsForExternalLinks = function () {
+Util.setTargetsForExternalLinks = function() {
   if (!window.document.getElementsByTagName) {
     return;
   }
@@ -644,7 +661,7 @@
  * @scope    public class method
  * @return   An HTML "img" element.
  */
-Util.createImageElement = function (imageFileName) {
+Util.createImageElement = function(imageFileName) {
   var imagesDirectory = "images/"; // PENDING: this shouldn't be hard-coded in Util
   var imageElement = document.createElement("img");
   imageElement.src = imagesDirectory + imageFileName;
@@ -657,19 +674,19 @@
  * meaning the distance in pixels from the left edge of the page.
  *
  * @scope    public class method
- * @param    inHtmlElement    The HTML element that we want the left offest of. 
- * @return   An integer value equal to the number of pixels from the left of the page to inHtmlElement.
+ * @param    htmlElement    The HTML element that we want the left offest of. 
+ * @return   An integer value equal to the number of pixels from the left of the page to htmlElement.
  */
-Util.getOffsetLeftFromElement = function (inHtmlElement) {
+Util.getOffsetLeftFromElement = function(htmlElement) {
   var cumulativeOffset = 0;
-  if (inHtmlElement.offsetParent) {
-    while (inHtmlElement.offsetParent) {
-      cumulativeOffset += inHtmlElement.offsetLeft;
-      inHtmlElement = inHtmlElement.offsetParent;
+  if (htmlElement.offsetParent) {
+    while (htmlElement.offsetParent) {
+      cumulativeOffset += htmlElement.offsetLeft;
+      htmlElement = htmlElement.offsetParent;
     }
   } else {
-    if (inHtmlElement.x) {
-      cumulativeOffset += inHtmlElement.x;
+    if (htmlElement.x) {
+      cumulativeOffset += htmlElement.x;
     }
   }
   return cumulativeOffset;
@@ -681,19 +698,19 @@
  * meaning the distance in pixels from the top edge of the page.
  *
  * @scope    public class method
- * @param    inHtmlElement    The HTML element that we want the top offest of. 
- * @return   An integer value equal to the number of pixels from the top of the page to inHtmlElement.
+ * @param    htmlElement    The HTML element that we want the top offest of. 
+ * @return   An integer value equal to the number of pixels from the top of the page to htmlElement.
  */
-Util.getOffsetTopFromElement = function (inHtmlElement) {
+Util.getOffsetTopFromElement = function(htmlElement) {
   var cumulativeOffset = 0;
-  if (inHtmlElement.offsetParent) {
-    while (inHtmlElement.offsetParent) {
-      cumulativeOffset += inHtmlElement.offsetTop;
-      inHtmlElement = inHtmlElement.offsetParent;
+  if (htmlElement.offsetParent) {
+    while (htmlElement.offsetParent) {
+      cumulativeOffset += htmlElement.offsetTop;
+      htmlElement = htmlElement.offsetParent;
     }
   } else {
-    if (inHtmlElement.y) {
-      cumulativeOffset += inHtmlElement.y;
+    if (htmlElement.y) {
+      cumulativeOffset += htmlElement.y;
     }
   }
   return cumulativeOffset;



From skinner at sheep.berlios.de  Fri Jul  1 04:21:41 2005
From: skinner at sheep.berlios.de (Brian Douglas Skinner at BerliOS)
Date: Fri, 1 Jul 2005 04:21:41 +0200
Subject: [openrecord-svn] r203 - trunk/source
Message-ID: <200507010221.j612Lfm5004316@sheep.berlios.de>

Author: skinner
Date: 2005-07-01 04:21:33 +0200 (Fri, 01 Jul 2005)
New Revision: 203

Modified:
   trunk/source/BarChartPlugin.js
   trunk/source/DetailPlugin.js
   trunk/source/ItemView.js
   trunk/source/LintTest.js
   trunk/source/LintTool.js
   trunk/source/LoginView.js
   trunk/source/MultiEntriesView.js
   trunk/source/OutlinePlugin.js
   trunk/source/PageView.js
   trunk/source/PluginView.js
   trunk/source/Rectangle.js
   trunk/source/SectionView.js
   trunk/source/TablePlugin.js
   trunk/source/TextView.js
   trunk/source/Util.js
   trunk/source/View.js
Log:
compulsive coding-standards clean-up

Modified: trunk/source/BarChartPlugin.js
===================================================================
--- trunk/source/BarChartPlugin.js	2005-07-01 01:31:33 UTC (rev 202)
+++ trunk/source/BarChartPlugin.js	2005-07-01 02:21:33 UTC (rev 203)
@@ -30,11 +30,11 @@
 
 
 // -------------------------------------------------------------------
-// Dependencies:
-//   World.js
-//   SectionView.js
-//   PageView.js
-//   Util.js
+// Dependencies, expressed in the syntax that JSLint understands:
+// 
+/*global Util  */
+/*global SectionView  */
+/*global PluginView  */
 // -------------------------------------------------------------------
 
 

Modified: trunk/source/DetailPlugin.js
===================================================================
--- trunk/source/DetailPlugin.js	2005-07-01 01:31:33 UTC (rev 202)
+++ trunk/source/DetailPlugin.js	2005-07-01 02:21:33 UTC (rev 203)
@@ -30,10 +30,12 @@
 
 
 // -------------------------------------------------------------------
-// Dependencies:
-//   World.js
-//   SectionView.js
-//   Util.js
+// Dependencies, expressed in the syntax that JSLint understands:
+// 
+/*global Util  */
+/*global Item  */
+/*global SectionView  */
+/*global PluginView  */
 // -------------------------------------------------------------------
 
 

Modified: trunk/source/ItemView.js
===================================================================
--- trunk/source/ItemView.js	2005-07-01 01:31:33 UTC (rev 202)
+++ trunk/source/ItemView.js	2005-07-01 02:21:33 UTC (rev 203)
@@ -30,11 +30,13 @@
 
 
 // -------------------------------------------------------------------
-// Dependencies:
-//   World.js
-//   Util.js
-//   RootView.js
-//   DetailPlugin.js
+// Dependencies, expressed in the syntax that JSLint understands:
+// 
+/*global document, HTMLElement  */
+/*global Util  */
+/*global Item  */
+/*global DetailPlugin  */
+/*global RootView  */
 // -------------------------------------------------------------------
 
 
@@ -63,8 +65,8 @@
   // instance properties
   this.setSuperview(inRootView);
   this.setHTMLElement(inHTMLElement);
-  this.myItem = inItem;
-  this.myPlugin = null;
+  this._item = inItem;
+  this._pluginView = null;
 }
 
 
@@ -75,7 +77,7 @@
  * @return   A string that gives the name of the page.
  */
 ItemView.prototype.getPageTitle = function () {
-  var pageTitle = this.myItem.getDisplayString();
+  var pageTitle = this._item.getDisplayString();
   return pageTitle;
 };
 
@@ -87,16 +89,16 @@
  * @scope    public instance method
  */
 ItemView.prototype.refresh = function () {
-  Util.assert(this.myItem instanceof Item);
+  Util.assert(this._item instanceof Item);
   
   // PENDING: this needs to be changed from DOM level 0 to DOM level 2.
   var listOfStrings = [];
 
   // add an <h1> heading with the name of the page
-  listOfStrings.push("<h1 id=\"" + RootView.URL_ITEM_PREFIX + this.myItem._getUuid() + "\">" + this.myItem.getDisplayName() + "</h1>");
+  listOfStrings.push("<h1 id=\"" + RootView.URL_ITEM_PREFIX + this._item._getUuid() + "\">" + this._item.getDisplayName() + "</h1>");
 
   // add a <div> element for the detail plugin
-  var detailDivId = ItemView.ELEMENT_ID_DETAIL_DIV_PREFIX + this.myItem._getUuid();
+  var detailDivId = ItemView.ELEMENT_ID_DETAIL_DIV_PREFIX + this._item._getUuid();
   listOfStrings.push("<div id=\"" + detailDivId + "\"></div>");
 
   // write out all the new content 
@@ -105,8 +107,8 @@
 
   // let the detailPlugin add its own content
   var detailPluginElement = document.getElementById(detailDivId);
-  this.myPlugin = new DetailPlugin(this, detailPluginElement, [this.myItem]);
-  this.myPlugin.refresh();
+  this._pluginView = new DetailPlugin(this, detailPluginElement, [this._item]);
+  this._pluginView.refresh();
 };
 
 

Modified: trunk/source/LintTest.js
===================================================================
--- trunk/source/LintTest.js	2005-07-01 01:31:33 UTC (rev 202)
+++ trunk/source/LintTest.js	2005-07-01 02:21:33 UTC (rev 203)
@@ -66,6 +66,7 @@
     "NavbarView.js",
     "SectionView.js",
     "TextView.js",
+    "MultiEntriesView.js",
     "TablePlugin.js",
     "OutlinePlugin.js",
     "DetailPlugin.js",

Modified: trunk/source/LintTool.js
===================================================================
--- trunk/source/LintTool.js	2005-07-01 01:31:33 UTC (rev 202)
+++ trunk/source/LintTool.js	2005-07-01 02:21:33 UTC (rev 203)
@@ -61,10 +61,10 @@
  * the lint tests.
  *
  * @scope    public class method
- * @param    inString    A string containing JavaScript code. 
+ * @param    stringContainingCode    A string containing JavaScript code. 
  * @return   Returns an error message string, or returns an empty string if there are no errors (according to jslint).
  */
-LintTool.getErrorReportForCodeInString = function (inString) {
+LintTool.getErrorReportForCodeInString = function(stringContainingCode) {
   var errorMessage = "";
 
   // call jslint, and see if it reported errors
@@ -72,7 +72,7 @@
   jslint.plusplus = true;
   jslint.cap = false;
   jslint.jscript = false;
-  jslint(inString);
+  jslint(stringContainingCode);
   var report = jslint.report();
   var jslintIsOkay = (report.substr(0, 2) == 'ok');
   if (!jslintIsOkay) {
@@ -80,19 +80,19 @@
   }
   
   // now check for tabs, backspaces, etc.
-  var noTabs = (inString.indexOf("\t") == -1);
+  var noTabs = (stringContainingCode.indexOf("\t") == -1);
   if (!noTabs) {
     errorMessage += "There are tab characters in the file." + '\n';
   }
-  var noBackspaces = (inString.indexOf("\b") == -1);
+  var noBackspaces = (stringContainingCode.indexOf("\b") == -1);
   if (!noBackspaces) {
     errorMessage += "There are backspace characters in the file." + '\n';
   }
-  var noCarriageReturns = (inString.indexOf("\r") == -1);
+  var noCarriageReturns = (stringContainingCode.indexOf("\r") == -1);
   if (!noCarriageReturns) {
     errorMessage += "There are carriage return characters in the file." + '\n';
   }
-  var noFormFeeds = (inString.indexOf("\f") == -1);
+  var noFormFeeds = (stringContainingCode.indexOf("\f") == -1);
   if (!noCarriageReturns) {
     errorMessage += "There are carriage return characters in the file." + '\n';
   }
@@ -106,11 +106,11 @@
  * the lint tests.
  *
  * @scope    public class method
- * @param    inUrl    A string with the URL of a file containing JavaScript code. 
+ * @param    url    A string with the URL of a file containing JavaScript code. 
  * @return   Returns an error message string, or returns an empty string if there are no errors (according to jslint).
  */
-LintTool.getErrorReportForCodeAtUrl = function (inUrl) {
-  var fileContents = Util.getStringContentsOfFileAtURL(inUrl);
+LintTool.getErrorReportForCodeAtUrl = function(url) {
+  var fileContents = Util.getStringContentsOfFileAtURL(url);
   return LintTool.getErrorReportForCodeInString(fileContents);
 };
 
@@ -120,23 +120,23 @@
  * returns null if the code passes the lint tests.
  *
  * @scope    public class method
- * @param    inListOfFilenames    A list of filename strings. 
- * @param    inPath    Optional.  A path prefix string to prepend to the filename strings. 
+ * @param    listOfFilenames    A list of filename strings. 
+ * @param    path    Optional.  A path prefix string to prepend to the filename strings. 
  * @return   Returns an error message string, or returns an empty string if there are no errors (according to jslint).
  */
-LintTool.getErrorReportFromListOfFilesnames = function (inListOfFilenames, inPath) {
-  Util.assert(Util.isArray(inListOfFilenames));
-  if (inPath) {
-    Util.assert(Util.isString(inPath));
+LintTool.getErrorReportFromListOfFilesnames = function(listOfFilenames, path) {
+  Util.assert(Util.isArray(listOfFilenames));
+  if (path) {
+    Util.assert(Util.isString(path));
   } else {
-    inPath = "";
+    path = "";
   }
   
   var aggregateErrorReport = "";
   var separatorLine = "_____________________________________" + "\n";
-  for (var key in inListOfFilenames) {
-    var filename = inListOfFilenames[key];
-    var url = inPath + filename;
+  for (var key in listOfFilenames) {
+    var filename = listOfFilenames[key];
+    var url = path + filename;
     var errorReportForFile = LintTool.getErrorReportForCodeAtUrl(url);
     if (errorReportForFile) {
       var message = separatorLine + filename + "\n" + errorReportForFile;

Modified: trunk/source/LoginView.js
===================================================================
--- trunk/source/LoginView.js	2005-07-01 01:31:33 UTC (rev 202)
+++ trunk/source/LoginView.js	2005-07-01 02:21:33 UTC (rev 203)
@@ -32,11 +32,12 @@
 
 
 // -------------------------------------------------------------------
-// Dependencies:
-//   World.js
-//   Util.js
-//   LoginView.js
-//   DetailPlugin.js
+// Dependencies, expressed in the syntax that JSLint understands:
+// 
+/*global document  */
+/*global Util  */
+/*global Cookie  */
+/*global SuggestionBox  */
 // -------------------------------------------------------------------
 
 
@@ -62,8 +63,8 @@
   this.setHTMLElement(inHTMLElement);
   this._isCreatingNewAccount = false;
   var tenYearCookieExpiration = 10*365*24;   // PENDING: hardcode expiration to 10yrs
-  this.myCookie = new Cookie(document, LoginView.COOKIE_NAME, tenYearCookieExpiration);
-  this.myCookie.load();
+  this._cookie = new Cookie(document, LoginView.COOKIE_NAME, tenYearCookieExpiration);
+  this._cookie.load();
 }
 
 
@@ -102,8 +103,8 @@
   var currentUser = this.getWorld().getCurrentUser();
   if (!currentUser) {
     // alert("displayControlSpan: !currentUser");
-    var userUuid = this.myCookie.userUuid;
-    var password = this.myCookie.password;
+    var userUuid = this._cookie.userUuid;
+    var password = this._cookie.password;
     // alert("displayControlSpan: userUuid = " + userUuid);
     if (userUuid) {
       var userToLoginAs = this.getWorld().getItemFromUuid(userUuid);
@@ -112,8 +113,8 @@
         currentUser = this.getWorld().getCurrentUser();
       }
       if (!currentUser) {
-        this.myCookie.userUuid = null;
-        this.myCookie.store();
+        this._cookie.userUuid = null;
+        this._cookie.store();
       }
     }
   }
@@ -222,8 +223,8 @@
   if (this.isInEditMode()) {
     this.getRootView().setEditMode(false);
   }
-  this.myCookie.userUuid = null;
-  this.myCookie.store();
+  this._cookie.userUuid = null;
+  this._cookie.store();
   this.getWorld().logout();
   this._rebuildView();
 };
@@ -346,9 +347,9 @@
   var loginSuccess = this.getWorld().login(user, password); 
   if (loginSuccess) {
     var userUuid = user._getUuid();
-    this.myCookie.userUuid = userUuid;
-    this.myCookie.password = password;
-    this.myCookie.store();
+    this._cookie.userUuid = userUuid;
+    this._cookie.password = password;
+    this._cookie.store();
     this._rebuildView();
   } else {
     this._reportError("Login failed. Wrong password.");

Modified: trunk/source/MultiEntriesView.js
===================================================================
--- trunk/source/MultiEntriesView.js	2005-07-01 01:31:33 UTC (rev 202)
+++ trunk/source/MultiEntriesView.js	2005-07-01 02:21:33 UTC (rev 203)
@@ -32,13 +32,16 @@
 
 
 // -------------------------------------------------------------------
-// Dependencies:
-//   repository.js
-//   util.js
-//   TextView.js
+// Dependencies, expressed in the syntax that JSLint understands:
+// 
+/*global document  */
+/*global Util  */
+/*global Item  */
+/*global TextView  */
 // -------------------------------------------------------------------
 
 
+
 // -------------------------------------------------------------------
 // MultiEntriesView public class constants
 // -------------------------------------------------------------------
@@ -197,7 +200,9 @@
       }
       if (inTextView != this._entryViews[this._entryViews.length-1]) {move=1;}
       break;
-    default: move = 0; break;
+    default: 
+      move = 0; 
+      break;
   }
   if (doCreateNewEntry) {
     inTextView.stopEditing();
@@ -205,7 +210,7 @@
     this._addEntryView(null).startEditing();
     return true;
   }
-  if (move != 0) {
+  if (move !== 0) {
     var index = Util.getArrayIndex(this._entryViews, inTextView);
     Util.assert(index != -1);
     index += move;
@@ -266,7 +271,7 @@
   this._entryViews = [];
   
   var entries = this._item.getEntriesForAttribute(this._attribute);
-  if (this._item.isProvisional() || entries.length == 0) {
+  if (this._item.isProvisional() || entries.length === 0) {
     this._addEntryView(null);
   }
   else {

Modified: trunk/source/OutlinePlugin.js
===================================================================
--- trunk/source/OutlinePlugin.js	2005-07-01 01:31:33 UTC (rev 202)
+++ trunk/source/OutlinePlugin.js	2005-07-01 02:21:33 UTC (rev 203)
@@ -30,12 +30,15 @@
 
 
 // -------------------------------------------------------------------
-// Dependencies:
-//   World.js
-//   SectionView.js
+// Dependencies, expressed in the syntax that JSLint understands:
+// 
+/*global Util  */
+/*global View  */
+/*global RootView  */
 // -------------------------------------------------------------------
 
 
+
 // -------------------------------------------------------------------
 // Register this plugin in the SectionView registry
 // -------------------------------------------------------------------

Modified: trunk/source/PageView.js
===================================================================
--- trunk/source/PageView.js	2005-07-01 01:31:33 UTC (rev 202)
+++ trunk/source/PageView.js	2005-07-01 02:21:33 UTC (rev 203)
@@ -32,11 +32,12 @@
 
 
 // -------------------------------------------------------------------
-// Dependencies:
-//   World.js
-//   Util.js
-//   SectionView.js
-//   TextView.js
+// Dependencies, expressed in the syntax that JSLint understands:
+// 
+/*global document, HTMLElement  */
+/*global Util  */
+/*global Item  */
+/*global RootView, SectionView, TablePlugin, TextView  */
 // -------------------------------------------------------------------
 
 
@@ -97,11 +98,11 @@
   // instance properties
   this.setSuperview(inRootView);
   this.setHTMLElement(inHTMLElement);
-  this.myPage = inPage;
+  this._pageItem = inPage;
   
-  this._myPageSummaryView = null;
-  this._myHeaderText = null;
-  this.myListOfSectionViews = [];
+  this._pageSummaryView = null;
+  this._headerText = null;
+  this._listOfSectionViews = [];
 }
 
 
@@ -112,7 +113,7 @@
  * @return   A string that gives the name of the page.
  */
 PageView.prototype.getPageTitle = function () {
-  var pageTitle = this.myPage.getDisplayString();
+  var pageTitle = this._pageItem.getDisplayString();
   return pageTitle;
 };
 
@@ -127,10 +128,10 @@
   if (!this._myHasEverBeenDisplayedFlag) {
     this.doInitialDisplay();
   } else {
-    this._myHeaderText.refresh();
-    this._myPageSummaryView.refresh();
-    for (var key in this.myListOfSectionViews) {
-      var sectionView = this.myListOfSectionViews[key];      
+    this._headerText.refresh();
+    this._pageSummaryView.refresh();
+    for (var key in this._listOfSectionViews) {
+      var sectionView = this._listOfSectionViews[key];      
       sectionView.refresh();
     }
     this._refreshEditModeControls();
@@ -153,21 +154,21 @@
   var pageDivElement = this.getHTMLElement();
   
   var headerElement = View.createAndAppendElement(pageDivElement, "h1");
-  this._myHeaderText = new TextView(this, headerElement, this.myPage, attributeCalledName,
-    this.myPage.getSingleEntryFromAttribute(attributeCalledName), PageView.CSS_CLASS_PAGE_HEADER, false);
+  this._headerText = new TextView(this, headerElement, this._pageItem, attributeCalledName,
+    this._pageItem.getSingleEntryFromAttribute(attributeCalledName), PageView.CSS_CLASS_PAGE_HEADER, false);
 
   var summaryViewDiv = View.createAndAppendElement(pageDivElement, "div");
-  this._myPageSummaryView = new TextView(this, summaryViewDiv, this.myPage, attributeCalledSummary,
-    this.myPage.getSingleEntryFromAttribute(attributeCalledSummary), SectionView.CSS_CLASS_SUMMARY_TEXT, true);
+  this._pageSummaryView = new TextView(this, summaryViewDiv, this._pageItem, attributeCalledSummary,
+    this._pageItem.getSingleEntryFromAttribute(attributeCalledSummary), SectionView.CSS_CLASS_SUMMARY_TEXT, true);
 
   // add <div> elements for each of the sections on the page
   // and create a new SectionView for each section
   var attributeCalledSectionsInPage = this.getWorld().getItemFromUuid(PageView.UUID_FOR_ATTRIBUTE_SECTIONS_IN_PAGE);
-  var listOfEntriesForSections = this.myPage.getEntriesForAttribute(attributeCalledSectionsInPage);
+  var listOfEntriesForSections = this._pageItem.getEntriesForAttribute(attributeCalledSectionsInPage);
   
   for (var key in listOfEntriesForSections) {
     var entryForSection = listOfEntriesForSections[key];
-    var section = entryForSection.getConnectedItem(this.myPage);
+    var section = entryForSection.getConnectedItem(this._pageItem);
     if (section) {
       this._buildNewSection(section);
     }
@@ -189,14 +190,14 @@
 PageView.prototype._buildNewSection = function(inSection, inBeforeElt) {
   var pageDivElement = this.getHTMLElement();
   var sectionViewDiv = document.createElement("div");
-  var sectionView = new SectionView(this, sectionViewDiv, inSection, this.myListOfSectionViews.length);
+  var sectionView = new SectionView(this, sectionViewDiv, inSection, this._listOfSectionViews.length);
   if (inBeforeElt) {
     pageDivElement.insertBefore(sectionViewDiv, inBeforeElt);
   }
   else {
     pageDivElement.appendChild(sectionViewDiv);
   }
-  this.myListOfSectionViews.push(sectionView);
+  this._listOfSectionViews.push(sectionView);
   return sectionView;
 };
 
@@ -207,7 +208,7 @@
  * @scope    private instance method
  */
 PageView.prototype._addNewSection = function() {
-  var newSection = PageView.newSection(this.getWorld(), this.myPage);
+  var newSection = PageView.newSection(this.getWorld(), this._pageItem);
   this._buildNewSection(newSection, this._editModeDiv).refresh();
 };
 

Modified: trunk/source/PluginView.js
===================================================================
--- trunk/source/PluginView.js	2005-07-01 01:31:33 UTC (rev 202)
+++ trunk/source/PluginView.js	2005-07-01 02:21:33 UTC (rev 203)
@@ -31,9 +31,9 @@
 
 
 // -------------------------------------------------------------------
-// Dependencies:
-//   World.js
-//   Util.js
+// Dependencies, expressed in the syntax that JSLint understands:
+// 
+/*global View  */
 // -------------------------------------------------------------------
 
 

Modified: trunk/source/Rectangle.js
===================================================================
--- trunk/source/Rectangle.js	2005-07-01 01:31:33 UTC (rev 202)
+++ trunk/source/Rectangle.js	2005-07-01 02:21:33 UTC (rev 203)
@@ -67,115 +67,3 @@
 //    + private instance methods?
 //    + class methods?
 // -------------------------------------------------------------------
-
-
-
-
-/*****************************************************************************
- Rectangle.js
- 
-******************************************************************************
- Written in 2005 by Brian Douglas Skinner <brian.skinner at gumption.org>
-  
- Copyright rights relinquished under the Creative Commons  
- Public Domain Dedication:
-    http://creativecommons.org/licenses/publicdomain/
-  
- You can copy freely from this file.  This work may be freely reproduced, 
- distributed, transmitted, used, modified, built upon, or otherwise exploited
- by anyone for any purpose.
-  
- This work is provided on an "AS IS" basis, without warranties or conditions 
- of any kind, either express or implied, including, without limitation, any 
- warranties or conditions of title, non-infringement, merchantability, or 
- fitness for a particular purpose. You are solely responsible for determining 
- the appropriateness of using or distributing the work and assume all risks 
- associated with use of this work, including but not limited to the risks and 
- costs of errors, compliance with applicable laws, damage to or loss of data 
- or equipment, and unavailability or interruption of operations.
-
- In no event shall the authors or contributors have any liability for any 
- direct, indirect, incidental, special, exemplary, or consequential damages,
- however caused and on any theory of liability, whether in contract, strict 
- liability, or tort (including negligence), arising in any way out of or in 
- connection with the use or distribution of the work.
-*****************************************************************************/
-
-
-// -------------------------------------------------------------------
-// Dependencies:
-//   Line.js
-// -------------------------------------------------------------------
-
-
-// -------------------------------------------------------------------
-// Rectangle public class constants
-// -------------------------------------------------------------------
-Rectangle.LAYOUT_PORTRAIT = "Portrait";
-Rectangle.LAYOUT_LANDSCAPE = "Landscape";
-
-Rectangle.FILL_SOLID = "Solid";
-Rectangle.FILL_EMPTY = "Empty";
-
-
-// -------------------------------------------------------------------
-// Rectangle class properties
-// -------------------------------------------------------------------
-Rectangle.ourHashTableOfColorsKeyedBySize = new Array();
-
-
-/**
- * Each Rectangle instance represents a single rectangle.
- *
- * @scope    public instance constructor
- * @syntax   var rect = new Rectangle()
- */
-function Rectangle() {
-  // instance properties
-  this.myWidth = null;
-  this.myHeight = null;
-}
-
-
-// -------------------------------------------------------------------
-// Public class methods
-// -------------------------------------------------------------------
-
-/**
- * Given two Rectangle objects, returns new Rectangle large enough
- * to encompass both of the given Rectangles.
- *
- * @scope    public class method
- * @param    inRectOne    A Rectangle object. 
- * @param    inRectTwo    A Rectangle object. 
- * @return   A newly created Rectangle object.
- */
-Rectangle.union = function (inRectOne, inRectTwo) {
-  Util.assert(inRectOne instanceof Rectangle);
-  Util.assert(inRectTwo instanceof Rectangle);
-
-  var newRectangle = new Rectangle();
-  newRectangle.myWidth = Math.max(inRectOne.myWidth, inRectTwo.myWidth);
-  newRectangle.myHeight = Math.max(inRectOne.myHeight, inRectTwo.myHeight);
-  return newRectangle;
-};
-
-
-// -------------------------------------------------------------------
-// Public instance methods
-// -------------------------------------------------------------------
-
-/**
- * Returns the area of the rectangle.
- *
- * @scope    public instance method
- * @return   A number.
- */
-Rectangle.prototype.getArea = function () {
-  var area = this.myWidth * this.myHeight;
-  return area;
-};
-
-// -------------------------------------------------------------------
-// End of file
-// -------------------------------------------------------------------

Modified: trunk/source/SectionView.js
===================================================================
--- trunk/source/SectionView.js	2005-07-01 01:31:33 UTC (rev 202)
+++ trunk/source/SectionView.js	2005-07-01 02:21:33 UTC (rev 203)
@@ -33,12 +33,12 @@
 
 
 // -------------------------------------------------------------------
-// Dependencies:
-//   World.js
-//   Util.js
-//   PageView.js
-//   TablePlugin.js
-//   TextView.js
+// Dependencies, expressed in the syntax that JSLint understands:
+// 
+/*global window, document  */
+/*global Util  */
+/*global Item  */
+/*global RootView, PageView, TablePlugin, TextView  */
 // -------------------------------------------------------------------
 
 
@@ -59,16 +59,9 @@
 SectionView.CSS_CLASS_SUMMARY_TEXT = "summary_text";
 
 SectionView.ELEMENT_ID_SELECT_MENU_PREFIX = "select_menu_";
-// SectionView.ELEMENT_ID_SELECT_MENU_SUFFIX = "_select_menu";
-// SectionView.ELEMENT_ID_PLUGIN_DIV_SUFFIX = "_plugin_div";
-// SectionView.ELEMENT_ID_CELL_PREFIX = "section_";
-// SectionView.ELEMENT_ID_CELL_MIDFIX = "_cell_";
-// SectionView.ELEMENT_ID_SUMMARY_DIV_SUFFIX = "_summary_div";
 
-SectionView.ELEMENT_ATTRIBUTE_SECTION_NUMBER = "section_number";
-// SectionView.ELEMENT_ATTRIBUTE_CELL_NUMBER = "cell_number";
+// SectionView.ELEMENT_ATTRIBUTE_SECTION_NUMBER = "section_number";
 
-// SectionView.UUID_FOR_ATTRIBUTE_PLUGIN_NAME       = "00040000-ce7f-11d9-8cd5-0011113ae5d6";
 SectionView.UUID_FOR_ATTRIBUTE_PLUGIN_VIEW       = "00040101-ce7f-11d9-8cd5-0011113ae5d6";
 SectionView.UUID_FOR_ATTRIBUTE_LAYOUT_DATA       = "00040102-ce7f-11d9-8cd5-0011113ae5d6";
 SectionView.UUID_FOR_ATTRIBUTE_APPLIES_TO_PLUGIN = "00040103-ce7f-11d9-8cd5-0011113ae5d6";
@@ -109,13 +102,13 @@
   // PENDING: these should all be private
   this.setSuperview(inPageView);
   this.setHTMLElement(inHTMLElement);
-  this.mySection = inSection;
-  this.mySectionNumber = inSectionNumber;
+  this._section = inSection;
+  this._sectionNumber = inSectionNumber;
 
-  this._myPlugin = null;
-  this._myPluginDiv = null;
-  this._mySectionSummaryView = null;
-  this._myHeaderView = null;
+  this._pluginView = null;
+  this._pluginDiv = null;
+  this._sectionSummaryView = null;
+  this._headerView = null;
   this._queryEditSpan = null;
   
   if (!SectionView._ourHashTableOfPluginClassesKeyedByPluginItemUuid) {
@@ -184,9 +177,9 @@
  */
 SectionView.prototype.getQuerySpec = function () {
   var attributeCalledQuerySpec = this.getWorld().getAttributeCalledQuerySpec();
-  var queryEntry = this.mySection.getSingleEntryFromAttribute(attributeCalledQuerySpec);
+  var queryEntry = this._section.getSingleEntryFromAttribute(attributeCalledQuerySpec);
   if (queryEntry) {
-    return queryEntry.getConnectedItem(this.mySection);
+    return queryEntry.getConnectedItem(this._section);
   }
   return null;
 };
@@ -202,11 +195,11 @@
   if (!this._myHasEverBeenDisplayedFlag) {
     this.doInitialDisplay();
   } else {
-    // refresh the <h2> element with the value: this.mySection.getDisplayName();  
+    // refresh the <h2> element with the value: this._section.getDisplayName();  
     this._refreshQueryEditSpan();
-    this._mySectionSummaryView.refresh();
-    this._myPlugin.refresh();
-    this._myHeaderView.refresh();
+    this._sectionSummaryView.refresh();
+    this._pluginView.refresh();
+    this._headerView.refresh();
   }
 };
 
@@ -222,7 +215,7 @@
     return;
   }
   var attributeCalledPluginView = this.getWorld().getItemFromUuid(SectionView.UUID_FOR_ATTRIBUTE_PLUGIN_VIEW);
-  var selectedPluginViewEntry = this.mySection.getSingleEntryFromAttribute(attributeCalledPluginView);
+  var selectedPluginViewEntry = this._section.getSingleEntryFromAttribute(attributeCalledPluginView);
   var selectedPluginItem;
   var selectedPluginClass;
   if (selectedPluginViewEntry) {
@@ -237,12 +230,12 @@
   var headerH2 = View.createAndAppendElement(outerDiv, "h2");
   var attributeCalledName = this.getWorld().getAttributeCalledName();
   var attributeCalledSummary = this.getWorld().getAttributeCalledSummary();
-  this._myHeaderView = new TextView(this, headerH2, this.mySection, attributeCalledName,
-    this.mySection.getSingleEntryFromAttribute(attributeCalledName),
+  this._headerView = new TextView(this, headerH2, this._section, attributeCalledName,
+    this._section.getSingleEntryFromAttribute(attributeCalledName),
     SectionView.CSS_CLASS_SECTION_HEADER);
   var summaryDiv = View.createAndAppendElement(outerDiv, "div");
-  this._mySectionSummaryView = new TextView(this, summaryDiv, this.mySection, attributeCalledSummary,
-    this.mySection.getSingleEntryFromAttribute(attributeCalledSummary), SectionView.CSS_CLASS_TEXT_VIEW, true);
+  this._sectionSummaryView = new TextView(this, summaryDiv, this._section, attributeCalledSummary,
+    this._section.getSingleEntryFromAttribute(attributeCalledSummary), SectionView.CSS_CLASS_TEXT_VIEW, true);
   View.createAndAppendElement(outerDiv, "p");
 
   // create the editing controls, if we're in edit mode
@@ -251,12 +244,12 @@
   controlArea.appendChild(textShowMeA);
 
   // PENDING: We shouldn't call the private method _getUuid()
-  var selectMenuId = SectionView.ELEMENT_ID_SELECT_MENU_PREFIX + this.mySection._getUuid();
+  var selectMenuId = SectionView.ELEMENT_ID_SELECT_MENU_PREFIX + this._section._getUuid();
   var selectElement = View.createAndAppendElement(controlArea, "select", null, selectMenuId);
   var optionElement;
   var listener;
   selectElement.setAttribute("name", selectMenuId);
-  selectElement.setAttribute(SectionView.ELEMENT_ATTRIBUTE_SECTION_NUMBER, this.mySectionNumber);
+  // selectElement.setAttribute(SectionView.ELEMENT_ATTRIBUTE_SECTION_NUMBER, this._sectionNumber);
   for (var key in SectionView._ourHashTableOfPluginClassesKeyedByPluginItemUuid) {
     var pluginClass = SectionView._ourHashTableOfPluginClassesKeyedByPluginItemUuid[key];
     optionElement = View.createAndAppendElement(selectElement, "option");
@@ -276,8 +269,8 @@
   View.createAndAppendTextNode(controlArea,".");
 
   // create a div element for the plugin class to use
-  this._myPluginDiv = View.createAndAppendElement(outerDiv, "div");
-  this._myPlugin = this.getPluginInstanceFromPluginItem(selectedPluginItem, this._myPluginDiv);
+  this._pluginDiv = View.createAndAppendElement(outerDiv, "div");
+  this._pluginView = this.getPluginInstanceFromPluginItem(selectedPluginItem, this._pluginDiv);
   this._myHasEverBeenDisplayedFlag = true;
   this.refresh();
 };
@@ -293,11 +286,11 @@
 SectionView.prototype._getLayoutDataForPlugin = function (inPluginType) {
   var repository = this.getWorld();
   var attrLayoutData = repository.getItemFromUuid(SectionView.UUID_FOR_ATTRIBUTE_LAYOUT_DATA);
-  var entriesLayoutData = this.mySection.getEntriesForAttribute(attrLayoutData);
+  var entriesLayoutData = this._section.getEntriesForAttribute(attrLayoutData);
   var attrAppliesToPlugin = repository.getItemFromUuid(SectionView.UUID_FOR_ATTRIBUTE_APPLIES_TO_PLUGIN);
   if (entriesLayoutData) {
     for (var i=0; i < entriesLayoutData.length; ++i) {
-      var layoutItem = entriesLayoutData[i].getConnectedItem(this.mySection);
+      var layoutItem = entriesLayoutData[i].getConnectedItem(this._section);
       var entriesAppliesToPlugin = layoutItem.getEntriesForAttribute(attrAppliesToPlugin);
       Util.assert(entriesAppliesToPlugin && entriesAppliesToPlugin.length == 1);
       if (entriesAppliesToPlugin[0].getValue() == inPluginType) {
@@ -310,11 +303,11 @@
   var categoryCalledLayoutData = repository.getItemFromUuid(SectionView.UUID_FOR_CATEGORY_LAYOUT_DATA);
   var attributeCalledSectionThisLayoutDataBelongsTo = repository.getItemFromUuid(SectionView.UUID_FOR_ATTRIBUTE_SECTION_THIS_LAYOUT_DATA_BELONGS_TO);
   repository.beginTransaction();
-  layoutItem = repository.newItem("Layout data for " + inPluginType.getDisplayString() + " of " + this.mySection.getDisplayString());
+  layoutItem = repository.newItem("Layout data for " + inPluginType.getDisplayString() + " of " + this._section.getDisplayString());
   layoutItem.assignToCategory(categoryCalledLayoutData);
   layoutItem.addEntryForAttribute(attrAppliesToPlugin, inPluginType);
-  // this.mySection.addEntryForAttribute(attrLayoutData, layoutItem, repository.getTypeCalledItem());
-  this.mySection.addConnectionEntry(attrLayoutData, layoutItem, attributeCalledSectionThisLayoutDataBelongsTo);
+  // this._section.addEntryForAttribute(attrLayoutData, layoutItem, repository.getTypeCalledItem());
+  this._section.addConnectionEntry(attrLayoutData, layoutItem, attributeCalledSectionThisLayoutDataBelongsTo);
   repository.endTransaction();
   return layoutItem;
 };
@@ -349,7 +342,7 @@
   var selectElement = View.createAndAppendElement(this._queryEditSpan, "select");
   for (var key in listOfAttributes) {
     var anAttribute = listOfAttributes[key];
-    optionElement = View.createAndAppendElement(selectElement, "option");
+    var optionElement = View.createAndAppendElement(selectElement, "option");
     optionElement.selected = (matchingAttribute.getDisplayString() == anAttribute.getDisplayString());
     optionElement.value = anAttribute._getUuid();
     optionElement.onclick = this.clickOnAttributeMenu.bindAsEventListener(this);
@@ -405,9 +398,9 @@
   item.removeObserver(this); //item no longer needs to be observed as query editor span is rebuilt
   var myQuery = this.getQuerySpec();
   Util.assert(item == myQuery);
-  var pluginItem = this._myPlugin.getPluginItem();
-  this._myPlugin.endOfLife();
-  this._myPlugin = this.getPluginInstanceFromPluginItem(pluginItem, this._myPluginDiv);
+  var pluginItem = this._pluginView.getPluginItem();
+  this._pluginView.endOfLife();
+  this._pluginView = this.getPluginInstanceFromPluginItem(pluginItem, this._pluginDiv);
   this.refresh();
 };
 
@@ -430,25 +423,25 @@
   var attributeCalledPluginView = this.getWorld().getItemFromUuid(SectionView.UUID_FOR_ATTRIBUTE_PLUGIN_VIEW);
   var newPluginViewItem = this.getWorld().getItemFromUuid(newChoiceUuid);
  
-  if (this._myPlugin.getPluginItem() == newPluginViewItem) { 
+  if (this._pluginView.getPluginItem() == newPluginViewItem) { 
     return;
   } else {
-    this._myPlugin.endOfLife();
-    this._myPlugin = this.getPluginInstanceFromPluginItem(newPluginViewItem, this._myPluginDiv);
+    this._pluginView.endOfLife();
+    this._pluginView = this.getPluginInstanceFromPluginItem(newPluginViewItem, this._pluginDiv);
 
-    var oldEntry = this.mySection.getSingleEntryFromAttribute(attributeCalledPluginView);
+    var oldEntry = this._section.getSingleEntryFromAttribute(attributeCalledPluginView);
     if (oldEntry) {
-      this.mySection.replaceEntry(oldEntry, newPluginViewItem);
+      this._section.replaceEntry(oldEntry, newPluginViewItem);
     } else {
-      this.mySection.addEntryForAttribute(attributeCalledPluginView, newPluginViewItem);
+      this._section.addEntryForAttribute(attributeCalledPluginView, newPluginViewItem);
     }
     /*
-    var pluginNameEntries = this.mySection.getEntriesForAttribute(attributeCalledPluginName);
+    var pluginNameEntries = this._section.getEntriesForAttribute(attributeCalledPluginName);
     if (pluginNameEntries && pluginNameEntries[0]) {
       var oldEntry = pluginNameEntries[0];
-      this.mySection.replaceEntry(oldEntry, newChoiceName);
+      this._section.replaceEntry(oldEntry, newChoiceName);
     } else {
-      this.mySection.addEntryForAttribute(attributeCalledPluginName, newChoiceName);
+      this._section.addEntryForAttribute(attributeCalledPluginName, newChoiceName);
     }
     */
     this.refresh();
@@ -509,9 +502,9 @@
     // some refactoring so that the plugin can register as an observer of the
     // query item, and then the plugin itself can know what to do when the
     // query item changes.  
-    var pluginItem = this._myPlugin.getPluginItem();
-    this._myPlugin.endOfLife();
-    this._myPlugin = this.getPluginInstanceFromPluginItem(pluginItem, this._myPluginDiv);
+    var pluginItem = this._pluginView.getPluginItem();
+    this._pluginView.endOfLife();
+    this._pluginView = this.getPluginInstanceFromPluginItem(pluginItem, this._pluginDiv);
 
     this.refresh();
   }

Modified: trunk/source/TablePlugin.js
===================================================================
--- trunk/source/TablePlugin.js	2005-07-01 01:31:33 UTC (rev 202)
+++ trunk/source/TablePlugin.js	2005-07-01 02:21:33 UTC (rev 203)
@@ -32,11 +32,12 @@
 
  
 // -------------------------------------------------------------------
-// Dependencies:
-//   World.js
-//   SectionView.js
-//   PageView.js
-//   Util.js
+// Dependencies, expressed in the syntax that JSLint understands:
+// 
+/*global window, document, HTMLTableRowElement  */
+/*global Util  */
+/*global Item  */
+/*global View, MultiEntriesView  */
 // -------------------------------------------------------------------
 
 
@@ -69,9 +70,9 @@
   PluginView.call(this, inSectionView, inHTMLElement, inQuery, inLayout);
 
   // PENDING should probably make this independent of sectionview
-  this.myClass = SectionView.CSS_CLASS_SIMPLE_TABLE;
-  this.myCellClass = SectionView.CSS_CLASS_PLAIN;
-  this.myTable = null;
+  this._cssClass = SectionView.CSS_CLASS_SIMPLE_TABLE;
+  this._cellClass = SectionView.CSS_CLASS_PLAIN;
+  this._table = null;
   this._sortAttribute = null;
   this._ascendingOrder = true;
 }
@@ -223,7 +224,7 @@
  * @scope    private instance method
  */
 TablePlugin.prototype._insertRow = function(contentItem, rowNum) {
-  var aRow = this.myTable.insertRow(rowNum); 
+  var aRow = this._table.insertRow(rowNum); 
   var columnCount = -1;
   for (var i=0;i<this._displayAttributes.length;++i) {
     var attribute = this._displayAttributes[i];
@@ -296,7 +297,7 @@
   this._listOfItems.push(item); // moving this line affects code below
   
   // tell provisional item views they are no longer provisional
-  var oldProvisionalRow = this.myTable.rows[this._listOfItems.length];
+  var oldProvisionalRow = this._table.rows[this._listOfItems.length];
   for (var i=0; i < oldProvisionalRow.cells.length; ++i) {
     var aCell = oldProvisionalRow.cells[i];
     aCell.or_entriesView.noLongerProvisional();
@@ -315,7 +316,7 @@
  */
 TablePlugin.prototype._buildHeader = function() {
   // add header row
-  var headerRow = this.myTable.insertRow(0);
+  var headerRow = this._table.insertRow(0);
   var numCols = 0;
   for (var i=0; i<this._displayAttributes.length; ++i) {
     var attribute = this._displayAttributes[i];
@@ -349,9 +350,9 @@
   }
   
   //create new table, remove old table if already exists
-  View.removeChildrenOfElement(this._myHTMLElement);
-  this.myTable = document.createElement("table");
-  this.myTable.className = this.myClass;
+  View.removeChildrenOfElement(this.getHTMLElement());
+  this._table = document.createElement("table");
+  this._table.className = this._cssClass;
   
   this._buildHeader();
 
@@ -362,7 +363,7 @@
 
   this._buildTableBody();
   
-  this._myHTMLElement.appendChild(this.myTable);
+  this.getHTMLElement().appendChild(this._table);
   
   if (this.isInEditMode()) {this._buildAttributeEditor();}
 };
@@ -405,8 +406,8 @@
  */
 TablePlugin.prototype._insertCell = function(row, col, item, attribute) {
   var aCell = row.insertCell(col);
-  aCell.className = this.myCellClass;
-  var multiEntriesView = new MultiEntriesView(this, aCell, item, attribute, this.myCellClass);
+  aCell.className = this._cellClass;
+  var multiEntriesView = new MultiEntriesView(this, aCell, item, attribute, this._cellClass);
   aCell.or_entriesView = multiEntriesView;
   multiEntriesView.refresh();
   if (this.isInEditMode()) {
@@ -488,7 +489,7 @@
         content += line + java.lang.System.getProperty('line.separator');
       return content;
     }*/
-  open('file://'+fileButton.value,'preview');   
+  window.open('file://'+fileButton.value,'preview');   
 };
 
 /**
@@ -624,7 +625,7 @@
         nextRowNumber = 1;
         userHitReturnInLastRow = true;
       }
-      var nextRow = this.myTable.rows[nextRowNumber];
+      var nextRow = this._table.rows[nextRowNumber];
       this.selectRow(nextRow);
       nextCell = nextRow.cells[cellElement.cellIndex];
     }

Modified: trunk/source/TextView.js
===================================================================
--- trunk/source/TextView.js	2005-07-01 01:31:33 UTC (rev 202)
+++ trunk/source/TextView.js	2005-07-01 02:21:33 UTC (rev 203)
@@ -32,9 +32,12 @@
 
 
 // -------------------------------------------------------------------
-// Dependencies:
-//   repository.js
-//   util.js
+// Dependencies, expressed in the syntax that JSLint understands:
+// 
+/*global document  */
+/*global Util  */
+/*global Item, Entry  */
+/*global AttributeSuggestionBox  */
 // -------------------------------------------------------------------
 
 
@@ -163,10 +166,15 @@
   }
 };
 
+
+/**
+ *
+ */
 TextView.prototype._isLozenge = function() {
   return this._valueIsItem && !this._alwaysUseEditField;
 };
 
+
 /**
  * Re-creates all the HTML for the TextView, and hands the HTML to the 
  * browser to be re-drawn.
@@ -196,10 +204,15 @@
   this._myHasEverBeenDisplayedFlag = true;
 };
 
+
+/**
+ *
+ */
 TextView.prototype._canStartEditing = function() {
   return (!this._isEditing  && !(this._valueIsItem && !this._alwaysUseEditField));
 };
 
+
 /**
  * Switch to edit text field for editing.
  *
@@ -281,6 +294,7 @@
   }
 };
 
+
 /**
  * Given a value, this function uses hints form this item's attribute to transform
  * the value to one more suitable for the model. 
@@ -308,7 +322,7 @@
     var typeCalledDate = repository.getTypeCalledDate();
     var typeCalledNumber = repository.getTypeCalledNumber();
     if (listOfExpectedTypeEntries) {
-      for (i=0; i<listOfExpectedTypeEntries.length; ++i) {
+      for (var i=0; i<listOfExpectedTypeEntries.length; ++i) {
         var aType = listOfExpectedTypeEntries[i].getValue();
         switch (aType) {
           case typeCalledText:
@@ -564,6 +578,7 @@
   }
 };
 
+
 // -------------------------------------------------------------------
 // Suggestion box methods
 // -------------------------------------------------------------------
@@ -572,20 +587,20 @@
  *
  */
 function AttributeSuggestionBox(inHTMLInputField, listOfItems) {
-  this._myInputField = inHTMLInputField;
+  this._inputField = inHTMLInputField;
   this._listOfSuggestedItems = listOfItems.sort(AttributeSuggestionBox._compareItemDisplayNames);
   this._selectedItem = null;
   this._shouldHide = inHTMLInputField.value.length === 0;
   
-  this._myAttributeSuggestionBoxDivElement = document.createElement('div');
-  // this._myAttributeSuggestionBoxDivElement.style.visibility = "hidden";
-  this._myAttributeSuggestionBoxDivElement.style.zIndex = 11;
-  this._myAttributeSuggestionBoxDivElement.style.display = "none";
-  document.body.appendChild(this._myAttributeSuggestionBoxDivElement);
+  this._attributeSuggestionBoxDivElement = document.createElement('div');
+  // this._attributeSuggestionBoxDivElement.style.visibility = "hidden";
+  this._attributeSuggestionBoxDivElement.style.zIndex = 11;
+  this._attributeSuggestionBoxDivElement.style.display = "none";
+  document.body.appendChild(this._attributeSuggestionBoxDivElement);
 
- /* this._myInputField.onkeyup = this._keyPressOnInputField.bindAsEventListener(this);
-  this._myInputField.onfocus = this._focusOnInputField.bindAsEventListener(this);
-  this._myInputField.onblur = this._blurOnInputField.bindAsEventListener(this); */
+ /* this._inputField.onkeyup = this._keyPressOnInputField.bindAsEventListener(this);
+  this._inputField.onfocus = this._focusOnInputField.bindAsEventListener(this);
+  this._inputField.onblur = this._blurOnInputField.bindAsEventListener(this); */
   //this._keyPressOnInputField();
 }
 
@@ -596,7 +611,7 @@
 AttributeSuggestionBox.prototype.getSelectedItem = function () {
   if (!this._selectedItem) {
     // check if typed item is identical to suggested item
-    var editValue = this._myInputField.value;
+    var editValue = this._inputField.value;
     for (var i = 0; i < this._listOfSuggestedItems.length; ++i) {
       var item = this._listOfSuggestedItems[i];
       if (editValue.toLowerCase() == item.getDisplayName().toLowerCase()) {return item;}
@@ -624,7 +639,6 @@
  *
  */
 AttributeSuggestionBox.prototype._focusOnInputField = function (inEventObject) {
-  //this._myInputField.value = "";
   this._redisplayAttributeSuggestionBox();
 };
 
@@ -658,7 +672,7 @@
       }
       break;
       case Util.ASCII_VALUE_FOR_TAB:
-      if (this._myInputField.value.length === 0) {return false;}
+      if (this._inputField.value.length === 0) {return false;}
       if (!this._selectedItem) {
         this._selectedItem = this._listOfMatchingItems[0];
         doSelectItem = true;
@@ -684,7 +698,7 @@
     return true;
   }
   if (doSelectItem) {
-    this._myInputField.value = this._selectedItem.getDisplayString();
+    this._inputField.value = this._selectedItem.getDisplayString();
     this._setShouldHide(true);
   }
   return false;
@@ -704,7 +718,7 @@
  */
 AttributeSuggestionBox.prototype._blurOnInputField = function () {
   // make the suggestion box disappear
-  this._myAttributeSuggestionBoxDivElement.style.display = "none";
+  this._attributeSuggestionBoxDivElement.style.display = "none";
 };
 
 
@@ -724,7 +738,7 @@
   this._shouldHide = shouldHide;
   this._selectedItem = null;
   if (shouldHide) {
-    this._myAttributeSuggestionBoxDivElement.style.display = "none";
+    this._attributeSuggestionBoxDivElement.style.display = "none";
   }
   else {
     this._redisplayAttributeSuggestionBox();
@@ -738,7 +752,7 @@
 AttributeSuggestionBox.prototype._redisplayAttributeSuggestionBox = function () {
   //if (this._shouldHide) {return;} // if SuggestionBox is in hide mode, don't show the box
   
-  var partialInputString = this._myInputField.value;
+  var partialInputString = this._inputField.value;
   var listOfMatchingItems = [];
   var key;
   var item;
@@ -758,9 +772,9 @@
 
   if (this._shouldHide || listOfMatchingItems.length === 0) {
     // make the suggestion box disappear
-    this._myAttributeSuggestionBoxDivElement.style.display = "none";
+    this._attributeSuggestionBoxDivElement.style.display = "none";
   } else {
-    View.removeChildrenOfElement(this._myAttributeSuggestionBoxDivElement);
+    View.removeChildrenOfElement(this._attributeSuggestionBoxDivElement);
     var table = document.createElement('table');
     var rowNumber = 0;
     var columnNumber = 0;
@@ -775,20 +789,20 @@
       cell.onmousedown = this._clickOnSelection.bindAsEventListener(this, item);
       rowNumber += 1;
     }
-    this._myAttributeSuggestionBoxDivElement.appendChild(table);
+    this._attributeSuggestionBoxDivElement.appendChild(table);
 
     // set-up the suggestion box to open just below the input field it comes from
-    var AttributeSuggestionBoxTop = Util.getOffsetTopFromElement(this._myInputField) + this._myInputField.offsetHeight;
-    var AttributeSuggestionBoxLeft = Util.getOffsetLeftFromElement(this._myInputField);
-    this._myAttributeSuggestionBoxDivElement.style.top = AttributeSuggestionBoxTop + "px"; 
-    this._myAttributeSuggestionBoxDivElement.style.left = AttributeSuggestionBoxLeft + "px";
-    // alert(this._myInputField.offsetWidth);
-    this._myAttributeSuggestionBoxDivElement.style.width = (this._myInputField.offsetWidth - 2)+ "px";
+    var AttributeSuggestionBoxTop = Util.getOffsetTopFromElement(this._inputField) + this._inputField.offsetHeight;
+    var AttributeSuggestionBoxLeft = Util.getOffsetLeftFromElement(this._inputField);
+    this._attributeSuggestionBoxDivElement.style.top = AttributeSuggestionBoxTop + "px"; 
+    this._attributeSuggestionBoxDivElement.style.left = AttributeSuggestionBoxLeft + "px";
+    // alert(this._inputField.offsetWidth);
+    this._attributeSuggestionBoxDivElement.style.width = (this._inputField.offsetWidth - 2)+ "px";
 
-    // this._myAttributeSuggestionBoxDivElement.style.zIndex = 11;
-    this._myAttributeSuggestionBoxDivElement.className = "suggestion_box";
-    this._myAttributeSuggestionBoxDivElement.style.visibility = "visible";
-    this._myAttributeSuggestionBoxDivElement.style.display = "block";
+    // this._attributeSuggestionBoxDivElement.style.zIndex = 11;
+    this._attributeSuggestionBoxDivElement.className = "suggestion_box";
+    this._attributeSuggestionBoxDivElement.style.visibility = "visible";
+    this._attributeSuggestionBoxDivElement.style.display = "block";
   }
 };
 

Modified: trunk/source/Util.js
===================================================================
--- trunk/source/Util.js	2005-07-01 01:31:33 UTC (rev 202)
+++ trunk/source/Util.js	2005-07-01 02:21:33 UTC (rev 203)
@@ -34,7 +34,8 @@
 
 // -------------------------------------------------------------------
 // Dependencies, expressed in the syntax that JSLint understands:
-/*global window, document, hex_md5 */
+/*global window, document  */
+/*global hex_md5  */
 // -------------------------------------------------------------------
 
 

Modified: trunk/source/View.js
===================================================================
--- trunk/source/View.js	2005-07-01 01:31:33 UTC (rev 202)
+++ trunk/source/View.js	2005-07-01 02:21:33 UTC (rev 203)
@@ -30,8 +30,10 @@
 
 
 // -------------------------------------------------------------------
-// Dependencies:
-//   Util.js
+// Dependencies, expressed in the syntax that JSLint understands:
+// 
+/*global window, HTMLElement  */
+/*global Util  */
 // -------------------------------------------------------------------
 
 
@@ -42,9 +44,9 @@
  * @syntax   DO NOT CALL THIS CONSTRUCTOR
  */
 function View() {
-  this._mySuperview = null;
-  this._myHTMLElement = null;
-  this._myHasEverBeenDisplayedFlag = false;
+  this._superview = null;
+  this._htmlElement = null;
+  this._myHasEverBeenDisplayedFlag = false; // PENDING: this is accessed directly by subclasses, which is bad
 }
 
 
@@ -57,7 +59,7 @@
 View.prototype.setSuperview = function (inSuperview) {
   // Util.assert(ViewInterface.isImplementedBy(inSuperview));
 
-  this._mySuperview = inSuperview;
+  this._superview = inSuperview;
 };
 
 
@@ -68,7 +70,7 @@
  * @return   A View object. 
  */
 View.prototype.getSuperview = function () {
-  return this._mySuperview;
+  return this._superview;
 };
 
 
@@ -81,7 +83,7 @@
 View.prototype.setHTMLElement = function (inHTMLElement) {
   Util.assert(inHTMLElement instanceof HTMLElement);
 
-  this._myHTMLElement = inHTMLElement;
+  this._htmlElement = inHTMLElement;
 };
 
 
@@ -92,7 +94,7 @@
  * @return   An HTMLElement. 
  */
 View.prototype.getHTMLElement = function () {
-  return this._myHTMLElement;
+  return this._htmlElement;
 };
 
 
@@ -103,7 +105,7 @@
  * @return   A World object. 
  */
 View.prototype.getWorld = function () {
-  return this._mySuperview.getWorld();
+  return this._superview.getWorld();
 };
 
 
@@ -129,7 +131,7 @@
  * @return   A boolean value. True if we are in Edit Mode.
  */
 View.prototype.isInEditMode = function () {
-  return this._mySuperview.isInEditMode();
+  return this._superview.isInEditMode();
 };
 
 
@@ -172,9 +174,9 @@
 
   if (inBoolean) {
     this.refresh();
-    this._myHTMLElement.style.display = "block";
+    this._htmlElement.style.display = "block";
   } else {
-    this._myHTMLElement.style.display = "none";
+    this._htmlElement.style.display = "none";
   }
 };
 



From skinner at sheep.berlios.de  Fri Jul  1 04:28:02 2005
From: skinner at sheep.berlios.de (Brian Douglas Skinner at BerliOS)
Date: Fri, 1 Jul 2005 04:28:02 +0200
Subject: [openrecord-svn] r204 - in trunk/source: . model util
Message-ID: <200507010228.j612S2Ck004571@sheep.berlios.de>

Author: skinner
Date: 2005-07-01 04:27:57 +0200 (Fri, 01 Jul 2005)
New Revision: 204

Added:
   trunk/source/util/LintTool.js
Removed:
   trunk/source/LintTool.js
Modified:
   trunk/source/LintTest.html
   trunk/source/LintTest.js
   trunk/source/model/LintTest.html
   trunk/source/util/LintTest.html
   trunk/source/util/LintTest.js
Log:
Moved LintTool.js down into the new util directory.

Modified: trunk/source/LintTest.html
===================================================================
--- trunk/source/LintTest.html	2005-07-01 02:21:33 UTC (rev 203)
+++ trunk/source/LintTest.html	2005-07-01 02:27:57 UTC (rev 204)
@@ -16,7 +16,7 @@
     <script type="text/javascript" src="../third_party/jsunit/jsunit2_1/app/jsUnitCore.js"></script>
     <script type="text/javascript" src="../third_party/jslint/fulljslint.js"></script>
     <script type="text/javascript" src="Util.js"></script>
-    <script type="text/javascript" src="LintTool.js"></script>
+    <script type="text/javascript" src="util/LintTool.js"></script>
     <script type="text/javascript" src="LintTest.js"></script>
   </head>
   

Modified: trunk/source/LintTest.js
===================================================================
--- trunk/source/LintTest.js	2005-07-01 02:21:33 UTC (rev 203)
+++ trunk/source/LintTest.js	2005-07-01 02:27:57 UTC (rev 204)
@@ -57,7 +57,6 @@
 function testJsLintOnOpenRecordCode() {
   var listOfSourceCodeFiles = [
     "Util.js",
-    "LintTool.js",
     "View.js",
     "RootView.js",
     "ItemView.js",

Deleted: trunk/source/LintTool.js
===================================================================
--- trunk/source/LintTool.js	2005-07-01 02:21:33 UTC (rev 203)
+++ trunk/source/LintTool.js	2005-07-01 02:27:57 UTC (rev 204)
@@ -1,155 +0,0 @@
-/*****************************************************************************
- LintTool.js
- 
-******************************************************************************
- Written in 2005 by Brian Douglas Skinner <brian.skinner at gumption.org>
-  
- Copyright rights relinquished under the Creative Commons  
- Public Domain Dedication:
-    http://creativecommons.org/licenses/publicdomain/
-  
- You can copy freely from this file.  This work may be freely reproduced, 
- distributed, transmitted, used, modified, built upon, or otherwise exploited
- by anyone for any purpose.
-  
- This work is provided on an "AS IS" basis, without warranties or conditions 
- of any kind, either express or implied, including, without limitation, any 
- warranties or conditions of title, non-infringement, merchantability, or 
- fitness for a particular purpose. You are solely responsible for determining 
- the appropriateness of using or distributing the work and assume all risks 
- associated with use of this work, including but not limited to the risks and 
- costs of errors, compliance with applicable laws, damage to or loss of data 
- or equipment, and unavailability or interruption of operations.
-
- In no event shall the authors or contributors have any liability for any 
- direct, indirect, incidental, special, exemplary, or consequential damages,
- however caused and on any theory of liability, whether in contract, strict 
- liability, or tort (including negligence), arising in any way out of or in 
- connection with the use or distribution of the work.
-*****************************************************************************/
- 
-
-// -------------------------------------------------------------------
-// Dependencies, expressed in the syntax that JSLint understands:
-/*global Util, jslint */
-// -------------------------------------------------------------------
-
-/**
- * The LintTool class is just a thin wrapper around Douglas Crockford's
- * JSLint utility.
- *
- * There is no need to ever call this constructor.  All the LintTool
- * methods are class methods, not instance methods, and the only 
- * reason this constructor exists is to cause the name "LintTool"
- * to be a globally-scoped class name, which the class methods 
- * can then be attached to.
- *
- * @scope    public instance constructor
- * @syntax   DO NOT CALL THIS CONSTRUCTOR
- */
-function LintTool() {
-  throw new Error("LintTool is a static class. You can't create instances of it.");
-}
-
-
-// -------------------------------------------------------------------
-// String manipulation methods
-// -------------------------------------------------------------------
-
-/**
- * Given a string containing JavaScript code, returns null if the code passes 
- * the lint tests.
- *
- * @scope    public class method
- * @param    stringContainingCode    A string containing JavaScript code. 
- * @return   Returns an error message string, or returns an empty string if there are no errors (according to jslint).
- */
-LintTool.getErrorReportForCodeInString = function(stringContainingCode) {
-  var errorMessage = "";
-
-  // call jslint, and see if it reported errors
-  jslint.laxLineEnd = false;
-  jslint.plusplus = true;
-  jslint.cap = false;
-  jslint.jscript = false;
-  jslint(stringContainingCode);
-  var report = jslint.report();
-  var jslintIsOkay = (report.substr(0, 2) == 'ok');
-  if (!jslintIsOkay) {
-    errorMessage = report + '\n';
-  }
-  
-  // now check for tabs, backspaces, etc.
-  var noTabs = (stringContainingCode.indexOf("\t") == -1);
-  if (!noTabs) {
-    errorMessage += "There are tab characters in the file." + '\n';
-  }
-  var noBackspaces = (stringContainingCode.indexOf("\b") == -1);
-  if (!noBackspaces) {
-    errorMessage += "There are backspace characters in the file." + '\n';
-  }
-  var noCarriageReturns = (stringContainingCode.indexOf("\r") == -1);
-  if (!noCarriageReturns) {
-    errorMessage += "There are carriage return characters in the file." + '\n';
-  }
-  var noFormFeeds = (stringContainingCode.indexOf("\f") == -1);
-  if (!noCarriageReturns) {
-    errorMessage += "There are carriage return characters in the file." + '\n';
-  }
-  // var allClean = jslintIsOkay && noTabs && noBackspaces && noCarriageReturns && noFormFeeds;
-  return errorMessage;
-}; 
-
-
-/**
- * Given the URL of a file containing JavaScript code, returns null if the code passes 
- * the lint tests.
- *
- * @scope    public class method
- * @param    url    A string with the URL of a file containing JavaScript code. 
- * @return   Returns an error message string, or returns an empty string if there are no errors (according to jslint).
- */
-LintTool.getErrorReportForCodeAtUrl = function(url) {
-  var fileContents = Util.getStringContentsOfFileAtURL(url);
-  return LintTool.getErrorReportForCodeInString(fileContents);
-};
-
-        
-/**
- * Given a list of file names, this method runs lint tests on all the files and 
- * returns null if the code passes the lint tests.
- *
- * @scope    public class method
- * @param    listOfFilenames    A list of filename strings. 
- * @param    path    Optional.  A path prefix string to prepend to the filename strings. 
- * @return   Returns an error message string, or returns an empty string if there are no errors (according to jslint).
- */
-LintTool.getErrorReportFromListOfFilesnames = function(listOfFilenames, path) {
-  Util.assert(Util.isArray(listOfFilenames));
-  if (path) {
-    Util.assert(Util.isString(path));
-  } else {
-    path = "";
-  }
-  
-  var aggregateErrorReport = "";
-  var separatorLine = "_____________________________________" + "\n";
-  for (var key in listOfFilenames) {
-    var filename = listOfFilenames[key];
-    var url = path + filename;
-    var errorReportForFile = LintTool.getErrorReportForCodeAtUrl(url);
-    if (errorReportForFile) {
-      var message = separatorLine + filename + "\n" + errorReportForFile;
-      aggregateErrorReport += message;
-    }
-  }
-  if (aggregateErrorReport) {
-    aggregateErrorReport += separatorLine;
-  }
-  return aggregateErrorReport;
-};
-
-
-// -------------------------------------------------------------------
-// End of file
-// -------------------------------------------------------------------

Modified: trunk/source/model/LintTest.html
===================================================================
--- trunk/source/model/LintTest.html	2005-07-01 02:21:33 UTC (rev 203)
+++ trunk/source/model/LintTest.html	2005-07-01 02:27:57 UTC (rev 204)
@@ -16,7 +16,7 @@
     <script type="text/javascript" src="../../third_party/jsunit/jsunit2_1/app/jsUnitCore.js"></script>
     <script type="text/javascript" src="../../third_party/jslint/fulljslint.js"></script>
     <script type="text/javascript" src="../Util.js"></script>
-    <script type="text/javascript" src="../LintTool.js"></script>
+    <script type="text/javascript" src="../util/LintTool.js"></script>
     <script type="text/javascript" src="LintTest.js"></script>
   </head>
   

Modified: trunk/source/util/LintTest.html
===================================================================
--- trunk/source/util/LintTest.html	2005-07-01 02:21:33 UTC (rev 203)
+++ trunk/source/util/LintTest.html	2005-07-01 02:27:57 UTC (rev 204)
@@ -16,7 +16,7 @@
     <script type="text/javascript" src="../../third_party/jsunit/jsunit2_1/app/jsUnitCore.js"></script>
     <script type="text/javascript" src="../../third_party/jslint/fulljslint.js"></script>
     <script type="text/javascript" src="../Util.js"></script>
-    <script type="text/javascript" src="../LintTool.js"></script>
+    <script type="text/javascript" src="../util/LintTool.js"></script>
     <script type="text/javascript" src="LintTest.js"></script>
   </head>
   

Modified: trunk/source/util/LintTest.js
===================================================================
--- trunk/source/util/LintTest.js	2005-07-01 02:21:33 UTC (rev 203)
+++ trunk/source/util/LintTest.js	2005-07-01 02:27:57 UTC (rev 204)
@@ -39,7 +39,8 @@
 
 function testJsLintOnOpenRecordCode() {
   var listOfSourceCodeFiles = [
-    "Uuid.js"];
+    "Uuid.js",
+    "LintTool.js"];
   var prefix = "../../../source/util/";
   var errorReport = LintTool.getErrorReportFromListOfFilesnames(listOfSourceCodeFiles, prefix);
   var message = "Lint check \n" + errorReport;

Copied: trunk/source/util/LintTool.js (from rev 203, trunk/source/LintTool.js)



From skinner at sheep.berlios.de  Fri Jul  1 04:50:26 2005
From: skinner at sheep.berlios.de (Brian Douglas Skinner at BerliOS)
Date: Fri, 1 Jul 2005 04:50:26 +0200
Subject: [openrecord-svn] r205 - in trunk: . source source/model source/util
Message-ID: <200507010250.j612oQrs010683@sheep.berlios.de>

Author: skinner
Date: 2005-07-01 04:50:23 +0200 (Fri, 01 Jul 2005)
New Revision: 205

Added:
   trunk/source/CodingConventions.js
   trunk/source/util/Cookie.js
   trunk/source/util/TestSuite.html
   trunk/source/util/Util.js
   trunk/source/util/UtilTest.html
   trunk/source/util/UtilTest.js
Removed:
   trunk/source/Cookie.js
   trunk/source/Rectangle.js
   trunk/source/Util.js
   trunk/source/UtilTest.html
   trunk/source/UtilTest.js
Modified:
   trunk/dashboard.html
   trunk/demo_page.html
   trunk/dogfood.html
   trunk/source/LintTest.html
   trunk/source/LintTest.js
   trunk/source/TestSuite.html
   trunk/source/model/LintTest.html
   trunk/source/model/ModelTest.html
   trunk/source/util/LintTest.html
   trunk/source/util/LintTest.js
Log:
Moved Cookie.js and Util.js down into the util directory, and did all the follow-up stuff that that entailed.

Modified: trunk/dashboard.html
===================================================================
--- trunk/dashboard.html	2005-07-01 02:27:57 UTC (rev 204)
+++ trunk/dashboard.html	2005-07-01 02:50:23 UTC (rev 205)
@@ -16,8 +16,8 @@
     <script type="text/javascript" src="third_party/md5/md5.js"></script>
     
     <script type="text/javascript" src="source/util/Uuid.js"></script>
-    <script type="text/javascript" src="source/Util.js"></script>
-    <script type="text/javascript" src="source/Cookie.js"></script>
+    <script type="text/javascript" src="source/util/Util.js"></script>
+    <script type="text/javascript" src="source/util/Cookie.js"></script>
 
     <script type="text/javascript" src="source/View.js"></script>
     <script type="text/javascript" src="source/RootView.js"></script>

Modified: trunk/demo_page.html
===================================================================
--- trunk/demo_page.html	2005-07-01 02:27:57 UTC (rev 204)
+++ trunk/demo_page.html	2005-07-01 02:50:23 UTC (rev 205)
@@ -16,8 +16,8 @@
     <script type="text/javascript" src="third_party/md5/md5.js"></script>
     
     <script type="text/javascript" src="source/util/Uuid.js"></script>
-    <script type="text/javascript" src="source/Util.js"></script>
-    <script type="text/javascript" src="source/Cookie.js"></script>
+    <script type="text/javascript" src="source/util/Util.js"></script>
+    <script type="text/javascript" src="source/util/Cookie.js"></script>
 
     <script type="text/javascript" src="source/View.js"></script>
     <script type="text/javascript" src="source/RootView.js"></script>

Modified: trunk/dogfood.html
===================================================================
--- trunk/dogfood.html	2005-07-01 02:27:57 UTC (rev 204)
+++ trunk/dogfood.html	2005-07-01 02:50:23 UTC (rev 205)
@@ -16,8 +16,8 @@
     <script type="text/javascript" src="third_party/md5/md5.js"></script>
     
     <script type="text/javascript" src="source/util/Uuid.js"></script>
-    <script type="text/javascript" src="source/Util.js"></script>
-    <script type="text/javascript" src="source/Cookie.js"></script>
+    <script type="text/javascript" src="source/util/Util.js"></script>
+    <script type="text/javascript" src="source/util/Cookie.js"></script>
 
     <script type="text/javascript" src="source/View.js"></script>
     <script type="text/javascript" src="source/RootView.js"></script>

Copied: trunk/source/CodingConventions.js (from rev 203, trunk/source/Rectangle.js)

Deleted: trunk/source/Cookie.js
===================================================================
--- trunk/source/Cookie.js	2005-07-01 02:27:57 UTC (rev 204)
+++ trunk/source/Cookie.js	2005-07-01 02:50:23 UTC (rev 205)
@@ -1,145 +0,0 @@
-// -------------------------------------------------------------------
-// Copyright Acknowledgement
-// -------------------------------------------------------------------
-// The code in this file is based on example code from the book:
-//       title: "Javascript: The Definitive Guide", 4th Edition
-//      author: David Flanagan
-//   publisher: O'Reilly Media, Inc.
-//        ISBN: 0-596-00048-0
-// 
-// O'Reilly Media has a written policy that covers re-use of code examples
-// from their books:
-//   http://www.oreilly.com/pub/a/oreilly/ask_tim/2001/codepolicy.html
-// -------------------------------------------------------------------
-
-
-// The constructor function: creates a Cookie object for the specified
-// document, with a specified name and optional attributes.
-// Arguments:
-//   document: The Document object for which the cookie is stored. Required.
-//   name:     A string that specifies a name for the cookie. Required.
-//   hours:    An optional number that specifies the number of hours from now
-//             after which the cookie should expire.
-//   path:     An optional string that specifies the cookie path attribute.
-//   domain:   An optional string that specifies the cookie domain attribute.
-//   secure:   An optional boolean value that, if true, requests a secure cookie.
-//
-function Cookie(document, name, hours, path, domain, secure)
-{
-    // All the predefined properties of this object begin with '$'
-    // to distinguish them from other properties, which are the values to
-    // be stored in the cookie
-    this.$document = document;
-    this.$name = name;
-    if (hours)
-        this.$expiration = new Date((new Date()).getTime(  ) + hours*3600000);
-    else this.$expiration = null;
-    if (path) this.$path = path; else this.$path = null;
-    if (domain) this.$domain = domain; else this.$domain = null;
-    if (secure) this.$secure = true; else this.$secure = false;
-}
-
-// This function is the store(  ) method of the Cookie object
-Cookie.prototype.store = function (  ) {
-    // First, loop through the properties of the Cookie object and
-    // put together the value of the cookie. Since cookies use the
-    // equals sign and semicolons as separators, we'll use colons
-    // and ampersands for the individual state variables we store 
-    // within a single cookie value. Note that we escape the value
-    // of each state variable, in case it contains punctuation or other
-    // illegal characters.
-    var cookieval = "";
-    for(var prop in this) {
-        // Ignore properties with names that begin with '$' and also methods
-        if ((prop.charAt(0) == '$') || ((typeof this[prop]) == 'function') || !this[prop]) 
-            continue;
-        if (cookieval != "") cookieval += '&';
-        cookieval += prop + ':' + escape(this[prop]);
-    }
-
-    // Now that we have the value of the cookie, put together the 
-    // complete cookie string, which includes the name and the various
-    // attributes specified when the Cookie object was created
-    var cookie = this.$name + '=' + cookieval;
-    if (this.$expiration)
-        cookie += '; expires=' + this.$expiration.toGMTString(  );
-    if (this.$path) cookie += '; path=' + this.$path;
-    if (this.$domain) cookie += '; domain=' + this.$domain;
-    if (this.$secure) cookie += '; secure';
-
-    // Now store the cookie by setting the magic Document.cookie property
-    this.$document.cookie = cookie;
-}
-
-// This function is the load(  ) method of the Cookie object
-Cookie.prototype.load = function(  ) { 
-    // First, get a list of all cookies that pertain to this document
-    // We do this by reading the magic Document.cookie property
-    var allcookies = this.$document.cookie;
-    if (allcookies == "") return false;
-
-    // Now extract just the named cookie from that list
-    var start = allcookies.indexOf(this.$name + '=');
-    if (start == -1) return false;   // Cookie not defined for this page
-    start += this.$name.length + 1;  // Skip name and equals sign
-    var end = allcookies.indexOf(';', start);
-    if (end == -1) end = allcookies.length;
-    var cookieval = allcookies.substring(start, end);
-
-    // Now that we've extracted the value of the named cookie, we
-    // must break that value down into individual state variable 
-    // names and values. The name/value pairs are separated from each
-    // other by ampersands, and the individual names and values are
-    // separated from each other by colons. We use the split(  ) method
-    // to parse everything.
-    var a = cookieval.split('&');    // Break it into an array of name/value pairs
-    for(var i=0; i < a.length; i++)  // Break each pair into an array
-        a[i] = a[i].split(':');
-
-    // Now that we've parsed the cookie value, set all the names and values
-    // of the state variables in this Cookie object. Note that we unescape(  )
-    // the property value, because we called escape(  ) when we stored it.
-    for(var i = 0; i < a.length; i++) {
-        this[a[i][0]] = unescape(a[i][1]);
-    }
-
-    // We're done, so return the success code
-    return true;
-}
-
-// This function is the remove(  ) method of the Cookie object
-Cookie.prototype.remove = function(  ) {
-    var cookie;
-    cookie = this.$name + '=';
-    if (this.$path) cookie += '; path=' + this.$path;
-    if (this.$domain) cookie += '; domain=' + this.$domain;
-    cookie += '; expires=Fri, 02-Jan-1970 00:00:00 GMT';
-
-    this.$document.cookie = cookie;
-}
-
-
-// -------------------------------------------------------------------
-// Code below this line was written by Chih-Chao Lam, not David Flanagan...
-// -------------------------------------------------------------------
-
-// -------------------------------------------------------------------
-// Dependencies:
-//   Util.js [pending: will soon when we add error checking]
-// -------------------------------------------------------------------
-
-/* need to turn this into Unit tests
-var testCookieCreation = false;
-var cookieName = "user"
-var userCookie = new Cookie(document, cookieName,10*365*24);
-if (testCookieCreation) {
-  userCookie.username = "chao";
-  userCookie.editMode = true;
-  userCookie.store();
-}
-else {
-  Util.assert(userCookie.load());
-  Util.assert(userCookie.username == "chao");
-  Util.assert(userCookie.editMode == "true");
-}
-*/

Modified: trunk/source/LintTest.html
===================================================================
--- trunk/source/LintTest.html	2005-07-01 02:27:57 UTC (rev 204)
+++ trunk/source/LintTest.html	2005-07-01 02:50:23 UTC (rev 205)
@@ -15,7 +15,7 @@
 
     <script type="text/javascript" src="../third_party/jsunit/jsunit2_1/app/jsUnitCore.js"></script>
     <script type="text/javascript" src="../third_party/jslint/fulljslint.js"></script>
-    <script type="text/javascript" src="Util.js"></script>
+    <script type="text/javascript" src="util/Util.js"></script>
     <script type="text/javascript" src="util/LintTool.js"></script>
     <script type="text/javascript" src="LintTest.js"></script>
   </head>

Modified: trunk/source/LintTest.js
===================================================================
--- trunk/source/LintTest.js	2005-07-01 02:27:57 UTC (rev 204)
+++ trunk/source/LintTest.js	2005-07-01 02:50:23 UTC (rev 205)
@@ -56,7 +56,6 @@
 
 function testJsLintOnOpenRecordCode() {
   var listOfSourceCodeFiles = [
-    "Util.js",
     "View.js",
     "RootView.js",
     "ItemView.js",
@@ -69,8 +68,7 @@
     "TablePlugin.js",
     "OutlinePlugin.js",
     "DetailPlugin.js",
-    "BarChartPlugin.js",
-    "UtilTest.js"];
+    "BarChartPlugin.js"];
   var prefix = "../../../source/";
   var errorReport = LintTool.getErrorReportFromListOfFilesnames(listOfSourceCodeFiles, prefix);
   var message = "Lint check \n" + errorReport;

Deleted: trunk/source/Rectangle.js
===================================================================
--- trunk/source/Rectangle.js	2005-07-01 02:27:57 UTC (rev 204)
+++ trunk/source/Rectangle.js	2005-07-01 02:50:23 UTC (rev 205)
@@ -1,69 +0,0 @@
-// -------------------------------------------------------------------
-// OpenRecord 2005 JavaScript Coding Conventions
-//
-// + jslint approved
-//    + jslint should return "ok" when it looks at the code (with strictest settings)
-//    + do not use "with"
-//    + do not use "new Function"
-//    + use ++i and --i instead of i++ and i-- (prefix instead of postfix)
-// 
-// + naming conventions
-//    + capitalization
-//       + classes are initial caps (CamelCaps): "Rectangle", "FillPattern"
-//       + all variable names and methods names are mixedCaps: "fillPattern"
-//       + acronyms appear in initial caps: "htmlString", not "HTMLString"
-//       + constants are all caps, with underscores: FILL_PATTERN_SOLID
-//    + file names
-//       + each file has just one public class
-//       + file names exactly match the name of the class they contain: "Rectangle.js", "FillPattern.js"
-//       + directories are all lower case, with underscores: "basic_shapes"
-//    + unit tests
-//       + a JavaScript code file typically has two associated unit test files
-//       + the unit test files have the suffix "Test"
-//       + example: Book.js has unit test files BookTest.html and BookTest.js
-//    + variable scoping prefixes
-//       + class variables are prefixed with "our"
-//       + [DEPRECATED: instance variables are prefixed with "my"]
-//       + global variables are prefixed with "window.global"
-//       + locally scoped variables are not prefixed
-//       + non-public variables and methods are prefixed with "_" (use "_" for private, protected, or package)
-//       + [DEPRECATED: function input parameters are prefixed with "in"]
-//       + [DEPRECATED: private variables and methods are prefixed with "__"]
-//       + [DEPRECATED: protected variables and methods are prefixed with "_"]
-//    + class constants are prefixed with the type of the constant -- see LAYOUT_PORTRAIT
-//    + array variables are prefixed with "listOf" or "hashTableOf" or "arrayOf"
-//       + var listOfBooks = []; <-- a "List" has only values, no keys ["Apple", "Orange", "Banana"]
-//       + var hashTableOfBooksKeyedByTitle = {}; <-- a "HashTable" is an associative array with key-value pairs
-//       + var arrayOfBooks = new Array(); <-- an "Array" has values that are indexed by number arrayOfFruit[23] = "Apple"
-//    + accessor methods are prefixed with "get" or "is" -- e.g. oval.getArea(), oval.isCircle()
-//       + any method that returns a value and does not change an object's state should be a "get" or "is" method
-//       + any method that does change an object's state should be a "set" method
-//    + problems are marked with "PENDING"
-//
-// + compatiblity with other browsers and other JavaScript libraries 
-//    + use "get" and "set" accessors -- do *not* assign Mozilla "getter" and "setter" methods
-//    + [DEPRECATED: add methods in your own namespace -- do *not* extend built-in objects: String.prototype.toEsperanto = function ...]
-//
-// + indenting, tabs, and line ending characters
-//    + 2-space indenting
-//    + only spaces, no tabs
-//    + Unix style line endings: just \n -- not \r or \r\n
-//
-// + file header and footer conventions
-//    + file name is given
-//    + copyright and license statements are included
-//    + file dependencies are listed
-//    + sections for: class constants, class properties, constructor, instance methods
-//    + "End of file" ending
-//
-// + scoping
-//    + locally scoped variables are declared before being used: "var foo", not "foo"
-//    + global variables are not used, except for class names
-//    + instance methods are defined on the prototype -- see getArea()
-//    + accessor methods never have side-effects
-//
-// + PENDING
-//    + private instance properties?
-//    + private instance methods?
-//    + class methods?
-// -------------------------------------------------------------------

Modified: trunk/source/TestSuite.html
===================================================================
--- trunk/source/TestSuite.html	2005-07-01 02:27:57 UTC (rev 204)
+++ trunk/source/TestSuite.html	2005-07-01 02:50:23 UTC (rev 205)
@@ -23,10 +23,9 @@
       
       function openRecordTestSuite() {
         var testSuite = new window.top.jsUnitTestSuite();
-        testSuite.addTestPage("../../../source/UtilTest.html");
         testSuite.addTestPage("../../../source/LintTest.html");
         testSuite.addTestPage("../../../source/model/TestSuite.html");
-        testSuite.addTestPage("../../../source/util/LintTest.html");
+        testSuite.addTestPage("../../../source/util/TestSuite.html");
         return testSuite;
       }
     </script>

Deleted: trunk/source/Util.js
===================================================================
--- trunk/source/Util.js	2005-07-01 02:27:57 UTC (rev 204)
+++ trunk/source/Util.js	2005-07-01 02:50:23 UTC (rev 205)
@@ -1,723 +0,0 @@
-/*****************************************************************************
- Util.js
- 
-******************************************************************************
- Written in 2005 by 
-    Brian Douglas Skinner <brian.skinner at gumption.org>
-    Chih-Chao Lam <chao at cs.stanford.edu>
-    Mignon Belongie
-  
- Copyright rights relinquished under the Creative Commons  
- Public Domain Dedication:
-    http://creativecommons.org/licenses/publicdomain/
-  
- You can copy freely from this file.  This work may be freely reproduced, 
- distributed, transmitted, used, modified, built upon, or otherwise exploited
- by anyone for any purpose.
-  
- This work is provided on an "AS IS" basis, without warranties or conditions 
- of any kind, either express or implied, including, without limitation, any 
- warranties or conditions of title, non-infringement, merchantability, or 
- fitness for a particular purpose. You are solely responsible for determining 
- the appropriateness of using or distributing the work and assume all risks 
- associated with use of this work, including but not limited to the risks and 
- costs of errors, compliance with applicable laws, damage to or loss of data 
- or equipment, and unavailability or interruption of operations.
-
- In no event shall the authors or contributors have any liability for any 
- direct, indirect, incidental, special, exemplary, or consequential damages,
- however caused and on any theory of liability, whether in contract, strict 
- liability, or tort (including negligence), arising in any way out of or in 
- connection with the use or distribution of the work.
-*****************************************************************************/
- 
-
-// -------------------------------------------------------------------
-// Dependencies, expressed in the syntax that JSLint understands:
-/*global window, document  */
-/*global hex_md5  */
-// -------------------------------------------------------------------
-
-
-/**
- * The Util class offers general utility methods that might
- * be useful in a wide variety of applications.
- *
- * There is no need to ever call this constructor.  All the Util
- * methods are class methods, not instance methods, and the only 
- * reason this constructor exists is to cause the name "Util"
- * to be a globally-scoped class name, which the class methods 
- * can then be attached to.
- *
- * @scope    public instance constructor
- * @syntax   DO NOT CALL THIS CONSTRUCTOR
- */
-function Util() {
-  throw new Error("Util is a static class. You can't create instances of it.");
-}
-
-
-// -------------------------------------------------------------------
-// Util public class constants
-// -------------------------------------------------------------------
-Util.ASCII_VALUE_FOR_RETURN = 13;
-Util.ASCII_VALUE_FOR_TAB = 9;
-Util.ASCII_VALUE_FOR_ESCAPE = 27;
-// &#37; = %
-// &#38; = &
-// &#39; = '
-// &#40; = (
-Util.ASCII_VALUE_FOR_LEFT_ARROW = 37;  // 123
-Util.ASCII_VALUE_FOR_UP_ARROW = 38;    // 126
-Util.ASCII_VALUE_FOR_RIGHT_ARROW = 39; // 124
-Util.ASCII_VALUE_FOR_DOWN_ARROW = 40;  // 125
-
-Util.ABBREV_MONTHS_ARRAY = new Array("Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec");
-
-
-// -------------------------------------------------------------------
-// String manipulation methods
-// -------------------------------------------------------------------
-
-/**
- * Returns a copy of the input string, cleaned up so that it can be 
- * included in a valid HTML page.
- *
- * Returns a copy of the string, but with the original characters 
- * '<', '>', and '&' all replaced by their HTML entities: "&lt;", 
- * "&gt;", and "&amp;".  Allows strings to displayed on HTML pages.
- *
- * @scope    public class method
- * @syntax   var cleanString = Util.getCleanString(dirtyString);
- * @param    string    A dirty string to be cleaned up.
- * @return   String
- */
-Util.getCleanString = function(string) {
-  Util.assert(Util.isString(string));
-  
-  var returnString = string;
-  returnString = returnString.replace(/&/g, "&amp;");
-  returnString = returnString.replace(/</g, "&lt;");
-  returnString = returnString.replace(/>/g, "&gt;");
-  returnString = returnString.replace(/"/g, "&quot;");
-  returnString = returnString.replace(/\n/g, " ");
-  return returnString;
-};
-
-
-// -------------------------------------------------------------------
-// Assertions and error handling methods
-// -------------------------------------------------------------------
-
-/**
- * Registers a function to be used to report errors.
- *
- * @scope    public class method
- * @param    errorReporterFunction    A function which takes a single string argument. 
- */
-Util.setErrorReportCallback = function(errorReporterFunction) {
-  Util.ourErrorReporter = errorReporterFunction;
-};
-
-
-/**
- * This defaultErrorReporter simply calls "alert" to report errors.
- *
- * @scope    public class method
- * @param    inText    The error message to be reported. 
- */
-Util.defaultErrorReporter = function(text) {
-  window.alert(text);
-};
-Util.ourErrorReporter = Util.defaultErrorReporter;
-
- 
- /**
- * Pops up an alert box showing an error message.
- *
- * @scope    public class method
- * @param    message    A string describing the error.
- * @param    url    A string that gives the name of the file where the error was found.
- * @param    line    The line number where the error was found.
- */
-Util.handleError = function(message, url, line) {
-  Util.ourErrorReporter("Util.handleError()\n" + message + "\nline: " + line + "\nURL: " + url);
-};
-
-
-/**
- * Pops up an alert box if the assertion fails.
- *
- * If the asserted condition is true, this method does nothing. If the condition
- * is false, this method pops up an alert box.  The alert box explains that an
- * assertion failed, and it gives a stack trace showing the file name and line
- * number where the assertion failed.
- *
- * @scope    public class method
- * @param    booleanValue    A boolean value, which needs to be true for the assertion to succeed. 
- * @param    message    Optional. A string describing the assertion.
- */
-Util.assert = function(booleanValue, message) {
-  if (Util.isBoolean(booleanValue)) {
-    if (!booleanValue) {    
-      var exception = new Error();  // create an exception, just to get a stack trace
-      var stackString = exception.stack;
-      var stackList = stackString.split("\n");
-      stackList.shift(); // get rid of the "ReferenceError()@:0" at the start of the list
-      stackList.shift(); // get rid of the "(false)@file ... util.js:67" at the start of the list
-      stackList.pop();   // get rid of the trailing "\n"
-      stackList.pop();   // get rid of the "@:0" at the end of the list
-      for (var key in stackList) {
-        var string = stackList[key];
-        var result = string.match(/[^\/]*$/);
-        stackList[key] = result[0];
-      }
-      stackString = stackList.join("\n");
-
-      Util.ourErrorReporter("An assert statement failed with message: \n" + message + " \nThe method Util.assert() was called with a 'false' value.\nHere's the stack trace, with the line number where the assert statement failed:\n" + (stackString || ""));
-    }
-  } else {
-    Util.ourErrorReporter("An assert statement went sour.\nThe method Util.assert() was passed a non-boolean argument.\nHere's the stack trace, with the line number where the assert statement failed:\n" + (stackString || ""));
-  }
-};
-
-
-/**
- * Registers a function to be used to report status messages to the user.
- *
- * @scope    public class method
- * @param    statusReporterFunction    A function which takes a single string argument. 
- */
-Util.setStatusReporter = function(statusReporterFunction) {
-  Util.ourStatusReporter = statusReporterFunction;
-};
-
-
-/**
- * Reports a status message to the user.
- *
- * @scope    public class method
- * @param    message    A string with a status message.
- */
-Util.displayStatusBlurb = function(message) {
-  Util.ourStatusReporter(message);
-};
-
-
-/**
- * This defaultStatusReporter simply ignores the status report.
- *
- * @scope    public class method
- * @param    text    The status message to be reported. 
- */
-Util.defaultStatusReporter = function(text) {
-  // do nothing!
-};
-Util.ourStatusReporter = Util.defaultStatusReporter;
-
-
-// -------------------------------------------------------------------
-// Type checking methods
-// -------------------------------------------------------------------
-
-/**
- * Returns true if the given value is a function.
- *
- * @scope    public class method
- * @param    value    Any object or literal value. 
- * @return   A boolean value. True if inValue is a function.
- */
-Util.isFunction = function(value) {
-  return ((typeof value) == "function");
-};
-
-
-/**
- * Returns true if the given value is a string.
- *
- * @scope    public class method
- * @param    value    Any object or literal value. 
- * @return   A boolean value. True if inValue is a string.
- */
-Util.isString = function(value) {
-  return ((typeof value) == "string");
-};
-
-
-/**
- * Returns true if the given value is a number (and is finite number).
- *
- * @scope    public class method
- * @param    value    Any object or literal value. 
- * @return   A boolean value. True if inValue is a number.
- */
-Util.isNumber = function(value) {
-  return (((typeof value) == "number") && isFinite(value));
-};
-
-
-/**
- * Returns true if the given value is a number or a string that 
- * represents a number.
- *
- * @scope    public class method
- * @param    value    Any object or literal value. 
- * @return   A boolean value. True if inValue is a number or a string that represents a number.
- */
-Util.isNumeric = function(value) {
-  var isNumber = Util.isNumber(value);
-  if (isNumber) {
-    return true;
-  }
-  var isNumeric = Util.isString(value) && Util.isNumber(parseInt(value));
-  return isNumeric;
-};
-
-
-/**
- * Returns true if the given value is a boolean.
- *
- * @scope    public class method
- * @param    value    Any object or literal value. 
- * @return   A boolean value. True if inValue is a boolean.
- */
-Util.isBoolean = function(value) {
-  return ((typeof value) == "boolean");
-};
-
-
-/**
- * Returns true if the given value is an object.
- *
- * @scope    public class method
- * @param    value    Any object or literal value. 
- * @return   A boolean value. True if inValue is an object.
- */
-Util.isObject = function(value) {
-  return (value && ((typeof value) == "object"));
-};
-
-
-/**
- * Returns true if the given value is a Date.
- *
- * @scope    public class method
- * @param    value    Any object or literal value. 
- * @return   A boolean value. True if inValue is a Date.
- */
-Util.isDate = function(value) {
-  return (value instanceof Date);
-};
-
-
-/**
- * Returns true if the given value is a UUID. Here's an example of
- * a valid UUID: "e3bf3e14-e8f4-43e2-866c-121c5ab70c0b".
- *
- * @scope    public class method
- * @param    value    Any object or literal value. 
- * @return   A boolean value. True if inValue is a UUID.
- */
-Util.isUuid = function(value) {
-  // PENDING: 
-  // We should include more rigorous tests, to make sure this
-  // is really a UUID, not just a string with 36 characters.
-  if ((typeof value) != "string") {
-    return false;
-  }
-  return (value.length == 36);  
-};
-
-
-/**
- * Returns true if the given value is an array.
- *
- * @scope    public class method
- * @param    value    Any object or literal value. 
- * @return   A boolean value. True if inValue is an array.
- */
-Util.isArray = function(value) {
-  if (!value) {
-    return false;
-  }
-  return (((typeof value) == "object") && (value.constructor == Array));
-};
-
-
-/**
- * Returns true if the given value is a hash table.
- *
- * @scope    public class method
- * @param    value    Any object or literal value. 
- * @return   A boolean value. True if inValue is a hash table.
- */
-Util.isHashTable = function(value) {
-  return (value && ((typeof value) == "object"));  // PENDING: we should be more restrictive!
-};
-
-
-// -------------------------------------------------------------------
-// Methods that operate on Arrays
-// -------------------------------------------------------------------
-
-/**
- * Given an element in an array, returns the position of the element in
- * the array.  
- * 
- * @scope    public class method
- * @param    array    The Array to look for the element in. 
- * @param    value    The array element to find the position of. 
- * @return   Returns a number between 0 and array.length, or -1 if the element was not in the array.
- */
-Util.getArrayIndex = function(array, value) {
-  for (var i=0; i<array.length; ++i) {
-    if (array[i] == value) {
-      return i;
-    }
-  }
-  return -1;
-};
-
-
-// -------------------------------------------------------------------
-// Methods that operate on Sets
-// -------------------------------------------------------------------
-
-/**
- * Returns true if the given object is a member of the set.  
- * 
- * @scope    public class method
- * @param    object    The object to look for. 
- * @param    set    The Array to look for the object in. 
- * @return   Returns true if the object was found in the set.
- */
-Util.isObjectInSet = function(object, set) {
-  Util.assert(Util.isArray(set));
-  
-//  for (var i=0; i<set.length; i+=1) {
-//    if (set[i] == object) {
-//      return true;
-//    }
-//  }
-  for (var key in set) {
-    if (set[key] == object) {
-      return true;
-    }
-  }
-  return false;
-};
-
-
-/**
- * Returns true if each of the given objects is a member of the set.  
- * 
- * @scope    public class method
- * @param    array    An array of objects to look for. 
- * @param    set    The Array to look for the objects in. 
- * @return   Returns true if each of the objects was found in the set.
- */
-Util.areObjectsInSet = function(array, set) {
-  Util.assert(Util.isArray(array));
-  Util.assert(Util.isArray(set));
-  
-  for (var key in array) {
-    var object = array[key];
-    var objectIsInSet = Util.isObjectInSet(object, set);
-    if (!objectIsInSet) {
-      return false;
-    }
-  }
-  return true;
-};
-
-
-/**
- * Removes an object from an array.  
- * 
- * @scope    public class method
- * @param    object    The object to be removed. 
- * @param    set    The Array that the object should be removed from. 
- * @return   Returns true if the object was removed from the array.
- */
-Util.removeObjectFromSet = function(object, set) {
-  Util.assert(Util.isArray(set));
-  
-  if (!object) {
-    return false;
-  }
-  for (var i=0; i<set.length; i+=1) {
-    if (set[i] == object) {
-      set.splice(i, 1);
-      return true;
-    }
-  }
-  return false;
-};
-
-
-/**
- * This method is similar to array.push(object), but it will only add the
- * object to the array if the object is not already in the array.  
- * 
- * @scope    public class method
- * @param    object    The object to be added. 
- * @param    set    The Array that the object should be added to. 
- * @return   Returns true if the object was added to the array.
- */
-Util.addObjectToSet = function(object, set) {
-  Util.assert(Util.isArray(set));
-
-  if (!object) {
-    return false;
-  }
-  if (Util.isObjectInSet(object, set)) {
-    return false;
-  }
-  set.push(object);
-  return true;
-};
-
-
-/**
- * Returns the number of values in a hash table. 
- * 
- * @scope    public class method
- * @param    hashTable   A hashTable containing values.
- * @return   The number of values in inHashTable.
- */
-Util.lengthOfHashTable = function(hashTable) {
-  Util.assert(Util.isHashTable(hashTable));
-  var count = 0;
-  for (var key in hashTable) {
-    count += 1;
-  }
-  return count;
-};
-
-
-/**
- * Return the values of a HashTable in the form of an Array
- * Analogous to Python hash.values() 
- * 
- * @scope    public class method
- * @param    hashTable   A hashTable containing values.
- * @return   An array containing the values that are in inHashTable.
- */
-Util.hashTableValues = function(hashTable) {
-  Util.assert(Util.isHashTable(hashTable));
-  var returnArray = [];
-  for (var key in hashTable) {
-    returnArray.push(hashTable[key]);
-  }
-  return returnArray;
-};
-
-
-// -------------------------------------------------------------------
-// Methods that operate on Dates
-// -------------------------------------------------------------------
-
-Util.getStringMonthDayYear = function(date) {
-  var returnString = Util.ABBREV_MONTHS_ARRAY[date.getMonth()] + ' ' + date.getDate() + ', ' + (date.getYear()+1900);
-  return returnString;
-};
-
-
-// -------------------------------------------------------------------
-// Methods for doing encryption
-// -------------------------------------------------------------------
-
-Util.hex_md5 = function(string) {
-  // Calls the hex_md5() function in .../trunk/third_party/md5/md5.js
-  return hex_md5(string);
-};
-
-
-
-// -------------------------------------------------------------------
-// Methods that deal with event handling
-// -------------------------------------------------------------------
-
-/**
- * Given an event object, returns the HTML element that was the 
- * target of the event.  
- * 
- * Should work for IE, Mozilla, and _some_ other browsers.  
- *
- * @scope    public class method
- * @param    eventObject    An event object. 
- * @return   An HTML element.
- */
-Util.getTargetFromEvent = function(eventObject) {
-  var target = null;
-  if (eventObject.target) {
-    target = eventObject.target;
-  } else {
-    if (eventObject.srcElement) {
-      target = eventObject.srcElement;
-    }
-  }
-  if (target && target.nodeType == 3) { // defeat Safari bug
-    target = target.parentNode;
-  }
-  return target;
-};
-
-
-/**
- * A cross-browser compatibility method for registering event listeners. 
- *
- * @scope public class method
- * @param element    An HTMLElement.
- * @param eventType    The type of event (e.g. "mousedown", "click").
- * @param callback    The function to call when the event happens.
- * @param captures    True if the event should be captured by this function.
- */
-Util.addEventListener = function(element, eventType, callback, captures) {
-  if (element.addEventListener) {
-    // for DOM Level 2 browsers, like Firefox
-    element.addEventListener(eventType, callback, captures);
-  } else {
-    if (element.attachEvent) {
-      // for Internet Explorer
-      element.attachEvent("on"+eventType, callback, captures);
-    }
-  } 
-};
-
-
-/**
- * When passing an EventListener (e.g. onclick) a function, it is often useful to
- * 1) have the function be called by an instance of an object
- * 2) have additional arguments passed as parameters to the function
- * 3) some of these additional parameters in (2) are known only when the
- *    EventListener function is bound, not when the function is called
- * This utility function returns  a function that satisfies the above 3 reqs.
- * For more details see, http://www.deepwood.net/writing/method-references.html.utf8
- * However, empirically, arguments is not an array in Firefox and cannot be
- * concat'd with an array, hence the mod.
- */
-Function.prototype.bindAsEventListener = function(object) {
-  var method = this;
-  var preappliedArguments = arguments;
-  return function (event) {
-    var args = [event || window.event];
-    for (var i = 1; i < preappliedArguments.length; ++i) {
-      args.push(preappliedArguments[i]);
-    }
-    method.apply(object, args);
-  };
-};
-
-
-// -------------------------------------------------------------------
-// File I/O methods
-// -------------------------------------------------------------------
-
-/**
- * Given the URL of a file, returns the contents of the file as a text string.
- *
- * @scope    public class method
- * @param    url    A string with the URL of a file containing JavaScript code. 
- * @return   A string containing the contents of the file.
- */
-Util.getStringContentsOfFileAtURL = function(url) {
-  var anXMLHttpRequestObject = new window.XMLHttpRequest();
-  anXMLHttpRequestObject.open("GET", url, false);
-  anXMLHttpRequestObject.send(null);
-  var fileContents = anXMLHttpRequestObject.responseText;
-  return fileContents;
-};
-
-
-// -------------------------------------------------------------------
-// HTML document manipulation
-// -------------------------------------------------------------------
-
-/**
- * Looks at all the anchor links in the document, finds the ones with the 
- * attribute rel="external", and sets the target attribute of those anchor
- * links so that the links will open in a new browser window.  
- * 
- * @scope    public class method
- */
-Util.setTargetsForExternalLinks = function() {
-  if (!window.document.getElementsByTagName) {
-    return;
-  }
-  var listOfAnchorElements = window.document.getElementsByTagName("a");
-  var regExp = new RegExp("\\b" + "external" + "\\b");
-  for (var i=0; i<listOfAnchorElements.length; i+=1) {
-    var anchor = listOfAnchorElements[i];
-    if (anchor.getAttribute("href") && (anchor.getAttribute("rel")) && (anchor.getAttribute("rel").search(regExp) != -1)) {
-      anchor.target = "_blank";
-    }
-  }
-};
-
-
-/**
- * Given the filename of an image, returns an HTML img element.
- * 
- * @scope    public class method
- * @return   An HTML "img" element.
- */
-Util.createImageElement = function(imageFileName) {
-  var imagesDirectory = "images/"; // PENDING: this shouldn't be hard-coded in Util
-  var imageElement = document.createElement("img");
-  imageElement.src = imagesDirectory + imageFileName;
-  return imageElement;
-};
-
-
-/**
- * Given an HTML element, find the real left offset for the element,  
- * meaning the distance in pixels from the left edge of the page.
- *
- * @scope    public class method
- * @param    htmlElement    The HTML element that we want the left offest of. 
- * @return   An integer value equal to the number of pixels from the left of the page to htmlElement.
- */
-Util.getOffsetLeftFromElement = function(htmlElement) {
-  var cumulativeOffset = 0;
-  if (htmlElement.offsetParent) {
-    while (htmlElement.offsetParent) {
-      cumulativeOffset += htmlElement.offsetLeft;
-      htmlElement = htmlElement.offsetParent;
-    }
-  } else {
-    if (htmlElement.x) {
-      cumulativeOffset += htmlElement.x;
-    }
-  }
-  return cumulativeOffset;
-};
-
-
-/**
- * Given an HTML element, find the real top offset for the element,  
- * meaning the distance in pixels from the top edge of the page.
- *
- * @scope    public class method
- * @param    htmlElement    The HTML element that we want the top offest of. 
- * @return   An integer value equal to the number of pixels from the top of the page to htmlElement.
- */
-Util.getOffsetTopFromElement = function(htmlElement) {
-  var cumulativeOffset = 0;
-  if (htmlElement.offsetParent) {
-    while (htmlElement.offsetParent) {
-      cumulativeOffset += htmlElement.offsetTop;
-      htmlElement = htmlElement.offsetParent;
-    }
-  } else {
-    if (htmlElement.y) {
-      cumulativeOffset += htmlElement.y;
-    }
-  }
-  return cumulativeOffset;
-};
-
-
-// -------------------------------------------------------------------
-// End of file
-// -------------------------------------------------------------------

Deleted: trunk/source/UtilTest.html
===================================================================
--- trunk/source/UtilTest.html	2005-07-01 02:27:57 UTC (rev 204)
+++ trunk/source/UtilTest.html	2005-07-01 02:50:23 UTC (rev 205)
@@ -1,86 +0,0 @@
-<?xml version="1.0" encoding="UTF-8"?>
-<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
-<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" >
-
-<!-- 
- Written in 2005 by Brian Douglas Skinner <brian.skinner at gumption.org>
-  
- Copyright rights relinquished under the Creative Commons  
- Public Domain Dedication:
-    http://creativecommons.org/licenses/publicdomain/
--->
-
-  <head>
-    <title>Unit tests for Util.js</title>
-
-    <script type="text/javascript" src="../third_party/jsunit/jsunit2_1/app/jsUnitCore.js"></script>
-    <script type="text/javascript" src="../third_party/md5/md5.js"></script>
-    <script type="text/javascript" src="Util.js"></script>
-    <script type="text/javascript" src="util/Uuid.js"></script>
-    <script type="text/javascript" src="UtilTest.js"></script>
-  </head>
-  
-  <body>
-    <h1>Unit tests for Util.js</h1>
-
-    <p>This page is used to run unit tests for the JavaScript code in the 
-    OpenRecord project.</p>
-    
-    <p>&nbsp;</p>
-    <hr/>
-    <p>To see the tests, open this .html file in a text editor. Or, within a  
-    web browser, you should be able see the source for this file by using 
-    some menu like <b>View</b> followed by <b>Page Source</b>. The tests 
-    may be in this file, or they may be in a separate file that has the
-    same name as this one, except with a .js extension instead of a .html
-    extension.</p>
- 
-    <p>The unit tests are set up to run in the
-    <a href="http://www.edwardh.com/jsunit/" rel="external">JsUnit framework</a>
-    written by 
-    <a href="http://www.edwardh.com/" rel="external">Edward Hieatt</a>. </p>
-
-    <p>If you're looking at this page across an "http://" connection, rather
-    than having loaded it as a "file:///", then you may be able to run the
-    unit tests. The web server that served you this page may also have a
-    JsUnit testRunner available. If so, you should be able to run these unit
-    tests by going to
-    <a href="../third_party/jsunit/jsunit2_1/testRunner.html?testpage=" 
-    onclick="href+=window.location.href;" rel="external">the local testRunner 
-    page</a>, and hitting the <b>Run</b> button.</p>
-
-    <p>You can also run these unit tests on your local computer. To do that you 
-    first need to download <a href="http://www.edwardh.com/jsunit/" 
-    rel="external">JsUnit</a>.</p>
-    
-    <p>&nbsp;</p>
-    <hr/>
-    <p class="copyright">You can copy freely from this work &mdash; copyright 
-    rights relinquished under the Creative Commons  
-    <a rel="license external" 
-    href="http://creativecommons.org/licenses/publicdomain/">Public Domain 
-    Dedication</a>.</p>
-
-<!-- Creative Commons metadata for Public Domain License 
-
-<rdf:RDF xmlns="http://web.resource.org/cc/"
-    xmlns:dc="http://purl.org/dc/elements/1.1/"
-    xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
-<Work rdf:about="">
-   <dc:title>openrecord.org</dc:title>
-   <dc:type rdf:resource="http://purl.org/dc/dcmitype/Text" />
-   <license rdf:resource="http://web.resource.org/cc/PublicDomain" />
-</Work>
-
-<License rdf:about="http://web.resource.org/cc/PublicDomain">
-   <permits rdf:resource="http://web.resource.org/cc/Reproduction" />
-   <permits rdf:resource="http://web.resource.org/cc/Distribution" />
-   <permits rdf:resource="http://web.resource.org/cc/DerivativeWorks" />
-</License>
-
-</rdf:RDF>
-
--->
-  </body>
-</html>
-

Deleted: trunk/source/UtilTest.js
===================================================================
--- trunk/source/UtilTest.js	2005-07-01 02:27:57 UTC (rev 204)
+++ trunk/source/UtilTest.js	2005-07-01 02:50:23 UTC (rev 205)
@@ -1,295 +0,0 @@
-/*****************************************************************************
- UtilTest.js
- 
-******************************************************************************
- Written in 2005 by 
-    Brian Douglas Skinner <brian.skinner at gumption.org>
-    Mignon Belongie
-  
- Copyright rights relinquished under the Creative Commons  
- Public Domain Dedication:
-    http://creativecommons.org/licenses/publicdomain/
-  
- You can copy freely from this file.  This work may be freely reproduced, 
- distributed, transmitted, used, modified, built upon, or otherwise exploited
- by anyone for any purpose.
-  
- This work is provided on an "AS IS" basis, without warranties or conditions 
- of any kind, either express or implied, including, without limitation, any 
- warranties or conditions of title, non-infringement, merchantability, or 
- fitness for a particular purpose. You are solely responsible for determining 
- the appropriateness of using or distributing the work and assume all risks 
- associated with use of this work, including but not limited to the risks and 
- costs of errors, compliance with applicable laws, damage to or loss of data 
- or equipment, and unavailability or interruption of operations.
-
- In no event shall the authors or contributors have any liability for any 
- direct, indirect, incidental, special, exemplary, or consequential damages,
- however caused and on any theory of liability, whether in contract, strict 
- liability, or tort (including negligence), arising in any way out of or in 
- connection with the use or distribution of the work.
-*****************************************************************************/
- 
-var UtilTestVars = null;
-
-function setUp() {
-  UtilTestVars = {};
-  UtilTestVars.theHobbit = "The Hobbit";
-}
-
-function testSimplestCase() {
-  assertTrue("This is true", true);
-}
-
-function testTypeCheckingMethods() {
-  assertTrue('"The Hobbit" is a string', Util.isString("The Hobbit"));
-  assertFalse('"The Hobbit" is not a number', Util.isNumber("The Hobbit"));
-  assertFalse('"The Hobbit" is not numeric', Util.isNumeric("The Hobbit"));
-  assertFalse('"The Hobbit" is not a boolean', Util.isBoolean("The Hobbit"));
-  assertFalse('"The Hobbit" is not an object', Util.isObject("The Hobbit"));
-  assertFalse('"The Hobbit" is not an array', Util.isArray("The Hobbit"));
-  assertFalse('"The Hobbit" is not a hash table', Util.isHashTable("The Hobbit"));
-}
-
-function testMethodsThatOperateOnSets() {
-  var aTinySet = [];
-  var theHobbit = UtilTestVars.theHobbit;
-  assertFalse('"The Hobbit" is not in an empty set', Util.isObjectInSet(theHobbit, aTinySet));
-  assertTrue('"The Hobbit" can be added to an empty set', Util.addObjectToSet(theHobbit, aTinySet));
-  assertTrue('"The Hobbit" is in the set after being added', Util.isObjectInSet(theHobbit, aTinySet));
-  assertTrue('"The Hobbit" can be removed from a set it is in', Util.removeObjectFromSet(theHobbit, aTinySet));
-  assertFalse('"The Hobbit" is no longer in a set it was removed from', Util.isObjectInSet(theHobbit, aTinySet));
-  assertFalse('"The Hobbit" can not be removed twice', Util.removeObjectFromSet(theHobbit, aTinySet));
-
-  var setNumber2 = [123, "456", 78.9, new Date(), theHobbit];
-  assertTrue('"The Hobbit" is in setNumber2', Util.isObjectInSet(theHobbit, setNumber2));
-  assertTrue('78.9 is in setNumber2', Util.isObjectInSet(78.9, setNumber2));
-  assertTrue('78.9 and "The Hobbit" is in setNumber2', Util.areObjectsInSet([78.9, theHobbit], setNumber2));
-  assertTrue('All members of setNumber2 are in setNumber2', Util.areObjectsInSet(setNumber2, setNumber2));
-  
-}
-
-function testEncryptionMethods() {
-  var longString = "When in the course of human events: d41d8cd98f00b204e9800998ecf8427e";
-  assertTrue('md5 of "" is correct', (Util.hex_md5("") == "d41d8cd98f00b204e9800998ecf8427e"));
-  assertTrue('md5 of "iggy" is correct', (Util.hex_md5("iggy") == "0e026f55a72c0861a93e750c2a5427b1"));
-  assertTrue('md5 of longString is correct', (Util.hex_md5(longString) == "4d694e03af399831c6f0c1f1bcc2fc93"));
-}
-
-function testGet64bitArrayFromFloat() {
-  var x = Math.pow(2, 63) + Math.pow(2, 15);
-  var result = Uuid._get64bitArrayFromFloat(x);
-  assertTrue("result[0] == 0x8000", result[0] === 0x8000);
-  assertTrue("result[1] == 0x0000", result[1] === 0x0000);
-  assertTrue("result[2] == 0x0000", result[2] === 0x0000);
-  assertTrue("result[3] == 0x8000", result[3] === 0x8000);
-  
-  var date = new Date();
-  x = date.valueOf();
-  result = Uuid._get64bitArrayFromFloat(x);
-  var reconstructedFloat = result[0];
-  reconstructedFloat *= 0x10000;
-  reconstructedFloat += result[1];
-  reconstructedFloat *= 0x10000;
-  reconstructedFloat += result[2];
-  reconstructedFloat *= 0x10000;
-  reconstructedFloat += result[3];
-  
-  assertTrue("reconstructedFloat === x", reconstructedFloat === x);
-}
-
-function testAddTwo64bitArrays() {
-  var a = [0x0000, 0x0000, 0x0000, 0x0001];
-  var b = [0x0FFF, 0xFFFF, 0xFFFF, 0xFFFF];
-  var result = Uuid._addTwo64bitArrays(a, b);
-  assert(result[0] === 0x1000);
-  assert(result[1] === 0x0000);
-  assert(result[2] === 0x0000);
-  assert(result[3] === 0x0000);
-  
-  a = [0x4000, 0x8000, 0x8000, 0x8000];
-  b = [0x8000, 0x8000, 0x8000, 0x8000];
-  result = Uuid._addTwo64bitArrays(a, b);
-  assert(result[0] === 0xC001);
-  assert(result[1] === 0x0001);
-  assert(result[2] === 0x0001);
-  assert(result[3] === 0x0000);
-  
-  a = [7, 6, 2, 5];
-  b = [1, 0, 3, 4];
-  result = Uuid._addTwo64bitArrays(a, b);
-  assert(result[0] === 8);
-  assert(result[1] === 6);
-  assert(result[2] === 5);
-  assert(result[3] === 9);  
-}  
-
-function testMultiplyTwo64bitArrays() {
-  var a = [     0, 0x0000, 0x0000, 0x0003];
-  var b = [0x1111, 0x1234, 0x0000, 0xFFFF];
-  var result = Uuid._multiplyTwo64bitArrays(a, b);
-  assert(result[0] === 0x3333);
-  assert(result[1] === 0x369C);
-  assert(result[2] === 0x0002);
-  assert(result[3] === 0xFFFD);
-  
-  a = [0, 0, 0, 5];
-  b = [0, 0, 0, 4];
-  result = Uuid._multiplyTwo64bitArrays(a, b);
-  assert(result[0] === 0);
-  assert(result[1] === 0);
-  assert(result[2] === 0);
-  assert(result[3] === 20);  
-  
-  a = [0, 0, 2, 5];
-  b = [0, 0, 3, 4];
-  result = Uuid._multiplyTwo64bitArrays(a, b);
-  assert(result[0] === 0);
-  assert(result[1] === 6);
-  assert(result[2] === 23);
-  assert(result[3] === 20);  
-}  
-
-function subtestOnUuid(uuid) {
-  assertTrue('UUIDs have 36 characters', (uuid.length == 36));
-
-  var validCharacters = "0123456789abcedfABCDEF-";
-  var character;
-  var position;
-  for (var i = 0; i < 36; ++i) {
-    character = uuid.charAt(i);
-    position = validCharacters.indexOf(character);
-    assertTrue('UUIDs have only valid characters', (position != -1));
-  }
-  
-  var arrayOfParts = uuid.split("-");
-  assertTrue('UUIDs have 5 sections separated by 4 hyphens', (arrayOfParts.length == 5));
-  assertTrue('Section 0 has 8 characters', (arrayOfParts[0].length == 8));
-  assertTrue('Section 1 has 4 characters', (arrayOfParts[1].length == 4));
-  assertTrue('Section 2 has 4 characters', (arrayOfParts[2].length == 4));
-  assertTrue('Section 3 has 4 characters', (arrayOfParts[3].length == 4));
-  assertTrue('Section 4 has 8 characters', (arrayOfParts[4].length == 12));
-  
-  var section3 = arrayOfParts[3];
-  var hex3 = parseInt(section3, Uuid.HEX_RADIX);
-  var binaryString = hex3.toString(2);
-  // alert("section3 = " + section3 + "\n binaryString = " + binaryString);
-  assertTrue('section 3 has 16 bits', binaryString.length == 16);
-  assertTrue("first bit of section 3 is 1", binaryString.charAt(0) == '1');
-  assertTrue("second bit of section 3 is 0", binaryString.charAt(1) == '0');
-  
-}
-
-function testMethodsForWorkingWithRandomUuids() {
-  var uuid1 = Uuid.generateRandomUuid();
-  var uuid2 = Uuid.generateRandomUuid();
-  // alert(uuid1 + "\n" + uuid2);
-  subtestOnUuid(uuid1);
-  subtestOnUuid(uuid2);
-  
-  var arrayOfParts = uuid1.split("-");
-  var section2 = arrayOfParts[2];
-  assertTrue('Section 2 starts with a 4', (section2.charAt(0) == "4"));
-  
-  assertTrue("uuid1 != uuid2", uuid1 != uuid2);
-}
-
-function testMethodsForWorkingWithTimeBasedUuids() {
-  var uuid1 = Uuid.generateTimeBasedUuid();
-  var uuid2 = Uuid.generateTimeBasedUuid();
-  var uuid3 = Uuid.generateTimeBasedUuid();
-  
-  subtestOnUuid(uuid1);
-  subtestOnUuid(uuid2);
-  subtestOnUuid(uuid3);
-
-  assertTrue("uuid1 != uuid2", uuid1 != uuid2);
-  assertTrue("uuid2 != uuid3", uuid1 != uuid2);
-  
-  var arrayOfParts = uuid1.split("-");
-  var section2 = arrayOfParts[2];
-  assertTrue('Section 2 starts with a 1', (section2.charAt(0) == "1"));  
-
-  var section4 = arrayOfParts[4];
-  var firstChar = section4.charAt(0);
-  var hexFirstChar = parseInt(firstChar, Uuid.HEX_RADIX);
-  binaryString = hexFirstChar.toString(2);
-  var firstBit;
-  if (binaryString.length == 4) {
-    firstBit = binaryString.charAt(0);
-  } else {
-    firstBit = '0';
-  }
-  // alert("firstChar = " + firstChar + "\n as number = " + hexFirstChar + 
-  //      "\n in binary = " + binaryString + "\n first bit = " + firstBit);
-  assertTrue("first bit of section 4 is 1", firstBit == '1');
-
-  var uuid4 = Uuid.generateTimeBasedUuid("123456789ABC");
-  subtestOnUuid(uuid4);
-  arrayOfParts = uuid4.split("-");
-  section4 = arrayOfParts[4];
-  assertTrue('Section 4 = pseudoNode input', section4 == "123456789ABC");
-
-  /* 
-  // Old code that Brian wrote to try to get a sense of how
-  // many UUIDs we can create in a single millisecond 
-  var array = [];
-  var now = new Date();
-  var then = new Date();
-  while (now.valueOf() == then.valueOf()) {
-    then = new Date();
-  }
-  array.push(Uuid.generateTimeBasedUuid());
-  array.push(Uuid.generateTimeBasedUuid());
-  array.push(Uuid.generateTimeBasedUuid());
-  array.push(Uuid.generateTimeBasedUuid());
-  array.push(Uuid.generateTimeBasedUuid());
-  array.push(Uuid.generateTimeBasedUuid());
-  array.push(Uuid.generateTimeBasedUuid());
-  array.push(Uuid.generateTimeBasedUuid());
-  array.push(Uuid.generateTimeBasedUuid());
-  array.push(Uuid.generateTimeBasedUuid());
-  array.push(Uuid.generateTimeBasedUuid());
-  array.push(Uuid.generateTimeBasedUuid());
-  array.push(Uuid.generateTimeBasedUuid());
-  array.push(Uuid.generateTimeBasedUuid());
-  array.push(Uuid.generateTimeBasedUuid());
-  array.push(Uuid.generateTimeBasedUuid());
-  array.push(Uuid.generateTimeBasedUuid());
-  array.push(Uuid.generateTimeBasedUuid());
-  array.push(Uuid.generateTimeBasedUuid());
-  array.push(Uuid.generateTimeBasedUuid());
-  array.push(Uuid.generateTimeBasedUuid());
-  array.push(Uuid.generateTimeBasedUuid());
-  array.push(Uuid.generateTimeBasedUuid());
-  array.push(Uuid.generateTimeBasedUuid());
-  alert(array[0] + "\n" + 
-        array[1] + "\n" + 
-        array[2] + "\n" + 
-        array[3] + "\n" + 
-        array[4] + "\n" + 
-        array[5] + "\n" + 
-        array[6] + "\n" + 
-        array[7] + "\n" + 
-        array[8] + "\n" + 
-        array[9] + "\n" + 
-        array[10] + "\n" + 
-        array[11] + "\n" + 
-        array[12] + "\n" + 
-        array[13] + "\n" + 
-        array[14] + "\n" + 
-        array[15] + "\n" + 
-        array[16] + "\n" + 
-        array[17] + "\n" + 
-        array[18] + "\n" + 
-        array[19] + "\n");
-  */
-}
-
-function tearDown() {
-  test = null;
-}
-
-// -------------------------------------------------------------------
-// End of file
-// -------------------------------------------------------------------

Modified: trunk/source/model/LintTest.html
===================================================================
--- trunk/source/model/LintTest.html	2005-07-01 02:27:57 UTC (rev 204)
+++ trunk/source/model/LintTest.html	2005-07-01 02:50:23 UTC (rev 205)
@@ -15,7 +15,7 @@
 
     <script type="text/javascript" src="../../third_party/jsunit/jsunit2_1/app/jsUnitCore.js"></script>
     <script type="text/javascript" src="../../third_party/jslint/fulljslint.js"></script>
-    <script type="text/javascript" src="../Util.js"></script>
+    <script type="text/javascript" src="../util/Util.js"></script>
     <script type="text/javascript" src="../util/LintTool.js"></script>
     <script type="text/javascript" src="LintTest.js"></script>
   </head>

Modified: trunk/source/model/ModelTest.html
===================================================================
--- trunk/source/model/ModelTest.html	2005-07-01 02:27:57 UTC (rev 204)
+++ trunk/source/model/ModelTest.html	2005-07-01 02:50:23 UTC (rev 205)
@@ -15,7 +15,7 @@
 
     <script type="text/javascript" src="../../third_party/jsunit/jsunit2_1/app/jsUnitCore.js"></script>
     <script type="text/javascript" src="../../third_party/md5/md5.js"></script>
-    <script type="text/javascript" src="../Util.js"></script>
+    <script type="text/javascript" src="../util/Util.js"></script>
     <script type="text/javascript" src="../util/Uuid.js"></script>
     <script type="text/javascript" src="Record.js"></script>
     <script type="text/javascript" src="Ordinal.js"></script>

Copied: trunk/source/util/Cookie.js (from rev 200, trunk/source/Cookie.js)

Modified: trunk/source/util/LintTest.html
===================================================================
--- trunk/source/util/LintTest.html	2005-07-01 02:27:57 UTC (rev 204)
+++ trunk/source/util/LintTest.html	2005-07-01 02:50:23 UTC (rev 205)
@@ -15,7 +15,7 @@
 
     <script type="text/javascript" src="../../third_party/jsunit/jsunit2_1/app/jsUnitCore.js"></script>
     <script type="text/javascript" src="../../third_party/jslint/fulljslint.js"></script>
-    <script type="text/javascript" src="../Util.js"></script>
+    <script type="text/javascript" src="../util/Util.js"></script>
     <script type="text/javascript" src="../util/LintTool.js"></script>
     <script type="text/javascript" src="LintTest.js"></script>
   </head>

Modified: trunk/source/util/LintTest.js
===================================================================
--- trunk/source/util/LintTest.js	2005-07-01 02:27:57 UTC (rev 204)
+++ trunk/source/util/LintTest.js	2005-07-01 02:50:23 UTC (rev 205)
@@ -39,6 +39,8 @@
 
 function testJsLintOnOpenRecordCode() {
   var listOfSourceCodeFiles = [
+    "Util.js",
+    "UtilTest.js",
     "Uuid.js",
     "LintTool.js"];
   var prefix = "../../../source/util/";

Added: trunk/source/util/TestSuite.html
===================================================================
--- trunk/source/util/TestSuite.html	2005-07-01 02:27:57 UTC (rev 204)
+++ trunk/source/util/TestSuite.html	2005-07-01 02:50:23 UTC (rev 205)
@@ -0,0 +1,96 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
+<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" >
+
+<!-- 
+ Written in 2005 by Brian Douglas Skinner <brian.skinner at gumption.org>
+  
+ Copyright rights relinquished under the Creative Commons  
+ Public Domain Dedication:
+    http://creativecommons.org/licenses/publicdomain/
+-->
+
+  <head>
+    <title>Util Test Suite</title>
+
+    <script type="text/javascript" src="../../third_party/jsunit/jsunit2_1/app/jsUnitCore.js"></script>
+    <script type="text/javascript">
+      function suite() {
+        var testSuite = new window.top.jsUnitTestSuite();
+        testSuite.addTestSuite(utilTestSuite());
+        return testSuite;
+      }
+      
+      function utilTestSuite() {
+        var testSuite = new window.top.jsUnitTestSuite();
+        testSuite.addTestPage("../../../source/util/UtilTest.html");
+        testSuite.addTestPage("../../../source/util/LintTest.html");
+        return testSuite;
+      }
+    </script>
+  </head>
+  
+  <body>
+    <h1>Util Test Suite</h1>
+
+    <p>This page is used to run unit tests for the JavaScript code in the 
+    OpenRecord project.</p>
+    
+    <p>&nbsp;</p>
+    <hr/>
+    <p>To see the tests, open this .html file in a text editor. Or, within a  
+    web browser, you should be able see the source for this file by using 
+    some menu like <b>View</b> followed by <b>Page Source</b>. The tests 
+    may be in this file, or they may be in a separate file that has the
+    same name as this one, except with a .js extension instead of a .html
+    extension.</p>
+ 
+    <p>The unit tests are set up to run in the
+    <a href="http://www.edwardh.com/jsunit/" rel="external">JsUnit framework</a>
+    written by 
+    <a href="http://www.edwardh.com/" rel="external">Edward Hieatt</a>. </p>
+
+    <p>If you're looking at this page across an "http://" connection, rather
+    than having loaded it as a "file:///", then you may be able to run the
+    unit tests. The web server that served you this page may also have a
+    JsUnit testRunner available. If so, you should be able to run these unit
+    tests by going to
+    <a href="../../third_party/jsunit/jsunit2_1/testRunner.html?testpage=" 
+    onclick="href+=window.location.href;" rel="external">the local testRunner 
+    page</a>, and hitting the <b>Run</b> button.</p>
+
+    <p>You can also run these unit tests on your local computer. To do that you 
+    first need to download <a href="http://www.edwardh.com/jsunit/" 
+    rel="external">JsUnit</a>.</p>
+    
+    <p>&nbsp;</p>
+    <hr/>
+    <p class="copyright">You can copy freely from this work &mdash; copyright 
+    rights relinquished under the Creative Commons  
+    <a rel="license external" 
+    href="http://creativecommons.org/licenses/publicdomain/">Public Domain 
+    Dedication</a>.</p>
+
+<!-- Creative Commons metadata for Public Domain License 
+
+<rdf:RDF xmlns="http://web.resource.org/cc/"
+    xmlns:dc="http://purl.org/dc/elements/1.1/"
+    xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
+<Work rdf:about="">
+   <dc:title>openrecord.org</dc:title>
+   <dc:type rdf:resource="http://purl.org/dc/dcmitype/Text" />
+   <license rdf:resource="http://web.resource.org/cc/PublicDomain" />
+</Work>
+
+<License rdf:about="http://web.resource.org/cc/PublicDomain">
+   <permits rdf:resource="http://web.resource.org/cc/Reproduction" />
+   <permits rdf:resource="http://web.resource.org/cc/Distribution" />
+   <permits rdf:resource="http://web.resource.org/cc/DerivativeWorks" />
+</License>
+
+</rdf:RDF>
+
+-->
+  </body>
+</html>
+

Copied: trunk/source/util/Util.js (from rev 203, trunk/source/Util.js)

Copied: trunk/source/util/UtilTest.html (from rev 201, trunk/source/UtilTest.html)
===================================================================
--- trunk/source/UtilTest.html	2005-06-30 22:14:03 UTC (rev 201)
+++ trunk/source/util/UtilTest.html	2005-07-01 02:50:23 UTC (rev 205)
@@ -0,0 +1,86 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
+<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" >
+
+<!-- 
+ Written in 2005 by Brian Douglas Skinner <brian.skinner at gumption.org>
+  
+ Copyright rights relinquished under the Creative Commons  
+ Public Domain Dedication:
+    http://creativecommons.org/licenses/publicdomain/
+-->
+
+  <head>
+    <title>Unit tests for Util.js</title>
+
+    <script type="text/javascript" src="../../third_party/jsunit/jsunit2_1/app/jsUnitCore.js"></script>
+    <script type="text/javascript" src="../../third_party/md5/md5.js"></script>
+    <script type="text/javascript" src="Util.js"></script>
+    <script type="text/javascript" src="Uuid.js"></script>
+    <script type="text/javascript" src="UtilTest.js"></script>
+  </head>
+  
+  <body>
+    <h1>Unit tests for Util.js</h1>
+
+    <p>This page is used to run unit tests for the JavaScript code in the 
+    OpenRecord project.</p>
+    
+    <p>&nbsp;</p>
+    <hr/>
+    <p>To see the tests, open this .html file in a text editor. Or, within a  
+    web browser, you should be able see the source for this file by using 
+    some menu like <b>View</b> followed by <b>Page Source</b>. The tests 
+    may be in this file, or they may be in a separate file that has the
+    same name as this one, except with a .js extension instead of a .html
+    extension.</p>
+ 
+    <p>The unit tests are set up to run in the
+    <a href="http://www.edwardh.com/jsunit/" rel="external">JsUnit framework</a>
+    written by 
+    <a href="http://www.edwardh.com/" rel="external">Edward Hieatt</a>. </p>
+
+    <p>If you're looking at this page across an "http://" connection, rather
+    than having loaded it as a "file:///", then you may be able to run the
+    unit tests. The web server that served you this page may also have a
+    JsUnit testRunner available. If so, you should be able to run these unit
+    tests by going to
+    <a href="../../third_party/jsunit/jsunit2_1/testRunner.html?testpage=" 
+    onclick="href+=window.location.href;" rel="external">the local testRunner 
+    page</a>, and hitting the <b>Run</b> button.</p>
+
+    <p>You can also run these unit tests on your local computer. To do that you 
+    first need to download <a href="http://www.edwardh.com/jsunit/" 
+    rel="external">JsUnit</a>.</p>
+    
+    <p>&nbsp;</p>
+    <hr/>
+    <p class="copyright">You can copy freely from this work &mdash; copyright 
+    rights relinquished under the Creative Commons  
+    <a rel="license external" 
+    href="http://creativecommons.org/licenses/publicdomain/">Public Domain 
+    Dedication</a>.</p>
+
+<!-- Creative Commons metadata for Public Domain License 
+
+<rdf:RDF xmlns="http://web.resource.org/cc/"
+    xmlns:dc="http://purl.org/dc/elements/1.1/"
+    xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
+<Work rdf:about="">
+   <dc:title>openrecord.org</dc:title>
+   <dc:type rdf:resource="http://purl.org/dc/dcmitype/Text" />
+   <license rdf:resource="http://web.resource.org/cc/PublicDomain" />
+</Work>
+
+<License rdf:about="http://web.resource.org/cc/PublicDomain">
+   <permits rdf:resource="http://web.resource.org/cc/Reproduction" />
+   <permits rdf:resource="http://web.resource.org/cc/Distribution" />
+   <permits rdf:resource="http://web.resource.org/cc/DerivativeWorks" />
+</License>
+
+</rdf:RDF>
+
+-->
+  </body>
+</html>
+

Copied: trunk/source/util/UtilTest.js (from rev 201, trunk/source/UtilTest.js)



From skinner at berlios.de  Sat Jul  2 21:11:05 2005
From: skinner at berlios.de (Brian Douglas Skinner at BerliOS)
Date: Sat, 2 Jul 2005 21:11:05 +0200
Subject: [openrecord-svn] r206 - trunk/documentation
Message-ID: <200507021911.j62JB5Pj010924@sheep.berlios.de>

Author: skinner
Date: 2005-07-02 21:11:04 +0200 (Sat, 02 Jul 2005)
New Revision: 206

Modified:
   trunk/documentation/release_planning.txt
Log:
Closed iteration #2 and opened iteration #3.

Modified: trunk/documentation/release_planning.txt
===================================================================
--- trunk/documentation/release_planning.txt	2005-07-01 02:50:23 UTC (rev 205)
+++ trunk/documentation/release_planning.txt	2005-07-02 19:11:04 UTC (rev 206)
@@ -62,9 +62,18 @@
    OpenRecord software.
  + A logged-in user can write up weekly status reports.
  
-
  
  
+################################################################################
+################################################################################
+##                                                                            ##
+##                                Iteration #1                                ##
+##                                  May 2005                                  ##
+##                                                                            ##
+################################################################################
+################################################################################
+ 
+
 =======================================================
 Tasks we need to do for the release 0.1 user stories
 =======================================================
@@ -135,102 +144,165 @@
  ~19   = total estimated IEDs for PLANNED and ADDITIONAL tasks that were finished
    5    = number of weeks in May iteration
  ~ 3.8 = Velocity (in estimated IEDs per week)
+~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 
  
+
+################################################################################
+################################################################################
+##                                                                            ##
+##                                Iteration #2                                ##
+##                                  June 2005                                 ##
+##                                                                            ##
+################################################################################
+################################################################################
  
-~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
-     Summary of Iteration #2
-            June 2005
-     June 6 to June 27, 2005
-~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
-        = number of PLANNED tasks that were finished 
-        = total estimated IEDs for PLANNED and ADDITIONAL tasks that were finished
-   3    = number of weeks in June iteration
-        = Velocity (in estimated IEDs per week)
 
-   
-        
 ---------------------------------------------------------------------------
-   Tasks that we might want to do during Iteration #2, in June 2005
+   Tasks we originally identified for Iteration #2, in June 2005
 -------+----------+---------+----------------------------------------------
 Who    | Estimate | Actual  | Task
 -------+----------+---------+----------------------------------------------
 brian  | 0.25     | 0.25    |  1. Set up a prototype of the OpenRecord.org "dogfood" site
 mignon | 0.25 IED | 0.5 IED |  2. Have identifiedRecord.getUserstamp() get the user from the UUID
 mignon | 0.5  IED | 0.5 IED |  3. Switch data model to use time-based UUIDs for timestamps & userstamps
-brian  | 0        | 0.5     |     Update the JSON repository file to use time-based UUIDs
-brian  | 0        | 0.25    |     Get deletion votes working again after switching to time-based UUIDs
 brian  | 0.5  IED | 0.25    |  4. Store transaction info in repository
        |          |         |  5. UI for deleting a row from a table
 brian  | 0.5  IED | 0.25    |  6. Save provisional item and then set the category, in that order, and in one transaction
 brian  | 0.25 IED | 0.25    |  7. Fix the bug that happens when you call the PHP server code with no POST data
-brian  |          | 0.25    |     Enabled one server to serve N pages running against N repository files
 chao   | 0.5  IED | 0.5 IED |  8. UI for entering a number literal (instead of a string literal) in a table [with Brian]
 chao   | 1    IED | 1   IED |  9. UI for entering a date literal in a table (and data model support) [with Brian]
 brian  | 1    IED | 1   IED | 10. Add data model support for bi-directional references
-brian  |          | 0.5     |     Convert the code to use bi-directional references
-brian  | 0.25 IED | 0.25    |     Convert the axiomatic items to use bi-directional reference
-brian  |          | 0.75    |     Misc. other improvements to the repository JSON format
 chao   | 2    IED | 1.5 IED | 11. Move to better persistent representation for queries [with Brian]
        |          |         | 12. Make sure view code uses transactions
        |          |         | 13. Deal with \n in page name or summary fields
        |          |         | 14. BUG: problems with newlines and HTML characters in text strings
 brian  | 0.5  IED |         | 15. Set up an OpenRecord.org "dogfood" site & hand-copy info into it
 -------+----------+---------+----------------------------------------------
+
+
+---------------------------------------------------------------------------
+ Additional "hidden" tasks we uncovered during Iteration #2, in June 2005
+-------+----------+---------+----------------------------------------------
+Who    | Estimate | Actual  | Task
+-------+----------+---------+----------------------------------------------
+brian  |          | 0.5     |     Update the JSON repository file to use time-based UUIDs
+brian  |          | 0.25    |     Get deletion votes working again after switching to time-based UUIDs
+brian  |          | 0.25    |     Enabled one server to serve N pages running against N repository files
+brian  |          | 0.5     |     Convert the code to use bi-directional references
+brian  |          | 0.25    |     Convert the axiomatic items to use bi-directional reference
+brian  |          | 0.75    |     Misc. other improvements to the repository JSON format
+-------+----------+---------+----------------------------------------------
+
+
+---------------------------------------------------------------------------
+   New tasks that we decided to take on for Iteration #2, in June 2005
+-------+----------+---------+----------------------------------------------
+Who    | Estimate | Actual  | Task
+-------+----------+---------+----------------------------------------------
 chao   |          | done    | 16. Have text-entries and reference-entries look different
-       |          |         | 17. Write one unit test that tests GUI code
-       |          |         | 18. Write one performance test that measures the time some code takes
-       |          |         | 19. Pick one file, and do a group code review on it
-       |          |         | 20. Rationalize our CSS style sheets
-       |          |         | 21. Provide GUI feedback about what's editable
-       |          |         | 22. Reach consensus on (colors, padding, and borders) and then implement
-       |          |         | 23. Get data model to pass the ordinal unit tests again
 mignon |          | done    | 24. Display Navbar pages in the right order
-chao   |          | done?   | 25. Arrow keys in SuggestionBox
-       |          |         | 26. Arrow keys in Table View
-chao   |1.5 IED   |         | 27. Change UI so that non-literal entries are immutable
-       |          |         | 28. Implement a good URL-to-content mapping, such that URLs won't go bad in future releases
-       |          |         | 29. Convert UI code from DOM level 0 to DOM level 2
-       |          |         | 30. Have identifiedRecord.getTimestamp() get the time from the UUID 
--------+----------+---------+----------------------------------------------
-chao   |0.5 IED   |         | 31. Wire up observers & keep views in sync
-       |          |         | 32. improve UI for adding an attribute to an item
-       |          |         | 33. improve UI for setting the expected data type of an attribute
-       |          |         | 34. improve UI for creating a new category
-       |          |         | 35. improve UI for entering references to categories or to other items
-       |          |         | 36. improve UI for creating a new page
-       |          |         | 37. improve UI for adding a new section to a page
-       |          |         | 38. improve UI for creating a new user
+chao   |          | done    | 25. Arrow keys in SuggestionBox
+chao   | 1.5 IED  | done    | 27. Change UI so that non-literal entries are immutable
+mignon |          | done    | 30. Have identifiedRecord.getTimestamp() get the time from the UUID 
 chao   | 1.5 IED  | 1.5 IED | 39. improve UI for editing the query that a section uses
-       |          |         | 40. Have edit mode look like view mode, and remove the "Edit" button
-       |          |         | 41. Do refactoring wherever needed (e.g. SuggestionBox and AttributeSuggestionBox)
-       |          |         | 42. Rationalize the View api and document public api
-       |          |         | 43. Document the Data model public api
-       |          |         | 44. Check for incorrect dependencies (e.g. a Util dependency on model code)
-       |          |         | 45. Create directories "util", "view", "plugin"
+chao   | 0.5 IED  | 0.5 IED |     Improved UI for autocomplete
+chao   | 0.5 IED  | 0.5 IED |     Allow plugins to store layout data
+chao   | 0.5 IED  | 0.5 IED |     Table plugin persists column order
+brian  |          | 0.5 IED | 48. Add a Query.js class, and/or an Attribute.js class
 -------+----------+---------+----------------------------------------------
-       |          |         | 46. Add support for saving content when used from a file:// URL
-       |          |         | 47. Add support for repository merging
-       |          |         | 48. Add a Query.js class, and/or an Attribute.js class
-       |          |         | 49. BUG: back button is broken
-       |          |         | 50. BUG: "Waiting for localhost..."
-       |          |         | 51. BUG: "Node was not found" exception in TextView/LoginView?
-       |          |         | 52. Do some testing to find other existing bugs
-       |          |         | 53. Drag and drop to re-order pages in the Navbar
-       |          |         | 54. Drag and drop to re-order columns in table view
-       |          |         | 55. Drag and drop to re-order rows in table view
-       |          |         | 56. Have explicit save instead of (or in addition to) autosave
-       |          |         | 57. Be able to cancel out of creating a new account
-       |          |         | 58. Save view layout choice and user preferences
-       |          |         | 59. Do code reviews
-       |          |         | 60. Write concurrency tests 
-       |          |         | 61. Write scalability tests 
-       |          |         | 62. Ensure that PHP scripts and file I/O works for concurrent multi-user access
+
+
+
+~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+     Summary of Iteration #2
+            June 2005
+     June 6 to July 4, 2005
+~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+  10    = number of PLANNED tasks that were finished 
+   6    = number of HIDDEN tasks that were finished 
+  10    = number of ADDITIONAL tasks that were finished 
+ ~14   = total estimated IEDs for PLANNED and ADDITIONAL tasks that were finished
+   4    = number of weeks in June iteration
+ ~ 3.5 = Velocity (in estimated IEDs per week)
+~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+
+   
+
+################################################################################
+################################################################################
+##                                                                            ##
+##                                Iteration #3                                ##
+##                                  July 2005                                 ##
+##                                                                            ##
+################################################################################
+################################################################################
+
+
+---------------------------------------------------------------------------
+   Tasks we originally identified for Iteration #3, in July 2005
 -------+----------+---------+----------------------------------------------
-chao   | 0.5 IED  | 0.5 IED | Improved UI for autocomplete
-chao   | 0.5 IED  | 0.5 IED | Allow plugins to store layout data
-chao   | 0.5 IED  | 0.5 IED | Table plugin persists column order
-chao   | 0.5 IED  |         | Improve UI for navigating between cells and autocomplete
+Who    | Estimate | Actual  | Task
+-------+----------+---------+----------------------------------------------
+       |          |         |  1. Change "Edit"/"Done Editing" button to "Show Tools"/"Hide Tools"
+       |          |         |  2. Allow editing for any logged in user, even if edit tools aren't shown
+       |          |         |  3. Assign system attributes & categories to a "System" category
+       |          |         |  4. Hide "System" items most of the time
+       |          |         |  5. Attempt to embed an OpenRecord view in a MediaWiki page
+       |          |         |  6. Refactor our observer notification API (and implementation)
+chao   |0.5 IED   |         |  7. Wire up observers & keep views in sync
+       |          |         |  8. be able to select a lozenge 
+       |          |         |  9. be able to select a table row 
+       |          |         | 10. be able to select a non-lozenge literal entry
+       |          |         | 11. be able to select the text within an entry
+       |          |         | 12. be able to delete a selected lozenge 
+       |          |         | 13. be able to delete a selected table row 
+chao   | 0.5 IED  |         | 14. improve keyboard navigation: tab, arrow, and return keys
+       |          |         | 15. Get data model to pass the ordinal unit tests again
+       |          |         | 16. drag-and-drop lozenges
+       |          |         | 17. drag-and-drop to re-order navbar menu items
+       |          |         | 18. drag-and-drop to re-order table rows
+       |          |         | 19. drag-and-drop to re-order table columns
+       |          |         | 20. improve UI for "add new attribute" in Table View 
+       |          |         | 21. Rationalize our CSS style sheets
+       |          |         | 22. Reach consensus on (colors, padding, and borders) and then implement
+       |          |         | 23. Make sure view code uses transactions
+       |          |         | 24. Deal with \n in page name or summary fields
+       |          |         | 25. BUG: need to encode reserved characters(<&>\n"') back at client-server layer
+-------+----------+---------+----------------------------------------------
+       |          |         | 26. Set up an OpenRecord.org "dogfood" site & hand-copy info into it
+       |          |         | 27. Write one unit test that tests GUI code
+       |          |         | 28. Write one performance test that measures the time some code takes
+       |          |         | 29. Pick one file, and do a group code review on it
+       |          |         | 30. Provide GUI feedback about what's editable
+       |          |         | 31. Implement a good URL-to-content mapping, such that URLs won't go bad in future releases
+       |          |         | 32. Convert UI code from DOM level 0 to DOM level 2
+       |          |         | 33. Rationalize the View api and document public api
+       |          |         | 34. Document the Data model public api
+       |          |         | 35. Add support for saving content when used from a file:// URL
+       |          |         | 36. Do refactoring wherever needed (e.g. SuggestionBox and AttributeSuggestionBox)
+       |          |         | 37. improve UI for setting the expected data type of an attribute
+       |          |         | 38. improve UI for creating a new category
+       |          |         | 39. improve UI for entering references to categories or to other items
+       |          |         | 40. improve UI for creating a new page
+       |          |         | 41. improve UI for adding a new section to a page
+       |          |         | 42. improve UI for creating a new user
+       |          |         | 43. Check for incorrect dependencies (e.g. a Util dependency on model code)
+       |          |         | 44. Create directories "view" and "plugin"
+-------+----------+---------+----------------------------------------------
+       |          |         | 45. Add support for repository merging
+       |          |         | 46. BUG: back button is broken
+       |          |         | 47. BUG: "Waiting for localhost..."
+       |          |         | 48. BUG: "Node was not found" exception in TextView/LoginView?
+       |          |         | 49. Do some testing to find other existing bugs
+       |          |         | 50. Have explicit save instead of (or in addition to) autosave
+       |          |         | 51. Be able to cancel out of creating a new account
+       |          |         | 52. Save view layout choice and user preferences
+       |          |         | 53. Do code reviews
+       |          |         | 54. Write concurrency tests 
+       |          |         | 55. Write scalability tests 
+       |          |         | 56. Ensure that PHP scripts and file I/O works for concurrent multi-user access
+-------+----------+---------+----------------------------------------------
        
 
 
@@ -455,10 +527,6 @@
 + How should we rename "VirtualServer"?
 + How should we interoperate with other repositories(openrecord + other sources of data)?
 + Should we rename "World"?
-+ Should we adopt "Globals" convention for JSLint?
-+ Should we get rid of semi-colon checking in JSLint?
-+ Should we work on making OpenRecord work within MediaWiki?
 + BUG: need to convert HTML entity codes back at client-server layer
-+ Task: Rename ORlugin to PluginView
 + BUG: Can't really create own plugins yet (e.g. UUID need to be assigned, plugin item created)
 + Q: Do we (and how) need a concept of focus for Views? Currently, only Text input and Textarea gets keyboard focus. We need it for table selections and possibly selecting "lozenges" (item references stored in the TextView)
\ No newline at end of file



From skinner at berlios.de  Sat Jul  2 21:27:19 2005
From: skinner at berlios.de (Brian Douglas Skinner at BerliOS)
Date: Sat, 2 Jul 2005 21:27:19 +0200
Subject: [openrecord-svn] r207 - trunk/source
Message-ID: <200507021927.j62JRJBn011935@sheep.berlios.de>

Author: skinner
Date: 2005-07-02 21:27:18 +0200 (Sat, 02 Jul 2005)
New Revision: 207

Added:
   trunk/source/view/
Log:
added a /view directory



From skinner at berlios.de  Sat Jul  2 21:54:17 2005
From: skinner at berlios.de (Brian Douglas Skinner at BerliOS)
Date: Sat, 2 Jul 2005 21:54:17 +0200
Subject: [openrecord-svn] r208 - in trunk: . documentation source source/view
Message-ID: <200507021954.j62JsH1h013374@sheep.berlios.de>

Author: skinner
Date: 2005-07-02 21:54:15 +0200 (Sat, 02 Jul 2005)
New Revision: 208

Added:
   trunk/source/view/EntryView.js
   trunk/source/view/LintTest.html
   trunk/source/view/LintTest.js
   trunk/source/view/SuggestionBox.js
Removed:
   trunk/source/TextView.js
Modified:
   trunk/dashboard.html
   trunk/demo_page.html
   trunk/documentation/release_planning.txt
   trunk/dogfood.html
   trunk/source/LintTest.js
   trunk/source/LoginView.js
   trunk/source/MultiEntriesView.js
   trunk/source/PageView.js
   trunk/source/SectionView.js
   trunk/source/TablePlugin.js
   trunk/source/TestSuite.html
   trunk/source/base_style.css
Log:
Renamed TextView.js to be EntryView.js, and moved it down into the the new /view directory.  Broke SuggestionBox code out of EntryView and into its own file.

Modified: trunk/dashboard.html
===================================================================
--- trunk/dashboard.html	2005-07-02 19:27:18 UTC (rev 207)
+++ trunk/dashboard.html	2005-07-02 19:54:15 UTC (rev 208)
@@ -27,7 +27,8 @@
     <script type="text/javascript" src="source/LoginView.js"></script>
     <script type="text/javascript" src="source/MultiEntriesView.js"></script>
     <script type="text/javascript" src="source/NavbarView.js"></script>
-    <script type="text/javascript" src="source/TextView.js"></script>
+    <script type="text/javascript" src="source/view/SuggestionBox.js"></script>
+    <script type="text/javascript" src="source/view/EntryView.js"></script>
     <script type="text/javascript" src="source/PluginView.js"></script>
     <script type="text/javascript" src="source/TablePlugin.js"></script>
     <script type="text/javascript" src="source/OutlinePlugin.js"></script>

Modified: trunk/demo_page.html
===================================================================
--- trunk/demo_page.html	2005-07-02 19:27:18 UTC (rev 207)
+++ trunk/demo_page.html	2005-07-02 19:54:15 UTC (rev 208)
@@ -27,7 +27,8 @@
     <script type="text/javascript" src="source/LoginView.js"></script>
     <script type="text/javascript" src="source/MultiEntriesView.js"></script>
     <script type="text/javascript" src="source/NavbarView.js"></script>
-    <script type="text/javascript" src="source/TextView.js"></script>
+    <script type="text/javascript" src="source/view/SuggestionBox.js"></script>
+    <script type="text/javascript" src="source/view/EntryView.js"></script>
     <script type="text/javascript" src="source/PluginView.js"></script>
     <script type="text/javascript" src="source/TablePlugin.js"></script>
     <script type="text/javascript" src="source/OutlinePlugin.js"></script>

Modified: trunk/documentation/release_planning.txt
===================================================================
--- trunk/documentation/release_planning.txt	2005-07-02 19:27:18 UTC (rev 207)
+++ trunk/documentation/release_planning.txt	2005-07-02 19:54:15 UTC (rev 208)
@@ -293,7 +293,7 @@
        |          |         | 45. Add support for repository merging
        |          |         | 46. BUG: back button is broken
        |          |         | 47. BUG: "Waiting for localhost..."
-       |          |         | 48. BUG: "Node was not found" exception in TextView/LoginView?
+       |          |         | 48. BUG: "Node was not found" exception in EntryView/LoginView?
        |          |         | 49. Do some testing to find other existing bugs
        |          |         | 50. Have explicit save instead of (or in addition to) autosave
        |          |         | 51. Be able to cancel out of creating a new account
@@ -514,11 +514,11 @@
  + Bug: "Node was not found" exception
     Load the demo_page.html page from file:///...
     Go into Edit mode and change some entry.  
-    You get an exception in TextView.js:
+    You get an exception in EntryView.js:
       Util.handleError()
       uncaught exception: [Exception... "Node was not found"  
       code: "8" nsresult: "0x80530008 (NS_ERROR_DOM_NOT_FOUND_ERR)"  
-      location: "file:///K:/www/htdocs/openrecord/demo/current/trunk/source/TextView.js Line: 221"]
+      location: "file:///K:/www/htdocs/openrecord/demo/current/trunk/source/EntryView.js Line: 221"]
       line: 0
     
 ===========================       
@@ -529,4 +529,4 @@
 + Should we rename "World"?
 + BUG: need to convert HTML entity codes back at client-server layer
 + BUG: Can't really create own plugins yet (e.g. UUID need to be assigned, plugin item created)
-+ Q: Do we (and how) need a concept of focus for Views? Currently, only Text input and Textarea gets keyboard focus. We need it for table selections and possibly selecting "lozenges" (item references stored in the TextView)
\ No newline at end of file
++ Q: Do we (and how) need a concept of focus for Views? Currently, only Text input and Textarea gets keyboard focus. We need it for table selections and possibly selecting "lozenges" (item references stored in the EntryView)
\ No newline at end of file

Modified: trunk/dogfood.html
===================================================================
--- trunk/dogfood.html	2005-07-02 19:27:18 UTC (rev 207)
+++ trunk/dogfood.html	2005-07-02 19:54:15 UTC (rev 208)
@@ -27,7 +27,8 @@
     <script type="text/javascript" src="source/LoginView.js"></script>
     <script type="text/javascript" src="source/MultiEntriesView.js"></script>
     <script type="text/javascript" src="source/NavbarView.js"></script>
-    <script type="text/javascript" src="source/TextView.js"></script>
+    <script type="text/javascript" src="source/view/SuggestionBox.js"></script>
+    <script type="text/javascript" src="source/view/EntryView.js"></script>
     <script type="text/javascript" src="source/PluginView.js"></script>
     <script type="text/javascript" src="source/TablePlugin.js"></script>
     <script type="text/javascript" src="source/OutlinePlugin.js"></script>

Modified: trunk/source/LintTest.js
===================================================================
--- trunk/source/LintTest.js	2005-07-02 19:27:18 UTC (rev 207)
+++ trunk/source/LintTest.js	2005-07-02 19:54:15 UTC (rev 208)
@@ -63,7 +63,6 @@
     "LoginView.js",
     "NavbarView.js",
     "SectionView.js",
-    "TextView.js",
     "MultiEntriesView.js",
     "TablePlugin.js",
     "OutlinePlugin.js",

Modified: trunk/source/LoginView.js
===================================================================
--- trunk/source/LoginView.js	2005-07-02 19:27:18 UTC (rev 207)
+++ trunk/source/LoginView.js	2005-07-02 19:54:15 UTC (rev 208)
@@ -37,7 +37,7 @@
 /*global document  */
 /*global Util  */
 /*global Cookie  */
-/*global SuggestionBox  */
+/*global UserSuggestionBox  */
 // -------------------------------------------------------------------
 
 
@@ -192,7 +192,7 @@
     this.passwordInput.onkeypress = this._signinPasswordKeyPress.bindAsEventListener(this);
     this.passwordInput.onfocus = this._signinPasswordFocus.bindAsEventListener(this);
 
-    this._myUsernameSuggestionBox = new SuggestionBox(this.usernameInput, this.getWorld().getUsers(), this.passwordInput);
+    this._myUsernameSuggestionBox = new UserSuggestionBox(this.usernameInput, this.getWorld().getUsers(), this.passwordInput);
 
     var signinButton = document.createElement("input");
     signinButton.value = "Sign in";
@@ -388,16 +388,16 @@
 // -------------------------------------------------------------------
 // Suggestion box methods
 // -------------------------------------------------------------------
-function SuggestionBox(inHTMLInputField, inListOfEntries, inNextHTMLField) {
+function UserSuggestionBox(inHTMLInputField, inListOfEntries, inNextHTMLField) {
   this._myInputField = inHTMLInputField;
-  this._myListOfEntries = inListOfEntries.sort(SuggestionBox.compareEntryDisplayNames);
+  this._myListOfEntries = inListOfEntries.sort(UserSuggestionBox.compareEntryDisplayNames);
   this._myNextField = inNextHTMLField;
   
-  this._mySuggestionBoxDivElement = document.createElement('div');
-  // this._mySuggestionBoxDivElement.style.visibility = "hidden";
-  this._mySuggestionBoxDivElement.style.zIndex = 11;
-  this._mySuggestionBoxDivElement.style.display = "none";
-  document.body.appendChild(this._mySuggestionBoxDivElement);
+  this._myUserSuggestionBoxDivElement = document.createElement('div');
+  // this._myUserSuggestionBoxDivElement.style.visibility = "hidden";
+  this._myUserSuggestionBoxDivElement.style.zIndex = 11;
+  this._myUserSuggestionBoxDivElement.style.display = "none";
+  document.body.appendChild(this._myUserSuggestionBoxDivElement);
   
   this._myInputField.onkeyup = this._keyPressOnInputField.bindAsEventListener(this);
   this._myInputField.onfocus = this._focusOnInputField.bindAsEventListener(this);
@@ -405,7 +405,7 @@
   this._keyPressOnInputField();
 }
 
-SuggestionBox.compareEntryDisplayNames = function (inEntryOne, inEntryTwo) {
+UserSuggestionBox.compareEntryDisplayNames = function (inEntryOne, inEntryTwo) {
   var displayNameOne = inEntryOne.getDisplayName();
   var displayNameTwo = inEntryTwo.getDisplayName();
   if (displayNameOne == displayNameTwo) {
@@ -415,30 +415,30 @@
   }
 };
 
-SuggestionBox.prototype._focusOnInputField = function (inEventObject) {
+UserSuggestionBox.prototype._focusOnInputField = function (inEventObject) {
   this._myInputField.value = "";
-  this._redisplaySuggestionBox();
+  this._redisplayUserSuggestionBox();
 };
 
 
-SuggestionBox.prototype._keyPressOnInputField = function (inEventObject) {
-  this._redisplaySuggestionBox();
+UserSuggestionBox.prototype._keyPressOnInputField = function (inEventObject) {
+  this._redisplayUserSuggestionBox();
 };
 
 
-SuggestionBox.prototype._blurOnInputField = function (inEventObject) {
+UserSuggestionBox.prototype._blurOnInputField = function (inEventObject) {
   // make the suggestion box disappear
-  this._mySuggestionBoxDivElement.style.display = "none";
+  this._myUserSuggestionBoxDivElement.style.display = "none";
 };
 
 
-SuggestionBox.prototype._clickOnSelection = function (inEventObject, inString) {
+UserSuggestionBox.prototype._clickOnSelection = function (inEventObject, inString) {
   this._myInputField.value = inString;
   this._myNextField.select();
 };
 
 
-SuggestionBox.prototype._redisplaySuggestionBox = function () {
+UserSuggestionBox.prototype._redisplayUserSuggestionBox = function () {
   var partialInputString = this._myInputField.value;
   var listOfMatchingStrings = [];
   var key;
@@ -457,9 +457,9 @@
   
   if (listOfMatchingStrings.length === 0) {
     // make the suggestion box disappear
-    this._mySuggestionBoxDivElement.style.display = "none";
+    this._myUserSuggestionBoxDivElement.style.display = "none";
   } else {
-    View.removeChildrenOfElement(this._mySuggestionBoxDivElement);
+    View.removeChildrenOfElement(this._myUserSuggestionBoxDivElement);
     var table = document.createElement('table');
     var rowNumber = 0;
     var columnNumber = 0;
@@ -472,20 +472,20 @@
       cell.onmousedown = this._clickOnSelection.bindAsEventListener(this, string);
       rowNumber += 1;
     }
-    this._mySuggestionBoxDivElement.appendChild(table);
+    this._myUserSuggestionBoxDivElement.appendChild(table);
     
     // set-up the suggestion box to open just below the input field it comes from
     var suggestionBoxTop = Util.getOffsetTopFromElement(this._myInputField) + this._myInputField.offsetHeight;
     var suggestionBoxLeft = Util.getOffsetLeftFromElement(this._myInputField);
-    this._mySuggestionBoxDivElement.style.top = suggestionBoxTop + "px"; 
-    this._mySuggestionBoxDivElement.style.left = suggestionBoxLeft + "px";
+    this._myUserSuggestionBoxDivElement.style.top = suggestionBoxTop + "px"; 
+    this._myUserSuggestionBoxDivElement.style.left = suggestionBoxLeft + "px";
     // alert(this._myInputField.offsetWidth);
-    this._mySuggestionBoxDivElement.style.width = (this._myInputField.offsetWidth - 2)+ "px";
+    this._myUserSuggestionBoxDivElement.style.width = (this._myInputField.offsetWidth - 2)+ "px";
     
-    // this._mySuggestionBoxDivElement.style.zIndex = 11;
-    this._mySuggestionBoxDivElement.className = "suggestion_box";
-    this._mySuggestionBoxDivElement.style.visibility = "visible";
-    this._mySuggestionBoxDivElement.style.display = "block";
+    // this._myUserSuggestionBoxDivElement.style.zIndex = 11;
+    this._myUserSuggestionBoxDivElement.className = "suggestion_box";
+    this._myUserSuggestionBoxDivElement.style.visibility = "visible";
+    this._myUserSuggestionBoxDivElement.style.display = "block";
   }
 };
 

Modified: trunk/source/MultiEntriesView.js
===================================================================
--- trunk/source/MultiEntriesView.js	2005-07-02 19:27:18 UTC (rev 207)
+++ trunk/source/MultiEntriesView.js	2005-07-02 19:54:15 UTC (rev 208)
@@ -37,7 +37,7 @@
 /*global document  */
 /*global Util  */
 /*global Item  */
-/*global TextView  */
+/*global EntryView  */
 // -------------------------------------------------------------------
 
 
@@ -151,7 +151,7 @@
 
 
 /**
- * Sets a function to be used when onclick is called to the TextView
+ * Sets a function to be used when onclick is called to the EntryView
  *
  * @scope    public instance method
  * @param    inEventObject    An event object. 
@@ -165,8 +165,8 @@
 /**
  *
  */
-MultiEntriesView.prototype._handleClick = function(inEvent, inTextView) {
-  if (this._clickFunction && this._clickFunction(inEvent, inTextView)) {
+MultiEntriesView.prototype._handleClick = function(inEvent, inEntryView) {
+  if (this._clickFunction && this._clickFunction(inEvent, inEntryView)) {
     return true;
   }
   return false;
@@ -186,8 +186,8 @@
 /**
  *
  */
-MultiEntriesView.prototype._keyPressOnEditField = function(inEvent, inTextView) {
-  Util.assert(inTextView instanceof TextView);
+MultiEntriesView.prototype._keyPressOnEditField = function(inEvent, inEntryView) {
+  Util.assert(inEntryView instanceof EntryView);
   var asciiValueOfKey = inEvent.keyCode;
   var move, doCreateNewEntry;
   switch (asciiValueOfKey) {
@@ -198,29 +198,29 @@
         doCreateNewEntry = true;
         break;
       }
-      if (inTextView != this._entryViews[this._entryViews.length-1]) {move=1;}
+      if (inEntryView != this._entryViews[this._entryViews.length-1]) {move=1;}
       break;
     default: 
       move = 0; 
       break;
   }
   if (doCreateNewEntry) {
-    inTextView.stopEditing();
+    inEntryView.stopEditing();
     this._addSeparator();
     this._addEntryView(null).startEditing();
     return true;
   }
   if (move !== 0) {
-    var index = Util.getArrayIndex(this._entryViews, inTextView);
+    var index = Util.getArrayIndex(this._entryViews, inEntryView);
     Util.assert(index != -1);
     index += move;
     if (index >= 0 && index < this._entryViews.length) {
-      inTextView.stopEditing();
+      inEntryView.stopEditing();
       this._entryViews[index].startEditing();
       return true;
     }
   }
-  if (this._keyPressFunction && this._keyPressFunction(inEvent, inTextView)) {
+  if (this._keyPressFunction && this._keyPressFunction(inEvent, inEntryView)) {
     return true;
   }
   return false;
@@ -233,17 +233,17 @@
 MultiEntriesView.prototype._addEntryView = function(inEntry) {
   var spanElt = document.createElement("span");
   spanElt.style.width = '100%';
-  var aTextView = new TextView(this, spanElt, this._item, this._attribute, inEntry, this._className);
-  this._entryViews.push(aTextView);
+  var anEntryView = new EntryView(this, spanElt, this._item, this._attribute, inEntry, this._className);
+  this._entryViews.push(anEntryView);
   this.getHTMLElement().appendChild(spanElt);
-  aTextView.refresh();
+  anEntryView.refresh();
   if (this.isInEditMode()) {
     var listener = this;
-    aTextView.setSuggestions(this._suggestions);
-    aTextView.setKeyPressFunction(function (evt, aTxtView) {return listener._keyPressOnEditField(evt, aTxtView);});
-    aTextView.setClickFunction(function (evt, aTxtView) {return listener._handleClick(evt, aTxtView);});
+    anEntryView.setSuggestions(this._suggestions);
+    anEntryView.setKeyPressFunction(function (evt, entryView) {return listener._keyPressOnEditField(evt, entryView);});
+    anEntryView.setClickFunction(function (evt, entryView) {return listener._handleClick(evt, entryView);});
   }
-  return aTextView;
+  return anEntryView;
 };
 
 

Modified: trunk/source/PageView.js
===================================================================
--- trunk/source/PageView.js	2005-07-02 19:27:18 UTC (rev 207)
+++ trunk/source/PageView.js	2005-07-02 19:54:15 UTC (rev 208)
@@ -37,7 +37,7 @@
 /*global document, HTMLElement  */
 /*global Util  */
 /*global Item  */
-/*global RootView, SectionView, TablePlugin, TextView  */
+/*global RootView, SectionView, TablePlugin, EntryView  */
 // -------------------------------------------------------------------
 
 
@@ -154,11 +154,11 @@
   var pageDivElement = this.getHTMLElement();
   
   var headerElement = View.createAndAppendElement(pageDivElement, "h1");
-  this._headerText = new TextView(this, headerElement, this._pageItem, attributeCalledName,
+  this._headerText = new EntryView(this, headerElement, this._pageItem, attributeCalledName,
     this._pageItem.getSingleEntryFromAttribute(attributeCalledName), PageView.CSS_CLASS_PAGE_HEADER, false);
 
   var summaryViewDiv = View.createAndAppendElement(pageDivElement, "div");
-  this._pageSummaryView = new TextView(this, summaryViewDiv, this._pageItem, attributeCalledSummary,
+  this._pageSummaryView = new EntryView(this, summaryViewDiv, this._pageItem, attributeCalledSummary,
     this._pageItem.getSingleEntryFromAttribute(attributeCalledSummary), SectionView.CSS_CLASS_SUMMARY_TEXT, true);
 
   // add <div> elements for each of the sections on the page

Modified: trunk/source/SectionView.js
===================================================================
--- trunk/source/SectionView.js	2005-07-02 19:27:18 UTC (rev 207)
+++ trunk/source/SectionView.js	2005-07-02 19:54:15 UTC (rev 208)
@@ -38,7 +38,7 @@
 /*global window, document  */
 /*global Util  */
 /*global Item  */
-/*global RootView, PageView, TablePlugin, TextView  */
+/*global RootView, PageView, TablePlugin, EntryView  */
 // -------------------------------------------------------------------
 
 
@@ -54,7 +54,7 @@
 SectionView.CSS_CLASS_TEXT_FIELD_IN_TABLE_CELL = "text_field_in_table_cell";
 SectionView.CSS_CLASS_SELECTED = "selected";
 SectionView.CSS_CLASS_MORE_LINK = "more";
-SectionView.CSS_CLASS_TEXT_VIEW = "text_view";
+SectionView.CSS_CLASS_ENTRY_VIEW = "entry_view";
 SectionView.CSS_CLASS_SECTION_HEADER = "section_header";
 SectionView.CSS_CLASS_SUMMARY_TEXT = "summary_text";
 
@@ -230,12 +230,12 @@
   var headerH2 = View.createAndAppendElement(outerDiv, "h2");
   var attributeCalledName = this.getWorld().getAttributeCalledName();
   var attributeCalledSummary = this.getWorld().getAttributeCalledSummary();
-  this._headerView = new TextView(this, headerH2, this._section, attributeCalledName,
+  this._headerView = new EntryView(this, headerH2, this._section, attributeCalledName,
     this._section.getSingleEntryFromAttribute(attributeCalledName),
     SectionView.CSS_CLASS_SECTION_HEADER);
   var summaryDiv = View.createAndAppendElement(outerDiv, "div");
-  this._sectionSummaryView = new TextView(this, summaryDiv, this._section, attributeCalledSummary,
-    this._section.getSingleEntryFromAttribute(attributeCalledSummary), SectionView.CSS_CLASS_TEXT_VIEW, true);
+  this._sectionSummaryView = new EntryView(this, summaryDiv, this._section, attributeCalledSummary,
+    this._section.getSingleEntryFromAttribute(attributeCalledSummary), SectionView.CSS_CLASS_ENTRY_VIEW, true);
   View.createAndAppendElement(outerDiv, "p");
 
   // create the editing controls, if we're in edit mode
@@ -354,17 +354,17 @@
   var listOfPossibleEntries = this.getWorld().getSuggestedItemsForAttribute(matchingAttribute);
   var entrySpan = View.createAndAppendElement(this._queryEditSpan, "span");
   
-  var entryTextView =  new TextView(this, entrySpan, myQuery, attributeCalledQueryMatchingValue, matchingEntry,
+  var entryView =  new EntryView(this, entrySpan, myQuery, attributeCalledQueryMatchingValue, matchingEntry,
     RootView.CSS_CLASS_EDIT_MODE);
-  entryTextView.setSuggestions(listOfPossibleEntries);
-  entryTextView.alwaysUseEditField();
-  entryTextView.setAutoWiden(true);
+  entryView.setSuggestions(listOfPossibleEntries);
+  entryView.alwaysUseEditField();
+  entryView.setAutoWiden(true);
   var attributeCalledExpectedType = this.getWorld().getAttributeCalledExpectedType();
   var listOfExpectedTypeEntries = matchingAttribute.getEntriesForAttribute(attributeCalledExpectedType);
-  entryTextView.setExpectedTypeEntries(listOfExpectedTypeEntries);
-  entryTextView.refresh();
+  entryView.setExpectedTypeEntries(listOfExpectedTypeEntries);
+  entryView.refresh();
   var listener = this;
-  entryTextView.setKeyPressFunction(function (evt, aTxtView) {return listener.keyPressOnMatchingValueField(evt, aTxtView);});
+  entryView.setKeyPressFunction(function (evt, entryView) {return listener.keyPressOnMatchingValueField(evt, entryView);});
   myQuery.addObserver(this);
 };
 
@@ -380,9 +380,9 @@
  * @scope    public instance method
  * @return   Returns true if the user pressed the return key, or false otherwise.
  */
-SectionView.prototype.keyPressOnMatchingValueField = function(event, aTextView) {
+SectionView.prototype.keyPressOnMatchingValueField = function(event, anEntryView) {
   if (event.keyCode == Util.ASCII_VALUE_FOR_RETURN) {
-    aTextView.stopEditing();
+    anEntryView.stopEditing();
     return true;
   }
   return false;

Modified: trunk/source/TablePlugin.js
===================================================================
--- trunk/source/TablePlugin.js	2005-07-02 19:27:18 UTC (rev 207)
+++ trunk/source/TablePlugin.js	2005-07-02 19:54:15 UTC (rev 208)
@@ -278,7 +278,7 @@
  * PENDING: 
  * This method observedItemHasChanged() was written back before we 
  * wrote the method above this one, _provisionalItemJustBecomeReal().
- * Now we've got things set up so that the TextView will call
+ * Now we've got things set up so that the EntryView will call
  * our _provisionalItemJustBecomeReal() method when the user first
  * makes a change that causes the provisional item to become real.
  * Now that we have _provisionalItemJustBecomeReal(), we might 
@@ -398,8 +398,8 @@
 
 /**
  * Inserts a table cell into table's row & col, with data from a given item and
- * attribute. Each table cell is displayed with a TextView object.  The HTML 
- * table cell links to the TextView object with the attribute "or_textView"
+ * attribute. Each table cell is displayed with a EntryView object.  The HTML 
+ * table cell links to the EntryView object with the attribute "or_entryView"
  *
  * @scope    public instance method
  * @return   An HTML image element
@@ -413,8 +413,8 @@
   if (this.isInEditMode()) {
     multiEntriesView.setSuggestions(this._hashTableOfEntries[attribute.getUniqueKeyString()]);
     var listener = this;
-    multiEntriesView.setKeyPressFunction(function (evt, aTxtView) {return listener.keyPressOnEditField(evt, aTxtView);});
-    multiEntriesView.setClickFunction(function (evt, aTxtView) {return listener._handleClick(evt, aTxtView);});
+    multiEntriesView.setKeyPressFunction(function (evt, entryView) {return listener.keyPressOnEditField(evt, entryView);});
+    multiEntriesView.setClickFunction(function (evt, entryView) {return listener._handleClick(evt, entryView);});
   }
 };
 
@@ -533,8 +533,8 @@
   }
 };
 
-TablePlugin.prototype._handleClick = function (inEventObject, aTextView) {
-  var rowElement = aTextView.getSuperview().getHTMLElement().parentNode; // textView -> multiEntriesView -> cellElment -> rowElement
+TablePlugin.prototype._handleClick = function (inEventObject, anEntryView) {
+  var rowElement = anEntryView.getSuperview().getHTMLElement().parentNode; // entryView -> multiEntriesView -> cellElment -> rowElement
   return this.selectRow(rowElement);
 };
 
@@ -549,7 +549,7 @@
  * @scope    public class method
  * @return   Returns true if the keyPress is a letter, or false if the keyPress is an arrow key or a key that moves the cursor to another cell. 
  */
-TablePlugin.prototype.keyPressOnEditField = function (inEventObject, aTextView) {
+TablePlugin.prototype.keyPressOnEditField = function (inEventObject, anEntryView) {
   var eventObject = inEventObject;
   var asciiValueOfKey = eventObject.keyCode;
   var shiftKeyPressed = eventObject.shiftKey;
@@ -590,9 +590,9 @@
     
     // line below needs to be called here i.e. early because stopping an edit may change a provisional item
     // to become a "real" one thereby  creating new row for the next provisional item, e.g. this._listOfItems changes
-    aTextView.stopEditing();
+    anEntryView.stopEditing();
 
-    var cellElement = aTextView.getSuperview().getHTMLElement(); // textView's multiEntriesView's
+    var cellElement = anEntryView.getSuperview().getHTMLElement(); // entryView's multiEntriesView's
     var userHitReturnInLastRow = false;
     var shiftBy;
     var numCols = this._numberOfColumns;

Modified: trunk/source/TestSuite.html
===================================================================
--- trunk/source/TestSuite.html	2005-07-02 19:27:18 UTC (rev 207)
+++ trunk/source/TestSuite.html	2005-07-02 19:54:15 UTC (rev 208)
@@ -26,6 +26,7 @@
         testSuite.addTestPage("../../../source/LintTest.html");
         testSuite.addTestPage("../../../source/model/TestSuite.html");
         testSuite.addTestPage("../../../source/util/TestSuite.html");
+        testSuite.addTestPage("../../../source/view/LintTest.html");
         return testSuite;
       }
     </script>

Deleted: trunk/source/TextView.js
===================================================================
--- trunk/source/TextView.js	2005-07-02 19:27:18 UTC (rev 207)
+++ trunk/source/TextView.js	2005-07-02 19:54:15 UTC (rev 208)
@@ -1,811 +0,0 @@
-/*****************************************************************************
- TextView.js
- 
-******************************************************************************
- Written in 2005 by 
-    Brian Douglas Skinner <brian.skinner at gumption.org>
-    Chih-Chao Lam <chao at cs.stanford.edu>
-  
- Copyright rights relinquished under the Creative Commons  
- Public Domain Dedication:
-    http://creativecommons.org/licenses/publicdomain/
-  
- You can copy freely from this file.  This work may be freely reproduced, 
- distributed, transmitted, used, modified, built upon, or otherwise exploited
- by anyone for any purpose.
-  
- This work is provided on an "AS IS" basis, without warranties or conditions 
- of any kind, either express or implied, including, without limitation, any 
- warranties or conditions of title, non-infringement, merchantability, or 
- fitness for a particular purpose. You are solely responsible for determining 
- the appropriateness of using or distributing the work and assume all risks 
- associated with use of this work, including but not limited to the risks and 
- costs of errors, compliance with applicable laws, damage to or loss of data 
- or equipment, and unavailability or interruption of operations.
-
- In no event shall the authors or contributors have any liability for any 
- direct, indirect, incidental, special, exemplary, or consequential damages,
- however caused and on any theory of liability, whether in contract, strict 
- liability, or tort (including negligence), arising in any way out of or in 
- connection with the use or distribution of the work.
-*****************************************************************************/
-
-
-// -------------------------------------------------------------------
-// Dependencies, expressed in the syntax that JSLint understands:
-// 
-/*global document  */
-/*global Util  */
-/*global Item, Entry  */
-/*global AttributeSuggestionBox  */
-// -------------------------------------------------------------------
-
-
-// -------------------------------------------------------------------
-// TextView public class constants
-// -------------------------------------------------------------------
-// TextView.ELEMENT_CLASS_TEXT_BLOCK = "text_block"; 
-TextView.CSS_CLASS_VALUE_IS_ITEM = "textViewItem";
-TextView.PROVISIONAL_COLOR = '#999999';
-
-
-/**
- * An instance of TextView can be placed in any parent container View
- * to display and (if in edit mode) edit multi-lines of text
- *
- * @scope    public instance constructor
- * @extends  View
- * @param    theSuperview    The view that this view is nested in. 
- * @param    theItem         The Item to be displayed and edited by this view. 
- * @param    theAttribute    The attribute of the item to be displayed.
- * @param    theElement      The HTMLElement to display the HTML in. 
- * @param    theClassType    A string that gives a class name to assign to the HTML element. 
- * @param    isMultiLine     a boolean indicating if text view is single line or multi-line
- */
-TextView.prototype = new View();  // makes TextView be a subclass of View
-function TextView(theSuperview, inElement, inItem, inAttribute, inEntry, inClassName, isMultiLine) {
-  Util.assert((!inEntry) || inEntry instanceof Entry);
-  Util.assert(inItem instanceof Item);
-  Util.assert(inAttribute instanceof Item);
-  //Util.assert(theAttribute instanceof Attribute); PENDING need to check that attribute is an attribute
-  
-  this.setSuperview(theSuperview);
-  this.setHTMLElement(inElement);
-  inElement.style.width = "100%";
-  inElement.style.height = "100%"; // make this element expand to fill parent element where possible
-  this._item = inItem;
-  this._attribute = inAttribute;
-  this._entry = inEntry;
-  this._editField = null;
-  this._className = inClassName;
-  this._isMultiLine = isMultiLine;
-  this._isEditing = false;
-  this._proxyOnKeyFunction = null;
-  this._alwaysUseEditField = null;
-  
-  this._isProvisional = inItem.isProvisional();
-  if (this._isProvisional) {
-    this._provisionalText = inAttribute.getDisplayString();
-  }
-  else if (inEntry && inEntry.getValue(this._item) instanceof Item) {
-    this._valueIsItem = true;
-  }
-}
-
-
-/**
- *
- */
-TextView.prototype._setupSuggestionBox = function() {
-  if (this._suggestions) {
-    var suggestionBox = new AttributeSuggestionBox(this._editField, this._suggestions);
-    this._suggestionBox = suggestionBox;
-    if (this._editField && this._autoWiden) {
-      var maxLength = 4;
-      for (var i=0; i < this._suggestions.length;++i) {
-        var aSuggestion = this._suggestions[i];
-        if (aSuggestion.getDisplayString().length > maxLength) {maxLength = aSuggestion.getDisplayString().length;}
-      }
-      this._editField.size = maxLength;
-    }
-  }
-};
-
-/**
- *
- */
-TextView.prototype.alwaysUseEditField = function() {
-  this._alwaysUseEditField = true;
-  if (this._myHasEverBeenDisplayedFlag) {
-    this.startEditing(true);
-  }
-};
-
-/**
- *
- */
-TextView.prototype.setAutoWiden = function(inAutoWiden) {
-  this._autoWiden = inAutoWiden;
-};
-
-/**
- *
- */
-TextView.prototype.setExpectedTypeEntries = function(expectedTypeEntries) {
-  Util.assert(Util.isArray(expectedTypeEntries));
-  for(var i=0;i < expectedTypeEntries.length; ++i) {
-    Util.assert(expectedTypeEntries[i] instanceof Entry);
-  }
-  this._expectedTypeEntries = expectedTypeEntries;
-};
-
-
-/**
- *
- */
-TextView.prototype.setSuggestions = function(suggestionList) {
-  if (suggestionList) {Util.assert(Util.isArray(suggestionList));}
-  this._suggestions = suggestionList;
-};
-
-
-/**
- * Updates the HTML elements in this view to reflect any changes in 
- * the item's attribute values.
- *
- * @scope    public instance method
-*/
-TextView.prototype.refresh = function() {
-  if (!this._myHasEverBeenDisplayedFlag) {
-    this._buildView();
-  } else {
-  // if (weHaveBeenNotifiedOfChangesTo(this._item)) {
-  //   var newText = getNewValueFrom(this._item);
-  //   this._textNode.data = newText;
-  // }
-  }
-};
-
-
-/**
- *
- */
-TextView.prototype._isLozenge = function() {
-  return this._valueIsItem && !this._alwaysUseEditField;
-};
-
-
-/**
- * Re-creates all the HTML for the TextView, and hands the HTML to the 
- * browser to be re-drawn.
- *
- * @scope    private instance method
- */
-TextView.prototype._buildView = function() {
-  var htmlElement = this.getHTMLElement();
-  View.removeChildrenOfElement(htmlElement);
-  
-  var textString = this._getText();
-  
-  if (this._isProvisional) {
-    this._oldColor = htmlElement.style.color;
-    htmlElement.style.color = TextView.PROVISIONAL_COLOR;
-  }
-  else if (this._isLozenge()) {
-    htmlElement.className += " " + TextView.CSS_CLASS_VALUE_IS_ITEM;
-  }
-  this._textNode = document.createTextNode(textString);
-  htmlElement.appendChild(this._textNode);
-  htmlElement.onclick =  this.onClick.bindAsEventListener(this);
-  if (this._alwaysUseEditField) {
-    this.startEditing(true);
-  }
-    
-  this._myHasEverBeenDisplayedFlag = true;
-};
-
-
-/**
- *
- */
-TextView.prototype._canStartEditing = function() {
-  return (!this._isEditing  && !(this._valueIsItem && !this._alwaysUseEditField));
-};
-
-
-/**
- * Switch to edit text field for editing.
- *
- * @scope    public instance method
- */
-TextView.prototype.startEditing = function(dontSelect) {
-  var canStartEditing = !(this._isEditing || this._isLozenge());
-  if (canStartEditing) {
-    var editField = this._editField;
-    if (!editField) {
-      if (this._isMultiLine) {
-        editField = this._editField = document.createElement("textarea");
-      }
-      else {
-        editField = this._editField= document.createElement("input");
-        editField.type = 'text';
-      }
-      editField.className = this._className;
-      var listener = this; 
-      editField.onblur = this.onBlur.bindAsEventListener(this);
-      editField.onkeypress = this.onKeyPress.bindAsEventListener(this);
-      editField.onkeyup = this.onKeyUp.bindAsEventListener(this);
-      editField.onfocus = this.onFocus.bindAsEventListener(this);
-      editField.defaultValue = this._isProvisional ? '' : this._textNode.data;
-      editField.size = 5; //editField.defaultValue.length+1;
-    }
-    
-    //editField.style.width = this.getHTMLElement().offsetWidth + "px";  
-    if (this._isMultiLine) {editField.style.height = (this.getHTMLElement().offsetHeight) + "px";}  
-    
-    this._setupSuggestionBox();
-    this.getHTMLElement().replaceChild(editField, this._textNode);
-    if (!dontSelect) {editField.select();}
-    this._isEditing = true;
-  }
-};
-
-
-/**
- * Called when it's time to stop editing and save the changes.
- *
- * @scope    public instance method
- */
-TextView.prototype.stopEditing = function() {
-  if (this._isEditing) {
-    var newValue;
-    if (this._suggestionBox) {
-      newValue = this._suggestionBox.getSelectedItem();
-    }
-    if (!newValue) {
-      newValue = this._editField.value;
-    }
-    var stillProvisional = this._isProvisional && !newValue;
-    var htmlElement = this.getHTMLElement();
-
-
-    if (this._suggestionBox) {
-      this._suggestionBox._blurOnInputField();
-    }
-    if (!this._alwaysUseEditField) {
-      this._isEditing = false;
-      if (stillProvisional) {
-        newValue = this._provisionalText;
-      }
-      var newValueDisplayString = "";
-      if (Util.isString(newValue)) {
-        newValueDisplayString = newValue;
-      }
-      else if (newValue instanceof Item) {
-        newValueDisplayString = newValue.getDisplayString();
-      }
-      this._textNode.data = newValueDisplayString;
-      this._suggestionBox = null;
-      this.getHTMLElement().replaceChild(this._textNode, this._editField);
-    }
-
-    // we need this _writeValue() to be after all display related code, because this may trigger an observer call
-    if (!stillProvisional) { this._writeValue(newValue); }
-  }
-};
-
-
-/**
- * Given a value, this function uses hints form this item's attribute to transform
- * the value to one more suitable for the model. 
- * 
- * For now, all this function does is check to see if expected type of attribute is a 
- * type of category, and if it does not expect a plain text value then transform plain
- * text to a new item belonging to expected category.
- *
- * @scope    private instance method
- * @param    value    The new value to be saved. 
- */
-TextView.prototype._transformToExpectedType = function(value) {
-if (value && Util.isString(value)) {
-    var repository = this.getWorld();
-    var listOfExpectedTypeEntries;
-    if (this._expectedTypeEntries) {
-      listOfExpectedTypeEntries = this._expectedTypeEntries;
-    }
-    else {
-      var attributeCalledExpectedType = repository.getAttributeCalledExpectedType();
-      listOfExpectedTypeEntries = this._attribute.getEntriesForAttribute(attributeCalledExpectedType);
-    }
-    var categoryCalledCategory = repository.getCategoryCalledCategory();
-    var typeCalledText = repository.getTypeCalledText();
-    var typeCalledDate = repository.getTypeCalledDate();
-    var typeCalledNumber = repository.getTypeCalledNumber();
-    if (listOfExpectedTypeEntries) {
-      for (var i=0; i<listOfExpectedTypeEntries.length; ++i) {
-        var aType = listOfExpectedTypeEntries[i].getValue();
-        switch (aType) {
-          case typeCalledText:
-            return value;
-          case typeCalledNumber:
-            var floatVal = parseFloat(value);
-            if (floatVal != NaN) {return floatVal;}
-            break;
-          case typeCalledDate:
-            var dateVal = Date.parse(value);
-            if (!isNaN(dateVal)) {return new Date(value);}
-            break;
-          default:
-            if (aType.isInCategory(categoryCalledCategory)) {
-              value = repository.newItem(value);
-              value.assignToCategory(aType);
-              if (this._suggestions) {
-                // add new item to suggestion list if list is present
-                // PENDING: should this be using an observer instead?
-                Util.addObjectToSet(value, this._suggestions);
-              }
-              return value;
-            }
-            break;
-        }
-      }
-    }
-  }
-  return value;
-};
-/**
- * Writes edited value back into item entry of repository.
- *
- * @scope    private instance method
- * @param    value    The new value to be saved. 
- */
-TextView.prototype._writeValue = function(value) {
-  if (value === 0 || value) {
-    this.getWorld().beginTransaction();
-    value = this._transformToExpectedType(value);
-
-    var oldValue = null;
-    if (this._entry) {oldValue = this._entry.getValue(this._item);}
-    if (oldValue != value) {
-      var attributeCalledInverseAttribute = this.getWorld().getAttributeCalledInverseAttribute();
-      var listOfInverseAttributeEntries = this._attribute.getEntriesForAttribute(attributeCalledInverseAttribute);
-      if (listOfInverseAttributeEntries.length > 0) {
-        // alert(this._attribute.getDisplayString());
-        // alert(listOfInverseAttributeEntries[0].getDisplayString());
-        var inverseAttr = listOfInverseAttributeEntries[0].getValue(this._attribute);
-        this._entry = this._item.replaceEntryWithConnection(this._entry, this._attribute, value, inverseAttr);
-      }
-      else {
-        this._entry = this._item.replaceEntryWithEntryForAttribute(this._entry, this._attribute, value);
-      }
-      var superview = this.getSuperview();
-      if (superview._provisionalItemJustBecomeReal) {
-        superview._provisionalItemJustBecomeReal(this._item);
-      }
-      if (value instanceof Item) {
-        this._valueIsItem = true;
-        var htmlElement = this.getHTMLElement();
-        if (this._isLozenge() && !htmlElement.className.match(TextView.CSS_CLASS_VALUE_IS_ITEM)) {
-          htmlElement.className += " " + TextView.CSS_CLASS_VALUE_IS_ITEM;
-        }
-      }
-    }    
-    this.getWorld().endTransaction();
-  }
-  this._restoreText(true); // call restore text in case item is transformed (e.g. Dates will be normalized)
-};
-
-
-/**
- * Returns text string for TextView to be displaying and editing
- *
- * @scope    private instance method
- */
-TextView.prototype._getText = function() {
-  if (this._isProvisional) {return this._provisionalText;}
-  if (this._entry) {return this._item.getDisplayStringForEntry(this._entry);}
-  return '';
-};
-
-
-/**
- * Restores the original text before this editing session
- *
- * @scope    private instance method
- */
-TextView.prototype._restoreText = function(dontSelect) {
-  var oldText = (this._entry) ?  this._getText() : '';
-  if (this._isEditing) {
-    this._editField.value = oldText;
-  }
-  else {
-    this._textNode.data = oldText;
-  }
-  if (!dontSelect) {this._editField.select();}
-};
-
-
-// -------------------------------------------------------------------
-// Event handler methods
-// -------------------------------------------------------------------
-
-/**
- * Sets a function to be used when onclick is called to the TextView
- *
- * @scope    public instance method
- * @param    inEventObject    An event object. 
- */
-TextView.prototype.setClickFunction = function(inClickFunction) {
-  Util.assert(inClickFunction instanceof Function);
-  this._clickFunction = inClickFunction;
-};
-
-
-/**
- * Called when the user clicks on the text.
- *
- * Handles the mouse click event on text view. Called by listener.
- *
- * @scope    public instance method
- * @param    inEventObject    An event object. 
- */
-TextView.prototype.onClick = function(inEventObject) {
-  if (this._clickFunction && this._clickFunction(inEventObject, this)) {
-    return true;
-  }
-  if (this.isInEditMode()) {
-    this.startEditing();
-  }
-};
-
-
-/**
- *
- */
-TextView.prototype.onFocus = function(inEventObject) {
-  if (this._suggestionBox) {
-    this._suggestionBox._focusOnInputField(inEventObject);
-  }
-};
-
-
-/**
- * Called when focus leaves the text view.
- *
- * Handles loss of focus for text view. Called by listener. Switches back 
- * to static text from editable text.
- *
- * @scope    public instance method
- * @param    inEventObject    An event object. 
- */
-TextView.prototype.onBlur = function(inEventObject) {
-  this.stopEditing();
-};
-
-
-/**
- * Sets a function to be used when onkeypress is called to the TextView
- *
- * @scope    public instance method
- * @param    keyPressFunction    A function. 
- */
-TextView.prototype.setKeyPressFunction = function(keyPressFunction) {
-  this._keyPressFunction = keyPressFunction;
-};
-
-
-/**
- *
- */
-TextView.prototype.onKeyUp = function(inEventObject) {
-  if (this._suggestionBox) {
-    this._suggestionBox._keyUpOnInputField(inEventObject);
-  }
-};
-
-
-/**
- * Called when the user types in editField
- *
- * @scope    public instance method
- * @param    inEventObject    An event object. 
- */
-TextView.prototype.onKeyPress = function(inEventObject) {
-  if (inEventObject.keyCode == Util.ASCII_VALUE_FOR_ESCAPE) {
-    this._restoreText();
-    return true;
-  }
-  if (this._suggestionBox && this._suggestionBox._keyPressOnInputField(inEventObject)) {
-    return true;
-  }
-  if (this._keyPressFunction && this._keyPressFunction(inEventObject, this)) {
-    return true;
-  }
-  var editField = this._editField;
-
-  // PENDING: 
-  // Here are some failed attempts at trying to get the editField to 
-  // automatically grow taller as the user types more text into it.
-  // The idea was to avoid having the editField ever show its scroll 
-  // bar. The user shouldn't feel like they're filling in a form; 
-  // they should feel like they're typing a paragraph in a word
-  // processor, and the paragraph grows naturally as they type, 
-  // with all the paragraphs beneath it getting pushed down the page.
-  
-  // ATTEMPT #0: 
-  // Display diagnostic info...
-  // Initially editField.scrollHeight and editField.clientHeight are equal.  
-  // As you type scrollHeight grows. editField.rows is always -1.
-  /*
-  RootView.displayStatusBlurb("editField.scrollHeight: " + editField.scrollHeight + ", " +
-    "editField.clientHeight: " + editField.clientHeight + ", " +
-    "editField.rows: " + editField.rows);
-  */
-
-  // ATTEMPT #1: 
-  // causes infinite loop -- adding rows doesn't change editField.clientHeight
-  /*
-  while (editField.scrollHeight > editField.clientHeight) {
-    editField.rows += 1;
-  }
-  */
-
-  // ATTEMPT #2: 
-  // slightly clunky, but better than nothing!
-  if (this._isMultiLine && (editField.scrollHeight > editField.clientHeight)) {
-    editField.style.height = editField.scrollHeight + "px";
-  }
-
-  // ATTEMPT #3: has no impact
-  /*
-  if (editField.scrollHeight > editField.clientHeight) {
-    editField.clientHeight = editField.scrollHeight;
-  }
-  */
-};
-
-
-/**
- *
- */
-TextView.prototype.noLongerProvisional = function() {
-  if (this._isProvisional) {
-    this._isProvisional = false;
-    this.getHTMLElement().style.color = this._oldColor;
-    // need to set line below because _writeValue() hasn't returned an entry yet
-    this._entry = this._item.getSingleEntryFromAttribute(this._attribute); 
-    this._buildView();
-  }
-};
-
-
-// -------------------------------------------------------------------
-// Suggestion box methods
-// -------------------------------------------------------------------
-
-/**
- *
- */
-function AttributeSuggestionBox(inHTMLInputField, listOfItems) {
-  this._inputField = inHTMLInputField;
-  this._listOfSuggestedItems = listOfItems.sort(AttributeSuggestionBox._compareItemDisplayNames);
-  this._selectedItem = null;
-  this._shouldHide = inHTMLInputField.value.length === 0;
-  
-  this._attributeSuggestionBoxDivElement = document.createElement('div');
-  // this._attributeSuggestionBoxDivElement.style.visibility = "hidden";
-  this._attributeSuggestionBoxDivElement.style.zIndex = 11;
-  this._attributeSuggestionBoxDivElement.style.display = "none";
-  document.body.appendChild(this._attributeSuggestionBoxDivElement);
-
- /* this._inputField.onkeyup = this._keyPressOnInputField.bindAsEventListener(this);
-  this._inputField.onfocus = this._focusOnInputField.bindAsEventListener(this);
-  this._inputField.onblur = this._blurOnInputField.bindAsEventListener(this); */
-  //this._keyPressOnInputField();
-}
-
-
-/**
- *
- */
-AttributeSuggestionBox.prototype.getSelectedItem = function () {
-  if (!this._selectedItem) {
-    // check if typed item is identical to suggested item
-    var editValue = this._inputField.value;
-    for (var i = 0; i < this._listOfSuggestedItems.length; ++i) {
-      var item = this._listOfSuggestedItems[i];
-      if (editValue.toLowerCase() == item.getDisplayName().toLowerCase()) {return item;}
-    }
-  }
-  return this._selectedItem;
-};
-
-
-/**
- *
- */
-AttributeSuggestionBox._compareItemDisplayNames = function (itemOne, itemTwo) {
-  var displayNameOne = itemOne.getDisplayString();
-  var displayNameTwo = itemTwo.getDisplayString();
-  if (displayNameOne == displayNameTwo) {
-    return 0;
-  } else {
-    return (displayNameOne > displayNameTwo) ?  1 : -1;
-  }
-};
-
-
-/**
- *
- */
-AttributeSuggestionBox.prototype._focusOnInputField = function (inEventObject) {
-  this._redisplayAttributeSuggestionBox();
-};
-
-
-/**
- *
- */
-AttributeSuggestionBox.prototype._keyPressOnInputField = function (inEventObject) {
-  var numberOfMatchingItems = this._listOfMatchingItems.length;
-  if (numberOfMatchingItems === 0) {return false;}
-
-  var asciiValueOfKey = inEventObject.keyCode;
-  var index = -1;
-  var doSelectItem = false;
-  switch (asciiValueOfKey) {
-    case Util.ASCII_VALUE_FOR_DOWN_ARROW:
-      if (this._selectedItem) {
-        index = (Util.getArrayIndex(this._listOfMatchingItems, this._selectedItem)+1) % numberOfMatchingItems;
-      }
-      else {
-        index = 0;
-      }
-      break;
-    case Util.ASCII_VALUE_FOR_UP_ARROW:
-      if (this._selectedItem) {
-        index = Util.getArrayIndex(this._listOfMatchingItems, this._selectedItem)-1;
-        if (index < 0) {index = numberOfMatchingItems-1;}
-      }
-      else {
-        index = numberOfMatchingItems-1;
-      }
-      break;
-      case Util.ASCII_VALUE_FOR_TAB:
-      if (this._inputField.value.length === 0) {return false;}
-      if (!this._selectedItem) {
-        this._selectedItem = this._listOfMatchingItems[0];
-        doSelectItem = true;
-      }
-      break;
-    case Util.ASCII_VALUE_FOR_RETURN:
-      if (this._selectedItem) {doSelectItem = true;}
-      break;
-    case Util.ASCII_VALUE_FOR_LEFT_ARROW:
-    case Util.ASCII_VALUE_FOR_RIGHT_ARROW:
-      // if left or right arrow keys, then hide suggestion box
-      this._setShouldHide(true);
-      return false;
-    default:
-      // show suggestion box if not already shown, then let editField process keystroke
-      this._setShouldHide(false);
-      return false;
-  }
-  if (index != -1) {
-    this._setShouldHide(false);
-    this._selectedItem = this._listOfMatchingItems[index];
-    this._redisplayAttributeSuggestionBox();
-    return true;
-  }
-  if (doSelectItem) {
-    this._inputField.value = this._selectedItem.getDisplayString();
-    this._setShouldHide(true);
-  }
-  return false;
-};
-
-
-/**
- *
- */
-AttributeSuggestionBox.prototype._keyUpOnInputField = function (inEventObject) {
-  this._redisplayAttributeSuggestionBox();
-};
-
-
-/**
- *
- */
-AttributeSuggestionBox.prototype._blurOnInputField = function () {
-  // make the suggestion box disappear
-  this._attributeSuggestionBoxDivElement.style.display = "none";
-};
-
-
-/**
- *
- */
-AttributeSuggestionBox.prototype._clickOnSelection = function (inEventObject, item) {
-  this._selectedItem = item;
-};
-
-
-/**
- *
- */
-AttributeSuggestionBox.prototype._setShouldHide = function (shouldHide) {
-  // make the suggestion box disappear
-  this._shouldHide = shouldHide;
-  this._selectedItem = null;
-  if (shouldHide) {
-    this._attributeSuggestionBoxDivElement.style.display = "none";
-  }
-  else {
-    this._redisplayAttributeSuggestionBox();
-  }
-};
-
-
-/**
- *
- */
-AttributeSuggestionBox.prototype._redisplayAttributeSuggestionBox = function () {
-  //if (this._shouldHide) {return;} // if SuggestionBox is in hide mode, don't show the box
-  
-  var partialInputString = this._inputField.value;
-  var listOfMatchingItems = [];
-  var key;
-  var item;
-
-  for (key in this._listOfSuggestedItems) {
-    item = this._listOfSuggestedItems[key];
-    var lowerCaseEntryString = item.getDisplayString().toLowerCase();
-    var lowerCaseInputString = partialInputString.toLowerCase();
-    var numberOfCharactersToCompare = lowerCaseInputString.length;
-    var shortEntryString = lowerCaseEntryString.substring(0, numberOfCharactersToCompare);
-    if (shortEntryString == lowerCaseInputString) {
-      // we have a match!
-      listOfMatchingItems.push(item);
-    }
-  }
-  this._listOfMatchingItems = listOfMatchingItems;
-
-  if (this._shouldHide || listOfMatchingItems.length === 0) {
-    // make the suggestion box disappear
-    this._attributeSuggestionBoxDivElement.style.display = "none";
-  } else {
-    View.removeChildrenOfElement(this._attributeSuggestionBoxDivElement);
-    var table = document.createElement('table');
-    var rowNumber = 0;
-    var columnNumber = 0;
-    for (key in listOfMatchingItems) {
-      item = listOfMatchingItems[key];
-      var textNode = document.createTextNode(item.getDisplayString());
-      var row = table.insertRow(rowNumber);
-      var cell = row.insertCell(columnNumber);
-      row.className = (this._selectedItem == item) ? "selected":"";
-      //cell.style.background = (this._selectedItem == item) ? "rgb(0%,70%,100%)":""; //pending need to CSS-ify this
-      cell.appendChild(textNode);
-      cell.onmousedown = this._clickOnSelection.bindAsEventListener(this, item);
-      rowNumber += 1;
-    }
-    this._attributeSuggestionBoxDivElement.appendChild(table);
-
-    // set-up the suggestion box to open just below the input field it comes from
-    var AttributeSuggestionBoxTop = Util.getOffsetTopFromElement(this._inputField) + this._inputField.offsetHeight;
-    var AttributeSuggestionBoxLeft = Util.getOffsetLeftFromElement(this._inputField);
-    this._attributeSuggestionBoxDivElement.style.top = AttributeSuggestionBoxTop + "px"; 
-    this._attributeSuggestionBoxDivElement.style.left = AttributeSuggestionBoxLeft + "px";
-    // alert(this._inputField.offsetWidth);
-    this._attributeSuggestionBoxDivElement.style.width = (this._inputField.offsetWidth - 2)+ "px";
-
-    // this._attributeSuggestionBoxDivElement.style.zIndex = 11;
-    this._attributeSuggestionBoxDivElement.className = "suggestion_box";
-    this._attributeSuggestionBoxDivElement.style.visibility = "visible";
-    this._attributeSuggestionBoxDivElement.style.display = "block";
-  }
-};
-
-// -------------------------------------------------------------------
-// End of file
-// -------------------------------------------------------------------
\ No newline at end of file

Modified: trunk/source/base_style.css
===================================================================
--- trunk/source/base_style.css	2005-07-02 19:27:18 UTC (rev 207)
+++ trunk/source/base_style.css	2005-07-02 19:54:15 UTC (rev 208)
@@ -612,7 +612,7 @@
 /****************************************/
 /* Text view styles                     */
 
-.text_view {
+.entry_view {
   /* height: 100%; */
   width: 100%;
   font-family: Arial, Verdana, sans-serif;
@@ -622,7 +622,7 @@
   /* overflow: visible; */
 }
 
-.textViewItem {
+.entryViewItem {
   background-color:#DEE7F8;
   padding: 1px;
   border: thin solid #A4BDEC;	

Copied: trunk/source/view/EntryView.js (from rev 203, trunk/source/TextView.js)
===================================================================
--- trunk/source/TextView.js	2005-07-01 02:21:33 UTC (rev 203)
+++ trunk/source/view/EntryView.js	2005-07-02 19:54:15 UTC (rev 208)
@@ -0,0 +1,584 @@
+/*****************************************************************************
+ EntryView.js
+ 
+******************************************************************************
+ Written in 2005 by 
+    Brian Douglas Skinner <brian.skinner at gumption.org>
+    Chih-Chao Lam <chao at cs.stanford.edu>
+  
+ Copyright rights relinquished under the Creative Commons  
+ Public Domain Dedication:
+    http://creativecommons.org/licenses/publicdomain/
+  
+ You can copy freely from this file.  This work may be freely reproduced, 
+ distributed, transmitted, used, modified, built upon, or otherwise exploited
+ by anyone for any purpose.
+  
+ This work is provided on an "AS IS" basis, without warranties or conditions 
+ of any kind, either express or implied, including, without limitation, any 
+ warranties or conditions of title, non-infringement, merchantability, or 
+ fitness for a particular purpose. You are solely responsible for determining 
+ the appropriateness of using or distributing the work and assume all risks 
+ associated with use of this work, including but not limited to the risks and 
+ costs of errors, compliance with applicable laws, damage to or loss of data 
+ or equipment, and unavailability or interruption of operations.
+
+ In no event shall the authors or contributors have any liability for any 
+ direct, indirect, incidental, special, exemplary, or consequential damages,
+ however caused and on any theory of liability, whether in contract, strict 
+ liability, or tort (including negligence), arising in any way out of or in 
+ connection with the use or distribution of the work.
+*****************************************************************************/
+
+
+// -------------------------------------------------------------------
+// Dependencies, expressed in the syntax that JSLint understands:
+// 
+/*global document  */
+/*global Util  */
+/*global Item, Entry  */
+/*global SuggestionBox  */
+// -------------------------------------------------------------------
+
+
+// -------------------------------------------------------------------
+// EntryView public class constants
+// -------------------------------------------------------------------
+// EntryView.ELEMENT_CLASS_TEXT_BLOCK = "text_block"; 
+EntryView.CSS_CLASS_VALUE_IS_ITEM = "entryViewItem";
+EntryView.PROVISIONAL_COLOR = '#999999';
+
+
+/**
+ * An instance of EntryView can be placed in any parent container View
+ * to display and (if in edit mode) edit multi-lines of text
+ *
+ * @scope    public instance constructor
+ * @extends  View
+ * @param    theSuperview    The view that this view is nested in. 
+ * @param    theItem         The Item to be displayed and edited by this view. 
+ * @param    theAttribute    The attribute of the item to be displayed.
+ * @param    theElement      The HTMLElement to display the HTML in. 
+ * @param    theClassType    A string that gives a class name to assign to the HTML element. 
+ * @param    isMultiLine     a boolean indicating if text view is single line or multi-line
+ */
+EntryView.prototype = new View();  // makes EntryView be a subclass of View
+function EntryView(theSuperview, inElement, inItem, inAttribute, inEntry, inClassName, isMultiLine) {
+  Util.assert((!inEntry) || inEntry instanceof Entry);
+  Util.assert(inItem instanceof Item);
+  Util.assert(inAttribute instanceof Item);
+  //Util.assert(theAttribute instanceof Attribute); PENDING need to check that attribute is an attribute
+  
+  this.setSuperview(theSuperview);
+  this.setHTMLElement(inElement);
+  inElement.style.width = "100%";
+  inElement.style.height = "100%"; // make this element expand to fill parent element where possible
+  this._item = inItem;
+  this._attribute = inAttribute;
+  this._entry = inEntry;
+  this._editField = null;
+  this._className = inClassName;
+  this._isMultiLine = isMultiLine;
+  this._isEditing = false;
+  this._proxyOnKeyFunction = null;
+  this._alwaysUseEditField = null;
+  
+  this._isProvisional = inItem.isProvisional();
+  if (this._isProvisional) {
+    this._provisionalText = inAttribute.getDisplayString();
+  }
+  else if (inEntry && inEntry.getValue(this._item) instanceof Item) {
+    this._valueIsItem = true;
+  }
+}
+
+
+/**
+ *
+ */
+EntryView.prototype._setupSuggestionBox = function() {
+  if (this._suggestions) {
+    var suggestionBox = new SuggestionBox(this._editField, this._suggestions);
+    this._suggestionBox = suggestionBox;
+    if (this._editField && this._autoWiden) {
+      var maxLength = 4;
+      for (var i=0; i < this._suggestions.length;++i) {
+        var aSuggestion = this._suggestions[i];
+        if (aSuggestion.getDisplayString().length > maxLength) {maxLength = aSuggestion.getDisplayString().length;}
+      }
+      this._editField.size = maxLength;
+    }
+  }
+};
+
+/**
+ *
+ */
+EntryView.prototype.alwaysUseEditField = function() {
+  this._alwaysUseEditField = true;
+  if (this._myHasEverBeenDisplayedFlag) {
+    this.startEditing(true);
+  }
+};
+
+/**
+ *
+ */
+EntryView.prototype.setAutoWiden = function(inAutoWiden) {
+  this._autoWiden = inAutoWiden;
+};
+
+/**
+ *
+ */
+EntryView.prototype.setExpectedTypeEntries = function(expectedTypeEntries) {
+  Util.assert(Util.isArray(expectedTypeEntries));
+  for(var i=0;i < expectedTypeEntries.length; ++i) {
+    Util.assert(expectedTypeEntries[i] instanceof Entry);
+  }
+  this._expectedTypeEntries = expectedTypeEntries;
+};
+
+
+/**
+ *
+ */
+EntryView.prototype.setSuggestions = function(suggestionList) {
+  if (suggestionList) {Util.assert(Util.isArray(suggestionList));}
+  this._suggestions = suggestionList;
+};
+
+
+/**
+ * Updates the HTML elements in this view to reflect any changes in 
+ * the item's attribute values.
+ *
+ * @scope    public instance method
+*/
+EntryView.prototype.refresh = function() {
+  if (!this._myHasEverBeenDisplayedFlag) {
+    this._buildView();
+  } else {
+  // if (weHaveBeenNotifiedOfChangesTo(this._item)) {
+  //   var newText = getNewValueFrom(this._item);
+  //   this._textNode.data = newText;
+  // }
+  }
+};
+
+
+/**
+ *
+ */
+EntryView.prototype._isLozenge = function() {
+  return this._valueIsItem && !this._alwaysUseEditField;
+};
+
+
+/**
+ * Re-creates all the HTML for the EntryView, and hands the HTML to the 
+ * browser to be re-drawn.
+ *
+ * @scope    private instance method
+ */
+EntryView.prototype._buildView = function() {
+  var htmlElement = this.getHTMLElement();
+  View.removeChildrenOfElement(htmlElement);
+  
+  var textString = this._getText();
+  
+  if (this._isProvisional) {
+    this._oldColor = htmlElement.style.color;
+    htmlElement.style.color = EntryView.PROVISIONAL_COLOR;
+  }
+  else if (this._isLozenge()) {
+    htmlElement.className += " " + EntryView.CSS_CLASS_VALUE_IS_ITEM;
+  }
+  this._textNode = document.createTextNode(textString);
+  htmlElement.appendChild(this._textNode);
+  htmlElement.onclick =  this.onClick.bindAsEventListener(this);
+  if (this._alwaysUseEditField) {
+    this.startEditing(true);
+  }
+    
+  this._myHasEverBeenDisplayedFlag = true;
+};
+
+
+/**
+ *
+ */
+EntryView.prototype._canStartEditing = function() {
+  return (!this._isEditing  && !(this._valueIsItem && !this._alwaysUseEditField));
+};
+
+
+/**
+ * Switch to edit text field for editing.
+ *
+ * @scope    public instance method
+ */
+EntryView.prototype.startEditing = function(dontSelect) {
+  var canStartEditing = !(this._isEditing || this._isLozenge());
+  if (canStartEditing) {
+    var editField = this._editField;
+    if (!editField) {
+      if (this._isMultiLine) {
+        editField = this._editField = document.createElement("textarea");
+      }
+      else {
+        editField = this._editField= document.createElement("input");
+        editField.type = 'text';
+      }
+      editField.className = this._className;
+      var listener = this; 
+      editField.onblur = this.onBlur.bindAsEventListener(this);
+      editField.onkeypress = this.onKeyPress.bindAsEventListener(this);
+      editField.onkeyup = this.onKeyUp.bindAsEventListener(this);
+      editField.onfocus = this.onFocus.bindAsEventListener(this);
+      editField.defaultValue = this._isProvisional ? '' : this._textNode.data;
+      editField.size = 5; //editField.defaultValue.length+1;
+    }
+    
+    //editField.style.width = this.getHTMLElement().offsetWidth + "px";  
+    if (this._isMultiLine) {editField.style.height = (this.getHTMLElement().offsetHeight) + "px";}  
+    
+    this._setupSuggestionBox();
+    this.getHTMLElement().replaceChild(editField, this._textNode);
+    if (!dontSelect) {editField.select();}
+    this._isEditing = true;
+  }
+};
+
+
+/**
+ * Called when it's time to stop editing and save the changes.
+ *
+ * @scope    public instance method
+ */
+EntryView.prototype.stopEditing = function() {
+  if (this._isEditing) {
+    var newValue;
+    if (this._suggestionBox) {
+      newValue = this._suggestionBox.getSelectedItem();
+    }
+    if (!newValue) {
+      newValue = this._editField.value;
+    }
+    var stillProvisional = this._isProvisional && !newValue;
+    var htmlElement = this.getHTMLElement();
+
+
+    if (this._suggestionBox) {
+      this._suggestionBox._blurOnInputField();
+    }
+    if (!this._alwaysUseEditField) {
+      this._isEditing = false;
+      if (stillProvisional) {
+        newValue = this._provisionalText;
+      }
+      var newValueDisplayString = "";
+      if (Util.isString(newValue)) {
+        newValueDisplayString = newValue;
+      }
+      else if (newValue instanceof Item) {
+        newValueDisplayString = newValue.getDisplayString();
+      }
+      this._textNode.data = newValueDisplayString;
+      this._suggestionBox = null;
+      this.getHTMLElement().replaceChild(this._textNode, this._editField);
+    }
+
+    // we need this _writeValue() to be after all display related code, because this may trigger an observer call
+    if (!stillProvisional) { this._writeValue(newValue); }
+  }
+};
+
+
+/**
+ * Given a value, this function uses hints form this item's attribute to transform
+ * the value to one more suitable for the model. 
+ * 
+ * For now, all this function does is check to see if expected type of attribute is a 
+ * type of category, and if it does not expect a plain text value then transform plain
+ * text to a new item belonging to expected category.
+ *
+ * @scope    private instance method
+ * @param    value    The new value to be saved. 
+ */
+EntryView.prototype._transformToExpectedType = function(value) {
+if (value && Util.isString(value)) {
+    var repository = this.getWorld();
+    var listOfExpectedTypeEntries;
+    if (this._expectedTypeEntries) {
+      listOfExpectedTypeEntries = this._expectedTypeEntries;
+    }
+    else {
+      var attributeCalledExpectedType = repository.getAttributeCalledExpectedType();
+      listOfExpectedTypeEntries = this._attribute.getEntriesForAttribute(attributeCalledExpectedType);
+    }
+    var categoryCalledCategory = repository.getCategoryCalledCategory();
+    var typeCalledText = repository.getTypeCalledText();
+    var typeCalledDate = repository.getTypeCalledDate();
+    var typeCalledNumber = repository.getTypeCalledNumber();
+    if (listOfExpectedTypeEntries) {
+      for (var i=0; i<listOfExpectedTypeEntries.length; ++i) {
+        var aType = listOfExpectedTypeEntries[i].getValue();
+        switch (aType) {
+          case typeCalledText:
+            return value;
+          case typeCalledNumber:
+            var floatVal = parseFloat(value);
+            if (floatVal != NaN) {return floatVal;}
+            break;
+          case typeCalledDate:
+            var dateVal = Date.parse(value);
+            if (!isNaN(dateVal)) {return new Date(value);}
+            break;
+          default:
+            if (aType.isInCategory(categoryCalledCategory)) {
+              value = repository.newItem(value);
+              value.assignToCategory(aType);
+              if (this._suggestions) {
+                // add new item to suggestion list if list is present
+                // PENDING: should this be using an observer instead?
+                Util.addObjectToSet(value, this._suggestions);
+              }
+              return value;
+            }
+            break;
+        }
+      }
+    }
+  }
+  return value;
+};
+/**
+ * Writes edited value back into item entry of repository.
+ *
+ * @scope    private instance method
+ * @param    value    The new value to be saved. 
+ */
+EntryView.prototype._writeValue = function(value) {
+  if (value === 0 || value) {
+    this.getWorld().beginTransaction();
+    value = this._transformToExpectedType(value);
+
+    var oldValue = null;
+    if (this._entry) {oldValue = this._entry.getValue(this._item);}
+    if (oldValue != value) {
+      var attributeCalledInverseAttribute = this.getWorld().getAttributeCalledInverseAttribute();
+      var listOfInverseAttributeEntries = this._attribute.getEntriesForAttribute(attributeCalledInverseAttribute);
+      if (listOfInverseAttributeEntries.length > 0) {
+        // alert(this._attribute.getDisplayString());
+        // alert(listOfInverseAttributeEntries[0].getDisplayString());
+        var inverseAttr = listOfInverseAttributeEntries[0].getValue(this._attribute);
+        this._entry = this._item.replaceEntryWithConnection(this._entry, this._attribute, value, inverseAttr);
+      }
+      else {
+        this._entry = this._item.replaceEntryWithEntryForAttribute(this._entry, this._attribute, value);
+      }
+      var superview = this.getSuperview();
+      if (superview._provisionalItemJustBecomeReal) {
+        superview._provisionalItemJustBecomeReal(this._item);
+      }
+      if (value instanceof Item) {
+        this._valueIsItem = true;
+        var htmlElement = this.getHTMLElement();
+        if (this._isLozenge() && !htmlElement.className.match(EntryView.CSS_CLASS_VALUE_IS_ITEM)) {
+          htmlElement.className += " " + EntryView.CSS_CLASS_VALUE_IS_ITEM;
+        }
+      }
+    }    
+    this.getWorld().endTransaction();
+  }
+  this._restoreText(true); // call restore text in case item is transformed (e.g. Dates will be normalized)
+};
+
+
+/**
+ * Returns text string for EntryView to be displaying and editing
+ *
+ * @scope    private instance method
+ */
+EntryView.prototype._getText = function() {
+  if (this._isProvisional) {return this._provisionalText;}
+  if (this._entry) {return this._item.getDisplayStringForEntry(this._entry);}
+  return '';
+};
+
+
+/**
+ * Restores the original text before this editing session
+ *
+ * @scope    private instance method
+ */
+EntryView.prototype._restoreText = function(dontSelect) {
+  var oldText = (this._entry) ?  this._getText() : '';
+  if (this._isEditing) {
+    this._editField.value = oldText;
+  }
+  else {
+    this._textNode.data = oldText;
+  }
+  if (!dontSelect) {this._editField.select();}
+};
+
+
+// -------------------------------------------------------------------
+// Event handler methods
+// -------------------------------------------------------------------
+
+/**
+ * Sets a function to be used when onclick is called to the EntryView
+ *
+ * @scope    public instance method
+ * @param    inEventObject    An event object. 
+ */
+EntryView.prototype.setClickFunction = function(inClickFunction) {
+  Util.assert(inClickFunction instanceof Function);
+  this._clickFunction = inClickFunction;
+};
+
+
+/**
+ * Called when the user clicks on the text.
+ *
+ * Handles the mouse click event on text view. Called by listener.
+ *
+ * @scope    public instance method
+ * @param    inEventObject    An event object. 
+ */
+EntryView.prototype.onClick = function(inEventObject) {
+  if (this._clickFunction && this._clickFunction(inEventObject, this)) {
+    return true;
+  }
+  if (this.isInEditMode()) {
+    this.startEditing();
+  }
+};
+
+
+/**
+ *
+ */
+EntryView.prototype.onFocus = function(inEventObject) {
+  if (this._suggestionBox) {
+    this._suggestionBox._focusOnInputField(inEventObject);
+  }
+};
+
+
+/**
+ * Called when focus leaves the text view.
+ *
+ * Handles loss of focus for text view. Called by listener. Switches back 
+ * to static text from editable text.
+ *
+ * @scope    public instance method
+ * @param    inEventObject    An event object. 
+ */
+EntryView.prototype.onBlur = function(inEventObject) {
+  this.stopEditing();
+};
+
+
+/**
+ * Sets a function to be used when onkeypress is called to the EntryView
+ *
+ * @scope    public instance method
+ * @param    keyPressFunction    A function. 
+ */
+EntryView.prototype.setKeyPressFunction = function(keyPressFunction) {
+  this._keyPressFunction = keyPressFunction;
+};
+
+
+/**
+ *
+ */
+EntryView.prototype.onKeyUp = function(inEventObject) {
+  if (this._suggestionBox) {
+    this._suggestionBox._keyUpOnInputField(inEventObject);
+  }
+};
+
+
+/**
+ * Called when the user types in editField
+ *
+ * @scope    public instance method
+ * @param    inEventObject    An event object. 
+ */
+EntryView.prototype.onKeyPress = function(inEventObject) {
+  if (inEventObject.keyCode == Util.ASCII_VALUE_FOR_ESCAPE) {
+    this._restoreText();
+    return true;
+  }
+  if (this._suggestionBox && this._suggestionBox._keyPressOnInputField(inEventObject)) {
+    return true;
+  }
+  if (this._keyPressFunction && this._keyPressFunction(inEventObject, this)) {
+    return true;
+  }
+  var editField = this._editField;
+
+  // PENDING: 
+  // Here are some failed attempts at trying to get the editField to 
+  // automatically grow taller as the user types more text into it.
+  // The idea was to avoid having the editField ever show its scroll 
+  // bar. The user shouldn't feel like they're filling in a form; 
+  // they should feel like they're typing a paragraph in a word
+  // processor, and the paragraph grows naturally as they type, 
+  // with all the paragraphs beneath it getting pushed down the page.
+  
+  // ATTEMPT #0: 
+  // Display diagnostic info...
+  // Initially editField.scrollHeight and editField.clientHeight are equal.  
+  // As you type scrollHeight grows. editField.rows is always -1.
+  /*
+  RootView.displayStatusBlurb("editField.scrollHeight: " + editField.scrollHeight + ", " +
+    "editField.clientHeight: " + editField.clientHeight + ", " +
+    "editField.rows: " + editField.rows);
+  */
+
+  // ATTEMPT #1: 
+  // causes infinite loop -- adding rows doesn't change editField.clientHeight
+  /*
+  while (editField.scrollHeight > editField.clientHeight) {
+    editField.rows += 1;
+  }
+  */
+
+  // ATTEMPT #2: 
+  // slightly clunky, but better than nothing!
+  if (this._isMultiLine && (editField.scrollHeight > editField.clientHeight)) {
+    editField.style.height = editField.scrollHeight + "px";
+  }
+
+  // ATTEMPT #3: has no impact
+  /*
+  if (editField.scrollHeight > editField.clientHeight) {
+    editField.clientHeight = editField.scrollHeight;
+  }
+  */
+};
+
+
+/**
+ *
+ */
+EntryView.prototype.noLongerProvisional = function() {
+  if (this._isProvisional) {
+    this._isProvisional = false;
+    this.getHTMLElement().style.color = this._oldColor;
+    // need to set line below because _writeValue() hasn't returned an entry yet
+    this._entry = this._item.getSingleEntryFromAttribute(this._attribute); 
+    this._buildView();
+  }
+};
+
+
+// -------------------------------------------------------------------
+// End of file
+// -------------------------------------------------------------------
\ No newline at end of file

Added: trunk/source/view/LintTest.html
===================================================================
--- trunk/source/view/LintTest.html	2005-07-02 19:27:18 UTC (rev 207)
+++ trunk/source/view/LintTest.html	2005-07-02 19:54:15 UTC (rev 208)
@@ -0,0 +1,86 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
+<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" >
+
+<!-- 
+ Written in 2005 by Brian Douglas Skinner <brian.skinner at gumption.org>
+  
+ Copyright rights relinquished under the Creative Commons  
+ Public Domain Dedication:
+    http://creativecommons.org/licenses/publicdomain/
+-->
+
+  <head>
+    <title>Unit tests using jslint</title>
+
+    <script type="text/javascript" src="../../third_party/jsunit/jsunit2_1/app/jsUnitCore.js"></script>
+    <script type="text/javascript" src="../../third_party/jslint/fulljslint.js"></script>
+    <script type="text/javascript" src="../util/Util.js"></script>
+    <script type="text/javascript" src="../util/LintTool.js"></script>
+    <script type="text/javascript" src="LintTest.js"></script>
+  </head>
+  
+  <body>
+    <h1>Unit tests using jslint</h1>
+
+    <p>This page is used to run unit tests for the JavaScript code in the 
+    OpenRecord project.</p>
+    
+    <p>&nbsp;</p>
+    <hr/>
+    <p>To see the tests, open this .html file in a text editor. Or, within a  
+    web browser, you should be able see the source for this file by using 
+    some menu like <b>View</b> followed by <b>Page Source</b>. The tests 
+    may be in this file, or they may be in a separate file that has the
+    same name as this one, except with a .js extension instead of a .html
+    extension.</p>
+ 
+    <p>The unit tests are set up to run in the
+    <a href="http://www.edwardh.com/jsunit/" rel="external">JsUnit framework</a>
+    written by 
+    <a href="http://www.edwardh.com/" rel="external">Edward Hieatt</a>. </p>
+
+    <p>If you're looking at this page across an "http://" connection, rather
+    than having loaded it as a "file:///", then you may be able to run the
+    unit tests. The web server that served you this page may also have a
+    JsUnit testRunner available. If so, you should be able to run these unit
+    tests by going to
+    <a href="../../third_party/jsunit/jsunit2_1/testRunner.html?testpage=" 
+    onclick="href+=window.location.href;" rel="external">the local testRunner 
+    page</a>, and hitting the <b>Run</b> button.</p>
+
+    <p>You can also run these unit tests on your local computer. To do that you 
+    first need to download <a href="http://www.edwardh.com/jsunit/" 
+    rel="external">JsUnit</a>.</p>
+    
+    <p>&nbsp;</p>
+    <hr/>
+    <p class="copyright">You can copy freely from this work &mdash; copyright 
+    rights relinquished under the Creative Commons  
+    <a rel="license external" 
+    href="http://creativecommons.org/licenses/publicdomain/">Public Domain 
+    Dedication</a>.</p>
+
+<!-- Creative Commons metadata for Public Domain License 
+
+<rdf:RDF xmlns="http://web.resource.org/cc/"
+    xmlns:dc="http://purl.org/dc/elements/1.1/"
+    xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
+<Work rdf:about="">
+   <dc:title>openrecord.org</dc:title>
+   <dc:type rdf:resource="http://purl.org/dc/dcmitype/Text" />
+   <license rdf:resource="http://web.resource.org/cc/PublicDomain" />
+</Work>
+
+<License rdf:about="http://web.resource.org/cc/PublicDomain">
+   <permits rdf:resource="http://web.resource.org/cc/Reproduction" />
+   <permits rdf:resource="http://web.resource.org/cc/Distribution" />
+   <permits rdf:resource="http://web.resource.org/cc/DerivativeWorks" />
+</License>
+
+</rdf:RDF>
+
+-->
+  </body>
+</html>
+

Added: trunk/source/view/LintTest.js
===================================================================
--- trunk/source/view/LintTest.js	2005-07-02 19:27:18 UTC (rev 207)
+++ trunk/source/view/LintTest.js	2005-07-02 19:54:15 UTC (rev 208)
@@ -0,0 +1,56 @@
+/*****************************************************************************
+ LintTest.js
+ 
+******************************************************************************
+ Written in 2005 by Brian Douglas Skinner <brian.skinner at gumption.org>
+  
+ Copyright rights relinquished under the Creative Commons  
+ Public Domain Dedication:
+    http://creativecommons.org/licenses/publicdomain/
+  
+ You can copy freely from this file.  This work may be freely reproduced, 
+ distributed, transmitted, used, modified, built upon, or otherwise exploited
+ by anyone for any purpose.
+  
+ This work is provided on an "AS IS" basis, without warranties or conditions 
+ of any kind, either express or implied, including, without limitation, any 
+ warranties or conditions of title, non-infringement, merchantability, or 
+ fitness for a particular purpose. You are solely responsible for determining 
+ the appropriateness of using or distributing the work and assume all risks 
+ associated with use of this work, including but not limited to the risks and 
+ costs of errors, compliance with applicable laws, damage to or loss of data 
+ or equipment, and unavailability or interruption of operations.
+
+ In no event shall the authors or contributors have any liability for any 
+ direct, indirect, incidental, special, exemplary, or consequential damages,
+ however caused and on any theory of liability, whether in contract, strict 
+ liability, or tort (including negligence), arising in any way out of or in 
+ connection with the use or distribution of the work.
+*****************************************************************************/
+ 
+// -------------------------------------------------------------------
+// Dependencies, expressed in the syntax that JSLint understands:
+// 
+/*global LintTool, assertTrue, setUp, tearDown */
+// -------------------------------------------------------------------
+
+function setUp() {
+}
+
+function testJsLintOnOpenRecordCode() {
+  var listOfSourceCodeFiles = [
+    "EntryView.js",
+    "SuggestionBox.js"];
+  var prefix = "../../../source/view/";
+  var errorReport = LintTool.getErrorReportFromListOfFilesnames(listOfSourceCodeFiles, prefix);
+  var message = "Lint check \n" + errorReport;
+  assertTrue(message, !errorReport);
+}
+
+function tearDown() {
+}
+
+
+// -------------------------------------------------------------------
+// End of file
+// -------------------------------------------------------------------

Added: trunk/source/view/SuggestionBox.js
===================================================================
--- trunk/source/view/SuggestionBox.js	2005-07-02 19:27:18 UTC (rev 207)
+++ trunk/source/view/SuggestionBox.js	2005-07-02 19:54:15 UTC (rev 208)
@@ -0,0 +1,268 @@
+/*****************************************************************************
+ SuggestionBox.js
+ 
+******************************************************************************
+ Written in 2005 by 
+    Brian Douglas Skinner <brian.skinner at gumption.org>
+    Chih-Chao Lam <chao at cs.stanford.edu>
+  
+ Copyright rights relinquished under the Creative Commons  
+ Public Domain Dedication:
+    http://creativecommons.org/licenses/publicdomain/
+  
+ You can copy freely from this file.  This work may be freely reproduced, 
+ distributed, transmitted, used, modified, built upon, or otherwise exploited
+ by anyone for any purpose.
+  
+ This work is provided on an "AS IS" basis, without warranties or conditions 
+ of any kind, either express or implied, including, without limitation, any 
+ warranties or conditions of title, non-infringement, merchantability, or 
+ fitness for a particular purpose. You are solely responsible for determining 
+ the appropriateness of using or distributing the work and assume all risks 
+ associated with use of this work, including but not limited to the risks and 
+ costs of errors, compliance with applicable laws, damage to or loss of data 
+ or equipment, and unavailability or interruption of operations.
+
+ In no event shall the authors or contributors have any liability for any 
+ direct, indirect, incidental, special, exemplary, or consequential damages,
+ however caused and on any theory of liability, whether in contract, strict 
+ liability, or tort (including negligence), arising in any way out of or in 
+ connection with the use or distribution of the work.
+*****************************************************************************/
+
+
+// -------------------------------------------------------------------
+// Dependencies, expressed in the syntax that JSLint understands:
+// 
+/*global document  */
+/*global Util  */
+/*global View  */
+// -------------------------------------------------------------------
+
+
+/**
+ *
+ */
+function SuggestionBox(inHTMLInputField, listOfItems) {
+  this._inputField = inHTMLInputField;
+  this._listOfSuggestedItems = listOfItems.sort(SuggestionBox._compareItemDisplayNames);
+  this._selectedItem = null;
+  this._shouldHide = inHTMLInputField.value.length === 0;
+  
+  this._attributeSuggestionBoxDivElement = document.createElement('div');
+  // this._attributeSuggestionBoxDivElement.style.visibility = "hidden";
+  this._attributeSuggestionBoxDivElement.style.zIndex = 11;
+  this._attributeSuggestionBoxDivElement.style.display = "none";
+  document.body.appendChild(this._attributeSuggestionBoxDivElement);
+
+ /* this._inputField.onkeyup = this._keyPressOnInputField.bindAsEventListener(this);
+  this._inputField.onfocus = this._focusOnInputField.bindAsEventListener(this);
+  this._inputField.onblur = this._blurOnInputField.bindAsEventListener(this); */
+  //this._keyPressOnInputField();
+}
+
+
+/**
+ *
+ */
+SuggestionBox.prototype.getSelectedItem = function () {
+  if (!this._selectedItem) {
+    // check if typed item is identical to suggested item
+    var editValue = this._inputField.value;
+    for (var i = 0; i < this._listOfSuggestedItems.length; ++i) {
+      var item = this._listOfSuggestedItems[i];
+      if (editValue.toLowerCase() == item.getDisplayName().toLowerCase()) {return item;}
+    }
+  }
+  return this._selectedItem;
+};
+
+
+/**
+ *
+ */
+SuggestionBox._compareItemDisplayNames = function (itemOne, itemTwo) {
+  var displayNameOne = itemOne.getDisplayString();
+  var displayNameTwo = itemTwo.getDisplayString();
+  if (displayNameOne == displayNameTwo) {
+    return 0;
+  } else {
+    return (displayNameOne > displayNameTwo) ?  1 : -1;
+  }
+};
+
+
+/**
+ *
+ */
+SuggestionBox.prototype._focusOnInputField = function (inEventObject) {
+  this._redisplaySuggestionBox();
+};
+
+
+/**
+ *
+ */
+SuggestionBox.prototype._keyPressOnInputField = function (inEventObject) {
+  var numberOfMatchingItems = this._listOfMatchingItems.length;
+  if (numberOfMatchingItems === 0) {return false;}
+
+  var asciiValueOfKey = inEventObject.keyCode;
+  var index = -1;
+  var doSelectItem = false;
+  switch (asciiValueOfKey) {
+    case Util.ASCII_VALUE_FOR_DOWN_ARROW:
+      if (this._selectedItem) {
+        index = (Util.getArrayIndex(this._listOfMatchingItems, this._selectedItem)+1) % numberOfMatchingItems;
+      }
+      else {
+        index = 0;
+      }
+      break;
+    case Util.ASCII_VALUE_FOR_UP_ARROW:
+      if (this._selectedItem) {
+        index = Util.getArrayIndex(this._listOfMatchingItems, this._selectedItem)-1;
+        if (index < 0) {index = numberOfMatchingItems-1;}
+      }
+      else {
+        index = numberOfMatchingItems-1;
+      }
+      break;
+      case Util.ASCII_VALUE_FOR_TAB:
+      if (this._inputField.value.length === 0) {return false;}
+      if (!this._selectedItem) {
+        this._selectedItem = this._listOfMatchingItems[0];
+        doSelectItem = true;
+      }
+      break;
+    case Util.ASCII_VALUE_FOR_RETURN:
+      if (this._selectedItem) {doSelectItem = true;}
+      break;
+    case Util.ASCII_VALUE_FOR_LEFT_ARROW:
+    case Util.ASCII_VALUE_FOR_RIGHT_ARROW:
+      // if left or right arrow keys, then hide suggestion box
+      this._setShouldHide(true);
+      return false;
+    default:
+      // show suggestion box if not already shown, then let editField process keystroke
+      this._setShouldHide(false);
+      return false;
+  }
+  if (index != -1) {
+    this._setShouldHide(false);
+    this._selectedItem = this._listOfMatchingItems[index];
+    this._redisplaySuggestionBox();
+    return true;
+  }
+  if (doSelectItem) {
+    this._inputField.value = this._selectedItem.getDisplayString();
+    this._setShouldHide(true);
+  }
+  return false;
+};
+
+
+/**
+ *
+ */
+SuggestionBox.prototype._keyUpOnInputField = function (inEventObject) {
+  this._redisplaySuggestionBox();
+};
+
+
+/**
+ *
+ */
+SuggestionBox.prototype._blurOnInputField = function () {
+  // make the suggestion box disappear
+  this._attributeSuggestionBoxDivElement.style.display = "none";
+};
+
+
+/**
+ *
+ */
+SuggestionBox.prototype._clickOnSelection = function (inEventObject, item) {
+  this._selectedItem = item;
+};
+
+
+/**
+ *
+ */
+SuggestionBox.prototype._setShouldHide = function (shouldHide) {
+  // make the suggestion box disappear
+  this._shouldHide = shouldHide;
+  this._selectedItem = null;
+  if (shouldHide) {
+    this._attributeSuggestionBoxDivElement.style.display = "none";
+  }
+  else {
+    this._redisplaySuggestionBox();
+  }
+};
+
+
+/**
+ *
+ */
+SuggestionBox.prototype._redisplaySuggestionBox = function () {
+  //if (this._shouldHide) {return;} // if SuggestionBox is in hide mode, don't show the box
+  
+  var partialInputString = this._inputField.value;
+  var listOfMatchingItems = [];
+  var key;
+  var item;
+
+  for (key in this._listOfSuggestedItems) {
+    item = this._listOfSuggestedItems[key];
+    var lowerCaseEntryString = item.getDisplayString().toLowerCase();
+    var lowerCaseInputString = partialInputString.toLowerCase();
+    var numberOfCharactersToCompare = lowerCaseInputString.length;
+    var shortEntryString = lowerCaseEntryString.substring(0, numberOfCharactersToCompare);
+    if (shortEntryString == lowerCaseInputString) {
+      // we have a match!
+      listOfMatchingItems.push(item);
+    }
+  }
+  this._listOfMatchingItems = listOfMatchingItems;
+
+  if (this._shouldHide || listOfMatchingItems.length === 0) {
+    // make the suggestion box disappear
+    this._attributeSuggestionBoxDivElement.style.display = "none";
+  } else {
+    View.removeChildrenOfElement(this._attributeSuggestionBoxDivElement);
+    var table = document.createElement('table');
+    var rowNumber = 0;
+    var columnNumber = 0;
+    for (key in listOfMatchingItems) {
+      item = listOfMatchingItems[key];
+      var textNode = document.createTextNode(item.getDisplayString());
+      var row = table.insertRow(rowNumber);
+      var cell = row.insertCell(columnNumber);
+      row.className = (this._selectedItem == item) ? "selected":"";
+      //cell.style.background = (this._selectedItem == item) ? "rgb(0%,70%,100%)":""; //pending need to CSS-ify this
+      cell.appendChild(textNode);
+      cell.onmousedown = this._clickOnSelection.bindAsEventListener(this, item);
+      rowNumber += 1;
+    }
+    this._attributeSuggestionBoxDivElement.appendChild(table);
+
+    // set-up the suggestion box to open just below the input field it comes from
+    var suggestionBoxTop = Util.getOffsetTopFromElement(this._inputField) + this._inputField.offsetHeight;
+    var suggestionBoxLeft = Util.getOffsetLeftFromElement(this._inputField);
+    this._attributeSuggestionBoxDivElement.style.top = suggestionBoxTop + "px"; 
+    this._attributeSuggestionBoxDivElement.style.left = suggestionBoxLeft + "px";
+    // alert(this._inputField.offsetWidth);
+    this._attributeSuggestionBoxDivElement.style.width = (this._inputField.offsetWidth - 2)+ "px";
+
+    // this._attributeSuggestionBoxDivElement.style.zIndex = 11;
+    this._attributeSuggestionBoxDivElement.className = "suggestion_box";
+    this._attributeSuggestionBoxDivElement.style.visibility = "visible";
+    this._attributeSuggestionBoxDivElement.style.display = "block";
+  }
+};
+
+// -------------------------------------------------------------------
+// End of file
+// -------------------------------------------------------------------



From skinner at berlios.de  Sat Jul  2 22:59:36 2005
From: skinner at berlios.de (Brian Douglas Skinner at BerliOS)
Date: Sat, 2 Jul 2005 22:59:36 +0200
Subject: [openrecord-svn] r209 - in trunk: documentation source
Message-ID: <200507022059.j62Kxagw018207@sheep.berlios.de>

Author: skinner
Date: 2005-07-02 22:59:35 +0200 (Sat, 02 Jul 2005)
New Revision: 209

Modified:
   trunk/documentation/release_planning.txt
   trunk/source/LoginView.js
   trunk/source/NavbarView.js
   trunk/source/PageView.js
   trunk/source/RootView.js
   trunk/source/SectionView.js
   trunk/source/TablePlugin.js
   trunk/source/base_style.css
Log:
Changed the "Edit"/"Done Editing" button into a "Show Tools"/"Hide Tools" button.  Changed things so that any logged-in user can always edit, even if the editing tools are not showing.

Modified: trunk/documentation/release_planning.txt
===================================================================
--- trunk/documentation/release_planning.txt	2005-07-02 19:54:15 UTC (rev 208)
+++ trunk/documentation/release_planning.txt	2005-07-02 20:59:35 UTC (rev 209)
@@ -244,20 +244,20 @@
 -------+----------+---------+----------------------------------------------
 Who    | Estimate | Actual  | Task
 -------+----------+---------+----------------------------------------------
-       |          |         |  1. Change "Edit"/"Done Editing" button to "Show Tools"/"Hide Tools"
-       |          |         |  2. Allow editing for any logged in user, even if edit tools aren't shown
+brian  | 0        | 0       |  1. Change "Edit"/"Done Editing" button to "Show Tools"/"Hide Tools"
+brian  | 0.25 IED | 0.25    |  2. Allow editing for any logged in user, even if edit tools aren't shown
        |          |         |  3. Assign system attributes & categories to a "System" category
        |          |         |  4. Hide "System" items most of the time
        |          |         |  5. Attempt to embed an OpenRecord view in a MediaWiki page
        |          |         |  6. Refactor our observer notification API (and implementation)
-chao   |0.5 IED   |         |  7. Wire up observers & keep views in sync
+chao   | 0.5  IED |         |  7. Wire up observers & keep views in sync
        |          |         |  8. be able to select a lozenge 
        |          |         |  9. be able to select a table row 
        |          |         | 10. be able to select a non-lozenge literal entry
        |          |         | 11. be able to select the text within an entry
        |          |         | 12. be able to delete a selected lozenge 
        |          |         | 13. be able to delete a selected table row 
-chao   | 0.5 IED  |         | 14. improve keyboard navigation: tab, arrow, and return keys
+chao   | 0.5  IED |         | 14. improve keyboard navigation: tab, arrow, and return keys
        |          |         | 15. Get data model to pass the ordinal unit tests again
        |          |         | 16. drag-and-drop lozenges
        |          |         | 17. drag-and-drop to re-order navbar menu items

Modified: trunk/source/LoginView.js
===================================================================
--- trunk/source/LoginView.js	2005-07-02 19:54:15 UTC (rev 208)
+++ trunk/source/LoginView.js	2005-07-02 20:59:35 UTC (rev 209)
@@ -118,6 +118,8 @@
       }
     }
   }
+  var editMode = currentUser ? true : false;
+  this.getRootView().setEditMode(editMode);
   
   var welcomeText, welcomeNode;
   if (this._isCreatingNewAccount) {
@@ -165,11 +167,11 @@
 
     mySpan.appendChild(document.createTextNode(" "));
 
-    var editButton = document.createElement("input");
-    editButton.type = "button";
-    editButton.value = (this.isInEditMode()) ? "Done editing" : "Edit";
-    editButton.onclick = this._clickOnEditButton.bindAsEventListener(this);
-    mySpan.appendChild(editButton);
+    var toolsButton = document.createElement("input");
+    toolsButton.type = "button";
+    toolsButton.value = (this.getRootView().isInShowToolsMode()) ? "Hide Tools" : "Show Tools";
+    toolsButton.onclick = this._clickOnShowToolsButton.bindAsEventListener(this);
+    mySpan.appendChild(toolsButton);
   }
   else {
     // The user has not yet signed in.
@@ -227,6 +229,8 @@
   this._cookie.store();
   this.getWorld().logout();
   this._rebuildView();
+  this.getRootView().setShowToolsMode(false);
+  this.getRootView().setEditMode(false);
 };
 
 
@@ -276,6 +280,7 @@
   this._rebuildView();
 };
 
+
 /**
  * Called when the user clicks on the "Create New Account" button.
  *
@@ -333,8 +338,8 @@
  * @scope    private instance method
  * @param    inEventObject    An event object. 
  */
-LoginView.prototype._clickOnEditButton = function (inEventObject) {
-  this.getRootView().setEditMode(!this.isInEditMode());
+LoginView.prototype._clickOnShowToolsButton = function (inEventObject) {
+  this.getRootView().setShowToolsMode(!this.getRootView().isInShowToolsMode());
   this._rebuildView();
 };
 
@@ -354,6 +359,7 @@
   } else {
     this._reportError("Login failed. Wrong password.");
   }
+  this.getRootView().setEditMode(loginSuccess);
 };
 
 

Modified: trunk/source/NavbarView.js
===================================================================
--- trunk/source/NavbarView.js	2005-07-02 19:54:15 UTC (rev 208)
+++ trunk/source/NavbarView.js	2005-07-02 20:59:35 UTC (rev 209)
@@ -117,7 +117,7 @@
     anchorElement.onclick = RootView.clickOnLocalLink.bindAsEventListener();
   }
   
-  var newPageButton = View.createAndAppendElement(divElement, "input", RootView.CSS_CLASS_EDIT_MODE_ONLY_CONTROL);
+  var newPageButton = View.createAndAppendElement(divElement, "input", RootView.CSS_CLASS_EDIT_TOOL);
   newPageButton.type = "button";
   newPageButton.value = "New Page";
   newPageButton.onclick = this._clickOnNewPageButton.bindAsEventListener(this);

Modified: trunk/source/PageView.js
===================================================================
--- trunk/source/PageView.js	2005-07-02 19:54:15 UTC (rev 208)
+++ trunk/source/PageView.js	2005-07-02 20:59:35 UTC (rev 209)
@@ -134,7 +134,6 @@
       var sectionView = this._listOfSectionViews[key];      
       sectionView.refresh();
     }
-    this._refreshEditModeControls();
   }
 };
 
@@ -173,8 +172,8 @@
       this._buildNewSection(section);
     }
   }
-  this._wasInEditMode = this.isInEditMode();
-  if (this._wasInEditMode) {this._buildEditControls();}
+
+  this._buildEditControls();
   this._myHasEverBeenDisplayedFlag = true;
   this.refresh();
 };
@@ -183,16 +182,16 @@
 /**
  * Creates a new section in this page.
  *
- * @param  inSection newSection item
- * @param  inBeforeElt (optional) if specified, section view to be inserted before this elt
  * @scope    private instance method
+ * @param    sectionItem    newSection item
+ * @param    insertBeforeElement    Optional. The HTML element that this new section view should come before on the page.
  */
-PageView.prototype._buildNewSection = function(inSection, inBeforeElt) {
+PageView.prototype._buildNewSection = function(sectionItem, insertBeforeElement) {
   var pageDivElement = this.getHTMLElement();
   var sectionViewDiv = document.createElement("div");
-  var sectionView = new SectionView(this, sectionViewDiv, inSection, this._listOfSectionViews.length);
-  if (inBeforeElt) {
-    pageDivElement.insertBefore(sectionViewDiv, inBeforeElt);
+  var sectionView = new SectionView(this, sectionViewDiv, sectionItem, this._listOfSectionViews.length);
+  if (insertBeforeElement) {
+    pageDivElement.insertBefore(sectionViewDiv, insertBeforeElement);
   }
   else {
     pageDivElement.appendChild(sectionViewDiv);
@@ -221,39 +220,16 @@
 PageView.prototype._buildEditControls = function() {
   if (!this._editModeDiv) {
     var pageDivElement = this.getHTMLElement();
-    this._editModeDiv = View.createAndAppendElement(pageDivElement, "div", SectionView.CSS_CLASS_SECTION);
-    View.createAndAppendElement(this._editModeDiv,"br");
-    var editButton = View.createAndAppendElement(this._editModeDiv, "input", 
-      RootView.CSS_CLASS_EDIT_MODE_ONLY_CONTROL);
+    var cssClass = SectionView.CSS_CLASS_SECTION + " " + RootView.CSS_CLASS_EDIT_TOOL;
+    this._editModeDiv = View.createAndAppendElement(pageDivElement, "div", cssClass);
+    View.createAndAppendElement(this._editModeDiv, "br");
+    var editButton = View.createAndAppendElement(this._editModeDiv, "input");
     editButton.type = "Button";
     editButton.value = "New Section";
     editButton.onclick = this._addNewSection.bindAsEventListener(this);
   }
-  else {
-    this._editModeDiv.display = "Block";
-  }
 };
 
-
-/**
- * Called when edit controls need to be refreshed
- *
- * @scope    private instance method
- */
-PageView.prototype._refreshEditModeControls = function() {
-  if (this._wasInEditMode != this.isInEditMode()) {
-    this._wasInEditMode = this.isInEditMode();
-    if (this.isInEditMode()) {
-      this._buildEditControls();
-    }
-    else {
-      this.getHTMLElement().removeChild(this._editModeDiv);
-      // PENDING: why does hiding _editModeDiv still leave a blue line, gotta ask Brian about CSS
-      this._editModeDiv = null;
-    }
-  }
-};
-
 // -------------------------------------------------------------------
 // End of file
 // -------------------------------------------------------------------

Modified: trunk/source/RootView.js
===================================================================
--- trunk/source/RootView.js	2005-07-02 19:54:15 UTC (rev 208)
+++ trunk/source/RootView.js	2005-07-02 20:59:35 UTC (rev 209)
@@ -46,7 +46,7 @@
 RootView.CSS_CLASS_PAGE_EDIT_BUTTON = "page_edit_button";
 RootView.CSS_CLASS_EDIT_MODE = "editmode";
 RootView.CSS_CLASS_VIEW_MODE = "viewmode";
-RootView.CSS_CLASS_EDIT_MODE_ONLY_CONTROL = "edit_mode_only_control";
+RootView.CSS_CLASS_EDIT_TOOL = "edit_tool";
 RootView.CSS_CLASS_CONTROL_SPAN = "control_span";
 
 RootView.ELEMENT_ID_DEBUG_TEXTAREA = "debug_textarea";
@@ -89,6 +89,7 @@
   // instance properties
   this._world = world;
   this._editMode = false;
+  this._showToolsMode = false;
   this._numberOfCallsToDebug = 0;
   this._debugTextarea = null;
   
@@ -233,6 +234,31 @@
 
 
 /**
+ * Returns true if we are in Show Tools Mode.
+ *
+ * @scope    public instance method
+ * @return   A boolean value. True if we are in Show Tools Mode.
+ */
+RootView.prototype.isInShowToolsMode = function() {
+  return this._showToolsMode;
+};
+
+    
+/**
+ * Switches the UI between showing edit tools and hiding edit tools.
+ *
+ * @scope    public instance method
+ * @param    showToolsFlag    A boolean. True to show edit tools, false to hide edit tools.
+ */
+RootView.prototype.setShowToolsMode = function(showToolsFlag) {
+  if (showToolsFlag != this._showToolsMode) {
+    this._showToolsMode = !this._showToolsMode;
+    this._rootDiv.className = (this.isInShowToolsMode()) ? RootView.CSS_CLASS_EDIT_MODE : RootView.CSS_CLASS_VIEW_MODE;
+  }
+};
+
+
+/**
  * Given an item, returns a relative URL that can be used to redirect the 
  * browser to a page that displays that time.
  *
@@ -330,7 +356,7 @@
   Util.assert(this._currentContentView instanceof Object);
 
   document.title = this._currentContentView.getPageTitle() + " - openrecord.org";
-  this._rootDiv.className = (this.isInEditMode()) ? RootView.CSS_CLASS_EDIT_MODE : RootView.CSS_CLASS_VIEW_MODE;
+  this._rootDiv.className = (this.isInShowToolsMode()) ? RootView.CSS_CLASS_EDIT_MODE : RootView.CSS_CLASS_VIEW_MODE;
   this._displayLoginSpan();
   this._displayNavbar();
   this._displayDebugArea();

Modified: trunk/source/SectionView.js
===================================================================
--- trunk/source/SectionView.js	2005-07-02 19:54:15 UTC (rev 208)
+++ trunk/source/SectionView.js	2005-07-02 20:59:35 UTC (rev 209)
@@ -239,7 +239,7 @@
   View.createAndAppendElement(outerDiv, "p");
 
   // create the editing controls, if we're in edit mode
-  var controlArea = View.createAndAppendElement(outerDiv, "p", RootView.CSS_CLASS_EDIT_MODE_ONLY_CONTROL);
+  var controlArea = View.createAndAppendElement(outerDiv, "p", RootView.CSS_CLASS_EDIT_TOOL);
   var textShowMeA = document.createTextNode("Show me a ");
   controlArea.appendChild(textShowMeA);
 

Modified: trunk/source/TablePlugin.js
===================================================================
--- trunk/source/TablePlugin.js	2005-07-02 19:54:15 UTC (rev 208)
+++ trunk/source/TablePlugin.js	2005-07-02 20:59:35 UTC (rev 209)
@@ -197,22 +197,25 @@
  * @scope    private instance method
  */
 TablePlugin.prototype._buildAttributeEditor = function() {
-  var htmlElt = this.getHTMLElement();
-  View.createAndAppendElement(htmlElt,"br");
-  var selectElt = View.createAndAppendElement(htmlElt,"select");
+  var htmlElement = this.getHTMLElement();
+  View.createAndAppendElement(htmlElement, "br");
+  var selectElt = View.createAndAppendElement(htmlElement, "select", RootView.CSS_CLASS_EDIT_TOOL);
   var listOfAttributes = this.getWorld().getAttributes();
-  var optionElt = View.createAndAppendElement(selectElt,"option");
+  var optionElt = View.createAndAppendElement(selectElt, "option");
   optionElt.text = "Add new attribute:";
-  for (var i = 0; i < listOfAttributes.length; ++i) {
-    optionElt = View.createAndAppendElement(selectElt,"option");
-    if (Util.isObjectInSet(listOfAttributes[i],this._displayAttributes)) {optionElt.text = '*';}
-    optionElt.text += listOfAttributes[i].getDisplayString();
-    optionElt.value = listOfAttributes[i].getUniqueKeyString();
+  for (var key in listOfAttributes) {
+    var attribute = listOfAttributes[key];
+    optionElt = View.createAndAppendElement(selectElt, "option");
+    if (Util.isObjectInSet(attribute, this._displayAttributes)) {
+      optionElt.text = '* ';
+    }
+    optionElt.text += attribute.getDisplayString();
+    optionElt.value = attribute.getUniqueKeyString();
     optionElt.onclick = this._attributeEditorChanged.bindAsEventListener(this);
   }
   this._selectElement = selectElt;
-  /*View.createAndAppendTextNode(htmlElt, " Import Data:");
-  var importButton = View.createAndAppendElement(htmlElt,"input");
+  /*View.createAndAppendTextNode(htmlElement, " Import Data:");
+  var importButton = View.createAndAppendElement(htmlElement,"input");
   importButton.type = "file";
   importButton.onchange = this._importData.bindAsEventListener(this, importButton);*/
 };
@@ -365,7 +368,8 @@
   
   this.getHTMLElement().appendChild(this._table);
   
-  if (this.isInEditMode()) {this._buildAttributeEditor();}
+  // if (this.isInEditMode()) {this._buildAttributeEditor();}
+  this._buildAttributeEditor();
 };
 
 
@@ -434,6 +438,7 @@
   this._buildTable();
 };
 
+
 /**
  * Called when the user clicks on table header. Resorts table accordingly.
  * 
@@ -454,6 +459,10 @@
   return false;
 };
  
+
+/**
+ * 
+ */
 TablePlugin.prototype._importData = function (inEventObject, fileButton) {
   // Returns null if it can't do it, false if there's an error, or a string of the content if successful
 /*  function mozillaLoadFile(filePath)
@@ -492,6 +501,7 @@
   window.open('file://'+fileButton.value,'preview');   
 };
 
+
 /**
  * Called when the user clicks on attribute editor item, either to add or remove attribute column
  * 
@@ -532,7 +542,11 @@
     this._buildTable(true);
   }
 };
+ 
 
+/**
+ * 
+ */
 TablePlugin.prototype._handleClick = function (inEventObject, anEntryView) {
   var rowElement = anEntryView.getSuperview().getHTMLElement().parentNode; // entryView -> multiEntriesView -> cellElment -> rowElement
   return this.selectRow(rowElement);

Modified: trunk/source/base_style.css
===================================================================
--- trunk/source/base_style.css	2005-07-02 19:54:15 UTC (rev 208)
+++ trunk/source/base_style.css	2005-07-02 20:59:35 UTC (rev 209)
@@ -232,15 +232,15 @@
   float: right;
 }
 
-div.editmode p.edit_mode_only_control {
+div.editmode p.edit_tool {
   background-color: rgb(100%, 100%, 40%);
 }
 
-div.editmode .edit_mode_only_control {
+div.editmode .edit_tool {
   display: block;
 }
 
-div.viewmode .edit_mode_only_control {
+div.viewmode .edit_tool {
   display: none;
 }
 



From skinner at berlios.de  Sun Jul  3 00:56:06 2005
From: skinner at berlios.de (Brian Douglas Skinner at BerliOS)
Date: Sun, 3 Jul 2005 00:56:06 +0200
Subject: [openrecord-svn] r210 - in trunk/source: . view
Message-ID: <200507022256.j62Mu6iI024400@sheep.berlios.de>

Author: skinner
Date: 2005-07-03 00:55:58 +0200 (Sun, 03 Jul 2005)
New Revision: 210

Modified:
   trunk/source/BarChartPlugin.js
   trunk/source/DetailPlugin.js
   trunk/source/ItemView.js
   trunk/source/LoginView.js
   trunk/source/MultiEntriesView.js
   trunk/source/NavbarView.js
   trunk/source/OutlinePlugin.js
   trunk/source/PageView.js
   trunk/source/PluginView.js
   trunk/source/SectionView.js
   trunk/source/TablePlugin.js
   trunk/source/View.js
   trunk/source/view/EntryView.js
Log:
compulsive cleaning-up

Modified: trunk/source/BarChartPlugin.js
===================================================================
--- trunk/source/BarChartPlugin.js	2005-07-02 20:59:35 UTC (rev 209)
+++ trunk/source/BarChartPlugin.js	2005-07-02 22:55:58 UTC (rev 210)
@@ -44,18 +44,21 @@
 BarChartPlugin.UUID_FOR_PLUGIN_VIEW_BAR_CHART = "00040304-ce7f-11d9-8cd5-0011113ae5d6";
 SectionView.registerPlugin(BarChartPlugin);
 
+
 /**
  * A BarChartPlugin displays a set of content items for a SectionView. 
  *
  * @scope    public instance constructor
- * @extends  View
- * @param    inSectionView    The SectionView that serves as the superview for this view. 
- * @param    inHTMLElement    The HTMLElement to display this view in. 
+ * @extends  PluginView
+ * @param    superview    The View that serves as the superview for this view. 
+ * @param    htmlElement    The HTMLElement to display this view in. 
+ * @param    querySpec    The Query Spec item that provides the items for this PluginView to display
+ * @param    layoutItem    ???. 
  * @syntax   var barChart = new BarChartPlugin()
  */
-BarChartPlugin.prototype = new PluginView();  // makes BarChartPlugin be a subclass of View
-function BarChartPlugin(inSuperview, inHTMLElement,inQuery,inLayout) {
-  PluginView.call(this,inSuperview,inHTMLElement,inQuery,inLayout);
+BarChartPlugin.prototype = new PluginView();  // makes BarChartPlugin be a subclass of PluginView
+function BarChartPlugin(superview, htmlElement, querySpec, layoutItem) {
+  PluginView.call(this, superview, htmlElement, querySpec, layoutItem);
 }
 
 
@@ -69,7 +72,7 @@
  * @scope    public class method
  * @return   The UUID of the item that represents this class of plugin
  */
-BarChartPlugin.getPluginItemUuid = function () {
+BarChartPlugin.getPluginItemUuid = function() {
   return BarChartPlugin.UUID_FOR_PLUGIN_VIEW_BAR_CHART;
 };
 
@@ -84,7 +87,7 @@
  * @scope    public instance method
  * @return   A JavaScript class. 
  */
-BarChartPlugin.prototype.getClass = function () {
+BarChartPlugin.prototype.getClass = function() {
   return BarChartPlugin;
 };
 
@@ -95,7 +98,7 @@
  *
  * @scope    public instance method
  */
-BarChartPlugin.prototype.refresh = function () {
+BarChartPlugin.prototype.refresh = function() {
   var listOfStrings = [];
 
   var contentItem = null;
@@ -199,7 +202,7 @@
     
   // return all the new content   
   var finalString = listOfStrings.join("");
-  this.getHTMLElement().innerHTML = finalString;
+  this.getHtmlElement().innerHTML = finalString;
 };
 
 

Modified: trunk/source/DetailPlugin.js
===================================================================
--- trunk/source/DetailPlugin.js	2005-07-02 20:59:35 UTC (rev 209)
+++ trunk/source/DetailPlugin.js	2005-07-02 22:55:58 UTC (rev 210)
@@ -50,14 +50,16 @@
  * A DetailPlugin display one or more content items. 
  *
  * @scope    public instance constructor
- * @extends  View
- * @param    inSuperView    The superview for this view. 
- * @param    inHTMLElement    The HTMLElement to display this view in. 
+ * @extends  PluginView
+ * @param    superview    The View that serves as the superview for this view. 
+ * @param    htmlElement    The HTMLElement to display this view in. 
+ * @param    querySpec    The Query Spec item that provides the items for this PluginView to display
+ * @param    layoutItem    ???. 
  * @syntax   var detailPlugin = new DetailPlugin()
  */
-DetailPlugin.prototype = new PluginView();  // makes DetailPlugin be a subclass of View
-function DetailPlugin(inSuperView, inHTMLElement, inQuery, inLayout) {
-  PluginView.call(this, inSuperView, inHTMLElement, inQuery, inLayout);
+DetailPlugin.prototype = new PluginView();  // makes DetailPlugin be a subclass of PluginView
+function DetailPlugin(superview, htmlElement, querySpec, layoutItem) {
+  PluginView.call(this, superview, htmlElement, querySpec, layoutItem);
 }
 
 
@@ -110,7 +112,7 @@
 
   // take all the HTML and put it together
   var finalString = listOfStrings.join("");
-  this.getHTMLElement().innerHTML = finalString;
+  this.getHtmlElement().innerHTML = finalString;
 };
 
 

Modified: trunk/source/ItemView.js
===================================================================
--- trunk/source/ItemView.js	2005-07-02 20:59:35 UTC (rev 209)
+++ trunk/source/ItemView.js	2005-07-02 22:55:58 UTC (rev 210)
@@ -52,20 +52,19 @@
  *
  * @scope    public instance constructor
  * @extends  View
- * @param    inRootView    The RootView that this ItemView is nested in. 
- * @param    inHTMLElement    The HTMLElement to display the HTML in. 
- * @param    inItem    The item to be displayed by this view. 
+ * @param    superview    The View that serves as the superview for this view. 
+ * @param    htmlElement    The HTMLElement to display the HTML in. 
+ * @param    item    The item to be displayed by this view. 
  */
 ItemView.prototype = new View();  // makes ItemView be a subclass of View
-function ItemView(inRootView, inHTMLElement, inItem) {
-  Util.assert(inItem instanceof Item);
-  Util.assert(inHTMLElement instanceof HTMLElement);
-  Util.assert(inRootView instanceof RootView);
+function ItemView(superview, htmlElement, item) {
+  Util.assert(htmlElement instanceof HTMLElement);
+  Util.assert(item instanceof Item);
 
+  View.call(this, superview, htmlElement);
+
   // instance properties
-  this.setSuperview(inRootView);
-  this.setHTMLElement(inHTMLElement);
-  this._item = inItem;
+  this._item = item;
   this._pluginView = null;
 }
 
@@ -76,7 +75,7 @@
  * @scope    public instance method
  * @return   A string that gives the name of the page.
  */
-ItemView.prototype.getPageTitle = function () {
+ItemView.prototype.getPageTitle = function() {
   var pageTitle = this._item.getDisplayString();
   return pageTitle;
 };
@@ -88,7 +87,7 @@
  *
  * @scope    public instance method
  */
-ItemView.prototype.refresh = function () {
+ItemView.prototype.refresh = function() {
   Util.assert(this._item instanceof Item);
   
   // PENDING: this needs to be changed from DOM level 0 to DOM level 2.
@@ -103,7 +102,7 @@
 
   // write out all the new content 
   var finalString = listOfStrings.join("");
-  this.getHTMLElement().innerHTML = finalString;
+  this.getHtmlElement().innerHTML = finalString;
 
   // let the detailPlugin add its own content
   var detailPluginElement = document.getElementById(detailDivId);

Modified: trunk/source/LoginView.js
===================================================================
--- trunk/source/LoginView.js	2005-07-02 20:59:35 UTC (rev 209)
+++ trunk/source/LoginView.js	2005-07-02 22:55:58 UTC (rev 210)
@@ -53,14 +53,14 @@
  *
  * @scope    public instance constructor
  * @extends  View
- * @param    inSuperView    The view that this LoginView is nested in. 
- * @param    inHTMLElement    The HTMLElement to display the HTML in. 
+ * @param    superview    The view that this LoginView is nested in. 
+ * @param    htmlElement    The HTMLElement to display the HTML in. 
  */
 LoginView.prototype = new View();  // makes LoginView be a subclass of View
-function LoginView(inSuperView, inHTMLElement) {
+function LoginView(superview, htmlElement) {
+  View.call(this, superview, htmlElement);
+
   // instance properties
-  this.setSuperview(inSuperView);
-  this.setHTMLElement(inHTMLElement);
   this._isCreatingNewAccount = false;
   var tenYearCookieExpiration = 10*365*24;   // PENDING: hardcode expiration to 10yrs
   this._cookie = new Cookie(document, LoginView.COOKIE_NAME, tenYearCookieExpiration);
@@ -78,7 +78,7 @@
  *
  * @scope    public instance method
  */
-LoginView.prototype.refresh = function () {
+LoginView.prototype.refresh = function() {
   if (!this._myHasEverBeenDisplayedFlag) {
     this._rebuildView();
   }
@@ -95,8 +95,8 @@
  *
  * @scope    private instance method
  */
-LoginView.prototype._rebuildView = function () {
-  var mySpan = this.getHTMLElement();
+LoginView.prototype._rebuildView = function() {
+  var mySpan = this.getHtmlElement();
   
   View.removeChildrenOfElement(mySpan);
   
@@ -221,7 +221,7 @@
  *
  * @scope    private instance method
  */
-LoginView.prototype._clickOnSignoutLink = function(inEventObject) {
+LoginView.prototype._clickOnSignoutLink = function(eventObject) {
   if (this.isInEditMode()) {
     this.getRootView().setEditMode(false);
   }
@@ -239,7 +239,7 @@
  *
  * @scope    private instance method
  */
-LoginView.prototype._signinPasswordFocus = function(inEventObject) {
+LoginView.prototype._signinPasswordFocus = function(eventObject) {
   this.passwordInput.value = "";
 };
 
@@ -249,10 +249,10 @@
  *
  * @scope    private instance method
  */
-LoginView.prototype._signinPasswordKeyPress = function(inEventObject) {
+LoginView.prototype._signinPasswordKeyPress = function(eventObject) {
   // see if <return> is pressed, if so, similate clicking on sign in button
-  if (inEventObject.keyCode == Util.ASCII_VALUE_FOR_RETURN) {
-    this._clickOnSignInButton(inEventObject);
+  if (eventObject.keyCode == Util.ASCII_VALUE_FOR_RETURN) {
+    this._clickOnSignInButton(eventObject);
   }
 };
 
@@ -262,10 +262,10 @@
  *
  * @scope    private instance method
  */
-LoginView.prototype._createAccountPasswordKeyPress = function(inEventObject) {
+LoginView.prototype._createAccountPasswordKeyPress = function(eventObject) {
   // see if <return> is pressed, if so, similate clicking on sign in button
-  if (inEventObject.keyCode == Util.ASCII_VALUE_FOR_RETURN) {
-    this._clickOnNewAcctButton(inEventObject);
+  if (eventObject.keyCode == Util.ASCII_VALUE_FOR_RETURN) {
+    this._clickOnNewAcctButton(eventObject);
   }
 };
 
@@ -275,7 +275,7 @@
  *
  * @scope    private instance method
  */
-LoginView.prototype._clickOnCreateAccountLink = function(inEventObject) {
+LoginView.prototype._clickOnCreateAccountLink = function(eventObject) {
   this._isCreatingNewAccount = true;
   this._rebuildView();
 };
@@ -286,7 +286,7 @@
  *
  * @scope    private instance method
  */
-LoginView.prototype._clickOnNewAcctButton = function(inEventObject) {
+LoginView.prototype._clickOnNewAcctButton = function(eventObject) {
   var username = this.usernameInput.value;
   var password = this.passwordInput.value;
   if (password === null) {
@@ -303,7 +303,7 @@
  *
  * @scope    private instance method
  */
-LoginView.prototype._clickOnSignInButton = function(inEventObject) {
+LoginView.prototype._clickOnSignInButton = function(eventObject) {
 
   var listOfUsers = this.getWorld().getUsers();
   var userNameEntered = this.usernameInput.value;
@@ -336,9 +336,9 @@
  * Called when the user clicks on the "Edit" button.
  *
  * @scope    private instance method
- * @param    inEventObject    An event object. 
+ * @param    eventObject    An event object. 
  */
-LoginView.prototype._clickOnShowToolsButton = function (inEventObject) {
+LoginView.prototype._clickOnShowToolsButton = function(eventObject) {
   this.getRootView().setShowToolsMode(!this.getRootView().isInShowToolsMode());
   this._rebuildView();
 };
@@ -348,7 +348,10 @@
 // Private helper methods
 // -------------------------------------------------------------------
 
-LoginView.prototype._loginUser = function (user, password) {
+/**
+ *
+ */
+LoginView.prototype._loginUser = function(user, password) {
   var loginSuccess = this.getWorld().login(user, password); 
   if (loginSuccess) {
     var userUuid = user._getUuid();
@@ -363,11 +366,14 @@
 };
 
 
-LoginView.prototype._reportError = function (errorStr) {
-  var newErrorNode = document.createTextNode(errorStr);
-  var mySpan = this.getHTMLElement();
+/**
+ *
+ */
+LoginView.prototype._reportError = function(errorString) {
+  var newErrorNode = document.createTextNode(errorString);
+  var mySpan = this.getHtmlElement();
   if (this.errorNode) {
-    mySpan.replaceChild(newErrorNode,this.errorNode);
+    mySpan.replaceChild(newErrorNode, this.errorNode);
   } else {
     mySpan.appendChild(newErrorNode); 
   }
@@ -375,7 +381,10 @@
 };
 
 
-LoginView.prototype._createNewUser = function (username, password) {
+/**
+ *
+ */
+LoginView.prototype._createNewUser = function(username, password) {
   function isValidUsername(username) {
     // PENDING: hard coded to validate for alphanumeric usernames of 3 or more characters
     if (!username) {return false;}
@@ -394,26 +403,41 @@
 // -------------------------------------------------------------------
 // Suggestion box methods
 // -------------------------------------------------------------------
-function UserSuggestionBox(inHTMLInputField, inListOfEntries, inNextHTMLField) {
-  this._myInputField = inHTMLInputField;
-  this._myListOfEntries = inListOfEntries.sort(UserSuggestionBox.compareEntryDisplayNames);
-  this._myNextField = inNextHTMLField;
+
+/**
+ * PENDING: 
+ * 
+ * We wrote this UserSuggestionBox code back before we had the general
+ * /view/SuggestionBox.js class.  The SuggestionBox.js class is better,
+ * because it allows you to use the arrow keys to scroll through the
+ * options.  We shouldn't be trying to maintain this UserSuggestionBox
+ * too.  Instead, we should make SuggestionBox.js generic enough that
+ * we can just use it instead of UserSuggestionBox.
+ */
+function UserSuggestionBox(htmlInputField, listOfEntries, nextHtmlField) {
+  this._inputField = htmlInputField;
+  this._listOfEntries = listOfEntries.sort(UserSuggestionBox.compareEntryDisplayNames);
+  this._nextField = nextHtmlField;
   
-  this._myUserSuggestionBoxDivElement = document.createElement('div');
-  // this._myUserSuggestionBoxDivElement.style.visibility = "hidden";
-  this._myUserSuggestionBoxDivElement.style.zIndex = 11;
-  this._myUserSuggestionBoxDivElement.style.display = "none";
-  document.body.appendChild(this._myUserSuggestionBoxDivElement);
+  this._userSuggestionBoxDivElement = document.createElement('div');
+  // this._userSuggestionBoxDivElement.style.visibility = "hidden";
+  this._userSuggestionBoxDivElement.style.zIndex = 11;
+  this._userSuggestionBoxDivElement.style.display = "none";
+  document.body.appendChild(this._userSuggestionBoxDivElement);
   
-  this._myInputField.onkeyup = this._keyPressOnInputField.bindAsEventListener(this);
-  this._myInputField.onfocus = this._focusOnInputField.bindAsEventListener(this);
-  this._myInputField.onblur = this._blurOnInputField.bindAsEventListener(this);
+  this._inputField.onkeyup = this._keyPressOnInputField.bindAsEventListener(this);
+  this._inputField.onfocus = this._focusOnInputField.bindAsEventListener(this);
+  this._inputField.onblur = this._blurOnInputField.bindAsEventListener(this);
   this._keyPressOnInputField();
 }
 
-UserSuggestionBox.compareEntryDisplayNames = function (inEntryOne, inEntryTwo) {
-  var displayNameOne = inEntryOne.getDisplayName();
-  var displayNameTwo = inEntryTwo.getDisplayName();
+
+/**
+ *
+ */
+UserSuggestionBox.compareEntryDisplayNames = function(entryOne, entryTwo) {
+  var displayNameOne = entryOne.getDisplayName();
+  var displayNameTwo = entryTwo.getDisplayName();
   if (displayNameOne == displayNameTwo) {
     return 0;
   } else {
@@ -421,36 +445,52 @@
   }
 };
 
-UserSuggestionBox.prototype._focusOnInputField = function (inEventObject) {
-  this._myInputField.value = "";
+
+/**
+ *
+ */
+UserSuggestionBox.prototype._focusOnInputField = function(eventObject) {
+  this._inputField.value = "";
   this._redisplayUserSuggestionBox();
 };
 
 
-UserSuggestionBox.prototype._keyPressOnInputField = function (inEventObject) {
+/**
+ *
+ */
+UserSuggestionBox.prototype._keyPressOnInputField = function(eventObject) {
   this._redisplayUserSuggestionBox();
 };
 
 
-UserSuggestionBox.prototype._blurOnInputField = function (inEventObject) {
+/**
+ *
+ */
+UserSuggestionBox.prototype._blurOnInputField = function(eventObject) {
   // make the suggestion box disappear
-  this._myUserSuggestionBoxDivElement.style.display = "none";
+  this._userSuggestionBoxDivElement.style.display = "none";
 };
 
 
-UserSuggestionBox.prototype._clickOnSelection = function (inEventObject, inString) {
-  this._myInputField.value = inString;
-  this._myNextField.select();
+/**
+ *
+ */
+UserSuggestionBox.prototype._clickOnSelection = function(eventObject, string) {
+  this._inputField.value = string;
+  this._nextField.select();
 };
 
 
-UserSuggestionBox.prototype._redisplayUserSuggestionBox = function () {
-  var partialInputString = this._myInputField.value;
+/**
+ *
+ */
+UserSuggestionBox.prototype._redisplayUserSuggestionBox = function() {
+  var partialInputString = this._inputField.value;
   var listOfMatchingStrings = [];
   var key;
   
-  for (key in this._myListOfEntries) {
-    var entry = this._myListOfEntries[key];
+  for (key in this._listOfEntries) {
+    var entry = this._listOfEntries[key];
     var lowerCaseEntryString = entry.getDisplayName().toLowerCase();
     var lowerCaseInputString = partialInputString.toLowerCase();
     var numberOfCharactersToCompare = lowerCaseInputString.length;
@@ -463,9 +503,9 @@
   
   if (listOfMatchingStrings.length === 0) {
     // make the suggestion box disappear
-    this._myUserSuggestionBoxDivElement.style.display = "none";
+    this._userSuggestionBoxDivElement.style.display = "none";
   } else {
-    View.removeChildrenOfElement(this._myUserSuggestionBoxDivElement);
+    View.removeChildrenOfElement(this._userSuggestionBoxDivElement);
     var table = document.createElement('table');
     var rowNumber = 0;
     var columnNumber = 0;
@@ -478,20 +518,20 @@
       cell.onmousedown = this._clickOnSelection.bindAsEventListener(this, string);
       rowNumber += 1;
     }
-    this._myUserSuggestionBoxDivElement.appendChild(table);
+    this._userSuggestionBoxDivElement.appendChild(table);
     
     // set-up the suggestion box to open just below the input field it comes from
-    var suggestionBoxTop = Util.getOffsetTopFromElement(this._myInputField) + this._myInputField.offsetHeight;
-    var suggestionBoxLeft = Util.getOffsetLeftFromElement(this._myInputField);
-    this._myUserSuggestionBoxDivElement.style.top = suggestionBoxTop + "px"; 
-    this._myUserSuggestionBoxDivElement.style.left = suggestionBoxLeft + "px";
-    // alert(this._myInputField.offsetWidth);
-    this._myUserSuggestionBoxDivElement.style.width = (this._myInputField.offsetWidth - 2)+ "px";
+    var suggestionBoxTop = Util.getOffsetTopFromElement(this._inputField) + this._inputField.offsetHeight;
+    var suggestionBoxLeft = Util.getOffsetLeftFromElement(this._inputField);
+    this._userSuggestionBoxDivElement.style.top = suggestionBoxTop + "px"; 
+    this._userSuggestionBoxDivElement.style.left = suggestionBoxLeft + "px";
+    // alert(this._inputField.offsetWidth);
+    this._userSuggestionBoxDivElement.style.width = (this._inputField.offsetWidth - 2)+ "px";
     
-    // this._myUserSuggestionBoxDivElement.style.zIndex = 11;
-    this._myUserSuggestionBoxDivElement.className = "suggestion_box";
-    this._myUserSuggestionBoxDivElement.style.visibility = "visible";
-    this._myUserSuggestionBoxDivElement.style.display = "block";
+    // this._userSuggestionBoxDivElement.style.zIndex = 11;
+    this._userSuggestionBoxDivElement.className = "suggestion_box";
+    this._userSuggestionBoxDivElement.style.visibility = "visible";
+    this._userSuggestionBoxDivElement.style.display = "block";
   }
 };
 

Modified: trunk/source/MultiEntriesView.js
===================================================================
--- trunk/source/MultiEntriesView.js	2005-07-02 20:59:35 UTC (rev 209)
+++ trunk/source/MultiEntriesView.js	2005-07-02 22:55:58 UTC (rev 210)
@@ -55,23 +55,25 @@
  *
  * @scope    public instance constructor
  * @extends  View
- * @param    theSuperview    The view that this view is nested in. 
- * @param    theItem         The Item to be displayed and edited by this view. 
- * @param    theAttribute    The attribute of the item to be displayed.
- * @param    theElement      The HTMLElement to display the HTML in. 
- * @param    theClassType    A string that gives a class name to assign to the HTML element. 
+ * @param    superview    The view that this view is nested in. 
+ * @param    htmlElement      The HTMLElement to display the HTML in. 
+ * @param    item         The Item to be displayed and edited by this view. 
+ * @param    attribute    The attribute of the item to be displayed.
+ * @param    cssClass     A string that gives a CSS class name to assign to the HTML element. 
  * @param    isMultiLine     a boolean indicating if text view is single line or multi-line
  */
 MultiEntriesView.prototype = new View();  // makes MultiEntriesView be a subclass of View
-function MultiEntriesView(theSuperview, theElement, theItem, theAttribute, theClassType) {
-  Util.assert(theItem instanceof Item);
-  //Util.assert(theAttribute instanceof Attribute); PENDING need to check that attribute is an attribute
+function MultiEntriesView(superview, htmlElement, item, attribute, cssClass) {
+  View.call(this, superview, htmlElement);
+
+  Util.assert(item instanceof Item);
+  Util.assert(attribute instanceof Item); // PENDING need to check that attribute is an attribute
   
-  this.setSuperview(theSuperview);
-  this.setHTMLElement(theElement);
-  this._item = theItem;
-  this._attribute = theAttribute;
-  this._className = theClassType;
+  this._item = item;
+  this._attribute = attribute;
+  this._className = cssClass;
+  this._entryViews = null;
+  this._listOfSuggestions = null;
 }
 
 
@@ -115,8 +117,9 @@
  */
 MultiEntriesView.prototype.noLongerProvisional = function() {
   Util.assert(this._entryViews.length == 1); // provisional item should only have one entry
-  for (var i=0; i < this._entryViews.length; ++i) {
-    this._entryViews[i].noLongerProvisional();
+  for (var key in this._entryViews) {
+    var entry = this._entryViews[key];
+    entry.noLongerProvisional();
   }
 };
 
@@ -124,8 +127,8 @@
 /**
  *
  */
-MultiEntriesView.prototype.select = function(inSelectFirst) {
-  var index = inSelectFirst ? 0 : this._entryViews.length - 1;
+MultiEntriesView.prototype.select = function(selectFirst) {
+  var index = selectFirst ? 0 : this._entryViews.length - 1;
   this._entryViews[index].startEditing();
 };
 
@@ -133,10 +136,11 @@
 /**
  *
  */
-MultiEntriesView.prototype.setSuggestions = function(suggestionList) {
-  this._suggestions = suggestionList;
-  for (var i=0; i < this._entryViews.length; ++i) {
-    this._entryViews[i].setSuggestions(suggestionList);
+MultiEntriesView.prototype.setSuggestions = function(listOfSuggestions) {
+  this._listOfSuggestions = listOfSuggestions;
+  for (var key in this._entryViews) {
+    var entry = this._entryViews[key];
+    entry.setSuggestions(listOfSuggestions);
   }
 };
 
@@ -154,19 +158,19 @@
  * Sets a function to be used when onclick is called to the EntryView
  *
  * @scope    public instance method
- * @param    inEventObject    An event object. 
+ * @param    onClickFunction    A function to call. 
  */
-MultiEntriesView.prototype.setClickFunction = function(inClickFunction) {
-  Util.assert(inClickFunction instanceof Function);
-  this._clickFunction = inClickFunction;
+MultiEntriesView.prototype.setClickFunction = function(onClickFunction) {
+  Util.assert(onClickFunction instanceof Function);
+  this._clickFunction = onClickFunction;
 };
 
 
 /**
  *
  */
-MultiEntriesView.prototype._handleClick = function(inEvent, inEntryView) {
-  if (this._clickFunction && this._clickFunction(inEvent, inEntryView)) {
+MultiEntriesView.prototype._handleClick = function(eventObject, entryView) {
+  if (this._clickFunction && this._clickFunction(eventObject, entryView)) {
     return true;
   }
   return false;
@@ -176,51 +180,51 @@
 /**
  *
  */
-MultiEntriesView.prototype._handleOwnClick = function(inEvent) {
+MultiEntriesView.prototype._handleOwnClick = function(eventObject) {
   var lastEntry = this._entryViews[this._entryViews.length-1];
-  if (this._handleClick(inEvent, lastEntry)) {return true;}
-  if (inEvent.target == this.getHTMLElement()) {lastEntry.startEditing();}
+  if (this._handleClick(eventObject, lastEntry)) {return true;}
+  if (eventObject.target == this.getHtmlElement()) {lastEntry.startEditing();}
 };
 
 
 /**
  *
  */
-MultiEntriesView.prototype._keyPressOnEditField = function(inEvent, inEntryView) {
-  Util.assert(inEntryView instanceof EntryView);
-  var asciiValueOfKey = inEvent.keyCode;
+MultiEntriesView.prototype._keyPressOnEditField = function(eventObject, entryView) {
+  Util.assert(entryView instanceof EntryView);
+  var asciiValueOfKey = eventObject.keyCode;
   var move, doCreateNewEntry;
   switch (asciiValueOfKey) {
     case Util.ASCII_VALUE_FOR_LEFT_ARROW: move = -1; break;
     case Util.ASCII_VALUE_FOR_RIGHT_ARROW: move = 1; break;
     case Util.ASCII_VALUE_FOR_RETURN:
-      if (inEvent.altKey) {
+      if (eventObject.altKey) {
         doCreateNewEntry = true;
         break;
       }
-      if (inEntryView != this._entryViews[this._entryViews.length-1]) {move=1;}
+      if (entryView != this._entryViews[this._entryViews.length-1]) {move=1;}
       break;
     default: 
       move = 0; 
       break;
   }
   if (doCreateNewEntry) {
-    inEntryView.stopEditing();
+    entryView.stopEditing();
     this._addSeparator();
     this._addEntryView(null).startEditing();
     return true;
   }
   if (move !== 0) {
-    var index = Util.getArrayIndex(this._entryViews, inEntryView);
+    var index = Util.getArrayIndex(this._entryViews, entryView);
     Util.assert(index != -1);
     index += move;
     if (index >= 0 && index < this._entryViews.length) {
-      inEntryView.stopEditing();
+      entryView.stopEditing();
       this._entryViews[index].startEditing();
       return true;
     }
   }
-  if (this._keyPressFunction && this._keyPressFunction(inEvent, inEntryView)) {
+  if (this._keyPressFunction && this._keyPressFunction(eventObject, entryView)) {
     return true;
   }
   return false;
@@ -230,16 +234,16 @@
 /**
  *
  */
-MultiEntriesView.prototype._addEntryView = function(inEntry) {
-  var spanElt = document.createElement("span");
-  spanElt.style.width = '100%';
-  var anEntryView = new EntryView(this, spanElt, this._item, this._attribute, inEntry, this._className);
+MultiEntriesView.prototype._addEntryView = function(entry) {
+  var spanElement = document.createElement("span");
+  spanElement.style.width = '100%';
+  var anEntryView = new EntryView(this, spanElement, this._item, this._attribute, entry, this._className);
   this._entryViews.push(anEntryView);
-  this.getHTMLElement().appendChild(spanElt);
+  this.getHtmlElement().appendChild(spanElement);
   anEntryView.refresh();
   if (this.isInEditMode()) {
     var listener = this;
-    anEntryView.setSuggestions(this._suggestions);
+    anEntryView.setSuggestions(this._listOfSuggestions);
     anEntryView.setKeyPressFunction(function (evt, entryView) {return listener._keyPressOnEditField(evt, entryView);});
     anEntryView.setClickFunction(function (evt, entryView) {return listener._handleClick(evt, entryView);});
   }
@@ -251,11 +255,11 @@
  *
  */
 MultiEntriesView.prototype._addSeparator = function() {
-  var spanElt = document.createElement("span");
-  spanElt.appendChild(document.createTextNode(MultiEntriesView.SEPARATOR));
-  spanElt.style.color = MultiEntriesView.SEPARATOR_COLOR;
-  this.getHTMLElement().appendChild(spanElt);
-  return spanElt;
+  var spanElement = document.createElement("span");
+  spanElement.appendChild(document.createTextNode(MultiEntriesView.SEPARATOR));
+  spanElement.style.color = MultiEntriesView.SEPARATOR_COLOR;
+  this.getHtmlElement().appendChild(spanElement);
+  return spanElement;
 };
 
 
@@ -266,7 +270,7 @@
  * @scope    public instance method
  */
 MultiEntriesView.prototype._buildView = function() {
-  var htmlElement = this.getHTMLElement();
+  var htmlElement = this.getHtmlElement();
   View.removeChildrenOfElement(htmlElement);
   this._entryViews = [];
   

Modified: trunk/source/NavbarView.js
===================================================================
--- trunk/source/NavbarView.js	2005-07-02 20:59:35 UTC (rev 209)
+++ trunk/source/NavbarView.js	2005-07-02 22:55:58 UTC (rev 210)
@@ -52,13 +52,12 @@
  *
  * @scope    public instance constructor
  * @extends  View
- * @param    superView    The view that this LoginView is nested in. 
+ * @param    superview    The view that serves as the superview for this view. 
  * @param    htmlElement    The HTMLElement to display the HTML in. 
  */
 NavbarView.prototype = new View();  // makes NavbarView be a subclass of View
-function NavbarView(superView, htmlElement, htmlElementForAnchors) {
-  this.setSuperview(superView);
-  this.setHTMLElement(htmlElement);
+function NavbarView(superview, htmlElement, htmlElementForAnchors) {
+  View.call(this, superview, htmlElement);
   this._htmlElementForAnchors = htmlElementForAnchors;
 }
 
@@ -101,7 +100,7 @@
     anchor.setAttribute("name", RootView.URL_PAGE_PREFIX + page._getUuid());
   }
   
-  var divElement = this.getHTMLElement();
+  var divElement = this.getHtmlElement();
   View.removeChildrenOfElement(divElement); 
   var ulElement = View.createAndAppendElement(divElement, "ul", NavbarView.CSS_CLASS_MENU);
   var rootView = this.getRootView();

Modified: trunk/source/OutlinePlugin.js
===================================================================
--- trunk/source/OutlinePlugin.js	2005-07-02 20:59:35 UTC (rev 209)
+++ trunk/source/OutlinePlugin.js	2005-07-02 22:55:58 UTC (rev 210)
@@ -50,14 +50,16 @@
  * An OutlinePlugin displays a set of content items for a SectionView. 
  *
  * @scope    public instance constructor
- * @extends  View
- * @param    inSectionView    The SectionView that serves as the superview for this view. 
- * @param    inHTMLElement    The HTMLElement to display this view in. 
+ * @extends  PluginView
+ * @param    superview    The View that serves as the superview for this view. 
+ * @param    htmlElement    The HTMLElement to display this view in. 
+ * @param    querySpec    The Query Spec item that provides the items for this PluginView to display
+ * @param    layoutItem    ???. 
  * @syntax   var outline = new OutlinePlugin()
  */
-OutlinePlugin.prototype = new PluginView();  // makes OutlinePlugin be a subclass of View
-function OutlinePlugin(inSectionView, inHTMLElement, inQuery, inLayout) {
-  PluginView.call(this, inSectionView, inHTMLElement, inQuery, inLayout);
+OutlinePlugin.prototype = new PluginView();  // makes OutlinePlugin be a subclass of PluginView
+function OutlinePlugin(superview, htmlElement, querySpec, layoutItem) {
+  PluginView.call(this, superview, htmlElement, querySpec, layoutItem);
 }
 
 
@@ -71,7 +73,7 @@
  * @scope    public class method
  * @return   The UUID of the item that represents this class of plugin
  */
-OutlinePlugin.getPluginItemUuid = function () {
+OutlinePlugin.getPluginItemUuid = function() {
   return OutlinePlugin.UUID_FOR_PLUGIN_VIEW_OUTLINE;
 };
 
@@ -86,7 +88,7 @@
  * @scope    public instance method
  * @return   A JavaScript class. 
  */
-OutlinePlugin.prototype.getClass = function () {
+OutlinePlugin.prototype.getClass = function() {
   return OutlinePlugin;
 };
 
@@ -97,9 +99,9 @@
  *
  * @scope    public instance method
  */
-OutlinePlugin.prototype.refresh = function () {
+OutlinePlugin.prototype.refresh = function() {
   var listOfContentItems = this.fetchItems();
-  var outlineDiv = this.getHTMLElement();
+  var outlineDiv = this.getHtmlElement();
   View.removeChildrenOfElement(outlineDiv);
   var ulElement = View.createAndAppendElement(outlineDiv, "ul");
   for (var contentItemKey in listOfContentItems) {

Modified: trunk/source/PageView.js
===================================================================
--- trunk/source/PageView.js	2005-07-02 20:59:35 UTC (rev 209)
+++ trunk/source/PageView.js	2005-07-02 22:55:58 UTC (rev 210)
@@ -55,7 +55,7 @@
  * @scope    public class method
  * @param    inPage    The Page Item to insert the new section into
  */
-PageView.newSection = function (repository, inPage) {
+PageView.newSection = function(repository, inPage) {
   var attributeCalledQuerySpec = repository.getAttributeCalledQuerySpec();
   var categoryCalledQuery = repository.getCategoryCalledQuery();
   var attributeCalledPluginView = repository.getItemFromUuid(SectionView.UUID_FOR_ATTRIBUTE_PLUGIN_VIEW);
@@ -85,20 +85,19 @@
  *
  * @scope    public instance constructor
  * @extends  View
- * @param    inRootView    The RootView that this PageView is nested in. 
- * @param    inHTMLElement The HTMLElement to display the HTML in. 
- * @param    inPage        The page item to be displayed by this view. 
+ * @param    superview    The View that serves as the superview for this view. 
+ * @param    htmlElement    The HTMLElement to display this view in. 
+ * @param    pageItem        The page item to be displayed by this view. 
  */
 PageView.prototype = new View();  // makes PageView be a subclass of View
-function PageView(inRootView, inHTMLElement, inPage) {
-  Util.assert(inRootView instanceof RootView);
-  Util.assert(inHTMLElement instanceof HTMLElement);
-  Util.assert(inPage instanceof Item);
+function PageView(superview, htmlElement, pageItem) {
+  Util.assert(htmlElement instanceof HTMLElement);
+  Util.assert(pageItem instanceof Item);
 
+  View.call(this, superview, htmlElement);
+
   // instance properties
-  this.setSuperview(inRootView);
-  this.setHTMLElement(inHTMLElement);
-  this._pageItem = inPage;
+  this._pageItem = pageItem;
   
   this._pageSummaryView = null;
   this._headerText = null;
@@ -112,7 +111,7 @@
  * @scope    public instance method
  * @return   A string that gives the name of the page.
  */
-PageView.prototype.getPageTitle = function () {
+PageView.prototype.getPageTitle = function() {
   var pageTitle = this._pageItem.getDisplayString();
   return pageTitle;
 };
@@ -124,7 +123,7 @@
  *
  * @scope    public instance method
  */
-PageView.prototype.refresh = function () {
+PageView.prototype.refresh = function() {
   if (!this._myHasEverBeenDisplayedFlag) {
     this.doInitialDisplay();
   } else {
@@ -144,13 +143,13 @@
  *
  * @scope    public instance method
  */
-PageView.prototype.doInitialDisplay = function () {
-  Util.assert(this.getHTMLElement() instanceof HTMLElement);
+PageView.prototype.doInitialDisplay = function() {
+  Util.assert(this.getHtmlElement() instanceof HTMLElement);
   
   var attributeCalledName = this.getWorld().getAttributeCalledName();
   var attributeCalledSummary = this.getWorld().getAttributeCalledSummary();
 
-  var pageDivElement = this.getHTMLElement();
+  var pageDivElement = this.getHtmlElement();
   
   var headerElement = View.createAndAppendElement(pageDivElement, "h1");
   this._headerText = new EntryView(this, headerElement, this._pageItem, attributeCalledName,
@@ -187,9 +186,9 @@
  * @param    insertBeforeElement    Optional. The HTML element that this new section view should come before on the page.
  */
 PageView.prototype._buildNewSection = function(sectionItem, insertBeforeElement) {
-  var pageDivElement = this.getHTMLElement();
+  var pageDivElement = this.getHtmlElement();
   var sectionViewDiv = document.createElement("div");
-  var sectionView = new SectionView(this, sectionViewDiv, sectionItem, this._listOfSectionViews.length);
+  var sectionView = new SectionView(this, sectionViewDiv, sectionItem);
   if (insertBeforeElement) {
     pageDivElement.insertBefore(sectionViewDiv, insertBeforeElement);
   }
@@ -219,7 +218,7 @@
  */
 PageView.prototype._buildEditControls = function() {
   if (!this._editModeDiv) {
-    var pageDivElement = this.getHTMLElement();
+    var pageDivElement = this.getHtmlElement();
     var cssClass = SectionView.CSS_CLASS_SECTION + " " + RootView.CSS_CLASS_EDIT_TOOL;
     this._editModeDiv = View.createAndAppendElement(pageDivElement, "div", cssClass);
     View.createAndAppendElement(this._editModeDiv, "br");

Modified: trunk/source/PluginView.js
===================================================================
--- trunk/source/PluginView.js	2005-07-02 20:59:35 UTC (rev 209)
+++ trunk/source/PluginView.js	2005-07-02 22:55:58 UTC (rev 210)
@@ -42,19 +42,21 @@
  *
  * @scope    public instance constructor
  * @extends  View
- * @param    inSuperView    The superview for this view. 
- * @param    inHTMLElement    The HTMLElement to display this view in. 
- * @param    inQuery    The Query item that provides the items for this PluginView to display
+ * @param    superview    The superview for this view. 
+ * @param    htmlElement    The HTMLElement to display this view in. 
+ * @param    querySpec    The Query Spec item that provides the items for this PluginView to display
+ * @param    layoutItem    ???. 
  * @syntax   var PluginView = new PluginView()
  */
 PluginView.prototype = new View();  // makes PluginView be a subclass of View
-function PluginView(inSuperView, inHTMLElement, inQuery, inLayout) {
-  if (!inSuperView) {return;} // initial call that subclasses of PluginViews make without parameters
-  this.setSuperview(inSuperView);
-  this.setHTMLElement(inHTMLElement);
-  this._querySpec = inQuery;
+function PluginView(superview, htmlElement, querySpec, layoutItem) {
+  if (!superview) {return;} // initial call that subclasses of PluginViews make without parameters
+
+  View.call(this, superview, htmlElement);
+
+  this._querySpec = querySpec;
   this._queryRunner = this.getWorld().newQueryRunner(this._querySpec, this);
-  this._layout = inLayout;
+  this._layout = layoutItem;
   this._pluginItem = null;
 }
 
@@ -69,7 +71,7 @@
  * @scope    public instance method
  * @return   A string.
  */
-PluginView.prototype.getPluginItem = function () {
+PluginView.prototype.getPluginItem = function() {
   if (!this._pluginItem) {
     var pluginClass = this.getClass();
     // alert(pluginClass);
@@ -97,7 +99,7 @@
  * @scope    public instance method
  * @return   A query spec item.
  */
-PluginView.prototype.getQuerySpec = function () {
+PluginView.prototype.getQuerySpec = function() {
   return this._querySpec;
 };
 
@@ -107,8 +109,8 @@
  *
  * @scope    public instance method
  */
-PluginView.prototype.endOfLife = function () {
-  View.removeChildrenOfElement(this.getHTMLElement());
+PluginView.prototype.endOfLife = function() {
+  View.removeChildrenOfElement(this.getHtmlElement());
 };
 
 

Modified: trunk/source/SectionView.js
===================================================================
--- trunk/source/SectionView.js	2005-07-02 20:59:35 UTC (rev 209)
+++ trunk/source/SectionView.js	2005-07-02 22:55:58 UTC (rev 210)
@@ -60,8 +60,6 @@
 
 SectionView.ELEMENT_ID_SELECT_MENU_PREFIX = "select_menu_";
 
-// SectionView.ELEMENT_ATTRIBUTE_SECTION_NUMBER = "section_number";
-
 SectionView.UUID_FOR_ATTRIBUTE_PLUGIN_VIEW       = "00040101-ce7f-11d9-8cd5-0011113ae5d6";
 SectionView.UUID_FOR_ATTRIBUTE_LAYOUT_DATA       = "00040102-ce7f-11d9-8cd5-0011113ae5d6";
 SectionView.UUID_FOR_ATTRIBUTE_APPLIES_TO_PLUGIN = "00040103-ce7f-11d9-8cd5-0011113ae5d6";
@@ -87,23 +85,18 @@
  *
  * @scope    public instance constructor
  * @extends  View
- * @param    inPageView    The PageView that serves as the superview for this view. 
- * @param    inHTMLElement The HTMLElement to display the HTML in. 
- * @param    inSection    The Section item to be displayed in by this view. 
- * @param    inSectionNumber    The number of the section on the page (1, 2, 3, 4...). 
+ * @param    superview    The view that serves as the superview for this view. 
+ * @param    htmlElement    The HTMLElement to display the HTML in. 
+ * @param    sectionItem    The Section item to be displayed in by this view. 
  * @syntax   var sectionView = new SectionView()
  */
 SectionView.prototype = new View();  // makes SectionView be a subclass of View
-function SectionView(inPageView, inHTMLElement, inSection, inSectionNumber) {
-  Util.assert(inPageView instanceof PageView);
-  Util.assert(inSection instanceof Item);
-  
+function SectionView(superview, htmlElement, sectionItem) {
+  View.call(this, superview, htmlElement);
+
   // instance properties
-  // PENDING: these should all be private
-  this.setSuperview(inPageView);
-  this.setHTMLElement(inHTMLElement);
-  this._section = inSection;
-  this._sectionNumber = inSectionNumber;
+  Util.assert(sectionItem instanceof Item);
+  this._section = sectionItem;
 
   this._pluginView = null;
   this._pluginDiv = null;
@@ -154,7 +147,7 @@
  * @param    pluginDiv    The HTMLDivElement to display the plugin in. 
  * @return   A newly created plugin object, initialized to be the plugin for this section.
  */
-SectionView.prototype.getPluginInstanceFromPluginItem = function (pluginItem, pluginDiv) {
+SectionView.prototype.getPluginInstanceFromPluginItem = function(pluginItem, pluginDiv) {
   Util.assert(pluginItem instanceof Item);
   
   var newPlugin = null;
@@ -175,7 +168,7 @@
  * @scope    public instance method
  * @return   query associated to this section.
  */
-SectionView.prototype.getQuerySpec = function () {
+SectionView.prototype.getQuerySpec = function() {
   var attributeCalledQuerySpec = this.getWorld().getAttributeCalledQuerySpec();
   var queryEntry = this._section.getSingleEntryFromAttribute(attributeCalledQuerySpec);
   if (queryEntry) {
@@ -191,7 +184,7 @@
  *
  * @scope    public instance method
  */
-SectionView.prototype.refresh = function () {
+SectionView.prototype.refresh = function() {
   if (!this._myHasEverBeenDisplayedFlag) {
     this.doInitialDisplay();
   } else {
@@ -210,8 +203,8 @@
  *
  * @scope    public instance method
  */
-SectionView.prototype.doInitialDisplay = function () {
-  if (!this.getHTMLElement()) {
+SectionView.prototype.doInitialDisplay = function() {
+  if (!this.getHtmlElement()) {
     return;
   }
   var attributeCalledPluginView = this.getWorld().getItemFromUuid(SectionView.UUID_FOR_ATTRIBUTE_PLUGIN_VIEW);
@@ -225,7 +218,7 @@
     selectedPluginClass = TablePlugin; 
   }
   
-  var sectionDiv = this.getHTMLElement();
+  var sectionDiv = this.getHtmlElement();
   var outerDiv = View.createAndAppendElement(sectionDiv, "div", SectionView.CSS_CLASS_SECTION);
   var headerH2 = View.createAndAppendElement(outerDiv, "h2");
   var attributeCalledName = this.getWorld().getAttributeCalledName();
@@ -249,7 +242,6 @@
   var optionElement;
   var listener;
   selectElement.setAttribute("name", selectMenuId);
-  // selectElement.setAttribute(SectionView.ELEMENT_ATTRIBUTE_SECTION_NUMBER, this._sectionNumber);
   for (var key in SectionView._ourHashTableOfPluginClassesKeyedByPluginItemUuid) {
     var pluginClass = SectionView._ourHashTableOfPluginClassesKeyedByPluginItemUuid[key];
     optionElement = View.createAndAppendElement(selectElement, "option");
@@ -280,20 +272,20 @@
  * Returns layout data of this section for a particular plugin
  * Creates a the layout data item if doesn't exist
  *
- * @param    inPluginType    The name of plugin
+ * @param    pluginTypeItem    An item representing a class of plugin
  * @return    layout data of this section for a particular plugin
  */
-SectionView.prototype._getLayoutDataForPlugin = function (inPluginType) {
+SectionView.prototype._getLayoutDataForPlugin = function(pluginTypeItem) {
   var repository = this.getWorld();
-  var attrLayoutData = repository.getItemFromUuid(SectionView.UUID_FOR_ATTRIBUTE_LAYOUT_DATA);
-  var entriesLayoutData = this._section.getEntriesForAttribute(attrLayoutData);
-  var attrAppliesToPlugin = repository.getItemFromUuid(SectionView.UUID_FOR_ATTRIBUTE_APPLIES_TO_PLUGIN);
+  var attributeLayoutData = repository.getItemFromUuid(SectionView.UUID_FOR_ATTRIBUTE_LAYOUT_DATA);
+  var entriesLayoutData = this._section.getEntriesForAttribute(attributeLayoutData);
+  var attributeAppliesToPlugin = repository.getItemFromUuid(SectionView.UUID_FOR_ATTRIBUTE_APPLIES_TO_PLUGIN);
   if (entriesLayoutData) {
     for (var i=0; i < entriesLayoutData.length; ++i) {
       var layoutItem = entriesLayoutData[i].getConnectedItem(this._section);
-      var entriesAppliesToPlugin = layoutItem.getEntriesForAttribute(attrAppliesToPlugin);
+      var entriesAppliesToPlugin = layoutItem.getEntriesForAttribute(attributeAppliesToPlugin);
       Util.assert(entriesAppliesToPlugin && entriesAppliesToPlugin.length == 1);
-      if (entriesAppliesToPlugin[0].getValue() == inPluginType) {
+      if (entriesAppliesToPlugin[0].getValue() == pluginTypeItem) {
         return layoutItem;
       }
     }
@@ -303,11 +295,11 @@
   var categoryCalledLayoutData = repository.getItemFromUuid(SectionView.UUID_FOR_CATEGORY_LAYOUT_DATA);
   var attributeCalledSectionThisLayoutDataBelongsTo = repository.getItemFromUuid(SectionView.UUID_FOR_ATTRIBUTE_SECTION_THIS_LAYOUT_DATA_BELONGS_TO);
   repository.beginTransaction();
-  layoutItem = repository.newItem("Layout data for " + inPluginType.getDisplayString() + " of " + this._section.getDisplayString());
+  layoutItem = repository.newItem("Layout data for " + pluginTypeItem.getDisplayString() + " of " + this._section.getDisplayString());
   layoutItem.assignToCategory(categoryCalledLayoutData);
-  layoutItem.addEntryForAttribute(attrAppliesToPlugin, inPluginType);
-  // this._section.addEntryForAttribute(attrLayoutData, layoutItem, repository.getTypeCalledItem());
-  this._section.addConnectionEntry(attrLayoutData, layoutItem, attributeCalledSectionThisLayoutDataBelongsTo);
+  layoutItem.addEntryForAttribute(attributeAppliesToPlugin, pluginTypeItem);
+  // this._section.addEntryForAttribute(attributeLayoutData, layoutItem, repository.getTypeCalledItem());
+  this._section.addConnectionEntry(attributeLayoutData, layoutItem, attributeCalledSectionThisLayoutDataBelongsTo);
   repository.endTransaction();
   return layoutItem;
 };
@@ -318,7 +310,7 @@
  * browser to be re-drawn.
  *
  */
-SectionView.prototype._refreshQueryEditSpan = function () {
+SectionView.prototype._refreshQueryEditSpan = function() {
   View.removeChildrenOfElement(this._queryEditSpan);
   
   var myQuery = this.getQuerySpec();
@@ -412,8 +404,8 @@
  * @scope    public instance method
  * @param    inEventObject    An event object. 
  */
-SectionView.prototype.clickOnPluginSelectionMenu = function (inEventObject) {
-  var eventObject = inEventObject || window.event;
+SectionView.prototype.clickOnPluginSelectionMenu = function(eventObject) {
+  eventObject = eventObject || window.event;
   var optionElement = Util.getTargetFromEvent(eventObject);
   // PENDING: We could replace the lines above with "var optionElement = this;"
   // That would work fine in Firefox, but maybe it wouldn't work in other browsers?  
@@ -456,8 +448,8 @@
  * @scope    public instance method
  * @param    inEventObject    An event object. 
  */
-SectionView.prototype.clickOnAttributeMenu = function (inEventObject) {
-  var eventObject = inEventObject || window.event;
+SectionView.prototype.clickOnAttributeMenu = function(eventObject) {
+  eventObject = eventObject || window.event;
   var optionElement = Util.getTargetFromEvent(eventObject);
   // PENDING: We could replace the lines above with "var optionElement = this;"
   // That would work fine in Firefox, but maybe it wouldn't work in other browsers?  

Modified: trunk/source/TablePlugin.js
===================================================================
--- trunk/source/TablePlugin.js	2005-07-02 20:59:35 UTC (rev 209)
+++ trunk/source/TablePlugin.js	2005-07-02 22:55:58 UTC (rev 210)
@@ -61,13 +61,15 @@
  * HTML table.
  *
  * @scope    public instance constructor
- * @extends  View
- * @param    inSectionView    The SectionView that this TablePlugin will appears in. 
- * @param    inHTMLElement    The HTMLElement to display this view in. 
+ * @extends  PluginView
+ * @param    superview    The View that serves as the superview for this view. 
+ * @param    htmlElement    The HTMLElement to display this view in. 
+ * @param    querySpec    The Query Spec item that provides the items for this PluginView to display
+ * @param    layoutItem    ???. 
  */
-TablePlugin.prototype = new PluginView();  // makes TablePlugin be a subclass of View
-function TablePlugin(inSectionView, inHTMLElement, inQuery, inLayout) {
-  PluginView.call(this, inSectionView, inHTMLElement, inQuery, inLayout);
+TablePlugin.prototype = new PluginView();  // makes TablePlugin be a subclass of PluginView
+function TablePlugin(superview, htmlElement, querySpec, layoutItem) {
+  PluginView.call(this, superview, htmlElement, querySpec, layoutItem);
 
   // PENDING should probably make this independent of sectionview
   this._cssClass = SectionView.CSS_CLASS_SIMPLE_TABLE;
@@ -88,7 +90,7 @@
  * @scope    public class method
  * @return   The UUID of the item that represents this class of plugin
  */
-TablePlugin.getPluginItemUuid = function () {
+TablePlugin.getPluginItemUuid = function() {
   return TablePlugin.UUID_FOR_PLUGIN_VIEW_TABLE;
 };
 
@@ -103,7 +105,7 @@
  * @scope    public instance method
  * @return   A JavaScript class. 
  */
-TablePlugin.prototype.getClass = function () {
+TablePlugin.prototype.getClass = function() {
   return TablePlugin;
 };
 
@@ -116,7 +118,7 @@
  * @param    itemB    One of the two items to be compared. 
  * @return   This method returns 0 if the items are comparable. If _ascendingOrder is true, itemA is less than itemB, this method returns -1, otherwise it returns +1. 
  */
-TablePlugin.prototype.compareItemByAttribute = function (itemA, itemB) {
+TablePlugin.prototype.compareItemByAttribute = function(itemA, itemB) {
   Util.assert(this._sortAttribute !== null);
   var strA = itemA.getSingleStringValueFromAttribute(this._sortAttribute).toLowerCase();
   var strB = itemB.getSingleStringValueFromAttribute(this._sortAttribute).toLowerCase();
@@ -164,7 +166,6 @@
  *
  */
 TablePlugin.prototype._buildAttributeHashFromScratch = function() {
-  // var PENDING__JUNE_1_EXPERIMENT_BY_BRIAN = true;
   var attributeCalledCategory = this.getWorld().getAttributeCalledCategory();
   var hashTableOfAttributes = {};
   var hashTableOfEntries = {};
@@ -197,7 +198,7 @@
  * @scope    private instance method
  */
 TablePlugin.prototype._buildAttributeEditor = function() {
-  var htmlElement = this.getHTMLElement();
+  var htmlElement = this.getHtmlElement();
   View.createAndAppendElement(htmlElement, "br");
   var selectElt = View.createAndAppendElement(htmlElement, "select", RootView.CSS_CLASS_EDIT_TOOL);
   var listOfAttributes = this.getWorld().getAttributes();
@@ -342,18 +343,19 @@
 /**
  * Re-creates all the HTML for the TablePlugin, and hands the HTML to the 
  * browser to be re-drawn.
- * @param inDontRebuildHas, if true does not refetch query and rebuild attribute hash table
+ *
+ * @param    doNotRebuildHash    If true, this method does not refetch query and rebuild attribute hash table
  * @scope    public instance method
  */
-TablePlugin.prototype._buildTable = function(inDontRebuildHash) {
+TablePlugin.prototype._buildTable = function(doNotRebuildHash) {
   // get list of items and attributes
-  if (!inDontRebuildHash) {
+  if (!doNotRebuildHash) {
     this.fetchItems();
     this._buildAttributes();
   }
   
   //create new table, remove old table if already exists
-  View.removeChildrenOfElement(this.getHTMLElement());
+  View.removeChildrenOfElement(this.getHtmlElement());
   this._table = document.createElement("table");
   this._table.className = this._cssClass;
   
@@ -366,7 +368,7 @@
 
   this._buildTableBody();
   
-  this.getHTMLElement().appendChild(this._table);
+  this.getHtmlElement().appendChild(this._table);
   
   // if (this.isInEditMode()) {this._buildAttributeEditor();}
   this._buildAttributeEditor();
@@ -379,7 +381,7 @@
  *
  * @scope    public instance method
  */
-TablePlugin.prototype.refresh = function () {
+TablePlugin.prototype.refresh = function() {
   // PENDING new table is constantly rebuilt currently
   // PENDING new content model with observable queries
   this._buildTable();
@@ -392,7 +394,7 @@
  * @scope    public instance method
  * @return   An HTML image element
  */
-TablePlugin.prototype.getSortIcon = function () {
+TablePlugin.prototype.getSortIcon = function() {
   var imageName = this._ascendingOrder ? TablePlugin.ASCENDING_GIF : TablePlugin.DESCENDING_GIF;
   var image =  Util.createImageElement(imageName);
   image.align = "middle";
@@ -428,7 +430,7 @@
  * 
  * @scope    public class method
  */
-TablePlugin.prototype.clickOnHeader = function (event, clickAttribute) {
+TablePlugin.prototype.clickOnHeader = function(event, clickAttribute) {
   if (clickAttribute == this._sortAttribute) {
     this._ascendingOrder = !this._ascendingOrder;
   }
@@ -444,7 +446,7 @@
  * 
  * @scope    public class method
  */
-TablePlugin.prototype.selectRow = function (rowElement) {
+TablePlugin.prototype.selectRow = function(rowElement) {
   Util.assert(rowElement instanceof HTMLTableRowElement);
   if (rowElement != this._lastSelectedRow) {
     if (this._lastSelectedRow) {
@@ -463,7 +465,7 @@
 /**
  * 
  */
-TablePlugin.prototype._importData = function (inEventObject, fileButton) {
+TablePlugin.prototype._importData = function(eventObject, fileButton) {
   // Returns null if it can't do it, false if there's an error, or a string of the content if successful
 /*  function mozillaLoadFile(filePath)
   {
@@ -507,8 +509,8 @@
  * 
  * @scope    private class method
  */
-TablePlugin.prototype._attributeEditorChanged = function (inEventObject) {
-  var attributeUuid = inEventObject.target.value;
+TablePlugin.prototype._attributeEditorChanged = function(eventObject) {
+  var attributeUuid = eventObject.target.value;
   if (attributeUuid) {
     var repository = this.getWorld();
     var attrTableColumns = repository.getItemFromUuid(TablePlugin.UUID_FOR_ATTRIBUTE_TABLE_COLUMNS);
@@ -547,8 +549,8 @@
 /**
  * 
  */
-TablePlugin.prototype._handleClick = function (inEventObject, anEntryView) {
-  var rowElement = anEntryView.getSuperview().getHTMLElement().parentNode; // entryView -> multiEntriesView -> cellElment -> rowElement
+TablePlugin.prototype._handleClick = function(eventObject, anEntryView) {
+  var rowElement = anEntryView.getSuperview().getHtmlElement().parentNode; // entryView -> multiEntriesView -> cellElment -> rowElement
   return this.selectRow(rowElement);
 };
 
@@ -563,8 +565,7 @@
  * @scope    public class method
  * @return   Returns true if the keyPress is a letter, or false if the keyPress is an arrow key or a key that moves the cursor to another cell. 
  */
-TablePlugin.prototype.keyPressOnEditField = function (inEventObject, anEntryView) {
-  var eventObject = inEventObject;
+TablePlugin.prototype.keyPressOnEditField = function(eventObject, anEntryView) {
   var asciiValueOfKey = eventObject.keyCode;
   var shiftKeyPressed = eventObject.shiftKey;
   
@@ -606,7 +607,7 @@
     // to become a "real" one thereby  creating new row for the next provisional item, e.g. this._listOfItems changes
     anEntryView.stopEditing();
 
-    var cellElement = anEntryView.getSuperview().getHTMLElement(); // entryView's multiEntriesView's
+    var cellElement = anEntryView.getSuperview().getHtmlElement(); // entryView's multiEntriesView's
     var userHitReturnInLastRow = false;
     var shiftBy;
     var numCols = this._numberOfColumns;

Modified: trunk/source/View.js
===================================================================
--- trunk/source/View.js	2005-07-02 20:59:35 UTC (rev 209)
+++ trunk/source/View.js	2005-07-02 22:55:58 UTC (rev 210)
@@ -41,59 +41,36 @@
  * The View class serves as an abstract superclass for other view classes.
  *
  * @scope    public instance constructor
+ * @param    superview    The superview for this view. 
+ * @param    htmlElement    The HTMLElement to display this view in. 
  * @syntax   DO NOT CALL THIS CONSTRUCTOR
  */
-function View() {
-  this._superview = null;
-  this._htmlElement = null;
+function View(superview, htmlElement) {
+  if (!superview) {return;} // initial call that subclasses of PluginViews make without parameters
+  this._superview = superview;
+  this._htmlElement = htmlElement;
   this._myHasEverBeenDisplayedFlag = false; // PENDING: this is accessed directly by subclasses, which is bad
 }
 
 
 /**
- * Tells the View who its parent is in the view hierarchy.
- *
- * @scope    public instance method
- * @param    inSuperview    The superview for this view. 
- */
-View.prototype.setSuperview = function (inSuperview) {
-  // Util.assert(ViewInterface.isImplementedBy(inSuperview));
-
-  this._superview = inSuperview;
-};
-
-
-/**
  * Returns the parent view in the view hierarchy.
  *
  * @scope    public instance method
  * @return   A View object. 
  */
-View.prototype.getSuperview = function () {
+View.prototype.getSuperview = function() {
   return this._superview;
 };
 
 
 /**
- * Tells the View what HTMLElement to display itself in.
- *
- * @scope    public instance method
- * @param    inHTMLElement    The HTMLDivElement to display the view in. 
- */
-View.prototype.setHTMLElement = function (inHTMLElement) {
-  Util.assert(inHTMLElement instanceof HTMLElement);
-
-  this._htmlElement = inHTMLElement;
-};
-
-
-/**
  * Returns the HTMLElement that the view displays itself in.
  *
  * @scope    public instance method
  * @return   An HTMLElement. 
  */
-View.prototype.getHTMLElement = function () {
+View.prototype.getHtmlElement = function() {
   return this._htmlElement;
 };
 
@@ -104,7 +81,7 @@
  * @scope    public instance method
  * @return   A World object. 
  */
-View.prototype.getWorld = function () {
+View.prototype.getWorld = function() {
   return this._superview.getWorld();
 };
 
@@ -130,7 +107,7 @@
  * @scope    public instance method
  * @return   A boolean value. True if we are in Edit Mode.
  */
-View.prototype.isInEditMode = function () {
+View.prototype.isInEditMode = function() {
   return this._superview.isInEditMode();
 };
 
@@ -141,7 +118,7 @@
  * @scope    public instance method
  * @return   A boolean value. True if the view has ever been displayed.
  */
-View.prototype.hasEverBeenDisplayed = function () {
+View.prototype.hasEverBeenDisplayed = function() {
   return this._myHasEverBeenDisplayedFlag;
 };
 
@@ -152,7 +129,7 @@
  *
  * @scope    public instance method
  */
-View.prototype.refresh = function () {
+View.prototype.refresh = function() {
   if (!this.hasEverBeenDisplayed()) {
     // generate HTML elements for the view
     this._myHasEverBeenDisplayedFlag = true;
@@ -167,12 +144,12 @@
  * off-screen.
  *
  * @scope    public instance method
- * @param    inBoolean    True if the view should be visible on screen. False if the view should be hidden off screen.
+ * @param    visibleFlag    True if the view should be visible on screen. False if the view should be hidden off screen.
  */
-View.prototype.includeOnScreen = function (inBoolean) {
-  Util.assert(Util.isBoolean(inBoolean));
+View.prototype.includeOnScreen = function(visibleFlag) {
+  Util.assert(Util.isBoolean(visibleFlag));
 
-  if (inBoolean) {
+  if (visibleFlag) {
     this.refresh();
     this._htmlElement.style.display = "block";
   } else {
@@ -204,26 +181,26 @@
  * element to the given element.
  *
  * @scope    public class method
- * @param    inElement    The existing element that we should append the new element to. 
- * @param    inTagName    The HTML tag for the element ("div", "p", "span", etc.). 
- * @param    inClassName    Optional. The HTML/CSS class to assign to the new element. 
- * @param    inId    Optional. The HTML id to assign to the new element. 
+ * @param    parentElement    The existing element that we should append the new element to. 
+ * @param    tagName    The HTML tag for the element ("div", "p", "span", etc.). 
+ * @param    cssClassName    Optional. The HTML/CSS class to assign to the new element. 
+ * @param    elementId    Optional. The HTML id to assign to the new element. 
  * @return   The newly created HTML element.
  */
-View.createAndAppendElement = function (inElement, inTagName, inClassName, inId) {
-  Util.assert(inElement instanceof HTMLElement);
-  Util.assert(Util.isString(inTagName));
-  Util.assert(!inClassName || Util.isString(inClassName));
-  Util.assert(!inId || Util.isString(inId));
+View.createAndAppendElement = function(parentElement, tagName, cssClassName, elementId) {
+  Util.assert(parentElement instanceof HTMLElement);
+  Util.assert(Util.isString(tagName));
+  Util.assert(!cssClassName || Util.isString(cssClassName));
+  Util.assert(!elementId || Util.isString(elementId));
 
-  var newElement = window.document.createElement(inTagName);
-  if (inClassName) {
-    newElement.className = inClassName;
+  var newElement = window.document.createElement(tagName);
+  if (cssClassName) {
+    newElement.className = cssClassName;
   }
-  if (inId) {
-    newElement.id = inId;
+  if (elementId) {
+    newElement.id = elementId;
   }
-  inElement.appendChild(newElement);
+  parentElement.appendChild(newElement);
   return newElement;
 };
 
@@ -234,16 +211,16 @@
  * text node to the given element.
  *
  * @scope    public class method
- * @param    inElement    The existing element that we should append the new element to. 
- * @param    inText    The text string to put in the text node.
+ * @param    parentElement    The existing element that we should append the new element to. 
+ * @param    textString    The text string to put in the text node.
  * @return   The newly created text node.
  */
-View.createAndAppendTextNode = function (inElement, inText) {
-  Util.assert(inElement instanceof HTMLElement);
-  Util.assert(Util.isString(inText));
+View.createAndAppendTextNode = function(parentElement, textString) {
+  Util.assert(parentElement instanceof HTMLElement);
+  Util.assert(Util.isString(textString));
 
-  var newTextNode = window.document.createTextNode(inText);
-  inElement.appendChild(newTextNode);
+  var newTextNode = window.document.createTextNode(textString);
+  parentElement.appendChild(newTextNode);
   return newTextNode;
 };
 

Modified: trunk/source/view/EntryView.js
===================================================================
--- trunk/source/view/EntryView.js	2005-07-02 20:59:35 UTC (rev 209)
+++ trunk/source/view/EntryView.js	2005-07-02 22:55:58 UTC (rev 210)
@@ -55,39 +55,39 @@
  *
  * @scope    public instance constructor
  * @extends  View
- * @param    theSuperview    The view that this view is nested in. 
- * @param    theItem         The Item to be displayed and edited by this view. 
- * @param    theAttribute    The attribute of the item to be displayed.
- * @param    theElement      The HTMLElement to display the HTML in. 
- * @param    theClassType    A string that gives a class name to assign to the HTML element. 
+ * @param    superview    The view that this view is nested in. 
+ * @param    htmlElement      The HTMLElement to display the HTML in. 
+ * @param    item         The Item to be displayed and edited by this view. 
+ * @param    attribute    The attribute of the item to be displayed.
+ * @param    cssClassName    A string that gives a class name to assign to the HTML element. 
+ * @param    entry    The entry that this EntryView displays. 
  * @param    isMultiLine     a boolean indicating if text view is single line or multi-line
  */
 EntryView.prototype = new View();  // makes EntryView be a subclass of View
-function EntryView(theSuperview, inElement, inItem, inAttribute, inEntry, inClassName, isMultiLine) {
-  Util.assert((!inEntry) || inEntry instanceof Entry);
-  Util.assert(inItem instanceof Item);
-  Util.assert(inAttribute instanceof Item);
-  //Util.assert(theAttribute instanceof Attribute); PENDING need to check that attribute is an attribute
+function EntryView(superview, htmlElement, item, attribute, entry, cssClassName, isMultiLine) {
+  Util.assert((!entry) || entry instanceof Entry);
+  Util.assert(item instanceof Item);
+  Util.assert(attribute instanceof Item); // PENDING need to check that attribute is an attribute
   
-  this.setSuperview(theSuperview);
-  this.setHTMLElement(inElement);
-  inElement.style.width = "100%";
-  inElement.style.height = "100%"; // make this element expand to fill parent element where possible
-  this._item = inItem;
-  this._attribute = inAttribute;
-  this._entry = inEntry;
+  View.call(this, superview, htmlElement);
+
+  htmlElement.style.width = "100%";
+  htmlElement.style.height = "100%"; // make this element expand to fill parent element where possible
+  this._item = item;
+  this._attribute = attribute;
+  this._entry = entry;
   this._editField = null;
-  this._className = inClassName;
+  this._className = cssClassName;
   this._isMultiLine = isMultiLine;
   this._isEditing = false;
   this._proxyOnKeyFunction = null;
   this._alwaysUseEditField = null;
   
-  this._isProvisional = inItem.isProvisional();
+  this._isProvisional = item.isProvisional();
   if (this._isProvisional) {
-    this._provisionalText = inAttribute.getDisplayString();
+    this._provisionalText = attribute.getDisplayString();
   }
-  else if (inEntry && inEntry.getValue(this._item) instanceof Item) {
+  else if (entry && entry.getValue(this._item) instanceof Item) {
     this._valueIsItem = true;
   }
 }
@@ -124,8 +124,8 @@
 /**
  *
  */
-EntryView.prototype.setAutoWiden = function(inAutoWiden) {
-  this._autoWiden = inAutoWiden;
+EntryView.prototype.setAutoWiden = function(autoWiden) {
+  this._autoWiden = autoWiden;
 };
 
 /**
@@ -143,9 +143,9 @@
 /**
  *
  */
-EntryView.prototype.setSuggestions = function(suggestionList) {
-  if (suggestionList) {Util.assert(Util.isArray(suggestionList));}
-  this._suggestions = suggestionList;
+EntryView.prototype.setSuggestions = function(listOfSuggestions) {
+  if (listOfSuggestions) {Util.assert(Util.isArray(listOfSuggestions));}
+  this._suggestions = listOfSuggestions;
 };
 
 
@@ -182,7 +182,7 @@
  * @scope    private instance method
  */
 EntryView.prototype._buildView = function() {
-  var htmlElement = this.getHTMLElement();
+  var htmlElement = this.getHtmlElement();
   View.removeChildrenOfElement(htmlElement);
   
   var textString = this._getText();
@@ -240,11 +240,11 @@
       editField.size = 5; //editField.defaultValue.length+1;
     }
     
-    //editField.style.width = this.getHTMLElement().offsetWidth + "px";  
-    if (this._isMultiLine) {editField.style.height = (this.getHTMLElement().offsetHeight) + "px";}  
+    //editField.style.width = this.getHtmlElement().offsetWidth + "px";  
+    if (this._isMultiLine) {editField.style.height = (this.getHtmlElement().offsetHeight) + "px";}  
     
     this._setupSuggestionBox();
-    this.getHTMLElement().replaceChild(editField, this._textNode);
+    this.getHtmlElement().replaceChild(editField, this._textNode);
     if (!dontSelect) {editField.select();}
     this._isEditing = true;
   }
@@ -266,7 +266,7 @@
       newValue = this._editField.value;
     }
     var stillProvisional = this._isProvisional && !newValue;
-    var htmlElement = this.getHTMLElement();
+    var htmlElement = this.getHtmlElement();
 
 
     if (this._suggestionBox) {
@@ -286,7 +286,7 @@
       }
       this._textNode.data = newValueDisplayString;
       this._suggestionBox = null;
-      this.getHTMLElement().replaceChild(this._textNode, this._editField);
+      this.getHtmlElement().replaceChild(this._textNode, this._editField);
     }
 
     // we need this _writeValue() to be after all display related code, because this may trigger an observer call
@@ -384,7 +384,7 @@
       }
       if (value instanceof Item) {
         this._valueIsItem = true;
-        var htmlElement = this.getHTMLElement();
+        var htmlElement = this.getHtmlElement();
         if (this._isLozenge() && !htmlElement.className.match(EntryView.CSS_CLASS_VALUE_IS_ITEM)) {
           htmlElement.className += " " + EntryView.CSS_CLASS_VALUE_IS_ITEM;
         }
@@ -433,11 +433,11 @@
  * Sets a function to be used when onclick is called to the EntryView
  *
  * @scope    public instance method
- * @param    inEventObject    An event object. 
+ * @param    onClickFunction    A function to call. 
  */
-EntryView.prototype.setClickFunction = function(inClickFunction) {
-  Util.assert(inClickFunction instanceof Function);
-  this._clickFunction = inClickFunction;
+EntryView.prototype.setClickFunction = function(onClickFunction) {
+  Util.assert(onClickFunction instanceof Function);
+  this._clickFunction = onClickFunction;
 };
 
 
@@ -447,10 +447,10 @@
  * Handles the mouse click event on text view. Called by listener.
  *
  * @scope    public instance method
- * @param    inEventObject    An event object. 
+ * @param    eventObject    An event object. 
  */
-EntryView.prototype.onClick = function(inEventObject) {
-  if (this._clickFunction && this._clickFunction(inEventObject, this)) {
+EntryView.prototype.onClick = function(eventObject) {
+  if (this._clickFunction && this._clickFunction(eventObject, this)) {
     return true;
   }
   if (this.isInEditMode()) {
@@ -462,9 +462,9 @@
 /**
  *
  */
-EntryView.prototype.onFocus = function(inEventObject) {
+EntryView.prototype.onFocus = function(eventObject) {
   if (this._suggestionBox) {
-    this._suggestionBox._focusOnInputField(inEventObject);
+    this._suggestionBox._focusOnInputField(eventObject);
   }
 };
 
@@ -478,7 +478,7 @@
  * @scope    public instance method
  * @param    inEventObject    An event object. 
  */
-EntryView.prototype.onBlur = function(inEventObject) {
+EntryView.prototype.onBlur = function(eventObject) {
   this.stopEditing();
 };
 
@@ -497,9 +497,9 @@
 /**
  *
  */
-EntryView.prototype.onKeyUp = function(inEventObject) {
+EntryView.prototype.onKeyUp = function(eventObject) {
   if (this._suggestionBox) {
-    this._suggestionBox._keyUpOnInputField(inEventObject);
+    this._suggestionBox._keyUpOnInputField(eventObject);
   }
 };
 
@@ -510,15 +510,15 @@
  * @scope    public instance method
  * @param    inEventObject    An event object. 
  */
-EntryView.prototype.onKeyPress = function(inEventObject) {
-  if (inEventObject.keyCode == Util.ASCII_VALUE_FOR_ESCAPE) {
+EntryView.prototype.onKeyPress = function(eventObject) {
+  if (eventObject.keyCode == Util.ASCII_VALUE_FOR_ESCAPE) {
     this._restoreText();
     return true;
   }
-  if (this._suggestionBox && this._suggestionBox._keyPressOnInputField(inEventObject)) {
+  if (this._suggestionBox && this._suggestionBox._keyPressOnInputField(eventObject)) {
     return true;
   }
-  if (this._keyPressFunction && this._keyPressFunction(inEventObject, this)) {
+  if (this._keyPressFunction && this._keyPressFunction(eventObject, this)) {
     return true;
   }
   var editField = this._editField;
@@ -571,7 +571,7 @@
 EntryView.prototype.noLongerProvisional = function() {
   if (this._isProvisional) {
     this._isProvisional = false;
-    this.getHTMLElement().style.color = this._oldColor;
+    this.getHtmlElement().style.color = this._oldColor;
     // need to set line below because _writeValue() hasn't returned an entry yet
     this._entry = this._item.getSingleEntryFromAttribute(this._attribute); 
     this._buildView();



From skinner at berlios.de  Sun Jul  3 02:37:41 2005
From: skinner at berlios.de (Brian Douglas Skinner at BerliOS)
Date: Sun, 3 Jul 2005 02:37:41 +0200
Subject: [openrecord-svn] r211 - trunk
Message-ID: <200507030037.j630bf92003639@sheep.berlios.de>

Author: skinner
Date: 2005-07-03 02:37:39 +0200 (Sun, 03 Jul 2005)
New Revision: 211

Added:
   trunk/repositories/
Log:
moved the repositories directory up out of /source



From skinner at berlios.de  Sun Jul  3 02:41:01 2005
From: skinner at berlios.de (Brian Douglas Skinner at BerliOS)
Date: Sun, 3 Jul 2005 02:41:01 +0200
Subject: [openrecord-svn] r212 - in trunk: repositories source/model source/repositories
Message-ID: <200507030041.j630f1Su004418@sheep.berlios.de>

Author: skinner
Date: 2005-07-03 02:40:55 +0200 (Sun, 03 Jul 2005)
New Revision: 212

Added:
   trunk/repositories/dashboard.json
   trunk/repositories/demo_page.json
   trunk/repositories/dogfood.json
Removed:
   trunk/source/repositories/dashboard.json
   trunk/source/repositories/demo_page.json
   trunk/source/repositories/dogfood.json
Modified:
   trunk/source/model/DeltaVirtualServer.js
   trunk/source/model/append_to_repository_file.php
Log:
moved the repositories directory up out of /source

Copied: trunk/repositories/dashboard.json (from rev 200, trunk/source/repositories/dashboard.json)

Copied: trunk/repositories/demo_page.json (from rev 200, trunk/source/repositories/demo_page.json)

Copied: trunk/repositories/dogfood.json (from rev 200, trunk/source/repositories/dogfood.json)

Modified: trunk/source/model/DeltaVirtualServer.js
===================================================================
--- trunk/source/model/DeltaVirtualServer.js	2005-07-03 00:37:39 UTC (rev 211)
+++ trunk/source/model/DeltaVirtualServer.js	2005-07-03 00:40:55 UTC (rev 212)
@@ -75,7 +75,7 @@
   // this._buildTypeHashTable();
   this._loadAxiomaticItemsFromFileAtURL(this._dehydratedAxiomFileURL);
 
-  var pathToRepositoryDirectory = "source/repositories/";
+  var pathToRepositoryDirectory = "repositories/";
   var repositoryFileName = this._repositoryName + ".json";
   var repositoryUrl = this._pathToTrunkDirectory + pathToRepositoryDirectory + repositoryFileName;
   var repositoryContentString = Util.getStringContentsOfFileAtURL(repositoryUrl);

Modified: trunk/source/model/append_to_repository_file.php
===================================================================
--- trunk/source/model/append_to_repository_file.php	2005-07-03 00:37:39 UTC (rev 211)
+++ trunk/source/model/append_to_repository_file.php	2005-07-03 00:40:55 UTC (rev 212)
@@ -9,7 +9,7 @@
 $array_of_file_name_parameter_parts = explode("/", $file_name_parameter);
 $safe_file_name_with_no_path_exploits = $array_of_file_name_parameter_parts[0];
 
-$file_path = "../repositories/";
+$file_path = "../../repositories/";
 $file_suffix = ".json";
 $repository_file_name = $file_path . $safe_file_name_with_no_path_exploits . $file_suffix;
 

Deleted: trunk/source/repositories/dashboard.json
===================================================================
--- trunk/source/repositories/dashboard.json	2005-07-03 00:37:39 UTC (rev 211)
+++ trunk/source/repositories/dashboard.json	2005-07-03 00:40:55 UTC (rev 212)
@@ -1,1264 +0,0 @@
-// Repository records, in JSON format
-{ "format": "2005_JUNE_CHRONOLOGICAL_LIST", 
-  "records": [
-  // =======================================================================
-  { "Transaction": [  // Home Page  
-    // -----------------------------------------------------------------------
-    { "Item": {                                               // The OpenRecord Dogfood Site
-             "uuid": "8a3c6b50-ce7f-11d9-8cd5-e24829d2f59b" }
-    },
-    // -----------------------------------------------------------------------
-    { "Entry": {                                              
-             // in item (Page: Dashboard Demo Page) assign (Attribute: Category) = (Category: Page)
-             // in item (Category: Page) assign (Attribute: Items in Category) = (Page: Dashboard Demo Page)
-             "uuid": "8a3c6b5a-ce7f-11d9-8cd5-e24829d2f59b",
-             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": ["8a3c6b50-ce7f-11d9-8cd5-e24829d2f59b", "00020000-ce7f-11d9-8cd5-0011113ae5d6"],
-        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
-    },  
-    // -----------------------------------------------------------------------
-    { "Entry": {                                              // "Dashboard"
-             "uuid": "8a3c6b5b-ce7f-11d9-8cd5-e24829d2f59b",
-        "attribute": "00001002-ce7f-11d9-8cd5-0011113ae5d6",  // Short Name
-             "item": "8a3c6b50-ce7f-11d9-8cd5-e24829d2f59b",  // (Page: Dashboard Demo Page)
-             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",  // TextValue
-            "value": "Dashboard" }
-    },
-    // -----------------------------------------------------------------------
-    { "Entry": {                                              // "Dashboard Demo Page"
-             "uuid": "8a3c6b5c-ce7f-11d9-8cd5-e24829d2f59b",
-        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",  // Name
-             "item": "8a3c6b50-ce7f-11d9-8cd5-e24829d2f59b",  // (Page: Dashboard Demo Page)
-             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",  // TextValue
-            "value": "Dashboard Demo Page" }
-    },
-    // -----------------------------------------------------------------------
-    { "Entry": {                                              // "This is a UI prototype of t..."
-             "uuid": "8a3c6b5d-ce7f-11d9-8cd5-e24829d2f59b",
-        "attribute": "00001003-ce7f-11d9-8cd5-0011113ae5d6",  // Summary
-             "item": "8a3c6b50-ce7f-11d9-8cd5-e24829d2f59b",  // (Page: Dashboard Demo Page)
-             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",  // TextValue
-            "value": "This is a UI prototype of the dashboard view, built using OpenRecord." }
-    } ]
-  },
-  // =======================================================================
-  { "Transaction": [
-    // -----------------------------------------------------------------------
-    // (Layout Data: Layout data for Table of New Section)
-    //           by (Chao) on (Jun 30, 2005)
-    { "Item": { "uuid": "9a071c60-e990-11d9-b90a-e24829d2f59b" } },
-    // -----------------------------------------------------------------------
-    // (Layout Data: Layout data for Table of New Section).(Name) = "Layout data for Table of New Section"
-    //           by (Chao) on (Jun 30, 2005)
-    { "Entry": {
-             "uuid": "9a076a80-e990-11d9-b90a-e24829d2f59b",
-             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
-        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": "9a071c60-e990-11d9-b90a-e24829d2f59b",
-            "value": "Layout data for Table of New Section"  }
-    },
-    // -----------------------------------------------------------------------
-    // (Layout Data: Layout data for Table of New Section).(Category) = (Category: Layout Data)
-    // (Category: Layout Data).(Items in Category) = (Layout Data: Layout data for Table of New Section)
-    //           by (Chao) on (Jun 30, 2005)
-    { "Entry": {
-             "uuid": "9a07dfb0-e990-11d9-b90a-e24829d2f59b",
-             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": ["9a071c60-e990-11d9-b90a-e24829d2f59b", "00040202-ce7f-11d9-8cd5-0011113ae5d6"],
-        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
-    },
-    // -----------------------------------------------------------------------
-    // (Layout Data: Layout data for Table of New Section).(Applies To Plugin) = (Plugin View: Table)
-    //           by (Chao) on (Jun 30, 2005)
-    { "Entry": {
-             "uuid": "9a082dd0-e990-11d9-b90a-e24829d2f59b",
-             "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
-        "attribute": "00040103-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": "9a071c60-e990-11d9-b90a-e24829d2f59b",
-            "value": "00040301-ce7f-11d9-8cd5-0011113ae5d6"  }
-    },
-    // -----------------------------------------------------------------------
-    // (Section: New Section).(Layout Data) = (Layout Data: Layout data for Table of New Section)
-    // (Layout Data: Layout data for Table of New Section).(Section this layout data belongs to) = (Section: New Section)
-    //           by (Chao) on (Jun 30, 2005)
-    { "Entry": {
-             "uuid": "9a087bf0-e990-11d9-b90a-e24829d2f59b",
-             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": ["99ea6ca0-e990-11d9-b90a-e24829d2f59b", "9a071c60-e990-11d9-b90a-e24829d2f59b"],
-        "attribute": ["00040102-ce7f-11d9-8cd5-0011113ae5d6", "00040104-ce7f-11d9-8cd5-0011113ae5d6"]  }
-    }  ]
-  },
-  // =======================================================================
-  { "Transaction": [
-    // -----------------------------------------------------------------------
-    // (Page: New Page)
-    //           by (Chao) on (Jun 30, 2005)
-    { "Item": { "uuid": "99e90d10-e990-11d9-b90a-e24829d2f59b" } },
-    // -----------------------------------------------------------------------
-    // (Page: New Page).(Name) = "New Page"
-    //           by (Chao) on (Jun 30, 2005)
-    { "Entry": {
-             "uuid": "99e95b30-e990-11d9-b90a-e24829d2f59b",
-             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
-        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": "99e90d10-e990-11d9-b90a-e24829d2f59b",
-            "value": "New Page"  }
-    },
-    // -----------------------------------------------------------------------
-    // (Page: New Page).(Category) = (Category: Page)
-    // (Category: Page).(Items in Category) = (Page: New Page)
-    //           by (Chao) on (Jun 30, 2005)
-    { "Entry": {
-             "uuid": "99e9a950-e990-11d9-b90a-e24829d2f59b",
-             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": ["99e90d10-e990-11d9-b90a-e24829d2f59b", "00020000-ce7f-11d9-8cd5-0011113ae5d6"],
-        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
-    },
-    // -----------------------------------------------------------------------
-    // (Page: New Page).(Summary) = "This is a new page."
-    //           by (Chao) on (Jun 30, 2005)
-    { "Entry": {
-             "uuid": "99e9f770-e990-11d9-b90a-e24829d2f59b",
-             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
-        "attribute": "00001003-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": "99e90d10-e990-11d9-b90a-e24829d2f59b",
-            "value": "This is a new page."  }
-    },
-    // -----------------------------------------------------------------------
-    // (Section: New Section)
-    //           by (Chao) on (Jun 30, 2005)
-    { "Item": { "uuid": "99ea6ca0-e990-11d9-b90a-e24829d2f59b" } },
-    // -----------------------------------------------------------------------
-    // (Section: New Section).(Name) = "New Section"
-    //           by (Chao) on (Jun 30, 2005)
-    { "Entry": {
-             "uuid": "99eabac0-e990-11d9-b90a-e24829d2f59b",
-             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
-        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": "99ea6ca0-e990-11d9-b90a-e24829d2f59b",
-            "value": "New Section"  }
-    },
-    // -----------------------------------------------------------------------
-    // (Section: New Section).(Category) = (Category: Section)
-    // (Category: Section).(Items in Category) = (Section: New Section)
-    //           by (Chao) on (Jun 30, 2005)
-    { "Entry": {
-             "uuid": "99eb2ff0-e990-11d9-b90a-e24829d2f59b",
-             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": ["99ea6ca0-e990-11d9-b90a-e24829d2f59b", "00020100-ce7f-11d9-8cd5-0011113ae5d6"],
-        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
-    },
-    // -----------------------------------------------------------------------
-    // (Page: New Page).(Sections In Page) = (Section: New Section)
-    // (Section: New Section).(Page this section appears on) = (Page: New Page)
-    //           by (Chao) on (Jun 30, 2005)
-    { "Entry": {
-             "uuid": "99eb7e10-e990-11d9-b90a-e24829d2f59b",
-             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": ["99e90d10-e990-11d9-b90a-e24829d2f59b", "99ea6ca0-e990-11d9-b90a-e24829d2f59b"],
-        "attribute": ["00030000-ce7f-11d9-8cd5-0011113ae5d6", "00030001-ce7f-11d9-8cd5-0011113ae5d6"]  }
-    },
-    // -----------------------------------------------------------------------
-    // (Section: New Section).(Plugin View) = (Plugin View: Table)
-    //           by (Chao) on (Jun 30, 2005)
-    { "Entry": {
-             "uuid": "99ec1a50-e990-11d9-b90a-e24829d2f59b",
-             "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
-        "attribute": "00040101-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": "99ea6ca0-e990-11d9-b90a-e24829d2f59b",
-            "value": "00040301-ce7f-11d9-8cd5-0011113ae5d6"  }
-    },
-    // -----------------------------------------------------------------------
-    // (Query Spec: New Query)
-    //           by (Chao) on (Jun 30, 2005)
-    { "Item": { "uuid": "99ec6870-e990-11d9-b90a-e24829d2f59b" } },
-    // -----------------------------------------------------------------------
-    // (Query Spec: New Query).(Name) = "New Query"
-    //           by (Chao) on (Jun 30, 2005)
-    { "Entry": {
-             "uuid": "99ecb690-e990-11d9-b90a-e24829d2f59b",
-             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
-        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": "99ec6870-e990-11d9-b90a-e24829d2f59b",
-            "value": "New Query"  }
-    },
-    // -----------------------------------------------------------------------
-    // (Query Spec: New Query).(Category) = (Category: Query Spec)
-    // (Category: Query Spec).(Items in Category) = (Query Spec: New Query)
-    //           by (Chao) on (Jun 30, 2005)
-    { "Entry": {
-             "uuid": "99ed04b0-e990-11d9-b90a-e24829d2f59b",
-             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": ["99ec6870-e990-11d9-b90a-e24829d2f59b", "00001212-ce7f-11d9-8cd5-0011113ae5d6"],
-        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
-    },
-    // -----------------------------------------------------------------------
-    // (Section: New Section).(Query Spec) = (Query Spec: New Query)
-    // (Query Spec: New Query).(Section this query spec belongs to) = (Section: New Section)
-    //           by (Chao) on (Jun 30, 2005)
-    { "Entry": {
-             "uuid": "99ed52d0-e990-11d9-b90a-e24829d2f59b",
-             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": ["99ea6ca0-e990-11d9-b90a-e24829d2f59b", "99ec6870-e990-11d9-b90a-e24829d2f59b"],
-        "attribute": ["00001006-ce7f-11d9-8cd5-0011113ae5d6", "00040105-ce7f-11d9-8cd5-0011113ae5d6"]  }
-    }  ]
-  },
-  // -----------------------------------------------------------------------
-  // (Query Spec: New Query).(Matching Value) = (Category: Category)
-  //           by (Chao) on (Jun 30, 2005)
-  { "Entry": {
-           "uuid": "9dee41a0-e990-11d9-b90a-e24829d2f59b",
-           "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
-      "attribute": "00001007-ce7f-11d9-8cd5-0011113ae5d6",
-           "item": "99ec6870-e990-11d9-b90a-e24829d2f59b",
-          "value": "00001211-ce7f-11d9-8cd5-0011113ae5d6"  }
-  },
-  // -----------------------------------------------------------------------
-  // (Query Spec: New Query).(Matching Value) = (Category: Attribute)
-  //           by (Chao) on (Jun 30, 2005)
-  { "Entry": {
-           "uuid": "cc7a7480-e990-11d9-b90a-e24829d2f59b",
-  "previousEntry": "9dee41a0-e990-11d9-b90a-e24829d2f59b",
-           "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
-      "attribute": "00001007-ce7f-11d9-8cd5-0011113ae5d6",
-           "item": "99ec6870-e990-11d9-b90a-e24829d2f59b",
-          "value": "00001210-ce7f-11d9-8cd5-0011113ae5d6"  }
-  },
-  // =======================================================================
-  { "Transaction": [
-    // -----------------------------------------------------------------------
-    // (Attribute: Task)
-    //           by (Chao) on (Jun 30, 2005)
-    { "Item": { "uuid": "580b3700-e991-11d9-9146-e24829d2f59b" } },
-    // -----------------------------------------------------------------------
-    // (Attribute: Task).(Name) = "Task"
-    //           by (Chao) on (Jun 30, 2005)
-    { "Entry": {
-             "uuid": "86dd9aa0-e991-11d9-9146-e24829d2f59b",
-             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
-        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": "580b3700-e991-11d9-9146-e24829d2f59b",
-            "value": "Task"  }
-    },
-    // -----------------------------------------------------------------------
-    // (Attribute: Task).(Category) = (Category: Attribute)
-    // (Category: Attribute).(Items in Category) = (Attribute: Task)
-    //           by (Chao) on (Jun 30, 2005)
-    { "Entry": {
-             "uuid": "86de0fd0-e991-11d9-9146-e24829d2f59b",
-             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": ["580b3700-e991-11d9-9146-e24829d2f59b", "00001210-ce7f-11d9-8cd5-0011113ae5d6"],
-        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
-    }  ]
-  },
-  // =======================================================================
-  { "Transaction": [
-    // -----------------------------------------------------------------------
-    // (Category: TaskType)
-    //           by (Chao) on (Jun 30, 2005)
-    { "Item": { "uuid": "b50873a0-e991-11d9-9146-e24829d2f59b" } },
-    // -----------------------------------------------------------------------
-    // (Category: TaskType).(Name) = "TaskType"
-    //           by (Chao) on (Jun 30, 2005)
-    { "Entry": {
-             "uuid": "b508e8d0-e991-11d9-9146-e24829d2f59b",
-             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
-        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": "b50873a0-e991-11d9-9146-e24829d2f59b",
-            "value": "TaskType"  }
-    },
-    // -----------------------------------------------------------------------
-    // (Category: TaskType).(Category) = (Category: Category)
-    // (Category: Category).(Items in Category) = (Category: TaskType)
-    //           by (Chao) on (Jun 30, 2005)
-    { "Entry": {
-             "uuid": "b5098510-e991-11d9-9146-e24829d2f59b",
-             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": ["b50873a0-e991-11d9-9146-e24829d2f59b", "00001211-ce7f-11d9-8cd5-0011113ae5d6"],
-        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
-    },
-    // -----------------------------------------------------------------------
-    // (Attribute: Task).(Expected Type) = (Category: TaskType)
-    //           by (Chao) on (Jun 30, 2005)
-    { "Entry": {
-             "uuid": "b50a2150-e991-11d9-9146-e24829d2f59b",
-             "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
-        "attribute": "0000100a-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": "580b3700-e991-11d9-9146-e24829d2f59b",
-            "value": "b50873a0-e991-11d9-9146-e24829d2f59b"  }
-    }  ]
-  },
-  // -----------------------------------------------------------------------
-  // (Attribute: Task).(Inverse Attribute) = (Attribute: Items in Category)
-  // (Attribute: Items in Category).(Inverse Attribute) = (Attribute: Task)
-  //           by (Chao) on (Jun 30, 2005)
-  { "Entry": {
-           "uuid": "beb0ae40-e991-11d9-9146-e24829d2f59b",
-           "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
-           "item": ["580b3700-e991-11d9-9146-e24829d2f59b", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"],
-      "attribute": ["0000100b-ce7f-11d9-8cd5-0011113ae5d6", "0000100b-ce7f-11d9-8cd5-0011113ae5d6"]  }
-  },
-  // =======================================================================
-  { "Transaction": [
-    // -----------------------------------------------------------------------
-    // (Attribute: Mail)
-    //           by (Chao) on (Jun 30, 2005)
-    { "Item": { "uuid": "86e20770-e991-11d9-9146-e24829d2f59b" } },
-    // -----------------------------------------------------------------------
-    // (Attribute: Mail).(Name) = "Mail"
-    //           by (Chao) on (Jun 30, 2005)
-    { "Entry": {
-             "uuid": "41bf66a0-e992-11d9-9146-e24829d2f59b",
-             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
-        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": "86e20770-e991-11d9-9146-e24829d2f59b",
-            "value": "Mail"  }
-    },
-    // -----------------------------------------------------------------------
-    // (Attribute: Mail).(Category) = (Category: Attribute)
-    // (Category: Attribute).(Items in Category) = (Attribute: Mail)
-    //           by (Chao) on (Jun 30, 2005)
-    { "Entry": {
-             "uuid": "41c029f0-e992-11d9-9146-e24829d2f59b",
-             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": ["86e20770-e991-11d9-9146-e24829d2f59b", "00001210-ce7f-11d9-8cd5-0011113ae5d6"],
-        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
-    }  ]
-  },
-  // =======================================================================
-  { "Transaction": [
-    // -----------------------------------------------------------------------
-    // (Category: Mail Status)
-    //           by (Chao) on (Jun 30, 2005)
-    { "Item": { "uuid": "470c5d70-e992-11d9-9146-e24829d2f59b" } },
-    // -----------------------------------------------------------------------
-    // (Category: Mail Status).(Name) = "Mail Status"
-    //           by (Chao) on (Jun 30, 2005)
-    { "Entry": {
-             "uuid": "470cd2a0-e992-11d9-9146-e24829d2f59b",
-             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
-        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": "470c5d70-e992-11d9-9146-e24829d2f59b",
-            "value": "Mail Status"  }
-    },
-    // -----------------------------------------------------------------------
-    // (Category: Mail Status).(Category) = (Category: Category)
-    // (Category: Category).(Items in Category) = (Category: Mail Status)
-    //           by (Chao) on (Jun 30, 2005)
-    { "Entry": {
-             "uuid": "470d6ee0-e992-11d9-9146-e24829d2f59b",
-             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": ["470c5d70-e992-11d9-9146-e24829d2f59b", "00001211-ce7f-11d9-8cd5-0011113ae5d6"],
-        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
-    },
-    // -----------------------------------------------------------------------
-    // (Attribute: Mail).(Expected Type) = (Category: Mail Status)
-    //           by (Chao) on (Jun 30, 2005)
-    { "Entry": {
-             "uuid": "470de410-e992-11d9-9146-e24829d2f59b",
-             "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
-        "attribute": "0000100a-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": "86e20770-e991-11d9-9146-e24829d2f59b",
-            "value": "470c5d70-e992-11d9-9146-e24829d2f59b"  }
-    }  ]
-  },
-  // -----------------------------------------------------------------------
-  // (Attribute: Mail).(Inverse Attribute) = (Attribute: Items in Category)
-  // (Attribute: Items in Category).(Inverse Attribute) = (Attribute: Mail)
-  //           by (Chao) on (Jun 30, 2005)
-  { "Entry": {
-           "uuid": "49732440-e992-11d9-9146-e24829d2f59b",
-           "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
-           "item": ["86e20770-e991-11d9-9146-e24829d2f59b", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"],
-      "attribute": ["0000100b-ce7f-11d9-8cd5-0011113ae5d6", "0000100b-ce7f-11d9-8cd5-0011113ae5d6"]  }
-  },
-  // =======================================================================
-  { "Transaction": [
-    // -----------------------------------------------------------------------
-    // (Attribute: Who)
-    //           by (Chao) on (Jun 30, 2005)
-    { "Item": { "uuid": "41c86750-e992-11d9-9146-e24829d2f59b" } },
-    // -----------------------------------------------------------------------
-    // (Attribute: Who).(Name) = "Who"
-    //           by (Chao) on (Jun 30, 2005)
-    { "Entry": {
-             "uuid": "81aa29d0-e992-11d9-9146-e24829d2f59b",
-             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
-        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": "41c86750-e992-11d9-9146-e24829d2f59b",
-            "value": "Who"  }
-    },
-    // -----------------------------------------------------------------------
-    // (Attribute: Who).(Category) = (Category: Attribute)
-    // (Category: Attribute).(Items in Category) = (Attribute: Who)
-    //           by (Chao) on (Jun 30, 2005)
-    { "Entry": {
-             "uuid": "81aaed20-e992-11d9-9146-e24829d2f59b",
-             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": ["41c86750-e992-11d9-9146-e24829d2f59b", "00001210-ce7f-11d9-8cd5-0011113ae5d6"],
-        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
-    }  ]
-  },
-  // -----------------------------------------------------------------------
-  // (Attribute: Who).(Expected Type) = (Category: Person)
-  //           by (Chao) on (Jun 30, 2005)
-  { "Entry": {
-           "uuid": "86cb2ea0-e992-11d9-9146-e24829d2f59b",
-           "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
-      "attribute": "0000100a-ce7f-11d9-8cd5-0011113ae5d6",
-           "item": "41c86750-e992-11d9-9146-e24829d2f59b",
-          "value": "00001201-ce7f-11d9-8cd5-0011113ae5d6"  }
-  },
-  // -----------------------------------------------------------------------
-  // (Attribute: Who).(Inverse Attribute) = (Attribute: Items in Category)
-  // (Attribute: Items in Category).(Inverse Attribute) = (Attribute: Who)
-  //           by (Chao) on (Jun 30, 2005)
-  { "Entry": {
-           "uuid": "8f1f9910-e992-11d9-9146-e24829d2f59b",
-           "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
-           "item": ["41c86750-e992-11d9-9146-e24829d2f59b", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"],
-      "attribute": ["0000100b-ce7f-11d9-8cd5-0011113ae5d6", "0000100b-ce7f-11d9-8cd5-0011113ae5d6"]  }
-  },
-  // =======================================================================
-  { "Transaction": [
-    // -----------------------------------------------------------------------
-    // (Attribute: About)
-    //           by (Chao) on (Jun 30, 2005)
-    { "Item": { "uuid": "81b155c0-e992-11d9-9146-e24829d2f59b" } },
-    // -----------------------------------------------------------------------
-    // (Attribute: About).(Name) = "About"
-    //           by (Chao) on (Jun 30, 2005)
-    { "Entry": {
-             "uuid": "94784fb0-e992-11d9-9146-e24829d2f59b",
-             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
-        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": "81b155c0-e992-11d9-9146-e24829d2f59b",
-            "value": "About"  }
-    },
-    // -----------------------------------------------------------------------
-    // (Attribute: About).(Category) = (Category: Attribute)
-    // (Category: Attribute).(Items in Category) = (Attribute: About)
-    //           by (Chao) on (Jun 30, 2005)
-    { "Entry": {
-             "uuid": "94791300-e992-11d9-9146-e24829d2f59b",
-             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": ["81b155c0-e992-11d9-9146-e24829d2f59b", "00001210-ce7f-11d9-8cd5-0011113ae5d6"],
-        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
-    }  ]
-  },
-  // -----------------------------------------------------------------------
-  // (Attribute: About).(Expected Type) = (Type: Text)
-  //           by (Chao) on (Jun 30, 2005)
-  { "Entry": {
-           "uuid": "95aa18f0-e992-11d9-9146-e24829d2f59b",
-           "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
-      "attribute": "0000100a-ce7f-11d9-8cd5-0011113ae5d6",
-           "item": "81b155c0-e992-11d9-9146-e24829d2f59b",
-          "value": "00001020-ce7f-11d9-8cd5-0011113ae5d6"  }
-  },
-  // =======================================================================
-  { "Transaction": [
-    // -----------------------------------------------------------------------
-    // (Attribute: Calendar)
-    //           by (Chao) on (Jun 30, 2005)
-    { "Item": { "uuid": "94845da0-e992-11d9-9146-e24829d2f59b" } },
-    // -----------------------------------------------------------------------
-    // (Attribute: Calendar).(Name) = "Calendar"
-    //           by (Chao) on (Jun 30, 2005)
-    { "Entry": {
-             "uuid": "9e873b60-e992-11d9-9146-e24829d2f59b",
-             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
-        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": "94845da0-e992-11d9-9146-e24829d2f59b",
-            "value": "Calendar"  }
-    },
-    // -----------------------------------------------------------------------
-    // (Attribute: Calendar).(Category) = (Category: Attribute)
-    // (Category: Attribute).(Items in Category) = (Attribute: Calendar)
-    //           by (Chao) on (Jun 30, 2005)
-    { "Entry": {
-             "uuid": "9e8825c0-e992-11d9-9146-e24829d2f59b",
-             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": ["94845da0-e992-11d9-9146-e24829d2f59b", "00001210-ce7f-11d9-8cd5-0011113ae5d6"],
-        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
-    }  ]
-  },
-  // =======================================================================
-  { "Transaction": [
-    // -----------------------------------------------------------------------
-    // (Category: Calendar Status)
-    //           by (Chao) on (Jun 30, 2005)
-    { "Item": { "uuid": "a1a12590-e992-11d9-9146-e24829d2f59b" } },
-    // -----------------------------------------------------------------------
-    // (Category: Calendar Status).(Name) = "Calendar Status"
-    //           by (Chao) on (Jun 30, 2005)
-    { "Entry": {
-             "uuid": "a1a19ac0-e992-11d9-9146-e24829d2f59b",
-             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
-        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": "a1a12590-e992-11d9-9146-e24829d2f59b",
-            "value": "Calendar Status"  }
-    },
-    // -----------------------------------------------------------------------
-    // (Category: Calendar Status).(Category) = (Category: Category)
-    // (Category: Category).(Items in Category) = (Category: Calendar Status)
-    //           by (Chao) on (Jun 30, 2005)
-    { "Entry": {
-             "uuid": "a1a28520-e992-11d9-9146-e24829d2f59b",
-             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": ["a1a12590-e992-11d9-9146-e24829d2f59b", "00001211-ce7f-11d9-8cd5-0011113ae5d6"],
-        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
-    },
-    // -----------------------------------------------------------------------
-    // (Attribute: Calendar).(Expected Type) = (Category: Calendar Status)
-    //           by (Chao) on (Jun 30, 2005)
-    { "Entry": {
-             "uuid": "a1a39690-e992-11d9-9146-e24829d2f59b",
-             "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
-        "attribute": "0000100a-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": "94845da0-e992-11d9-9146-e24829d2f59b",
-            "value": "a1a12590-e992-11d9-9146-e24829d2f59b"  }
-    }  ]
-  },
-  // -----------------------------------------------------------------------
-  // (Attribute: Calendar).(Inverse Attribute) = (Attribute: Items in Category)
-  // (Attribute: Items in Category).(Inverse Attribute) = (Attribute: Calendar)
-  //           by (Chao) on (Jun 30, 2005)
-  { "Entry": {
-           "uuid": "a6413a90-e992-11d9-9146-e24829d2f59b",
-           "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
-           "item": ["94845da0-e992-11d9-9146-e24829d2f59b", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"],
-      "attribute": ["0000100b-ce7f-11d9-8cd5-0011113ae5d6", "0000100b-ce7f-11d9-8cd5-0011113ae5d6"]  }
-  },
-  // =======================================================================
-  { "Transaction": [
-    // -----------------------------------------------------------------------
-    // (Attribute: When)
-    //           by (Chao) on (Jun 30, 2005)
-    { "Item": { "uuid": "9e90ff60-e992-11d9-9146-e24829d2f59b" } },
-    // -----------------------------------------------------------------------
-    // (Attribute: When).(Name) = "When"
-    //           by (Chao) on (Jun 30, 2005)
-    { "Entry": {
-             "uuid": "ba51cb80-e992-11d9-9146-e24829d2f59b",
-             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
-        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": "9e90ff60-e992-11d9-9146-e24829d2f59b",
-            "value": "When"  }
-    },
-    // -----------------------------------------------------------------------
-    // (Attribute: When).(Category) = (Category: Attribute)
-    // (Category: Attribute).(Items in Category) = (Attribute: When)
-    //           by (Chao) on (Jun 30, 2005)
-    { "Entry": {
-             "uuid": "ba528ed0-e992-11d9-9146-e24829d2f59b",
-             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": ["9e90ff60-e992-11d9-9146-e24829d2f59b", "00001210-ce7f-11d9-8cd5-0011113ae5d6"],
-        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
-    }  ]
-  },
-  // -----------------------------------------------------------------------
-  // (Attribute: When).(Expected Type) = (Type: Date)
-  //           by (Chao) on (Jun 30, 2005)
-  { "Entry": {
-           "uuid": "bc542b30-e992-11d9-9146-e24829d2f59b",
-           "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
-      "attribute": "0000100a-ce7f-11d9-8cd5-0011113ae5d6",
-           "item": "9e90ff60-e992-11d9-9146-e24829d2f59b",
-          "value": "00001022-ce7f-11d9-8cd5-0011113ae5d6"  }
-  },
-  // =======================================================================
-  { "Transaction": [
-    // -----------------------------------------------------------------------
-    // (Attribute: Project)
-    //           by (Chao) on (Jun 30, 2005)
-    { "Item": { "uuid": "ba630990-e992-11d9-9146-e24829d2f59b" } },
-    // -----------------------------------------------------------------------
-    // (Attribute: Project).(Name) = "Project"
-    //           by (Chao) on (Jun 30, 2005)
-    { "Entry": {
-             "uuid": "c13b8260-e992-11d9-9146-e24829d2f59b",
-             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
-        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": "ba630990-e992-11d9-9146-e24829d2f59b",
-            "value": "Project"  }
-    },
-    // -----------------------------------------------------------------------
-    // (Attribute: Project).(Category) = (Category: Attribute)
-    // (Category: Attribute).(Items in Category) = (Attribute: Project)
-    //           by (Chao) on (Jun 30, 2005)
-    { "Entry": {
-             "uuid": "c13c45b0-e992-11d9-9146-e24829d2f59b",
-             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": ["ba630990-e992-11d9-9146-e24829d2f59b", "00001210-ce7f-11d9-8cd5-0011113ae5d6"],
-        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
-    }  ]
-  },
-  // =======================================================================
-  { "Transaction": [
-    // -----------------------------------------------------------------------
-    // (Category: Project)
-    //           by (Chao) on (Jun 30, 2005)
-    { "Item": { "uuid": "c299b2d0-e992-11d9-9146-e24829d2f59b" } },
-    // -----------------------------------------------------------------------
-    // (Category: Project).(Name) = "Project"
-    //           by (Chao) on (Jun 30, 2005)
-    { "Entry": {
-             "uuid": "c29a2800-e992-11d9-9146-e24829d2f59b",
-             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
-        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": "c299b2d0-e992-11d9-9146-e24829d2f59b",
-            "value": "Project"  }
-    },
-    // -----------------------------------------------------------------------
-    // (Category: Project).(Category) = (Category: Category)
-    // (Category: Category).(Items in Category) = (Category: Project)
-    //           by (Chao) on (Jun 30, 2005)
-    { "Entry": {
-             "uuid": "c29bd5b0-e992-11d9-9146-e24829d2f59b",
-             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": ["c299b2d0-e992-11d9-9146-e24829d2f59b", "00001211-ce7f-11d9-8cd5-0011113ae5d6"],
-        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
-    },
-    // -----------------------------------------------------------------------
-    // (Attribute: Project).(Expected Type) = (Category: Project)
-    //           by (Chao) on (Jun 30, 2005)
-    { "Entry": {
-             "uuid": "c29c71f0-e992-11d9-9146-e24829d2f59b",
-             "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
-        "attribute": "0000100a-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": "ba630990-e992-11d9-9146-e24829d2f59b",
-            "value": "c299b2d0-e992-11d9-9146-e24829d2f59b"  }
-    }  ]
-  },
-  // -----------------------------------------------------------------------
-  // (Attribute: Project).(Inverse Attribute) = (Attribute: Items in Category)
-  // (Attribute: Items in Category).(Inverse Attribute) = (Attribute: Project)
-  //           by (Chao) on (Jun 30, 2005)
-  { "Entry": {
-           "uuid": "c4a00a20-e992-11d9-9146-e24829d2f59b",
-           "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
-           "item": ["ba630990-e992-11d9-9146-e24829d2f59b", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"],
-      "attribute": ["0000100b-ce7f-11d9-8cd5-0011113ae5d6", "0000100b-ce7f-11d9-8cd5-0011113ae5d6"]  }
-  },
-  // =======================================================================
-  { "Transaction": [
-    // -----------------------------------------------------------------------
-    // (Attribute: Status)
-    //           by (Chao) on (Jun 30, 2005)
-    { "Item": { "uuid": "c1428740-e992-11d9-9146-e24829d2f59b" } },
-    // -----------------------------------------------------------------------
-    // (Attribute: Status).(Name) = "Status"
-    //           by (Chao) on (Jun 30, 2005)
-    { "Entry": {
-             "uuid": "c72ccf80-e992-11d9-9146-e24829d2f59b",
-             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
-        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": "c1428740-e992-11d9-9146-e24829d2f59b",
-            "value": "Status"  }
-    },
-    // -----------------------------------------------------------------------
-    // (Attribute: Status).(Category) = (Category: Attribute)
-    // (Category: Attribute).(Items in Category) = (Attribute: Status)
-    //           by (Chao) on (Jun 30, 2005)
-    { "Entry": {
-             "uuid": "c72d44b0-e992-11d9-9146-e24829d2f59b",
-             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": ["c1428740-e992-11d9-9146-e24829d2f59b", "00001210-ce7f-11d9-8cd5-0011113ae5d6"],
-        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
-    }  ]
-  },
-  // =======================================================================
-  { "Transaction": [
-    // -----------------------------------------------------------------------
-    // (Category: Status)
-    //           by (Chao) on (Jun 30, 2005)
-    { "Item": { "uuid": "cae36ee0-e992-11d9-9146-e24829d2f59b" } },
-    // -----------------------------------------------------------------------
-    // (Category: Status).(Name) = "Status"
-    //           by (Chao) on (Jun 30, 2005)
-    { "Entry": {
-             "uuid": "cae3e410-e992-11d9-9146-e24829d2f59b",
-             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
-        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": "cae36ee0-e992-11d9-9146-e24829d2f59b",
-            "value": "Status"  }
-    },
-    // -----------------------------------------------------------------------
-    // (Category: Status).(Category) = (Category: Category)
-    // (Category: Category).(Items in Category) = (Category: Status)
-    //           by (Chao) on (Jun 30, 2005)
-    { "Entry": {
-             "uuid": "cae48050-e992-11d9-9146-e24829d2f59b",
-             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": ["cae36ee0-e992-11d9-9146-e24829d2f59b", "00001211-ce7f-11d9-8cd5-0011113ae5d6"],
-        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
-    },
-    // -----------------------------------------------------------------------
-    // (Attribute: Status).(Expected Type) = (Category: Status)
-    //           by (Chao) on (Jun 30, 2005)
-    { "Entry": {
-             "uuid": "cae4f580-e992-11d9-9146-e24829d2f59b",
-             "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
-        "attribute": "0000100a-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": "c1428740-e992-11d9-9146-e24829d2f59b",
-            "value": "cae36ee0-e992-11d9-9146-e24829d2f59b"  }
-    }  ]
-  },
-  // -----------------------------------------------------------------------
-  // (Attribute: Status).(Inverse Attribute) = (Attribute: Items in Category)
-  // (Attribute: Items in Category).(Inverse Attribute) = (Attribute: Status)
-  //           by (Chao) on (Jun 30, 2005)
-  { "Entry": {
-           "uuid": "ccd46970-e992-11d9-9146-e24829d2f59b",
-           "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
-           "item": ["c1428740-e992-11d9-9146-e24829d2f59b", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"],
-      "attribute": ["0000100b-ce7f-11d9-8cd5-0011113ae5d6", "0000100b-ce7f-11d9-8cd5-0011113ae5d6"]  }
-  },
-  // -----------------------------------------------------------------------
-  // (Query Spec: New Query).(Matching Value) = (Category: Status)
-  //           by (Chao) on (Jun 30, 2005)
-  { "Entry": {
-           "uuid": "e151ed00-e992-11d9-b345-e24829d2f59b",
-  "previousEntry": "cc7a7480-e990-11d9-b90a-e24829d2f59b",
-           "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
-      "attribute": "00001007-ce7f-11d9-8cd5-0011113ae5d6",
-           "item": "99ec6870-e990-11d9-b90a-e24829d2f59b",
-          "value": "cae36ee0-e992-11d9-9146-e24829d2f59b"  }
-  },
-  // =======================================================================
-  { "Transaction": [
-    // -----------------------------------------------------------------------
-    // (Status: Now)
-    //           by (Chao) on (Jun 30, 2005)
-    { "Item": { "uuid": "e1813a60-e992-11d9-b345-e24829d2f59b" } },
-    // -----------------------------------------------------------------------
-    // (Status: Now).(Name) = "Now"
-    //           by (Chao) on (Jun 30, 2005)
-    { "Entry": {
-             "uuid": "e3991de0-e992-11d9-b345-e24829d2f59b",
-             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
-        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": "e1813a60-e992-11d9-b345-e24829d2f59b",
-            "value": "Now"  }
-    },
-    // -----------------------------------------------------------------------
-    // (Status: Now).(Category) = (Category: Status)
-    // (Category: Status).(Items in Category) = (Status: Now)
-    //           by (Chao) on (Jun 30, 2005)
-    { "Entry": {
-             "uuid": "e399e130-e992-11d9-b345-e24829d2f59b",
-             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": ["e1813a60-e992-11d9-b345-e24829d2f59b", "cae36ee0-e992-11d9-9146-e24829d2f59b"],
-        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
-    }  ]
-  },
-  // =======================================================================
-  { "Transaction": [
-    // -----------------------------------------------------------------------
-    // (Status: Later)
-    //           by (Chao) on (Jun 30, 2005)
-    { "Item": { "uuid": "e3a10d20-e992-11d9-b345-e24829d2f59b" } },
-    // -----------------------------------------------------------------------
-    // (Status: Later).(Name) = "Later"
-    //           by (Chao) on (Jun 30, 2005)
-    { "Entry": {
-             "uuid": "e46101c0-e992-11d9-b345-e24829d2f59b",
-             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
-        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": "e3a10d20-e992-11d9-b345-e24829d2f59b",
-            "value": "Later"  }
-    },
-    // -----------------------------------------------------------------------
-    // (Status: Later).(Category) = (Category: Status)
-    // (Category: Status).(Items in Category) = (Status: Later)
-    //           by (Chao) on (Jun 30, 2005)
-    { "Entry": {
-             "uuid": "e461c510-e992-11d9-b345-e24829d2f59b",
-             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": ["e3a10d20-e992-11d9-b345-e24829d2f59b", "cae36ee0-e992-11d9-9146-e24829d2f59b"],
-        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
-    }  ]
-  },
-  // =======================================================================
-  { "Transaction": [
-    // -----------------------------------------------------------------------
-    // (Status: Done)
-    //           by (Chao) on (Jun 30, 2005)
-    { "Item": { "uuid": "e467df90-e992-11d9-b345-e24829d2f59b" } },
-    // -----------------------------------------------------------------------
-    // (Status: Done).(Name) = "Done"
-    //           by (Chao) on (Jun 30, 2005)
-    { "Entry": {
-             "uuid": "e5a0fbd0-e992-11d9-b345-e24829d2f59b",
-             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
-        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": "e467df90-e992-11d9-b345-e24829d2f59b",
-            "value": "Done"  }
-    },
-    // -----------------------------------------------------------------------
-    // (Status: Done).(Category) = (Category: Status)
-    // (Category: Status).(Items in Category) = (Status: Done)
-    //           by (Chao) on (Jun 30, 2005)
-    { "Entry": {
-             "uuid": "e5a19810-e992-11d9-b345-e24829d2f59b",
-             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": ["e467df90-e992-11d9-b345-e24829d2f59b", "cae36ee0-e992-11d9-9146-e24829d2f59b"],
-        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
-    }  ]
-  },
-  // -----------------------------------------------------------------------
-  // (Query Spec: New Query).(Matching Attribute) = (Attribute: Status)
-  //           by (Chao) on (Jun 30, 2005)
-  { "Entry": {
-           "uuid": "ef2d9820-e992-11d9-b345-e24829d2f59b",
-           "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
-      "attribute": "00001008-ce7f-11d9-8cd5-0011113ae5d6",
-           "item": "99ec6870-e990-11d9-b90a-e24829d2f59b",
-          "value": "c1428740-e992-11d9-9146-e24829d2f59b"  }
-  },
-  // -----------------------------------------------------------------------
-  { "Vote": {                                              // vote to DELETE Status
-           "uuid": "ef639c40-e992-11d9-b345-e24829d2f59b",
-         "record": "e151ed00-e992-11d9-b345-e24829d2f59b",
-     "retainFlag": "false"  }
-  },
-  // -----------------------------------------------------------------------
-  // (Query Spec: New Query).(Matching Value) = (Status: Now)
-  //           by (Chao) on (Jun 30, 2005)
-  { "Entry": {
-           "uuid": "f2481e90-e992-11d9-b345-e24829d2f59b",
-           "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
-      "attribute": "00001007-ce7f-11d9-8cd5-0011113ae5d6",
-           "item": "99ec6870-e990-11d9-b90a-e24829d2f59b",
-          "value": "e1813a60-e992-11d9-b345-e24829d2f59b"  }
-  },
-  // -----------------------------------------------------------------------
-  // (Layout Data: Layout data for Table of New Section).(Table Columns) = (Attribute: Task)
-  //           by (Chao) on (Jun 30, 2005)
-  { "Entry": {
-           "uuid": "f896cdf0-e992-11d9-b345-e24829d2f59b",
-           "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
-      "attribute": "0004010a-ce7f-11d9-8cd5-0011113ae5d6",
-           "item": "9a071c60-e990-11d9-b90a-e24829d2f59b",
-          "value": "580b3700-e991-11d9-9146-e24829d2f59b"  }
-  },
-  // -----------------------------------------------------------------------
-  // (Layout Data: Layout data for Table of New Section).(Table Columns) = (Attribute: Mail)
-  //           by (Chao) on (Jun 30, 2005)
-  { "Entry": {
-           "uuid": "fc2090f0-e992-11d9-b345-e24829d2f59b",
-           "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
-      "attribute": "0004010a-ce7f-11d9-8cd5-0011113ae5d6",
-           "item": "9a071c60-e990-11d9-b90a-e24829d2f59b",
-          "value": "86e20770-e991-11d9-9146-e24829d2f59b"  }
-  },
-  // -----------------------------------------------------------------------
-  // (Layout Data: Layout data for Table of New Section).(Table Columns) = (Attribute: Who)
-  //           by (Chao) on (Jun 30, 2005)
-  { "Entry": {
-           "uuid": "fff2cea0-e992-11d9-b345-e24829d2f59b",
-           "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
-      "attribute": "0004010a-ce7f-11d9-8cd5-0011113ae5d6",
-           "item": "9a071c60-e990-11d9-b90a-e24829d2f59b",
-          "value": "41c86750-e992-11d9-9146-e24829d2f59b"  }
-  },
-  // -----------------------------------------------------------------------
-  // (Layout Data: Layout data for Table of New Section).(Table Columns) = (Attribute: About)
-  //           by (Chao) on (Jun 30, 2005)
-  { "Entry": {
-           "uuid": "033b9100-e993-11d9-b345-e24829d2f59b",
-           "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
-      "attribute": "0004010a-ce7f-11d9-8cd5-0011113ae5d6",
-           "item": "9a071c60-e990-11d9-b90a-e24829d2f59b",
-          "value": "81b155c0-e992-11d9-9146-e24829d2f59b"  }
-  },
-  // -----------------------------------------------------------------------
-  // (Layout Data: Layout data for Table of New Section).(Table Columns) = (Attribute: Calendar)
-  //           by (Chao) on (Jun 30, 2005)
-  { "Entry": {
-           "uuid": "06998910-e993-11d9-b345-e24829d2f59b",
-           "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
-      "attribute": "0004010a-ce7f-11d9-8cd5-0011113ae5d6",
-           "item": "9a071c60-e990-11d9-b90a-e24829d2f59b",
-          "value": "94845da0-e992-11d9-9146-e24829d2f59b"  }
-  },
-  // -----------------------------------------------------------------------
-  // (Layout Data: Layout data for Table of New Section).(Table Columns) = (Attribute: When)
-  //           by (Chao) on (Jun 30, 2005)
-  { "Entry": {
-           "uuid": "0965c870-e993-11d9-b345-e24829d2f59b",
-           "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
-      "attribute": "0004010a-ce7f-11d9-8cd5-0011113ae5d6",
-           "item": "9a071c60-e990-11d9-b90a-e24829d2f59b",
-          "value": "9e90ff60-e992-11d9-9146-e24829d2f59b"  }
-  },
-  // -----------------------------------------------------------------------
-  // (Layout Data: Layout data for Table of New Section).(Table Columns) = (Attribute: Project)
-  //           by (Chao) on (Jun 30, 2005)
-  { "Entry": {
-           "uuid": "0bd89d30-e993-11d9-b345-e24829d2f59b",
-           "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
-      "attribute": "0004010a-ce7f-11d9-8cd5-0011113ae5d6",
-           "item": "9a071c60-e990-11d9-b90a-e24829d2f59b",
-          "value": "ba630990-e992-11d9-9146-e24829d2f59b"  }
-  },
-  // -----------------------------------------------------------------------
-  // (Layout Data: Layout data for Table of New Section).(Table Columns) = (Attribute: Status)
-  //           by (Chao) on (Jun 30, 2005)
-  { "Entry": {
-           "uuid": "0e985970-e993-11d9-b345-e24829d2f59b",
-           "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
-      "attribute": "0004010a-ce7f-11d9-8cd5-0011113ae5d6",
-           "item": "9a071c60-e990-11d9-b90a-e24829d2f59b",
-          "value": "c1428740-e992-11d9-9146-e24829d2f59b"  }
-  },
-  // =======================================================================
-  { "Transaction": [
-    // -----------------------------------------------------------------------
-    // (TaskType: Research)
-    //           by (Chao) on (Jun 30, 2005)
-    { "Item": { "uuid": "12a703e0-e993-11d9-b345-e24829d2f59b" } },
-    // -----------------------------------------------------------------------
-    // (TaskType: Research).(Name) = "Research"
-    //           by (Chao) on (Jun 30, 2005)
-    { "Entry": {
-             "uuid": "12a77910-e993-11d9-b345-e24829d2f59b",
-             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
-        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": "12a703e0-e993-11d9-b345-e24829d2f59b",
-            "value": "Research"  }
-    },
-    // -----------------------------------------------------------------------
-    // (TaskType: Research).(Category) = (Category: TaskType)
-    // (Category: TaskType).(Items in Category) = (TaskType: Research)
-    //           by (Chao) on (Jun 30, 2005)
-    { "Entry": {
-             "uuid": "12a7c730-e993-11d9-b345-e24829d2f59b",
-             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": ["12a703e0-e993-11d9-b345-e24829d2f59b", "b50873a0-e991-11d9-9146-e24829d2f59b"],
-        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
-    },
-    // -----------------------------------------------------------------------
-    // (???)
-    //           by (Chao) on (Jun 30, 2005)
-    { "Item": { "uuid": "0ea096d0-e993-11d9-b345-e24829d2f59b" } },
-    // -----------------------------------------------------------------------
-    // (???).(Task) = (TaskType: Research)
-    // (TaskType: Research).(Items in Category) = (???)
-    //           by (Chao) on (Jun 30, 2005)
-    { "Entry": {
-             "uuid": "12a81550-e993-11d9-b345-e24829d2f59b",
-             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": ["0ea096d0-e993-11d9-b345-e24829d2f59b", "12a703e0-e993-11d9-b345-e24829d2f59b"],
-        "attribute": ["580b3700-e991-11d9-9146-e24829d2f59b", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
-    },
-    // -----------------------------------------------------------------------
-    // (???).(Status) = (Status: Now)
-    //           by (Chao) on (Jun 30, 2005)
-    { "Entry": {
-             "uuid": "12a88a80-e993-11d9-b345-e24829d2f59b",
-             "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
-        "attribute": "c1428740-e992-11d9-9146-e24829d2f59b",
-             "item": "0ea096d0-e993-11d9-b345-e24829d2f59b",
-            "value": "e1813a60-e992-11d9-b345-e24829d2f59b"  }
-    }  ]
-  },
-  // =======================================================================
-  { "Transaction": [
-    // -----------------------------------------------------------------------
-    // (Person: Heikki)
-    //           by (Chao) on (Jun 30, 2005)
-    { "Item": { "uuid": "1613a1f0-e993-11d9-b345-e24829d2f59b" } },
-    // -----------------------------------------------------------------------
-    // (Person: Heikki).(Name) = "Heikki"
-    //           by (Chao) on (Jun 30, 2005)
-    { "Entry": {
-             "uuid": "16168820-e993-11d9-b345-e24829d2f59b",
-             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
-        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": "1613a1f0-e993-11d9-b345-e24829d2f59b",
-            "value": "Heikki"  }
-    },
-    // -----------------------------------------------------------------------
-    // (Person: Heikki).(Category) = (Category: Person)
-    // (Category: Person).(Items in Category) = (Person: Heikki)
-    //           by (Chao) on (Jun 30, 2005)
-    { "Entry": {
-             "uuid": "16172460-e993-11d9-b345-e24829d2f59b",
-             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": ["1613a1f0-e993-11d9-b345-e24829d2f59b", "00001201-ce7f-11d9-8cd5-0011113ae5d6"],
-        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
-    },
-    // -----------------------------------------------------------------------
-    // (???).(Who) = (Person: Heikki)
-    // (Person: Heikki).(Items in Category) = (???)
-    //           by (Chao) on (Jun 30, 2005)
-    { "Entry": {
-             "uuid": "1617c0a0-e993-11d9-b345-e24829d2f59b",
-             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": ["0ea096d0-e993-11d9-b345-e24829d2f59b", "1613a1f0-e993-11d9-b345-e24829d2f59b"],
-        "attribute": ["41c86750-e992-11d9-9146-e24829d2f59b", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
-    }  ]
-  },
-  // -----------------------------------------------------------------------
-  // (???).(About) = "re: Accessibility"
-  //           by (Chao) on (Jun 30, 2005)
-  { "Entry": {
-           "uuid": "198744e0-e993-11d9-b345-e24829d2f59b",
-           "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
-      "attribute": "81b155c0-e992-11d9-9146-e24829d2f59b",
-           "item": "0ea096d0-e993-11d9-b345-e24829d2f59b",
-          "value": "re: Accessibility"  }
-  },
-  // =======================================================================
-  { "Transaction": [
-    // -----------------------------------------------------------------------
-    // (Calendar Status: Confirmed)
-    //           by (Chao) on (Jun 30, 2005)
-    { "Item": { "uuid": "1c3d6430-e993-11d9-b345-e24829d2f59b" } },
-    // -----------------------------------------------------------------------
-    // (Calendar Status: Confirmed).(Name) = "Confirmed"
-    //           by (Chao) on (Jun 30, 2005)
-    { "Entry": {
-             "uuid": "1c3db250-e993-11d9-b345-e24829d2f59b",
-             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
-        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": "1c3d6430-e993-11d9-b345-e24829d2f59b",
-            "value": "Confirmed"  }
-    },
-    // -----------------------------------------------------------------------
-    // (Calendar Status: Confirmed).(Category) = (Category: Calendar Status)
-    // (Category: Calendar Status).(Items in Category) = (Calendar Status: Confirmed)
-    //           by (Chao) on (Jun 30, 2005)
-    { "Entry": {
-             "uuid": "1c3e0070-e993-11d9-b345-e24829d2f59b",
-             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": ["1c3d6430-e993-11d9-b345-e24829d2f59b", "a1a12590-e992-11d9-9146-e24829d2f59b"],
-        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
-    },
-    // -----------------------------------------------------------------------
-    // (???).(Calendar) = (Calendar Status: Confirmed)
-    // (Calendar Status: Confirmed).(Items in Category) = (???)
-    //           by (Chao) on (Jun 30, 2005)
-    { "Entry": {
-             "uuid": "1c3e4e90-e993-11d9-b345-e24829d2f59b",
-             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": ["0ea096d0-e993-11d9-b345-e24829d2f59b", "1c3d6430-e993-11d9-b345-e24829d2f59b"],
-        "attribute": ["94845da0-e992-11d9-9146-e24829d2f59b", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
-    }  ]
-  },
-  // -----------------------------------------------------------------------
-  // (???).(When) = "TBD"
-  //           by (Chao) on (Jun 30, 2005)
-  { "Entry": {
-           "uuid": "1d324b80-e993-11d9-b345-e24829d2f59b",
-           "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
-      "attribute": "9e90ff60-e992-11d9-9146-e24829d2f59b",
-           "item": "0ea096d0-e993-11d9-b345-e24829d2f59b",
-          "value": "TBD"  }
-  },
-  // =======================================================================
-  { "Transaction": [
-    // -----------------------------------------------------------------------
-    // (Project: Accessibility)
-    //           by (Chao) on (Jun 30, 2005)
-    { "Item": { "uuid": "2120ead0-e993-11d9-b345-e24829d2f59b" } },
-    // -----------------------------------------------------------------------
-    // (Project: Accessibility).(Name) = "Accessibility"
-    //           by (Chao) on (Jun 30, 2005)
-    { "Entry": {
-             "uuid": "21216000-e993-11d9-b345-e24829d2f59b",
-             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
-        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": "2120ead0-e993-11d9-b345-e24829d2f59b",
-            "value": "Accessibility"  }
-    },
-    // -----------------------------------------------------------------------
-    // (Project: Accessibility).(Category) = (Category: Project)
-    // (Category: Project).(Items in Category) = (Project: Accessibility)
-    //           by (Chao) on (Jun 30, 2005)
-    { "Entry": {
-             "uuid": "2121fc40-e993-11d9-b345-e24829d2f59b",
-             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": ["2120ead0-e993-11d9-b345-e24829d2f59b", "c299b2d0-e992-11d9-9146-e24829d2f59b"],
-        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
-    },
-    // -----------------------------------------------------------------------
-    // (???).(Project) = (Project: Accessibility)
-    // (Project: Accessibility).(Items in Category) = (???)
-    //           by (Chao) on (Jun 30, 2005)
-    { "Entry": {
-             "uuid": "21229880-e993-11d9-b345-e24829d2f59b",
-             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": ["0ea096d0-e993-11d9-b345-e24829d2f59b", "2120ead0-e993-11d9-b345-e24829d2f59b"],
-        "attribute": ["ba630990-e992-11d9-9146-e24829d2f59b", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
-    }  ]
-  },
-  // =======================================================================
-  { "Transaction": [
-    // -----------------------------------------------------------------------
-    // (Project: 0.6 planning)
-    //           by (Chao) on (Jun 30, 2005)
-    { "Item": { "uuid": "25b7b100-e993-11d9-b345-e24829d2f59b" } },
-    // -----------------------------------------------------------------------
-    // (Project: 0.6 planning).(Name) = "0.6 planning"
-    //           by (Chao) on (Jun 30, 2005)
-    { "Entry": {
-             "uuid": "25b82630-e993-11d9-b345-e24829d2f59b",
-             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
-        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": "25b7b100-e993-11d9-b345-e24829d2f59b",
-            "value": "0.6 planning"  }
-    },
-    // -----------------------------------------------------------------------
-    // (Project: 0.6 planning).(Category) = (Category: Project)
-    // (Category: Project).(Items in Category) = (Project: 0.6 planning)
-    //           by (Chao) on (Jun 30, 2005)
-    { "Entry": {
-             "uuid": "25b8c270-e993-11d9-b345-e24829d2f59b",
-             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": ["25b7b100-e993-11d9-b345-e24829d2f59b", "c299b2d0-e992-11d9-9146-e24829d2f59b"],
-        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
-    },
-    // -----------------------------------------------------------------------
-    // (???).(Project) = (Project: 0.6 planning)
-    // (Project: 0.6 planning).(Items in Category) = (???)
-    //           by (Chao) on (Jun 30, 2005)
-    { "Entry": {
-             "uuid": "25b937a0-e993-11d9-b345-e24829d2f59b",
-             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": ["0ea096d0-e993-11d9-b345-e24829d2f59b", "25b7b100-e993-11d9-b345-e24829d2f59b"],
-        "attribute": ["ba630990-e992-11d9-9146-e24829d2f59b", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
-    }  ]
-  },
-  // =======================================================================
-  { "Transaction": [
-    // -----------------------------------------------------------------------
-    // (Person: Ted)
-    //           by (Chao) on (Jun 30, 2005)
-    { "Item": { "uuid": "2d26c480-e993-11d9-b345-e24829d2f59b" } },
-    // -----------------------------------------------------------------------
-    // (Person: Ted).(Name) = "Ted"
-    //           by (Chao) on (Jun 30, 2005)
-    { "Entry": {
-             "uuid": "2d2712a0-e993-11d9-b345-e24829d2f59b",
-             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
-        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": "2d26c480-e993-11d9-b345-e24829d2f59b",
-            "value": "Ted"  }
-    },
-    // -----------------------------------------------------------------------
-    // (Person: Ted).(Category) = (Category: Person)
-    // (Category: Person).(Items in Category) = (Person: Ted)
-    //           by (Chao) on (Jun 30, 2005)
-    { "Entry": {
-             "uuid": "2d2760c0-e993-11d9-b345-e24829d2f59b",
-             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": ["2d26c480-e993-11d9-b345-e24829d2f59b", "00001201-ce7f-11d9-8cd5-0011113ae5d6"],
-        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
-    },
-    // -----------------------------------------------------------------------
-    // (???)
-    //           by (Chao) on (Jun 30, 2005)
-    { "Item": { "uuid": "12afdd80-e993-11d9-b345-e24829d2f59b" } },
-    // -----------------------------------------------------------------------
-    // (???).(Who) = (Person: Ted)
-    // (Person: Ted).(Items in Category) = (???)
-    //           by (Chao) on (Jun 30, 2005)
-    { "Entry": {
-             "uuid": "2d27aee0-e993-11d9-b345-e24829d2f59b",
-             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": ["12afdd80-e993-11d9-b345-e24829d2f59b", "2d26c480-e993-11d9-b345-e24829d2f59b"],
-        "attribute": ["41c86750-e992-11d9-9146-e24829d2f59b", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
-    },
-    // -----------------------------------------------------------------------
-    // (???).(Status) = (Status: Now)
-    //           by (Chao) on (Jun 30, 2005)
-    { "Entry": {
-             "uuid": "2d282410-e993-11d9-b345-e24829d2f59b",
-             "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
-        "attribute": "c1428740-e992-11d9-9146-e24829d2f59b",
-             "item": "12afdd80-e993-11d9-b345-e24829d2f59b",
-            "value": "e1813a60-e992-11d9-b345-e24829d2f59b"  }
-    }  ]
-  },
-  // -----------------------------------------------------------------------
-  // (???).(About) = "PyCon presentation"
-  //           by (Chao) on (Jun 30, 2005)
-  { "Entry": {
-           "uuid": "32f4f940-e993-11d9-b345-e24829d2f59b",
-           "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
-      "attribute": "81b155c0-e992-11d9-9146-e24829d2f59b",
-           "item": "12afdd80-e993-11d9-b345-e24829d2f59b",
-          "value": "PyCon presentation"  }
-  },
-  // -----------------------------------------------------------------------
-  // (???).(When) = "Tue Apr 12 2005 00:00:00 GMT-0700 (PDT)"
-  //           by (Chao) on (Jun 30, 2005)
-  { "Entry": {
-           "uuid": "36115470-e993-11d9-b345-e24829d2f59b",
-           "type": "00001022-ce7f-11d9-8cd5-0011113ae5d6",
-      "attribute": "9e90ff60-e992-11d9-9146-e24829d2f59b",
-           "item": "12afdd80-e993-11d9-b345-e24829d2f59b",
-          "value": "Tue Apr 12 2005 00:00:00 GMT-0700 (PDT)"  }
-  },
-  // =======================================================================
-  { "Transaction": [
-    // -----------------------------------------------------------------------
-    // (Project: PyCon)
-    //           by (Chao) on (Jun 30, 2005)
-    { "Item": { "uuid": "397b0c50-e993-11d9-b345-e24829d2f59b" } },
-    // -----------------------------------------------------------------------
-    // (Project: PyCon).(Name) = "PyCon"
-    //           by (Chao) on (Jun 30, 2005)
-    { "Entry": {
-             "uuid": "397b8180-e993-11d9-b345-e24829d2f59b",
-             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
-        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": "397b0c50-e993-11d9-b345-e24829d2f59b",
-            "value": "PyCon"  }
-    },
-    // -----------------------------------------------------------------------
-    // (Project: PyCon).(Category) = (Category: Project)
-    // (Category: Project).(Items in Category) = (Project: PyCon)
-    //           by (Chao) on (Jun 30, 2005)
-    { "Entry": {
-             "uuid": "397bf6b0-e993-11d9-b345-e24829d2f59b",
-             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": ["397b0c50-e993-11d9-b345-e24829d2f59b", "c299b2d0-e992-11d9-9146-e24829d2f59b"],
-        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
-    },
-    // -----------------------------------------------------------------------
-    // (???).(Project) = (Project: PyCon)
-    // (Project: PyCon).(Items in Category) = (???)
-    //           by (Chao) on (Jun 30, 2005)
-    { "Entry": {
-             "uuid": "397ce110-e993-11d9-b345-e24829d2f59b",
-             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": ["12afdd80-e993-11d9-b345-e24829d2f59b", "397b0c50-e993-11d9-b345-e24829d2f59b"],
-        "attribute": ["ba630990-e992-11d9-9146-e24829d2f59b", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
-    }  ]
-  },
-  // -----------------------------------------------------------------------
-  // (Page: Dashboard View).(Name) = "Dashboard View"
-  //           by (Chao) on (Jun 30, 2005)
-  { "Entry": {
-           "uuid": "40b1d1c0-e993-11d9-b345-e24829d2f59b",
-  "previousEntry": "99e95b30-e990-11d9-b90a-e24829d2f59b",
-           "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
-      "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
-           "item": "99e90d10-e990-11d9-b90a-e24829d2f59b",
-          "value": "Dashboard View"  }
-  },
-  // -----------------------------------------------------------------------
-  // (Page: Dashboard).(Name) = "Intro"
-  //           by (Chao) on (Jun 30, 2005)
-  { "Entry": {
-           "uuid": "45b6ea20-e993-11d9-b345-e24829d2f59b",
-  "previousEntry": "8a3c6b5c-ce7f-11d9-8cd5-e24829d2f59b",
-           "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
-      "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
-           "item": "8a3c6b50-ce7f-11d9-8cd5-e24829d2f59b",
-          "value": "Intro"  }
-  }
\ No newline at end of file

Deleted: trunk/source/repositories/demo_page.json
===================================================================
--- trunk/source/repositories/demo_page.json	2005-07-03 00:37:39 UTC (rev 211)
+++ trunk/source/repositories/demo_page.json	2005-07-03 00:40:55 UTC (rev 212)
@@ -1,47 +0,0 @@
-// Repository records, in JSON format
-{ "format": "2005_JUNE_CHRONOLOGICAL_LIST", 
-  "records": [
-  // =======================================================================
-  { "Transaction": [  // Home Page  
-    // -----------------------------------------------------------------------
-    // (Page: Welcome!)
-    { "Item": {                                               
-             "uuid": "00050000-ce7f-11d9-8cd5-0011113ae5d6" }
-    },
-    // -----------------------------------------------------------------------
-    // (Page: Welcome!).(Category) = (Category: Page)
-    // (Category: Page).(Items in Category) = (Page: Welcome!)
-    { "Entry": {
-             "uuid": "0005000a-ce7f-11d9-8cd5-0011113ae5d6",
-             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": ["00050000-ce7f-11d9-8cd5-0011113ae5d6", "00020000-ce7f-11d9-8cd5-0011113ae5d6"],
-        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
-    },  
-    // -----------------------------------------------------------------------
-    // (Page: Welcome!).(Short Name) = "Welcome!"
-    { "Entry": {
-             "uuid": "0005000b-ce7f-11d9-8cd5-0011113ae5d6",
-        "attribute": "00001002-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": "00050000-ce7f-11d9-8cd5-0011113ae5d6",
-             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
-            "value": "Welcome!" }
-    },
-    // -----------------------------------------------------------------------
-    // (Page: Welcome!).(Name) = "Welcome to the OpenRecord demo!"
-    { "Entry": {
-             "uuid": "0005000c-ce7f-11d9-8cd5-0011113ae5d6",
-        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": "00050000-ce7f-11d9-8cd5-0011113ae5d6",
-             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
-            "value": "Welcome to the OpenRecord demo!" }
-    },
-    // -----------------------------------------------------------------------
-    // (Page: Welcome!).(Summary) = "This web site is a demo of ..."
-    { "Entry": {
-             "uuid": "0005000d-ce7f-11d9-8cd5-0011113ae5d6",
-        "attribute": "00001003-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": "00050000-ce7f-11d9-8cd5-0011113ae5d6",
-             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
-            "value": "This web site is a demo of the OpenRecord prototype. OpenRecord is a collaborative content management system. OpenRecord is a lot like a wiki, but with twist. Most wikis are designed to let you view and edit pages of text, like a web-based word processor. OpenRecord is designed to let you view and edit items in a database, rather than pages of text. So if a wiki is a web-based collaborative word-processor, then OpenRecord is a web-based collaborative database, like Lotus Agenda." }
-    } ]
-  }
\ No newline at end of file

Deleted: trunk/source/repositories/dogfood.json
===================================================================
--- trunk/source/repositories/dogfood.json	2005-07-03 00:37:39 UTC (rev 211)
+++ trunk/source/repositories/dogfood.json	2005-07-03 00:40:55 UTC (rev 212)
@@ -1,2163 +0,0 @@
-// Repository records, in JSON format
-{ "format": "2005_JUNE_CHRONOLOGICAL_LIST", 
-  "records": [
-  // =======================================================================
-  { "Transaction": [  // Home Page  
-    // -----------------------------------------------------------------------
-    { "Item": {                                               // (Page: The OpenRecord Dogfood Site)
-             "uuid": "246ec320-ce7f-11d9-8cd5-000c414ce854" }
-    },
-    // -----------------------------------------------------------------------
-    { "Entry": {                                              
-             // (Page: The OpenRecord Dogfood Site).(Category) = (Category: Page)
-             // (Category: Page).(Items in Category) = (Page: The OpenRecord Dogfood Site)
-             "uuid": "246ec32a-ce7f-11d9-8cd5-000c414ce854",
-             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": ["246ec320-ce7f-11d9-8cd5-000c414ce854", "00020000-ce7f-11d9-8cd5-0011113ae5d6"],
-        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
-    },  
-    // -----------------------------------------------------------------------
-    { "Entry": {                                              // "Dogfood"
-             "uuid": "246ec32b-ce7f-11d9-8cd5-000c414ce854",
-        "attribute": "00001002-ce7f-11d9-8cd5-0011113ae5d6",  // Short Name
-             "item": "246ec320-ce7f-11d9-8cd5-000c414ce854",  // (Page: The OpenRecord Dogfood Site)
-             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",  // TextValue
-            "value": "Dogfood" }
-    },
-    // -----------------------------------------------------------------------
-    { "Entry": {                                              // "The OpenRecord Dogfood Site"
-             "uuid": "246ec32c-ce7f-11d9-8cd5-000c414ce854",
-        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",  // Name
-             "item": "246ec320-ce7f-11d9-8cd5-000c414ce854",  // (Page: The OpenRecord Dogfood Site)
-             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",  // TextValue
-            "value": "The OpenRecord Dogfood Site" }
-    },
-    // -----------------------------------------------------------------------
-    { "Entry": {                                              // "This web site is a demo of ..."
-             "uuid": "246ec32d-ce7f-11d9-8cd5-000c414ce854",
-        "attribute": "00001003-ce7f-11d9-8cd5-0011113ae5d6",  // Summary
-             "item": "246ec320-ce7f-11d9-8cd5-000c414ce854",  // (Page: The OpenRecord Dogfood Site)
-             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",  // TextValue
-            "value": "This web site is where people working on OpenRecord keep track of the work being done." }
-    } ]
-  },
-  // =======================================================================
-  { "Transaction": [
-    // -----------------------------------------------------------------------
-    // (Page: People)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Item": { "uuid": "82ca34a0-e775-11d9-89df-000c414ce854" } },
-    // -----------------------------------------------------------------------
-    // (Page: People).(Name) = "People"
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "82cca5a0-e775-11d9-89df-000c414ce854",
-             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
-        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": "82ca34a0-e775-11d9-89df-000c414ce854",
-            "value": "People"  }
-    },
-    // -----------------------------------------------------------------------
-    // (Page: People).(Category) = (Category: Page)
-    // (Category: Page).(Items in Category) = (Page: People)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "82cca5a1-e775-11d9-89df-000c414ce854",
-             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": ["82ca34a0-e775-11d9-89df-000c414ce854", "00020000-ce7f-11d9-8cd5-0011113ae5d6"],
-        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
-    },
-    // -----------------------------------------------------------------------
-    // (Page: People).(Summary) = "This is the people page."
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "82cca5a2-e775-11d9-89df-000c414ce854",
-             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
-        "attribute": "00001003-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": "82ca34a0-e775-11d9-89df-000c414ce854",
-            "value": "This is the people page."  }
-    },
-    // -----------------------------------------------------------------------
-    // (Section: List of People)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Item": { "uuid": "82cca5a3-e775-11d9-89df-000c414ce854" } },
-    // -----------------------------------------------------------------------
-    // (Section: List of People).(Name) = "List of People"
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "82cca5a4-e775-11d9-89df-000c414ce854",
-             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
-        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": "82cca5a3-e775-11d9-89df-000c414ce854",
-            "value": "List of People"  }
-    },
-    // -----------------------------------------------------------------------
-    // (Section: List of People).(Category) = (Category: Section)
-    // (Category: Section).(Items in Category) = (Section: List of People)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "82cca5a5-e775-11d9-89df-000c414ce854",
-             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": ["82cca5a3-e775-11d9-89df-000c414ce854", "00020100-ce7f-11d9-8cd5-0011113ae5d6"],
-        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
-    },
-    // -----------------------------------------------------------------------
-    // (Page: People).(Sections In Page) = (Section: List of People)
-    // (Section: List of People).(Page this section appears on) = (Page: People)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "82cca5a6-e775-11d9-89df-000c414ce854",
-             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": ["82ca34a0-e775-11d9-89df-000c414ce854", "82cca5a3-e775-11d9-89df-000c414ce854"],
-        "attribute": ["00030000-ce7f-11d9-8cd5-0011113ae5d6", "00030001-ce7f-11d9-8cd5-0011113ae5d6"]  }
-    },
-    // -----------------------------------------------------------------------
-    // (Section: List of People).(Plugin View) = (Plugin View: Table)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "82cca5a7-e775-11d9-89df-000c414ce854",
-             "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
-        "attribute": "00040101-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": "82cca5a3-e775-11d9-89df-000c414ce854",
-            "value": "00040301-ce7f-11d9-8cd5-0011113ae5d6"  }
-    },
-    // -----------------------------------------------------------------------
-    // (Query Spec: New Query)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Item": { "uuid": "82cca5a8-e775-11d9-89df-000c414ce854" } },
-    // -----------------------------------------------------------------------
-    // (Query Spec: New Query).(Name) = "New Query"
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "82cca5a9-e775-11d9-89df-000c414ce854",
-             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
-        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": "82cca5a8-e775-11d9-89df-000c414ce854",
-            "value": "New Query"  }
-    },
-    // -----------------------------------------------------------------------
-    // (Query Spec: New Query).(Category) = (Category: Query Spec)
-    // (Category: Query Spec).(Items in Category) = (Query Spec: New Query)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "82cca5aa-e775-11d9-89df-000c414ce854",
-             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": ["82cca5a8-e775-11d9-89df-000c414ce854", "00001212-ce7f-11d9-8cd5-0011113ae5d6"],
-        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
-    },
-    // -----------------------------------------------------------------------
-    // (Section: List of People).(Query Spec) = (Query Spec: New Query)
-    // (Query Spec: New Query).(Section this query spec belongs to) = (Section: List of People)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "82cca5ab-e775-11d9-89df-000c414ce854",
-             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": ["82cca5a3-e775-11d9-89df-000c414ce854", "82cca5a8-e775-11d9-89df-000c414ce854"],
-        "attribute": ["00001006-ce7f-11d9-8cd5-0011113ae5d6", "00040105-ce7f-11d9-8cd5-0011113ae5d6"]  }
-    }  ]
-  },
-  // =======================================================================
-  { "Transaction": [
-    // -----------------------------------------------------------------------
-    // (Layout Data: Layout data for Table of List of People)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Item": { "uuid": "82d3d190-e775-11d9-89df-000c414ce854" } },
-    // -----------------------------------------------------------------------
-    // (Layout Data: Layout data for Table of List of People).(Name) = "Layout data for Table of List of People"
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "82d3d191-e775-11d9-89df-000c414ce854",
-             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
-        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": "82d3d190-e775-11d9-89df-000c414ce854",
-            "value": "Layout data for Table of List of People"  }
-    },
-    // -----------------------------------------------------------------------
-    // (Layout Data: Layout data for Table of List of People).(Category) = (Category: Layout Data)
-    // (Category: Layout Data).(Items in Category) = (Layout Data: Layout data for Table of List of People)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "82d61b80-e775-11d9-89df-000c414ce854",
-             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": ["82d3d190-e775-11d9-89df-000c414ce854", "00040202-ce7f-11d9-8cd5-0011113ae5d6"],
-        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
-    },
-    // -----------------------------------------------------------------------
-    // (Layout Data: Layout data for Table of List of People).(Applies To Plugin) = (Plugin View: Table)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "82d61b81-e775-11d9-89df-000c414ce854",
-             "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
-        "attribute": "00040103-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": "82d3d190-e775-11d9-89df-000c414ce854",
-            "value": "00040301-ce7f-11d9-8cd5-0011113ae5d6"  }
-    },
-    // -----------------------------------------------------------------------
-    // (Section: List of People).(Layout Data) = (Layout Data: Layout data for Table of List of People)
-    // (Layout Data: Layout data for Table of List of People).(Section this layout data belongs to) = (Section: List of People)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "82d61b82-e775-11d9-89df-000c414ce854",
-             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": ["82cca5a3-e775-11d9-89df-000c414ce854", "82d3d190-e775-11d9-89df-000c414ce854"],
-        "attribute": ["00040102-ce7f-11d9-8cd5-0011113ae5d6", "00040104-ce7f-11d9-8cd5-0011113ae5d6"]  }
-    }  ]
-  },
-  // =======================================================================
-  { "Transaction": [
-    // -----------------------------------------------------------------------
-    // (Page: Iterations)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Item": { "uuid": "5555ef80-e777-11d9-8aaf-000c414ce854" } },
-    // -----------------------------------------------------------------------
-    // (Page: Iterations).(Name) = "Iterations"
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "5555ef81-e777-11d9-8aaf-000c414ce854",
-             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
-        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": "5555ef80-e777-11d9-8aaf-000c414ce854",
-            "value": "Iterations"  }
-    },
-    // -----------------------------------------------------------------------
-    // (Page: Iterations).(Category) = (Category: Page)
-    // (Category: Page).(Items in Category) = (Page: Iterations)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "5555ef82-e777-11d9-8aaf-000c414ce854",
-             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": ["5555ef80-e777-11d9-8aaf-000c414ce854", "00020000-ce7f-11d9-8cd5-0011113ae5d6"],
-        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
-    },
-    // -----------------------------------------------------------------------
-    // (Page: Iterations).(Summary) = "This is the iterations page."
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "5555ef83-e777-11d9-8aaf-000c414ce854",
-             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
-        "attribute": "00001003-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": "5555ef80-e777-11d9-8aaf-000c414ce854",
-            "value": "This is the iterations page."  }
-    },
-    // -----------------------------------------------------------------------
-    // (Section: List of Iterations)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Item": { "uuid": "5555ef84-e777-11d9-8aaf-000c414ce854" } },
-    // -----------------------------------------------------------------------
-    // (Section: List of Iterations).(Name) = "List of Iterations"
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "5555ef85-e777-11d9-8aaf-000c414ce854",
-             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
-        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": "5555ef84-e777-11d9-8aaf-000c414ce854",
-            "value": "List of Iterations"  }
-    },
-    // -----------------------------------------------------------------------
-    // (Section: List of Iterations).(Category) = (Category: Section)
-    // (Category: Section).(Items in Category) = (Section: List of Iterations)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "5555ef86-e777-11d9-8aaf-000c414ce854",
-             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": ["5555ef84-e777-11d9-8aaf-000c414ce854", "00020100-ce7f-11d9-8cd5-0011113ae5d6"],
-        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
-    },
-    // -----------------------------------------------------------------------
-    // (Page: Iterations).(Sections In Page) = (Section: List of Iterations)
-    // (Section: List of Iterations).(Page this section appears on) = (Page: Iterations)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "5555ef87-e777-11d9-8aaf-000c414ce854",
-             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": ["5555ef80-e777-11d9-8aaf-000c414ce854", "5555ef84-e777-11d9-8aaf-000c414ce854"],
-        "attribute": ["00030000-ce7f-11d9-8cd5-0011113ae5d6", "00030001-ce7f-11d9-8cd5-0011113ae5d6"]  }
-    },
-    // -----------------------------------------------------------------------
-    // (Section: List of Iterations).(Plugin View) = (Plugin View: Table)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "5555ef88-e777-11d9-8aaf-000c414ce854",
-             "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
-        "attribute": "00040101-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": "5555ef84-e777-11d9-8aaf-000c414ce854",
-            "value": "00040301-ce7f-11d9-8cd5-0011113ae5d6"  }
-    },
-    // -----------------------------------------------------------------------
-    // (Query Spec: New Query)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Item": { "uuid": "5555ef89-e777-11d9-8aaf-000c414ce854" } },
-    // -----------------------------------------------------------------------
-    // (Query Spec: New Query).(Name) = "New Query"
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "5555ef8a-e777-11d9-8aaf-000c414ce854",
-             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
-        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": "5555ef89-e777-11d9-8aaf-000c414ce854",
-            "value": "New Query"  }
-    },
-    // -----------------------------------------------------------------------
-    // (Query Spec: New Query).(Category) = (Category: Query Spec)
-    // (Category: Query Spec).(Items in Category) = (Query Spec: New Query)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "5555ef8b-e777-11d9-8aaf-000c414ce854",
-             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": ["5555ef89-e777-11d9-8aaf-000c414ce854", "00001212-ce7f-11d9-8cd5-0011113ae5d6"],
-        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
-    },
-    // -----------------------------------------------------------------------
-    // (Section: List of Iterations).(Query Spec) = (Query Spec: New Query)
-    // (Query Spec: New Query).(Section this query spec belongs to) = (Section: List of Iterations)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "5555ef8c-e777-11d9-8aaf-000c414ce854",
-             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": ["5555ef84-e777-11d9-8aaf-000c414ce854", "5555ef89-e777-11d9-8aaf-000c414ce854"],
-        "attribute": ["00001006-ce7f-11d9-8cd5-0011113ae5d6", "00040105-ce7f-11d9-8cd5-0011113ae5d6"]  }
-    }  ]
-  },
-  // =======================================================================
-  { "Transaction": [
-    // -----------------------------------------------------------------------
-    // (Layout Data: Layout data for Table of List of Iterations)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Item": { "uuid": "555d1b70-e777-11d9-8aaf-000c414ce854" } },
-    // -----------------------------------------------------------------------
-    // (Layout Data: Layout data for Table of List of Iterations).(Name) = "Layout data for Table of List of Iterations"
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "555d1b71-e777-11d9-8aaf-000c414ce854",
-             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
-        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": "555d1b70-e777-11d9-8aaf-000c414ce854",
-            "value": "Layout data for Table of List of Iterations"  }
-    },
-    // -----------------------------------------------------------------------
-    // (Layout Data: Layout data for Table of List of Iterations).(Category) = (Category: Layout Data)
-    // (Category: Layout Data).(Items in Category) = (Layout Data: Layout data for Table of List of Iterations)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "555d1b72-e777-11d9-8aaf-000c414ce854",
-             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": ["555d1b70-e777-11d9-8aaf-000c414ce854", "00040202-ce7f-11d9-8cd5-0011113ae5d6"],
-        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
-    },
-    // -----------------------------------------------------------------------
-    // (Layout Data: Layout data for Table of List of Iterations).(Applies To Plugin) = (Plugin View: Table)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "555d1b73-e777-11d9-8aaf-000c414ce854",
-             "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
-        "attribute": "00040103-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": "555d1b70-e777-11d9-8aaf-000c414ce854",
-            "value": "00040301-ce7f-11d9-8cd5-0011113ae5d6"  }
-    },
-    // -----------------------------------------------------------------------
-    // (Section: List of Iterations).(Layout Data) = (Layout Data: Layout data for Table of List of Iterations)
-    // (Layout Data: Layout data for Table of List of Iterations).(Section this layout data belongs to) = (Section: List of Iterations)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "555d1b74-e777-11d9-8aaf-000c414ce854",
-             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": ["5555ef84-e777-11d9-8aaf-000c414ce854", "555d1b70-e777-11d9-8aaf-000c414ce854"],
-        "attribute": ["00040102-ce7f-11d9-8cd5-0011113ae5d6", "00040104-ce7f-11d9-8cd5-0011113ae5d6"]  }
-    }  ]
-  },
-  // =======================================================================
-  { "Transaction": [
-    // -----------------------------------------------------------------------
-    // (Page: Stories)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Item": { "uuid": "a7ef69b0-e777-11d9-80cf-000c414ce854" } },
-    // -----------------------------------------------------------------------
-    // (Page: Stories).(Name) = "Stories"
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "a7ef69b1-e777-11d9-80cf-000c414ce854",
-             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
-        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": "a7ef69b0-e777-11d9-80cf-000c414ce854",
-            "value": "Stories"  }
-    },
-    // -----------------------------------------------------------------------
-    // (Page: Stories).(Category) = (Category: Page)
-    // (Category: Page).(Items in Category) = (Page: Stories)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "a7ef69b2-e777-11d9-80cf-000c414ce854",
-             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": ["a7ef69b0-e777-11d9-80cf-000c414ce854", "00020000-ce7f-11d9-8cd5-0011113ae5d6"],
-        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
-    },
-    // -----------------------------------------------------------------------
-    // (Page: Stories).(Summary) = "This is the stories page."
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "a7ef69b3-e777-11d9-80cf-000c414ce854",
-             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
-        "attribute": "00001003-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": "a7ef69b0-e777-11d9-80cf-000c414ce854",
-            "value": "This is the stories page."  }
-    },
-    // -----------------------------------------------------------------------
-    // (Section: List of Stories)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Item": { "uuid": "a7ef69b4-e777-11d9-80cf-000c414ce854" } },
-    // -----------------------------------------------------------------------
-    // (Section: List of Stories).(Name) = "List of Stories"
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "a7ef69b5-e777-11d9-80cf-000c414ce854",
-             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
-        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": "a7ef69b4-e777-11d9-80cf-000c414ce854",
-            "value": "List of Stories"  }
-    },
-    // -----------------------------------------------------------------------
-    // (Section: List of Stories).(Category) = (Category: Section)
-    // (Category: Section).(Items in Category) = (Section: List of Stories)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "a7ef69b6-e777-11d9-80cf-000c414ce854",
-             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": ["a7ef69b4-e777-11d9-80cf-000c414ce854", "00020100-ce7f-11d9-8cd5-0011113ae5d6"],
-        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
-    },
-    // -----------------------------------------------------------------------
-    // (Page: Stories).(Sections In Page) = (Section: List of Stories)
-    // (Section: List of Stories).(Page this section appears on) = (Page: Stories)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "a7ef69b7-e777-11d9-80cf-000c414ce854",
-             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": ["a7ef69b0-e777-11d9-80cf-000c414ce854", "a7ef69b4-e777-11d9-80cf-000c414ce854"],
-        "attribute": ["00030000-ce7f-11d9-8cd5-0011113ae5d6", "00030001-ce7f-11d9-8cd5-0011113ae5d6"]  }
-    },
-    // -----------------------------------------------------------------------
-    // (Section: List of Stories).(Plugin View) = (Plugin View: Table)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "a7ef69b8-e777-11d9-80cf-000c414ce854",
-             "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
-        "attribute": "00040101-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": "a7ef69b4-e777-11d9-80cf-000c414ce854",
-            "value": "00040301-ce7f-11d9-8cd5-0011113ae5d6"  }
-    },
-    // -----------------------------------------------------------------------
-    // (Query Spec: New Query)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Item": { "uuid": "a7ef69b9-e777-11d9-80cf-000c414ce854" } },
-    // -----------------------------------------------------------------------
-    // (Query Spec: New Query).(Name) = "New Query"
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "a7ef69ba-e777-11d9-80cf-000c414ce854",
-             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
-        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": "a7ef69b9-e777-11d9-80cf-000c414ce854",
-            "value": "New Query"  }
-    },
-    // -----------------------------------------------------------------------
-    // (Query Spec: New Query).(Category) = (Category: Query Spec)
-    // (Category: Query Spec).(Items in Category) = (Query Spec: New Query)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "a7ef69bb-e777-11d9-80cf-000c414ce854",
-             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": ["a7ef69b9-e777-11d9-80cf-000c414ce854", "00001212-ce7f-11d9-8cd5-0011113ae5d6"],
-        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
-    },
-    // -----------------------------------------------------------------------
-    // (Section: List of Stories).(Query Spec) = (Query Spec: New Query)
-    // (Query Spec: New Query).(Section this query spec belongs to) = (Section: List of Stories)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "a7ef69bc-e777-11d9-80cf-000c414ce854",
-             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": ["a7ef69b4-e777-11d9-80cf-000c414ce854", "a7ef69b9-e777-11d9-80cf-000c414ce854"],
-        "attribute": ["00001006-ce7f-11d9-8cd5-0011113ae5d6", "00040105-ce7f-11d9-8cd5-0011113ae5d6"]  }
-    }  ]
-  },
-  // =======================================================================
-  { "Transaction": [
-    // -----------------------------------------------------------------------
-    // (Layout Data: Layout data for Table of List of Stories)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Item": { "uuid": "a7f8df90-e777-11d9-80cf-000c414ce854" } },
-    // -----------------------------------------------------------------------
-    // (Layout Data: Layout data for Table of List of Stories).(Name) = "Layout data for Table of List of Stories"
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "a7f8df91-e777-11d9-80cf-000c414ce854",
-             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
-        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": "a7f8df90-e777-11d9-80cf-000c414ce854",
-            "value": "Layout data for Table of List of Stories"  }
-    },
-    // -----------------------------------------------------------------------
-    // (Layout Data: Layout data for Table of List of Stories).(Category) = (Category: Layout Data)
-    // (Category: Layout Data).(Items in Category) = (Layout Data: Layout data for Table of List of Stories)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "a7f8df92-e777-11d9-80cf-000c414ce854",
-             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": ["a7f8df90-e777-11d9-80cf-000c414ce854", "00040202-ce7f-11d9-8cd5-0011113ae5d6"],
-        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
-    },
-    // -----------------------------------------------------------------------
-    // (Layout Data: Layout data for Table of List of Stories).(Applies To Plugin) = (Plugin View: Table)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "a7f8df93-e777-11d9-80cf-000c414ce854",
-             "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
-        "attribute": "00040103-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": "a7f8df90-e777-11d9-80cf-000c414ce854",
-            "value": "00040301-ce7f-11d9-8cd5-0011113ae5d6"  }
-    },
-    // -----------------------------------------------------------------------
-    // (Section: List of Stories).(Layout Data) = (Layout Data: Layout data for Table of List of Stories)
-    // (Layout Data: Layout data for Table of List of Stories).(Section this layout data belongs to) = (Section: List of Stories)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "a7f8df94-e777-11d9-80cf-000c414ce854",
-             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": ["a7ef69b4-e777-11d9-80cf-000c414ce854", "a7f8df90-e777-11d9-80cf-000c414ce854"],
-        "attribute": ["00040102-ce7f-11d9-8cd5-0011113ae5d6", "00040104-ce7f-11d9-8cd5-0011113ae5d6"]  }
-    }  ]
-  },
-  // =======================================================================
-  { "Transaction": [
-    // -----------------------------------------------------------------------
-    // (Page: Tasks)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Item": { "uuid": "d99a41b0-e777-11d9-8b8e-000c414ce854" } },
-    // -----------------------------------------------------------------------
-    // (Page: Tasks).(Name) = "Tasks"
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "d99a41b1-e777-11d9-8b8e-000c414ce854",
-             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
-        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": "d99a41b0-e777-11d9-8b8e-000c414ce854",
-            "value": "Tasks"  }
-    },
-    // -----------------------------------------------------------------------
-    // (Page: Tasks).(Category) = (Category: Page)
-    // (Category: Page).(Items in Category) = (Page: Tasks)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "d99a41b2-e777-11d9-8b8e-000c414ce854",
-             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": ["d99a41b0-e777-11d9-8b8e-000c414ce854", "00020000-ce7f-11d9-8cd5-0011113ae5d6"],
-        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
-    },
-    // -----------------------------------------------------------------------
-    // (Page: Tasks).(Summary) = "This is the tasks page."
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "d99a41b3-e777-11d9-8b8e-000c414ce854",
-             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
-        "attribute": "00001003-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": "d99a41b0-e777-11d9-8b8e-000c414ce854",
-            "value": "This is the tasks page."  }
-    },
-    // -----------------------------------------------------------------------
-    // (Section: List of Tasks)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Item": { "uuid": "d99a41b4-e777-11d9-8b8e-000c414ce854" } },
-    // -----------------------------------------------------------------------
-    // (Section: List of Tasks).(Name) = "List of Tasks"
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "d99a41b5-e777-11d9-8b8e-000c414ce854",
-             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
-        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": "d99a41b4-e777-11d9-8b8e-000c414ce854",
-            "value": "List of Tasks"  }
-    },
-    // -----------------------------------------------------------------------
-    // (Section: List of Tasks).(Category) = (Category: Section)
-    // (Category: Section).(Items in Category) = (Section: List of Tasks)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "d99a41b6-e777-11d9-8b8e-000c414ce854",
-             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": ["d99a41b4-e777-11d9-8b8e-000c414ce854", "00020100-ce7f-11d9-8cd5-0011113ae5d6"],
-        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
-    },
-    // -----------------------------------------------------------------------
-    // (Page: Tasks).(Sections In Page) = (Section: List of Tasks)
-    // (Section: List of Tasks).(Page this section appears on) = (Page: Tasks)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "d99a41b7-e777-11d9-8b8e-000c414ce854",
-             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": ["d99a41b0-e777-11d9-8b8e-000c414ce854", "d99a41b4-e777-11d9-8b8e-000c414ce854"],
-        "attribute": ["00030000-ce7f-11d9-8cd5-0011113ae5d6", "00030001-ce7f-11d9-8cd5-0011113ae5d6"]  }
-    },
-    // -----------------------------------------------------------------------
-    // (Section: List of Tasks).(Plugin View) = (Plugin View: Table)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "d99a41b8-e777-11d9-8b8e-000c414ce854",
-             "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
-        "attribute": "00040101-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": "d99a41b4-e777-11d9-8b8e-000c414ce854",
-            "value": "00040301-ce7f-11d9-8cd5-0011113ae5d6"  }
-    },
-    // -----------------------------------------------------------------------
-    // (Query Spec: New Query)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Item": { "uuid": "d99a41b9-e777-11d9-8b8e-000c414ce854" } },
-    // -----------------------------------------------------------------------
-    // (Query Spec: New Query).(Name) = "New Query"
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "d99a41ba-e777-11d9-8b8e-000c414ce854",
-             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
-        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": "d99a41b9-e777-11d9-8b8e-000c414ce854",
-            "value": "New Query"  }
-    },
-    // -----------------------------------------------------------------------
-    // (Query Spec: New Query).(Category) = (Category: Query Spec)
-    // (Category: Query Spec).(Items in Category) = (Query Spec: New Query)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "d99a41bb-e777-11d9-8b8e-000c414ce854",
-             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": ["d99a41b9-e777-11d9-8b8e-000c414ce854", "00001212-ce7f-11d9-8cd5-0011113ae5d6"],
-        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
-    },
-    // -----------------------------------------------------------------------
-    // (Section: List of Tasks).(Query Spec) = (Query Spec: New Query)
-    // (Query Spec: New Query).(Section this query spec belongs to) = (Section: List of Tasks)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "d99a41bc-e777-11d9-8b8e-000c414ce854",
-             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": ["d99a41b4-e777-11d9-8b8e-000c414ce854", "d99a41b9-e777-11d9-8b8e-000c414ce854"],
-        "attribute": ["00001006-ce7f-11d9-8cd5-0011113ae5d6", "00040105-ce7f-11d9-8cd5-0011113ae5d6"]  }
-    }  ]
-  },
-  // =======================================================================
-  { "Transaction": [
-    // -----------------------------------------------------------------------
-    // (Layout Data: Layout data for Table of List of Tasks)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Item": { "uuid": "d9a3b790-e777-11d9-8b8e-000c414ce854" } },
-    // -----------------------------------------------------------------------
-    // (Layout Data: Layout data for Table of List of Tasks).(Name) = "Layout data for Table of List of Tasks"
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "d9a3b791-e777-11d9-8b8e-000c414ce854",
-             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
-        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": "d9a3b790-e777-11d9-8b8e-000c414ce854",
-            "value": "Layout data for Table of List of Tasks"  }
-    },
-    // -----------------------------------------------------------------------
-    // (Layout Data: Layout data for Table of List of Tasks).(Category) = (Category: Layout Data)
-    // (Category: Layout Data).(Items in Category) = (Layout Data: Layout data for Table of List of Tasks)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "d9a3b792-e777-11d9-8b8e-000c414ce854",
-             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": ["d9a3b790-e777-11d9-8b8e-000c414ce854", "00040202-ce7f-11d9-8cd5-0011113ae5d6"],
-        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
-    },
-    // -----------------------------------------------------------------------
-    // (Layout Data: Layout data for Table of List of Tasks).(Applies To Plugin) = (Plugin View: Table)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "d9a3b793-e777-11d9-8b8e-000c414ce854",
-             "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
-        "attribute": "00040103-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": "d9a3b790-e777-11d9-8b8e-000c414ce854",
-            "value": "00040301-ce7f-11d9-8cd5-0011113ae5d6"  }
-    },
-    // -----------------------------------------------------------------------
-    // (Section: List of Tasks).(Layout Data) = (Layout Data: Layout data for Table of List of Tasks)
-    // (Layout Data: Layout data for Table of List of Tasks).(Section this layout data belongs to) = (Section: List of Tasks)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "d9a3b794-e777-11d9-8b8e-000c414ce854",
-             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": ["d99a41b4-e777-11d9-8b8e-000c414ce854", "d9a3b790-e777-11d9-8b8e-000c414ce854"],
-        "attribute": ["00040102-ce7f-11d9-8cd5-0011113ae5d6", "00040104-ce7f-11d9-8cd5-0011113ae5d6"]  }
-    }  ]
-  },
-  // =======================================================================
-  { "Transaction": [
-    // -----------------------------------------------------------------------
-    // (Page: Bugs)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Item": { "uuid": "0def0400-e778-11d9-bab6-000c414ce854" } },
-    // -----------------------------------------------------------------------
-    // (Page: Bugs).(Name) = "Bugs"
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "0def0401-e778-11d9-bab6-000c414ce854",
-             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
-        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": "0def0400-e778-11d9-bab6-000c414ce854",
-            "value": "Bugs"  }
-    },
-    // -----------------------------------------------------------------------
-    // (Page: Bugs).(Category) = (Category: Page)
-    // (Category: Page).(Items in Category) = (Page: Bugs)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "0def0402-e778-11d9-bab6-000c414ce854",
-             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": ["0def0400-e778-11d9-bab6-000c414ce854", "00020000-ce7f-11d9-8cd5-0011113ae5d6"],
-        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
-    },
-    // -----------------------------------------------------------------------
-    // (Page: Bugs).(Summary) = "This is the bugs page."
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "0def0403-e778-11d9-bab6-000c414ce854",
-             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
-        "attribute": "00001003-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": "0def0400-e778-11d9-bab6-000c414ce854",
-            "value": "This is the bugs page."  }
-    },
-    // -----------------------------------------------------------------------
-    // (Section: List of Bugs)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Item": { "uuid": "0df14df0-e778-11d9-bab6-000c414ce854" } },
-    // -----------------------------------------------------------------------
-    // (Section: List of Bugs).(Name) = "List of Bugs"
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "0df14df1-e778-11d9-bab6-000c414ce854",
-             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
-        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": "0df14df0-e778-11d9-bab6-000c414ce854",
-            "value": "List of Bugs"  }
-    },
-    // -----------------------------------------------------------------------
-    // (Section: List of Bugs).(Category) = (Category: Section)
-    // (Category: Section).(Items in Category) = (Section: List of Bugs)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "0df14df2-e778-11d9-bab6-000c414ce854",
-             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": ["0df14df0-e778-11d9-bab6-000c414ce854", "00020100-ce7f-11d9-8cd5-0011113ae5d6"],
-        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
-    },
-    // -----------------------------------------------------------------------
-    // (Page: Bugs).(Sections In Page) = (Section: List of Bugs)
-    // (Section: List of Bugs).(Page this section appears on) = (Page: Bugs)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "0df14df3-e778-11d9-bab6-000c414ce854",
-             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": ["0def0400-e778-11d9-bab6-000c414ce854", "0df14df0-e778-11d9-bab6-000c414ce854"],
-        "attribute": ["00030000-ce7f-11d9-8cd5-0011113ae5d6", "00030001-ce7f-11d9-8cd5-0011113ae5d6"]  }
-    },
-    // -----------------------------------------------------------------------
-    // (Section: List of Bugs).(Plugin View) = (Plugin View: Table)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "0df14df4-e778-11d9-bab6-000c414ce854",
-             "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
-        "attribute": "00040101-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": "0df14df0-e778-11d9-bab6-000c414ce854",
-            "value": "00040301-ce7f-11d9-8cd5-0011113ae5d6"  }
-    },
-    // -----------------------------------------------------------------------
-    // (Query Spec: New Query)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Item": { "uuid": "0df14df5-e778-11d9-bab6-000c414ce854" } },
-    // -----------------------------------------------------------------------
-    // (Query Spec: New Query).(Name) = "New Query"
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "0df14df6-e778-11d9-bab6-000c414ce854",
-             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
-        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": "0df14df5-e778-11d9-bab6-000c414ce854",
-            "value": "New Query"  }
-    },
-    // -----------------------------------------------------------------------
-    // (Query Spec: New Query).(Category) = (Category: Query Spec)
-    // (Category: Query Spec).(Items in Category) = (Query Spec: New Query)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "0df14df7-e778-11d9-bab6-000c414ce854",
-             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": ["0df14df5-e778-11d9-bab6-000c414ce854", "00001212-ce7f-11d9-8cd5-0011113ae5d6"],
-        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
-    },
-    // -----------------------------------------------------------------------
-    // (Section: List of Bugs).(Query Spec) = (Query Spec: New Query)
-    // (Query Spec: New Query).(Section this query spec belongs to) = (Section: List of Bugs)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "0df14df8-e778-11d9-bab6-000c414ce854",
-             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": ["0df14df0-e778-11d9-bab6-000c414ce854", "0df14df5-e778-11d9-bab6-000c414ce854"],
-        "attribute": ["00001006-ce7f-11d9-8cd5-0011113ae5d6", "00040105-ce7f-11d9-8cd5-0011113ae5d6"]  }
-    }  ]
-  },
-  // =======================================================================
-  { "Transaction": [
-    // -----------------------------------------------------------------------
-    // (Layout Data: Layout data for Table of List of Bugs)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Item": { "uuid": "0df879e0-e778-11d9-bab6-000c414ce854" } },
-    // -----------------------------------------------------------------------
-    // (Layout Data: Layout data for Table of List of Bugs).(Name) = "Layout data for Table of List of Bugs"
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "0df879e1-e778-11d9-bab6-000c414ce854",
-             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
-        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": "0df879e0-e778-11d9-bab6-000c414ce854",
-            "value": "Layout data for Table of List of Bugs"  }
-    },
-    // -----------------------------------------------------------------------
-    // (Layout Data: Layout data for Table of List of Bugs).(Category) = (Category: Layout Data)
-    // (Category: Layout Data).(Items in Category) = (Layout Data: Layout data for Table of List of Bugs)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "0df879e2-e778-11d9-bab6-000c414ce854",
-             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": ["0df879e0-e778-11d9-bab6-000c414ce854", "00040202-ce7f-11d9-8cd5-0011113ae5d6"],
-        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
-    },
-    // -----------------------------------------------------------------------
-    // (Layout Data: Layout data for Table of List of Bugs).(Applies To Plugin) = (Plugin View: Table)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "0df879e3-e778-11d9-bab6-000c414ce854",
-             "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
-        "attribute": "00040103-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": "0df879e0-e778-11d9-bab6-000c414ce854",
-            "value": "00040301-ce7f-11d9-8cd5-0011113ae5d6"  }
-    },
-    // -----------------------------------------------------------------------
-    // (Section: List of Bugs).(Layout Data) = (Layout Data: Layout data for Table of List of Bugs)
-    // (Layout Data: Layout data for Table of List of Bugs).(Section this layout data belongs to) = (Section: List of Bugs)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "0df879e4-e778-11d9-bab6-000c414ce854",
-             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": ["0df14df0-e778-11d9-bab6-000c414ce854", "0df879e0-e778-11d9-bab6-000c414ce854"],
-        "attribute": ["00040102-ce7f-11d9-8cd5-0011113ae5d6", "00040104-ce7f-11d9-8cd5-0011113ae5d6"]  }
-    }  ]
-  },
-  // =======================================================================
-  { "Transaction": [
-    // -----------------------------------------------------------------------
-    // (Page: Introspection)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Item": { "uuid": "4bfcc9d0-e778-11d9-a869-000c414ce854" } },
-    // -----------------------------------------------------------------------
-    // (Page: Introspection).(Name) = "Introspection"
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "4bfcc9d1-e778-11d9-a869-000c414ce854",
-             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
-        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": "4bfcc9d0-e778-11d9-a869-000c414ce854",
-            "value": "Introspection"  }
-    },
-    // -----------------------------------------------------------------------
-    // (Page: Introspection).(Category) = (Category: Page)
-    // (Category: Page).(Items in Category) = (Page: Introspection)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "4bfcc9d2-e778-11d9-a869-000c414ce854",
-             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": ["4bfcc9d0-e778-11d9-a869-000c414ce854", "00020000-ce7f-11d9-8cd5-0011113ae5d6"],
-        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
-    },
-    // -----------------------------------------------------------------------
-    // (Page: Introspection).(Summary) = "This is the introspection page."
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "4bfcc9d3-e778-11d9-a869-000c414ce854",
-             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
-        "attribute": "00001003-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": "4bfcc9d0-e778-11d9-a869-000c414ce854",
-            "value": "This is the introspection page."  }
-    },
-    // -----------------------------------------------------------------------
-    // (Section: List of Categories)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Item": { "uuid": "4bfcc9d4-e778-11d9-a869-000c414ce854" } },
-    // -----------------------------------------------------------------------
-    // (Section: List of Categories).(Name) = "List of Categories"
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "4bfcc9d5-e778-11d9-a869-000c414ce854",
-             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
-        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": "4bfcc9d4-e778-11d9-a869-000c414ce854",
-            "value": "List of Categories"  }
-    },
-    // -----------------------------------------------------------------------
-    // (Section: List of Categories).(Category) = (Category: Section)
-    // (Category: Section).(Items in Category) = (Section: List of Categories)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "4bfcc9d6-e778-11d9-a869-000c414ce854",
-             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": ["4bfcc9d4-e778-11d9-a869-000c414ce854", "00020100-ce7f-11d9-8cd5-0011113ae5d6"],
-        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
-    },
-    // -----------------------------------------------------------------------
-    // (Page: Introspection).(Sections In Page) = (Section: List of Categories)
-    // (Section: List of Categories).(Page this section appears on) = (Page: Introspection)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "4bfcc9d7-e778-11d9-a869-000c414ce854",
-             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": ["4bfcc9d0-e778-11d9-a869-000c414ce854", "4bfcc9d4-e778-11d9-a869-000c414ce854"],
-        "attribute": ["00030000-ce7f-11d9-8cd5-0011113ae5d6", "00030001-ce7f-11d9-8cd5-0011113ae5d6"]  }
-    },
-    // -----------------------------------------------------------------------
-    // (Section: List of Categories).(Plugin View) = (Plugin View: Table)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "4bff3ad0-e778-11d9-a869-000c414ce854",
-             "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
-        "attribute": "00040101-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": "4bfcc9d4-e778-11d9-a869-000c414ce854",
-            "value": "00040301-ce7f-11d9-8cd5-0011113ae5d6"  }
-    },
-    // -----------------------------------------------------------------------
-    // (Query Spec: New Query)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Item": { "uuid": "4bff3ad1-e778-11d9-a869-000c414ce854" } },
-    // -----------------------------------------------------------------------
-    // (Query Spec: New Query).(Name) = "New Query"
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "4bff3ad2-e778-11d9-a869-000c414ce854",
-             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
-        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": "4bff3ad1-e778-11d9-a869-000c414ce854",
-            "value": "New Query"  }
-    },
-    // -----------------------------------------------------------------------
-    // (Query Spec: New Query).(Category) = (Category: Query Spec)
-    // (Category: Query Spec).(Items in Category) = (Query Spec: New Query)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "4bff3ad3-e778-11d9-a869-000c414ce854",
-             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": ["4bff3ad1-e778-11d9-a869-000c414ce854", "00001212-ce7f-11d9-8cd5-0011113ae5d6"],
-        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
-    },
-    // -----------------------------------------------------------------------
-    // (Section: List of Categories).(Query Spec) = (Query Spec: New Query)
-    // (Query Spec: New Query).(Section this query spec belongs to) = (Section: List of Categories)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "4bff3ad4-e778-11d9-a869-000c414ce854",
-             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": ["4bfcc9d4-e778-11d9-a869-000c414ce854", "4bff3ad1-e778-11d9-a869-000c414ce854"],
-        "attribute": ["00001006-ce7f-11d9-8cd5-0011113ae5d6", "00040105-ce7f-11d9-8cd5-0011113ae5d6"]  }
-    }  ]
-  },
-  // =======================================================================
-  { "Transaction": [
-    // -----------------------------------------------------------------------
-    // (Layout Data: Layout data for Table of List of Categories)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Item": { "uuid": "4c063fb0-e778-11d9-a869-000c414ce854" } },
-    // -----------------------------------------------------------------------
-    // (Layout Data: Layout data for Table of List of Categories).(Name) = "Layout data for Table of List of Categories"
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "4c063fb1-e778-11d9-a869-000c414ce854",
-             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
-        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": "4c063fb0-e778-11d9-a869-000c414ce854",
-            "value": "Layout data for Table of List of Categories"  }
-    },
-    // -----------------------------------------------------------------------
-    // (Layout Data: Layout data for Table of List of Categories).(Category) = (Category: Layout Data)
-    // (Category: Layout Data).(Items in Category) = (Layout Data: Layout data for Table of List of Categories)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "4c063fb2-e778-11d9-a869-000c414ce854",
-             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": ["4c063fb0-e778-11d9-a869-000c414ce854", "00040202-ce7f-11d9-8cd5-0011113ae5d6"],
-        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
-    },
-    // -----------------------------------------------------------------------
-    // (Layout Data: Layout data for Table of List of Categories).(Applies To Plugin) = (Plugin View: Table)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "4c063fb3-e778-11d9-a869-000c414ce854",
-             "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
-        "attribute": "00040103-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": "4c063fb0-e778-11d9-a869-000c414ce854",
-            "value": "00040301-ce7f-11d9-8cd5-0011113ae5d6"  }
-    },
-    // -----------------------------------------------------------------------
-    // (Section: List of Categories).(Layout Data) = (Layout Data: Layout data for Table of List of Categories)
-    // (Layout Data: Layout data for Table of List of Categories).(Section this layout data belongs to) = (Section: List of Categories)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "4c063fb4-e778-11d9-a869-000c414ce854",
-             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": ["4bfcc9d4-e778-11d9-a869-000c414ce854", "4c063fb0-e778-11d9-a869-000c414ce854"],
-        "attribute": ["00040102-ce7f-11d9-8cd5-0011113ae5d6", "00040104-ce7f-11d9-8cd5-0011113ae5d6"]  }
-    }  ]
-  },
-  // -----------------------------------------------------------------------
-  // (Query Spec: New Query).(Matching Value) = (Category: Category)
-  //           by (Brian) on (Jun 27, 2005)
-  { "Entry": {
-           "uuid": "7fb1c9b0-e778-11d9-a7da-000c414ce854",
-           "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
-      "attribute": "00001007-ce7f-11d9-8cd5-0011113ae5d6",
-           "item": "4bff3ad1-e778-11d9-a869-000c414ce854",
-          "value": "00001211-ce7f-11d9-8cd5-0011113ae5d6"  }
-  },
-  // -----------------------------------------------------------------------
-  // (Query Spec: New Query).(Matching Value) = (Category: Person)
-  //           by (Brian) on (Jun 27, 2005)
-  { "Entry": {
-           "uuid": "9c0d9d50-e778-11d9-a7da-000c414ce854",
-           "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
-      "attribute": "00001007-ce7f-11d9-8cd5-0011113ae5d6",
-           "item": "82cca5a8-e775-11d9-89df-000c414ce854",
-          "value": "00001201-ce7f-11d9-8cd5-0011113ae5d6"  }
-  },
-  // =======================================================================
-  { "Transaction": [
-    // -----------------------------------------------------------------------
-    // (Category: Iteration)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Item": { "uuid": "a5dc24a0-e778-11d9-a7da-000c414ce854" } },
-    // -----------------------------------------------------------------------
-    // (Category: Iteration).(Name) = "Iteration"
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "aa24f1e0-e778-11d9-a7da-000c414ce854",
-             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
-        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": "a5dc24a0-e778-11d9-a7da-000c414ce854",
-            "value": "Iteration"  }
-    },
-    // -----------------------------------------------------------------------
-    // (Category: Iteration).(Category) = (Category: Category)
-    // (Category: Category).(Items in Category) = (Category: Iteration)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "aa24f1e1-e778-11d9-a7da-000c414ce854",
-             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": ["a5dc24a0-e778-11d9-a7da-000c414ce854", "00001211-ce7f-11d9-8cd5-0011113ae5d6"],
-        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
-    }  ]
-  },
-  // =======================================================================
-  { "Transaction": [
-    // -----------------------------------------------------------------------
-    // (Category: User Story)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Item": { "uuid": "aa273bd0-e778-11d9-a7da-000c414ce854" } },
-    // -----------------------------------------------------------------------
-    // (Category: User Story).(Name) = "User Story"
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "b1532bd0-e778-11d9-a7da-000c414ce854",
-             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
-        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": "aa273bd0-e778-11d9-a7da-000c414ce854",
-            "value": "User Story"  }
-    },
-    // -----------------------------------------------------------------------
-    // (Category: User Story).(Category) = (Category: Category)
-    // (Category: Category).(Items in Category) = (Category: User Story)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "b1532bd1-e778-11d9-a7da-000c414ce854",
-             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": ["aa273bd0-e778-11d9-a7da-000c414ce854", "00001211-ce7f-11d9-8cd5-0011113ae5d6"],
-        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
-    }  ]
-  },
-  // =======================================================================
-  { "Transaction": [
-    // -----------------------------------------------------------------------
-    // (Category: Task)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Item": { "uuid": "b15575c0-e778-11d9-a7da-000c414ce854" } },
-    // -----------------------------------------------------------------------
-    // (Category: Task).(Name) = "Task"
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "b3f37930-e778-11d9-a7da-000c414ce854",
-             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
-        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": "b15575c0-e778-11d9-a7da-000c414ce854",
-            "value": "Task"  }
-    },
-    // -----------------------------------------------------------------------
-    // (Category: Task).(Category) = (Category: Category)
-    // (Category: Category).(Items in Category) = (Category: Task)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "b3f37931-e778-11d9-a7da-000c414ce854",
-             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": ["b15575c0-e778-11d9-a7da-000c414ce854", "00001211-ce7f-11d9-8cd5-0011113ae5d6"],
-        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
-    }  ]
-  },
-  // =======================================================================
-  { "Transaction": [
-    // -----------------------------------------------------------------------
-    // (Category: Bug)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Item": { "uuid": "b3f37932-e778-11d9-a7da-000c414ce854" } },
-    // -----------------------------------------------------------------------
-    // (Category: Bug).(Name) = "Bug"
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "b6a46860-e778-11d9-a7da-000c414ce854",
-             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
-        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": "b3f37932-e778-11d9-a7da-000c414ce854",
-            "value": "Bug"  }
-    },
-    // -----------------------------------------------------------------------
-    // (Category: Bug).(Category) = (Category: Category)
-    // (Category: Category).(Items in Category) = (Category: Bug)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "b6a46861-e778-11d9-a7da-000c414ce854",
-             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": ["b3f37932-e778-11d9-a7da-000c414ce854", "00001211-ce7f-11d9-8cd5-0011113ae5d6"],
-        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
-    }  ]
-  },
-  // -----------------------------------------------------------------------
-  // (Query Spec: New Query).(Matching Value) = (Category: Iteration)
-  //           by (Brian) on (Jun 27, 2005)
-  { "Entry": {
-           "uuid": "bb8cf810-e778-11d9-a7da-000c414ce854",
-           "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
-      "attribute": "00001007-ce7f-11d9-8cd5-0011113ae5d6",
-           "item": "5555ef89-e777-11d9-8aaf-000c414ce854",
-          "value": "a5dc24a0-e778-11d9-a7da-000c414ce854"  }
-  },
-  // -----------------------------------------------------------------------
-  // (Query Spec: New Query).(Matching Value) = (Category: User Story)
-  //           by (Brian) on (Jun 27, 2005)
-  { "Entry": {
-           "uuid": "c6262260-e778-11d9-a7da-000c414ce854",
-           "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
-      "attribute": "00001007-ce7f-11d9-8cd5-0011113ae5d6",
-           "item": "a7ef69b9-e777-11d9-80cf-000c414ce854",
-          "value": "aa273bd0-e778-11d9-a7da-000c414ce854"  }
-  },
-  // -----------------------------------------------------------------------
-  // (Query Spec: New Query).(Matching Value) = (Category: Task)
-  //           by (Brian) on (Jun 27, 2005)
-  { "Entry": {
-           "uuid": "c9283ed0-e778-11d9-a7da-000c414ce854",
-           "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
-      "attribute": "00001007-ce7f-11d9-8cd5-0011113ae5d6",
-           "item": "d99a41b9-e777-11d9-8b8e-000c414ce854",
-          "value": "b15575c0-e778-11d9-a7da-000c414ce854"  }
-  },
-  // -----------------------------------------------------------------------
-  // (Query Spec: New Query).(Matching Value) = (Category: Bug)
-  //           by (Brian) on (Jun 27, 2005)
-  { "Entry": {
-           "uuid": "cd0ccc00-e778-11d9-a7da-000c414ce854",
-           "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
-      "attribute": "00001007-ce7f-11d9-8cd5-0011113ae5d6",
-           "item": "0df14df5-e778-11d9-bab6-000c414ce854",
-          "value": "b3f37932-e778-11d9-a7da-000c414ce854"  }
-  },
-  // =======================================================================
-  { "Transaction": [
-    // -----------------------------------------------------------------------
-    // (Iteration: Iteration 1)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Item": { "uuid": "ceb795d0-e778-11d9-a7da-000c414ce854" } },
-    // -----------------------------------------------------------------------
-    // (Iteration: Iteration 1).(Name) = "Iteration 1"
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "e0d99d30-e778-11d9-a7da-000c414ce854",
-             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
-        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": "ceb795d0-e778-11d9-a7da-000c414ce854",
-            "value": "Iteration 1"  }
-    },
-    // -----------------------------------------------------------------------
-    // (Iteration: Iteration 1).(Category) = (Category: Iteration)
-    // (Category: Iteration).(Items in Category) = (Iteration: Iteration 1)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "e0d99d31-e778-11d9-a7da-000c414ce854",
-             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": ["ceb795d0-e778-11d9-a7da-000c414ce854", "a5dc24a0-e778-11d9-a7da-000c414ce854"],
-        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
-    }  ]
-  },
-  // =======================================================================
-  { "Transaction": [
-    // -----------------------------------------------------------------------
-    // (Iteration: Iteration 2)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Item": { "uuid": "e0dc0e30-e778-11d9-a7da-000c414ce854" } },
-    // -----------------------------------------------------------------------
-    // (Iteration: Iteration 2).(Name) = "Iteration 2"
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "e2a0efb0-e778-11d9-a7da-000c414ce854",
-             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
-        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": "e0dc0e30-e778-11d9-a7da-000c414ce854",
-            "value": "Iteration 2"  }
-    },
-    // -----------------------------------------------------------------------
-    // (Iteration: Iteration 2).(Category) = (Category: Iteration)
-    // (Category: Iteration).(Items in Category) = (Iteration: Iteration 2)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "e2a0efb1-e778-11d9-a7da-000c414ce854",
-             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": ["e0dc0e30-e778-11d9-a7da-000c414ce854", "a5dc24a0-e778-11d9-a7da-000c414ce854"],
-        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
-    }  ]
-  },
-  // =======================================================================
-  { "Transaction": [
-    // -----------------------------------------------------------------------
-    // (Iteration: Iteration 3)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Item": { "uuid": "e2a360b0-e778-11d9-a7da-000c414ce854" } },
-    // -----------------------------------------------------------------------
-    // (Iteration: Iteration 3).(Name) = "Iteration 3"
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "e7208460-e778-11d9-a7da-000c414ce854",
-             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
-        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": "e2a360b0-e778-11d9-a7da-000c414ce854",
-            "value": "Iteration 3"  }
-    },
-    // -----------------------------------------------------------------------
-    // (Iteration: Iteration 3).(Category) = (Category: Iteration)
-    // (Category: Iteration).(Items in Category) = (Iteration: Iteration 3)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "e7208461-e778-11d9-a7da-000c414ce854",
-             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": ["e2a360b0-e778-11d9-a7da-000c414ce854", "a5dc24a0-e778-11d9-a7da-000c414ce854"],
-        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
-    }  ]
-  },
-  // =======================================================================
-  { "Transaction": [
-    // -----------------------------------------------------------------------
-    // (Iteration: Iteration 4)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Item": { "uuid": "e7208462-e778-11d9-a7da-000c414ce854" } },
-    // -----------------------------------------------------------------------
-    // (Iteration: Iteration 4).(Name) = "Iteration 4"
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "ecdae300-e778-11d9-a7da-000c414ce854",
-             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
-        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": "e7208462-e778-11d9-a7da-000c414ce854",
-            "value": "Iteration 4"  }
-    },
-    // -----------------------------------------------------------------------
-    // (Iteration: Iteration 4).(Category) = (Category: Iteration)
-    // (Category: Iteration).(Items in Category) = (Iteration: Iteration 4)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "ecdae301-e778-11d9-a7da-000c414ce854",
-             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": ["e7208462-e778-11d9-a7da-000c414ce854", "a5dc24a0-e778-11d9-a7da-000c414ce854"],
-        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
-    }  ]
-  },
-  // -----------------------------------------------------------------------
-  // (Layout Data: Layout data for Table of List of Iterations).(Table Columns) = (Attribute: Short Name)
-  //           by (Brian) on (Jun 27, 2005)
-  { "Entry": {
-           "uuid": "f117a251-e778-11d9-a7da-000c414ce854",
-           "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
-      "attribute": "0004010a-ce7f-11d9-8cd5-0011113ae5d6",
-           "item": "555d1b70-e777-11d9-8aaf-000c414ce854",
-          "value": "00001002-ce7f-11d9-8cd5-0011113ae5d6"  }
-  },
-  // -----------------------------------------------------------------------
-  // (Layout Data: Layout data for Table of List of Iterations).(Table Columns) = (Attribute: Name)
-  //           by (Brian) on (Jun 27, 2005)
-  { "Entry": {
-           "uuid": "f117a250-e778-11d9-a7da-000c414ce854",
-           "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
-      "attribute": "0004010a-ce7f-11d9-8cd5-0011113ae5d6",
-           "item": "555d1b70-e777-11d9-8aaf-000c414ce854",
-          "value": "00001001-ce7f-11d9-8cd5-0011113ae5d6"  }
-  },
-  // -----------------------------------------------------------------------
-  // (Iteration: Iteration 1).(Short Name) = "Iteration 1"
-  //           by (Brian) on (Jun 27, 2005)
-  { "Entry": {
-           "uuid": "f53f04e0-e778-11d9-a7da-000c414ce854",
-           "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
-      "attribute": "00001002-ce7f-11d9-8cd5-0011113ae5d6",
-           "item": "ceb795d0-e778-11d9-a7da-000c414ce854",
-          "value": "Iteration 1"  }
-  },
-  // -----------------------------------------------------------------------
-  // (Iteration: Iteration 2).(Short Name) = "Iteration 2"
-  //           by (Brian) on (Jun 27, 2005)
-  { "Entry": {
-           "uuid": "f6f0d390-e778-11d9-a7da-000c414ce854",
-           "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
-      "attribute": "00001002-ce7f-11d9-8cd5-0011113ae5d6",
-           "item": "e0dc0e30-e778-11d9-a7da-000c414ce854",
-          "value": "Iteration 2"  }
-  },
-  // -----------------------------------------------------------------------
-  // (Iteration: Iteration 3).(Short Name) = "Iteration 3"
-  //           by (Brian) on (Jun 27, 2005)
-  { "Entry": {
-           "uuid": "f89b9d60-e778-11d9-a7da-000c414ce854",
-           "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
-      "attribute": "00001002-ce7f-11d9-8cd5-0011113ae5d6",
-           "item": "e2a360b0-e778-11d9-a7da-000c414ce854",
-          "value": "Iteration 3"  }
-  },
-  // -----------------------------------------------------------------------
-  // (Iteration: Iteration 4).(Short Name) = "Iteration 4"
-  //           by (Brian) on (Jun 27, 2005)
-  { "Entry": {
-           "uuid": "fc8c3880-e778-11d9-a7da-000c414ce854",
-           "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
-      "attribute": "00001002-ce7f-11d9-8cd5-0011113ae5d6",
-           "item": "e7208462-e778-11d9-a7da-000c414ce854",
-          "value": "Iteration 4"  }
-  },
-  // -----------------------------------------------------------------------
-  // (Iteration: Iteration 1).(Name) = "Iteration 1 - May 2005"
-  //           by (Brian) on (Jun 27, 2005)
-  { "Entry": {
-           "uuid": "113b7a70-e779-11d9-a7da-000c414ce854",
-  "previousEntry": "e0d99d30-e778-11d9-a7da-000c414ce854",
-           "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
-      "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
-           "item": "ceb795d0-e778-11d9-a7da-000c414ce854",
-          "value": "Iteration 1 - May 2005"  }
-  },
-  // -----------------------------------------------------------------------
-  // (Iteration: Iteration 1).(Name) = "Iteration 1 ? May 2005"
-  //           by (Brian) on (Jun 27, 2005)
-  { "Entry": {
-           "uuid": "26d20f20-e779-11d9-a7da-000c414ce854",
-  "previousEntry": "113b7a70-e779-11d9-a7da-000c414ce854",
-           "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
-      "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
-           "item": "ceb795d0-e778-11d9-a7da-000c414ce854",
-          "value": "Iteration 1 ? May 2005"  }
-  },
-  // -----------------------------------------------------------------------
-  // (Iteration: Iteration 2).(Name) = "Iteration 2 ? June 2005"
-  //           by (Brian) on (Jun 27, 2005)
-  { "Entry": {
-           "uuid": "2d8db120-e779-11d9-a7da-000c414ce854",
-  "previousEntry": "e2a0efb0-e778-11d9-a7da-000c414ce854",
-           "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
-      "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
-           "item": "e0dc0e30-e778-11d9-a7da-000c414ce854",
-          "value": "Iteration 2 ? June 2005"  }
-  },
-  // -----------------------------------------------------------------------
-  // (Iteration: Iteration 3).(Name) = "Iteration 3 ? July 2005"
-  //           by (Brian) on (Jun 27, 2005)
-  { "Entry": {
-           "uuid": "31b2c9c0-e779-11d9-a7da-000c414ce854",
-  "previousEntry": "e7208460-e778-11d9-a7da-000c414ce854",
-           "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
-      "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
-           "item": "e2a360b0-e778-11d9-a7da-000c414ce854",
-          "value": "Iteration 3 ? July 2005"  }
-  },
-  // =======================================================================
-  { "Transaction": [
-    // -----------------------------------------------------------------------
-    // (Section: New Section)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Item": { "uuid": "4b113be0-e779-11d9-a7da-000c414ce854" } },
-    // -----------------------------------------------------------------------
-    // (Section: New Section).(Name) = "New Section"
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "4b113be1-e779-11d9-a7da-000c414ce854",
-             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
-        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": "4b113be0-e779-11d9-a7da-000c414ce854",
-            "value": "New Section"  }
-    },
-    // -----------------------------------------------------------------------
-    // (Section: New Section).(Category) = (Category: Section)
-    // (Category: Section).(Items in Category) = (Section: New Section)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "4b13ace0-e779-11d9-a7da-000c414ce854",
-             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": ["4b113be0-e779-11d9-a7da-000c414ce854", "00020100-ce7f-11d9-8cd5-0011113ae5d6"],
-        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
-    },
-    // -----------------------------------------------------------------------
-    // (Page: Introspection).(Sections In Page) = (Section: New Section)
-    // (Section: New Section).(Page this section appears on) = (Page: Introspection)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "4b13ace1-e779-11d9-a7da-000c414ce854",
-             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": ["4bfcc9d0-e778-11d9-a869-000c414ce854", "4b113be0-e779-11d9-a7da-000c414ce854"],
-        "attribute": ["00030000-ce7f-11d9-8cd5-0011113ae5d6", "00030001-ce7f-11d9-8cd5-0011113ae5d6"]  }
-    },
-    // -----------------------------------------------------------------------
-    // (Section: New Section).(Plugin View) = (Plugin View: Table)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "4b13ace2-e779-11d9-a7da-000c414ce854",
-             "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
-        "attribute": "00040101-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": "4b113be0-e779-11d9-a7da-000c414ce854",
-            "value": "00040301-ce7f-11d9-8cd5-0011113ae5d6"  }
-    },
-    // -----------------------------------------------------------------------
-    // (Query Spec: New Query)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Item": { "uuid": "4b13ace3-e779-11d9-a7da-000c414ce854" } },
-    // -----------------------------------------------------------------------
-    // (Query Spec: New Query).(Name) = "New Query"
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "4b13ace4-e779-11d9-a7da-000c414ce854",
-             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
-        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": "4b13ace3-e779-11d9-a7da-000c414ce854",
-            "value": "New Query"  }
-    },
-    // -----------------------------------------------------------------------
-    // (Query Spec: New Query).(Category) = (Category: Query Spec)
-    // (Category: Query Spec).(Items in Category) = (Query Spec: New Query)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "4b13ace5-e779-11d9-a7da-000c414ce854",
-             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": ["4b13ace3-e779-11d9-a7da-000c414ce854", "00001212-ce7f-11d9-8cd5-0011113ae5d6"],
-        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
-    },
-    // -----------------------------------------------------------------------
-    // (Section: New Section).(Query Spec) = (Query Spec: New Query)
-    // (Query Spec: New Query).(Section this query spec belongs to) = (Section: New Section)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "4b13ace6-e779-11d9-a7da-000c414ce854",
-             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": ["4b113be0-e779-11d9-a7da-000c414ce854", "4b13ace3-e779-11d9-a7da-000c414ce854"],
-        "attribute": ["00001006-ce7f-11d9-8cd5-0011113ae5d6", "00040105-ce7f-11d9-8cd5-0011113ae5d6"]  }
-    }  ]
-  },
-  // =======================================================================
-  { "Transaction": [
-    // -----------------------------------------------------------------------
-    // (Layout Data: Layout data for Table of New Section)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Item": { "uuid": "4b1867d0-e779-11d9-a7da-000c414ce854" } },
-    // -----------------------------------------------------------------------
-    // (Layout Data: Layout data for Table of New Section).(Name) = "Layout data for Table of New Section"
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "4b1867d1-e779-11d9-a7da-000c414ce854",
-             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
-        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": "4b1867d0-e779-11d9-a7da-000c414ce854",
-            "value": "Layout data for Table of New Section"  }
-    },
-    // -----------------------------------------------------------------------
-    // (Layout Data: Layout data for Table of New Section).(Category) = (Category: Layout Data)
-    // (Category: Layout Data).(Items in Category) = (Layout Data: Layout data for Table of New Section)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "4b1867d2-e779-11d9-a7da-000c414ce854",
-             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": ["4b1867d0-e779-11d9-a7da-000c414ce854", "00040202-ce7f-11d9-8cd5-0011113ae5d6"],
-        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
-    },
-    // -----------------------------------------------------------------------
-    // (Layout Data: Layout data for Table of New Section).(Applies To Plugin) = (Plugin View: Table)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "4b1867d3-e779-11d9-a7da-000c414ce854",
-             "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
-        "attribute": "00040103-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": "4b1867d0-e779-11d9-a7da-000c414ce854",
-            "value": "00040301-ce7f-11d9-8cd5-0011113ae5d6"  }
-    },
-    // -----------------------------------------------------------------------
-    // (Section: New Section).(Layout Data) = (Layout Data: Layout data for Table of New Section)
-    // (Layout Data: Layout data for Table of New Section).(Section this layout data belongs to) = (Section: New Section)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "4b1867d4-e779-11d9-a7da-000c414ce854",
-             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": ["4b113be0-e779-11d9-a7da-000c414ce854", "4b1867d0-e779-11d9-a7da-000c414ce854"],
-        "attribute": ["00040102-ce7f-11d9-8cd5-0011113ae5d6", "00040104-ce7f-11d9-8cd5-0011113ae5d6"]  }
-    }  ]
-  },
-  // -----------------------------------------------------------------------
-  // (Query Spec: New Query).(Matching Value) = (Category: Attribute)
-  //           by (Brian) on (Jun 27, 2005)
-  { "Entry": {
-           "uuid": "556c72d0-e779-11d9-a7da-000c414ce854",
-           "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
-      "attribute": "00001007-ce7f-11d9-8cd5-0011113ae5d6",
-           "item": "4b13ace3-e779-11d9-a7da-000c414ce854",
-          "value": "00001210-ce7f-11d9-8cd5-0011113ae5d6"  }
-  },
-  // -----------------------------------------------------------------------
-  // (Section: List of Attributes).(Name) = "List of Attributes"
-  //           by (Brian) on (Jun 27, 2005)
-  { "Entry": {
-           "uuid": "5ee9f3f0-e779-11d9-a7da-000c414ce854",
-  "previousEntry": "4b113be1-e779-11d9-a7da-000c414ce854",
-           "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
-      "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
-           "item": "4b113be0-e779-11d9-a7da-000c414ce854",
-          "value": "List of Attributes"  }
-  },
-  // =======================================================================
-  { "Transaction": [
-    // -----------------------------------------------------------------------
-    // (User Story: Deletion)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Item": { "uuid": "add58150-e779-11d9-93ea-000c414ce854" } },
-    // -----------------------------------------------------------------------
-    // (User Story: Deletion).(Name) = "Deletion"
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "b3f3f8f0-e779-11d9-93ea-000c414ce854",
-             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
-        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": "add58150-e779-11d9-93ea-000c414ce854",
-            "value": "Deletion"  }
-    },
-    // -----------------------------------------------------------------------
-    // (User Story: Deletion).(Category) = (Category: User Story)
-    // (Category: User Story).(Items in Category) = (User Story: Deletion)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "b3f3f8f1-e779-11d9-93ea-000c414ce854",
-             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": ["add58150-e779-11d9-93ea-000c414ce854", "aa273bd0-e778-11d9-a7da-000c414ce854"],
-        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
-    }  ]
-  },
-  // -----------------------------------------------------------------------
-  // (Layout Data: Layout data for Table of List of Stories).(Table Columns) = (Attribute: Name)
-  //           by (Brian) on (Jun 27, 2005)
-  { "Entry": {
-           "uuid": "b8f42f50-e779-11d9-93ea-000c414ce854",
-           "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
-      "attribute": "0004010a-ce7f-11d9-8cd5-0011113ae5d6",
-           "item": "a7f8df90-e777-11d9-80cf-000c414ce854",
-          "value": "00001001-ce7f-11d9-8cd5-0011113ae5d6"  }
-  },
-  // -----------------------------------------------------------------------
-  // (Layout Data: Layout data for Table of List of Stories).(Table Columns) = (Attribute: Summary)
-  //           by (Brian) on (Jun 27, 2005)
-  { "Entry": {
-           "uuid": "b8f42f51-e779-11d9-93ea-000c414ce854",
-           "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
-      "attribute": "0004010a-ce7f-11d9-8cd5-0011113ae5d6",
-           "item": "a7f8df90-e777-11d9-80cf-000c414ce854",
-          "value": "00001003-ce7f-11d9-8cd5-0011113ae5d6"  }
-  },
-  // -----------------------------------------------------------------------
-  // (User Story: Deletion).(Summary) = "A logged-in user can delete items"
-  //           by (Brian) on (Jun 27, 2005)
-  { "Entry": {
-           "uuid": "bac78fc0-e779-11d9-93ea-000c414ce854",
-           "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
-      "attribute": "00001003-ce7f-11d9-8cd5-0011113ae5d6",
-           "item": "add58150-e779-11d9-93ea-000c414ce854",
-          "value": "A logged-in user can delete items"  }
-  },
-  // =======================================================================
-  { "Transaction": [
-    // -----------------------------------------------------------------------
-    // (User Story: Reliable data-store)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Item": { "uuid": "b8f6a050-e779-11d9-93ea-000c414ce854" } },
-    // -----------------------------------------------------------------------
-    // (User Story: Reliable data-store).(Name) = "Reliable data-store"
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "ccdb3f40-e779-11d9-93ea-000c414ce854",
-             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
-        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": "b8f6a050-e779-11d9-93ea-000c414ce854",
-            "value": "Reliable data-store"  }
-    },
-    // -----------------------------------------------------------------------
-    // (User Story: Reliable data-store).(Category) = (Category: User Story)
-    // (Category: User Story).(Items in Category) = (User Story: Reliable data-store)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "ccdb3f41-e779-11d9-93ea-000c414ce854",
-             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": ["b8f6a050-e779-11d9-93ea-000c414ce854", "aa273bd0-e778-11d9-a7da-000c414ce854"],
-        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
-    }  ]
-  },
-  // -----------------------------------------------------------------------
-  // (User Story: Reliable data-store).(Summary) = "Users can trust that data won't be lost."
-  //           by (Brian) on (Jun 27, 2005)
-  { "Entry": {
-           "uuid": "dad39a20-e779-11d9-93ea-000c414ce854",
-           "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
-      "attribute": "00001003-ce7f-11d9-8cd5-0011113ae5d6",
-           "item": "b8f6a050-e779-11d9-93ea-000c414ce854",
-          "value": "Users can trust that data won't be lost."  }
-  },
-  // =======================================================================
-  { "Transaction": [
-    // -----------------------------------------------------------------------
-    // (Task: DOM level 2)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Item": { "uuid": "fd8967c0-e779-11d9-93ea-000c414ce854" } },
-    // -----------------------------------------------------------------------
-    // (Task: DOM level 2).(Name) = "DOM level 2"
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "036c35f0-e77a-11d9-93ea-000c414ce854",
-             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
-        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": "fd8967c0-e779-11d9-93ea-000c414ce854",
-            "value": "DOM level 2"  }
-    },
-    // -----------------------------------------------------------------------
-    // (Task: DOM level 2).(Category) = (Category: Task)
-    // (Category: Task).(Items in Category) = (Task: DOM level 2)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "036c35f1-e77a-11d9-93ea-000c414ce854",
-             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": ["fd8967c0-e779-11d9-93ea-000c414ce854", "b15575c0-e778-11d9-a7da-000c414ce854"],
-        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
-    }  ]
-  },
-  // -----------------------------------------------------------------------
-  // (Layout Data: Layout data for Table of List of Tasks).(Table Columns) = (Attribute: Summary)
-  //           by (Brian) on (Jun 27, 2005)
-  { "Entry": {
-           "uuid": "0503ecf1-e77a-11d9-93ea-000c414ce854",
-           "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
-      "attribute": "0004010a-ce7f-11d9-8cd5-0011113ae5d6",
-           "item": "d9a3b790-e777-11d9-8b8e-000c414ce854",
-          "value": "00001003-ce7f-11d9-8cd5-0011113ae5d6"  }
-  },
-  // -----------------------------------------------------------------------
-  // (Layout Data: Layout data for Table of List of Tasks).(Table Columns) = (Attribute: Name)
-  //           by (Brian) on (Jun 27, 2005)
-  { "Entry": {
-           "uuid": "0503ecf0-e77a-11d9-93ea-000c414ce854",
-           "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
-      "attribute": "0004010a-ce7f-11d9-8cd5-0011113ae5d6",
-           "item": "d9a3b790-e777-11d9-8b8e-000c414ce854",
-          "value": "00001001-ce7f-11d9-8cd5-0011113ae5d6"  }
-  },
-  // -----------------------------------------------------------------------
-  // (Task: DOM level 2).(Summary) = "Convert UI code from DOM level 0 to DOM level 2"
-  //           by (Brian) on (Jun 27, 2005)
-  { "Entry": {
-           "uuid": "08598090-e77a-11d9-93ea-000c414ce854",
-           "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
-      "attribute": "00001003-ce7f-11d9-8cd5-0011113ae5d6",
-           "item": "fd8967c0-e779-11d9-93ea-000c414ce854",
-          "value": "Convert UI code from DOM level 0 to DOM level 2"  }
-  },
-  // -----------------------------------------------------------------------
-  // (Layout Data: Layout data for Table of List of Bugs).(Table Columns) = (Attribute: Name)
-  //           by (Brian) on (Jun 27, 2005)
-  { "Entry": {
-           "uuid": "15ed9b60-e77a-11d9-93ea-000c414ce854",
-           "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
-      "attribute": "0004010a-ce7f-11d9-8cd5-0011113ae5d6",
-           "item": "0df879e0-e778-11d9-bab6-000c414ce854",
-          "value": "00001001-ce7f-11d9-8cd5-0011113ae5d6"  }
-  },
-  // -----------------------------------------------------------------------
-  // (Layout Data: Layout data for Table of List of Bugs).(Table Columns) = (Attribute: Summary)
-  //           by (Brian) on (Jun 27, 2005)
-  { "Entry": {
-           "uuid": "15ed9b61-e77a-11d9-93ea-000c414ce854",
-           "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
-      "attribute": "0004010a-ce7f-11d9-8cd5-0011113ae5d6",
-           "item": "0df879e0-e778-11d9-bab6-000c414ce854",
-          "value": "00001003-ce7f-11d9-8cd5-0011113ae5d6"  }
-  },
-  // =======================================================================
-  { "Transaction": [
-    // -----------------------------------------------------------------------
-    // (Bug: Back button)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Item": { "uuid": "15efe550-e77a-11d9-93ea-000c414ce854" } },
-    // -----------------------------------------------------------------------
-    // (Bug: Back button).(Name) = "Back button"
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "18630830-e77a-11d9-93ea-000c414ce854",
-             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
-        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": "15efe550-e77a-11d9-93ea-000c414ce854",
-            "value": "Back button"  }
-    },
-    // -----------------------------------------------------------------------
-    // (Bug: Back button).(Category) = (Category: Bug)
-    // (Category: Bug).(Items in Category) = (Bug: Back button)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "18630831-e77a-11d9-93ea-000c414ce854",
-             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": ["15efe550-e77a-11d9-93ea-000c414ce854", "b3f37932-e778-11d9-a7da-000c414ce854"],
-        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
-    }  ]
-  },
-  // -----------------------------------------------------------------------
-  // (Bug: Back button).(Summary) = "back button is broken."
-  //           by (Brian) on (Jun 27, 2005)
-  { "Entry": {
-           "uuid": "1b81ad50-e77a-11d9-93ea-000c414ce854",
-           "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
-      "attribute": "00001003-ce7f-11d9-8cd5-0011113ae5d6",
-           "item": "15efe550-e77a-11d9-93ea-000c414ce854",
-          "value": "back button is broken."  }
-  },
-  // -----------------------------------------------------------------------
-  // (Bug: Back button).(Summary) = "The back button is broken."
-  //           by (Brian) on (Jun 27, 2005)
-  { "Entry": {
-           "uuid": "1f87a530-e77a-11d9-93ea-000c414ce854",
-  "previousEntry": "1b81ad50-e77a-11d9-93ea-000c414ce854",
-           "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
-      "attribute": "00001003-ce7f-11d9-8cd5-0011113ae5d6",
-           "item": "15efe550-e77a-11d9-93ea-000c414ce854",
-          "value": "The back button is broken."  }
-  },
-  // =======================================================================
-  { "Transaction": [
-    // -----------------------------------------------------------------------
-    // (Attribute: Completion Date)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Item": { "uuid": "3af52130-e77a-11d9-93ea-000c414ce854" } },
-    // -----------------------------------------------------------------------
-    // (Attribute: Completion Date).(Name) = "Completion Date"
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "457ff3a0-e77a-11d9-93ea-000c414ce854",
-             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
-        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": "3af52130-e77a-11d9-93ea-000c414ce854",
-            "value": "Completion Date"  }
-    },
-    // -----------------------------------------------------------------------
-    // (Attribute: Completion Date).(Category) = (Category: Attribute)
-    // (Category: Attribute).(Items in Category) = (Attribute: Completion Date)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "457ff3a1-e77a-11d9-93ea-000c414ce854",
-             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": ["3af52130-e77a-11d9-93ea-000c414ce854", "00001210-ce7f-11d9-8cd5-0011113ae5d6"],
-        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
-    }  ]
-  },
-  // -----------------------------------------------------------------------
-  // (Attribute: Completion Date).(Expected Type) = (Type: Date)
-  //           by (Brian) on (Jun 27, 2005)
-  { "Entry": {
-           "uuid": "4782ef90-e77a-11d9-93ea-000c414ce854",
-           "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
-      "attribute": "0000100a-ce7f-11d9-8cd5-0011113ae5d6",
-           "item": "3af52130-e77a-11d9-93ea-000c414ce854",
-          "value": "00001022-ce7f-11d9-8cd5-0011113ae5d6"  }
-  },
-  // -----------------------------------------------------------------------
-  // (Layout Data: Layout data for Table of List of Iterations).(Table Columns) = (Attribute: Completion Date)
-  //           by (Brian) on (Jun 27, 2005)
-  { "Entry": {
-           "uuid": "572f8a20-e77a-11d9-8196-000c414ce854",
-           "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
-      "attribute": "0004010a-ce7f-11d9-8cd5-0011113ae5d6",
-           "item": "555d1b70-e777-11d9-8aaf-000c414ce854",
-          "value": "3af52130-e77a-11d9-93ea-000c414ce854"  }
-  },
-  // -----------------------------------------------------------------------
-  // (Iteration: Iteration 1).(Completion Date) = "Mon May 30 2005 00:00:00 GMT-0700 (Pacific Standard Time)"
-  //           by (Brian) on (Jun 27, 2005)
-  { "Entry": {
-           "uuid": "6892d560-e77a-11d9-8196-000c414ce854",
-           "type": "00001022-ce7f-11d9-8cd5-0011113ae5d6",
-      "attribute": "3af52130-e77a-11d9-93ea-000c414ce854",
-           "item": "ceb795d0-e778-11d9-a7da-000c414ce854",
-          "value": "Mon May 30 2005 00:00:00 GMT-0700 (Pacific Standard Time)"  }
-  },
-  // -----------------------------------------------------------------------
-  // (Iteration: Iteration 1).(Completion Date) = "Mon Jun 06 2005 00:00:00 GMT-0700 (Pacific Standard Time)"
-  //           by (Brian) on (Jun 27, 2005)
-  { "Entry": {
-           "uuid": "7c85cc30-e77a-11d9-8196-000c414ce854",
-  "previousEntry": "6892d560-e77a-11d9-8196-000c414ce854",
-           "type": "00001022-ce7f-11d9-8cd5-0011113ae5d6",
-      "attribute": "3af52130-e77a-11d9-93ea-000c414ce854",
-           "item": "ceb795d0-e778-11d9-a7da-000c414ce854",
-          "value": "Mon Jun 06 2005 00:00:00 GMT-0700 (Pacific Standard Time)"  }
-  },
-  // -----------------------------------------------------------------------
-  // (Iteration: Iteration 2).(Completion Date) = "Tue Jul 05 2005 00:00:00 GMT-0700 (Pacific Standard Time)"
-  //           by (Brian) on (Jun 27, 2005)
-  { "Entry": {
-           "uuid": "84c88360-e77a-11d9-8196-000c414ce854",
-           "type": "00001022-ce7f-11d9-8cd5-0011113ae5d6",
-      "attribute": "3af52130-e77a-11d9-93ea-000c414ce854",
-           "item": "e0dc0e30-e778-11d9-a7da-000c414ce854",
-          "value": "Tue Jul 05 2005 00:00:00 GMT-0700 (Pacific Standard Time)"  }
-  },
-  // =======================================================================
-  { "Transaction": [
-    // -----------------------------------------------------------------------
-    // (Attribute: Tasks Scheduled)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Item": { "uuid": "99cff770-e77a-11d9-8196-000c414ce854" } },
-    // -----------------------------------------------------------------------
-    // (Attribute: Tasks Scheduled).(Name) = "Tasks Scheduled"
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "dbf938f0-e77a-11d9-8196-000c414ce854",
-             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
-        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": "99cff770-e77a-11d9-8196-000c414ce854",
-            "value": "Tasks Scheduled"  }
-    },
-    // -----------------------------------------------------------------------
-    // (Attribute: Tasks Scheduled).(Category) = (Category: Attribute)
-    // (Category: Attribute).(Items in Category) = (Attribute: Tasks Scheduled)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "dbf938f1-e77a-11d9-8196-000c414ce854",
-             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": ["99cff770-e77a-11d9-8196-000c414ce854", "00001210-ce7f-11d9-8cd5-0011113ae5d6"],
-        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
-    }  ]
-  },
-  // -----------------------------------------------------------------------
-  // (Attribute: Tasks Scheduled).(Expected Type) = (Category: Task)
-  //           by (Brian) on (Jun 27, 2005)
-  { "Entry": {
-           "uuid": "dd877a10-e77a-11d9-8196-000c414ce854",
-           "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
-      "attribute": "0000100a-ce7f-11d9-8cd5-0011113ae5d6",
-           "item": "99cff770-e77a-11d9-8196-000c414ce854",
-          "value": "b15575c0-e778-11d9-a7da-000c414ce854"  }
-  },
-  // =======================================================================
-  { "Transaction": [
-    // -----------------------------------------------------------------------
-    // (Attribute: Scheduled For)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Item": { "uuid": "dbfba9f0-e77a-11d9-8196-000c414ce854" } },
-    // -----------------------------------------------------------------------
-    // (Attribute: Scheduled For).(Name) = "Scheduled For"
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "e26fe2b0-e77a-11d9-8196-000c414ce854",
-             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
-        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": "dbfba9f0-e77a-11d9-8196-000c414ce854",
-            "value": "Scheduled For"  }
-    },
-    // -----------------------------------------------------------------------
-    // (Attribute: Scheduled For).(Category) = (Category: Attribute)
-    // (Category: Attribute).(Items in Category) = (Attribute: Scheduled For)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "e26fe2b1-e77a-11d9-8196-000c414ce854",
-             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": ["dbfba9f0-e77a-11d9-8196-000c414ce854", "00001210-ce7f-11d9-8cd5-0011113ae5d6"],
-        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
-    }  ]
-  },
-  // -----------------------------------------------------------------------
-  // (Attribute: Scheduled For).(Expected Type) = (Category: Iteration)
-  //           by (Brian) on (Jun 27, 2005)
-  { "Entry": {
-           "uuid": "e4ae8810-e77a-11d9-8196-000c414ce854",
-           "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
-      "attribute": "0000100a-ce7f-11d9-8cd5-0011113ae5d6",
-           "item": "dbfba9f0-e77a-11d9-8196-000c414ce854",
-          "value": "a5dc24a0-e778-11d9-a7da-000c414ce854"  }
-  },
-  // -----------------------------------------------------------------------
-  // (Attribute: Tasks Scheduled).(Inverse Attribute) = (Attribute: Scheduled For)
-  // (Attribute: Scheduled For).(Inverse Attribute) = (Attribute: Tasks Scheduled)
-  //           by (Brian) on (Jun 27, 2005)
-  { "Entry": {
-           "uuid": "f6aa69d0-e77a-11d9-964e-000c414ce854",
-           "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
-           "item": ["99cff770-e77a-11d9-8196-000c414ce854", "dbfba9f0-e77a-11d9-8196-000c414ce854"],
-      "attribute": ["0000100b-ce7f-11d9-8cd5-0011113ae5d6", "0000100b-ce7f-11d9-8cd5-0011113ae5d6"]  }
-  },
-  // =======================================================================
-  { "Transaction": [
-    // -----------------------------------------------------------------------
-    // (Attribute: Estimate)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Item": { "uuid": "10f9a490-e77b-11d9-964e-000c414ce854" } },
-    // -----------------------------------------------------------------------
-    // (Attribute: Estimate).(Name) = "Estimate"
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "1d49a6a0-e77b-11d9-964e-000c414ce854",
-             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
-        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": "10f9a490-e77b-11d9-964e-000c414ce854",
-            "value": "Estimate"  }
-    },
-    // -----------------------------------------------------------------------
-    // (Attribute: Estimate).(Category) = (Category: Attribute)
-    // (Category: Attribute).(Items in Category) = (Attribute: Estimate)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "1d49a6a1-e77b-11d9-964e-000c414ce854",
-             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": ["10f9a490-e77b-11d9-964e-000c414ce854", "00001210-ce7f-11d9-8cd5-0011113ae5d6"],
-        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
-    }  ]
-  },
-  // -----------------------------------------------------------------------
-  // (Attribute: Estimate).(Expected Type) = (Type: Number)
-  //           by (Brian) on (Jun 27, 2005)
-  { "Entry": {
-           "uuid": "2113f510-e77b-11d9-964e-000c414ce854",
-           "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
-      "attribute": "0000100a-ce7f-11d9-8cd5-0011113ae5d6",
-           "item": "10f9a490-e77b-11d9-964e-000c414ce854",
-          "value": "00001021-ce7f-11d9-8cd5-0011113ae5d6"  }
-  },
-  // =======================================================================
-  { "Transaction": [
-    // -----------------------------------------------------------------------
-    // (Attribute: Actual)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Item": { "uuid": "1d49a6a2-e77b-11d9-964e-000c414ce854" } },
-    // -----------------------------------------------------------------------
-    // (Attribute: Actual).(Name) = "Actual"
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "23e64ef0-e77b-11d9-964e-000c414ce854",
-             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
-        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": "1d49a6a2-e77b-11d9-964e-000c414ce854",
-            "value": "Actual"  }
-    },
-    // -----------------------------------------------------------------------
-    // (Attribute: Actual).(Category) = (Category: Attribute)
-    // (Category: Attribute).(Items in Category) = (Attribute: Actual)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "23e64ef1-e77b-11d9-964e-000c414ce854",
-             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": ["1d49a6a2-e77b-11d9-964e-000c414ce854", "00001210-ce7f-11d9-8cd5-0011113ae5d6"],
-        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
-    }  ]
-  },
-  // -----------------------------------------------------------------------
-  // (Attribute: Actual).(Expected Type) = (Type: Number)
-  //           by (Brian) on (Jun 27, 2005)
-  { "Entry": {
-           "uuid": "2582c0e0-e77b-11d9-964e-000c414ce854",
-           "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
-      "attribute": "0000100a-ce7f-11d9-8cd5-0011113ae5d6",
-           "item": "1d49a6a2-e77b-11d9-964e-000c414ce854",
-          "value": "00001021-ce7f-11d9-8cd5-0011113ae5d6"  }
-  },
-  // =======================================================================
-  { "Transaction": [
-    // -----------------------------------------------------------------------
-    // (Attribute: Signed-up Person)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Item": { "uuid": "23e8bff0-e77b-11d9-964e-000c414ce854" } },
-    // -----------------------------------------------------------------------
-    // (Attribute: Signed-up Person).(Name) = "Signed-up Person"
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "44c8e330-e77b-11d9-964e-000c414ce854",
-             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
-        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": "23e8bff0-e77b-11d9-964e-000c414ce854",
-            "value": "Signed-up Person"  }
-    },
-    // -----------------------------------------------------------------------
-    // (Attribute: Signed-up Person).(Category) = (Category: Attribute)
-    // (Category: Attribute).(Items in Category) = (Attribute: Signed-up Person)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "44cb5430-e77b-11d9-964e-000c414ce854",
-             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": ["23e8bff0-e77b-11d9-964e-000c414ce854", "00001210-ce7f-11d9-8cd5-0011113ae5d6"],
-        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
-    }  ]
-  },
-  // -----------------------------------------------------------------------
-  // (Attribute: Signed-up Person).(Expected Type) = (Category: Person)
-  //           by (Brian) on (Jun 27, 2005)
-  { "Entry": {
-           "uuid": "464d8760-e77b-11d9-964e-000c414ce854",
-           "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
-      "attribute": "0000100a-ce7f-11d9-8cd5-0011113ae5d6",
-           "item": "23e8bff0-e77b-11d9-964e-000c414ce854",
-          "value": "00001201-ce7f-11d9-8cd5-0011113ae5d6"  }
-  },
-  // =======================================================================
-  { "Transaction": [
-    // -----------------------------------------------------------------------
-    // (Attribute: Tasks signed-up for)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Item": { "uuid": "44cb5431-e77b-11d9-964e-000c414ce854" } },
-    // -----------------------------------------------------------------------
-    // (Attribute: Tasks signed-up for).(Name) = "Tasks signed-up for"
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "516c3560-e77b-11d9-964e-000c414ce854",
-             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
-        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": "44cb5431-e77b-11d9-964e-000c414ce854",
-            "value": "Tasks signed-up for"  }
-    },
-    // -----------------------------------------------------------------------
-    // (Attribute: Tasks signed-up for).(Category) = (Category: Attribute)
-    // (Category: Attribute).(Items in Category) = (Attribute: Tasks signed-up for)
-    //           by (Brian) on (Jun 27, 2005)
-    { "Entry": {
-             "uuid": "516c3561-e77b-11d9-964e-000c414ce854",
-             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": ["44cb5431-e77b-11d9-964e-000c414ce854", "00001210-ce7f-11d9-8cd5-0011113ae5d6"],
-        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
-    }  ]
-  },
-  // -----------------------------------------------------------------------
-  // (Attribute: Tasks signed-up for).(Expected Type) = (Category: Task)
-  //           by (Brian) on (Jun 27, 2005)
-  { "Entry": {
-           "uuid": "52f80580-e77b-11d9-964e-000c414ce854",
-           "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
-      "attribute": "0000100a-ce7f-11d9-8cd5-0011113ae5d6",
-           "item": "44cb5431-e77b-11d9-964e-000c414ce854",
-          "value": "b15575c0-e778-11d9-a7da-000c414ce854"  }
-  },
-  // -----------------------------------------------------------------------
-  // (Attribute: Tasks signed-up for).(Inverse Attribute) = (Attribute: Signed-up Person)
-  // (Attribute: Signed-up Person).(Inverse Attribute) = (Attribute: Tasks signed-up for)
-  //           by (Brian) on (Jun 27, 2005)
-  { "Entry": {
-           "uuid": "6ae02b50-e77b-11d9-95dd-000c414ce854",
-           "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
-           "item": ["44cb5431-e77b-11d9-964e-000c414ce854", "23e8bff0-e77b-11d9-964e-000c414ce854"],
-      "attribute": ["0000100b-ce7f-11d9-8cd5-0011113ae5d6", "0000100b-ce7f-11d9-8cd5-0011113ae5d6"]  }
-  },
-  // -----------------------------------------------------------------------
-  // (Layout Data: Layout data for Table of List of People).(Table Columns) = (Attribute: Name)
-  //           by (Brian) on (Jun 27, 2005)
-  { "Entry": {
-           "uuid": "78f50ee0-e77b-11d9-95dd-000c414ce854",
-           "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
-      "attribute": "0004010a-ce7f-11d9-8cd5-0011113ae5d6",
-           "item": "82d3d190-e775-11d9-89df-000c414ce854",
-          "value": "00001001-ce7f-11d9-8cd5-0011113ae5d6"  }
-  },
-  // -----------------------------------------------------------------------
-  // (Layout Data: Layout data for Table of List of People).(Table Columns) = (Attribute: Tasks signed-up for)
-  //           by (Brian) on (Jun 27, 2005)
-  { "Entry": {
-           "uuid": "78f50ee1-e77b-11d9-95dd-000c414ce854",
-           "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
-      "attribute": "0004010a-ce7f-11d9-8cd5-0011113ae5d6",
-           "item": "82d3d190-e775-11d9-89df-000c414ce854",
-          "value": "44cb5431-e77b-11d9-964e-000c414ce854"  }
-  },
-  // -----------------------------------------------------------------------
-  // (Layout Data: Layout data for Table of List of People).(Table Columns) = (Attribute: Short Name)
-  //           by (Brian) on (Jun 27, 2005)
-  { "Entry": {
-           "uuid": "78f2c4f0-e77b-11d9-95dd-000c414ce854",
-           "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
-      "attribute": "0004010a-ce7f-11d9-8cd5-0011113ae5d6",
-           "item": "82d3d190-e775-11d9-89df-000c414ce854",
-          "value": "00001002-ce7f-11d9-8cd5-0011113ae5d6"  }
-  },
-  // -----------------------------------------------------------------------
-  // (Layout Data: Layout data for Table of List of Tasks).(Table Columns) = (Attribute: Signed-up Person)
-  //           by (Brian) on (Jun 27, 2005)
-  { "Entry": {
-           "uuid": "85475ae0-e77b-11d9-95dd-000c414ce854",
-           "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
-      "attribute": "0004010a-ce7f-11d9-8cd5-0011113ae5d6",
-           "item": "d9a3b790-e777-11d9-8b8e-000c414ce854",
-          "value": "23e8bff0-e77b-11d9-964e-000c414ce854"  }
-  },
-  // -----------------------------------------------------------------------
-  // (Layout Data: Layout data for Table of List of Tasks).(Table Columns) = (Attribute: Estimate)
-  //           by (Brian) on (Jun 27, 2005)
-  { "Entry": {
-           "uuid": "8bd84360-e77b-11d9-95dd-000c414ce854",
-           "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
-      "attribute": "0004010a-ce7f-11d9-8cd5-0011113ae5d6",
-           "item": "d9a3b790-e777-11d9-8b8e-000c414ce854",
-          "value": "10f9a490-e77b-11d9-964e-000c414ce854"  }
-  },
-  // -----------------------------------------------------------------------
-  // (Layout Data: Layout data for Table of List of Tasks).(Table Columns) = (Attribute: Actual)
-  //           by (Brian) on (Jun 27, 2005)
-  { "Entry": {
-           "uuid": "932ca2f0-e77b-11d9-95dd-000c414ce854",
-           "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
-      "attribute": "0004010a-ce7f-11d9-8cd5-0011113ae5d6",
-           "item": "d9a3b790-e777-11d9-8b8e-000c414ce854",
-          "value": "1d49a6a2-e77b-11d9-964e-000c414ce854"  }
-  },
-  // -----------------------------------------------------------------------
-  // (Layout Data: Layout data for Table of List of Tasks).(Table Columns) = (Attribute: Scheduled For)
-  //           by (Brian) on (Jun 27, 2005)
-  { "Entry": {
-           "uuid": "a9c71310-e77b-11d9-95dd-000c414ce854",
-           "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
-      "attribute": "0004010a-ce7f-11d9-8cd5-0011113ae5d6",
-           "item": "d9a3b790-e777-11d9-8b8e-000c414ce854",
-          "value": "dbfba9f0-e77a-11d9-8196-000c414ce854"  }
-  },
-  // -----------------------------------------------------------------------
-  // (Layout Data: Layout data for Table of List of Iterations).(Table Columns) = (Attribute: Tasks Scheduled)
-  //           by (Brian) on (Jun 27, 2005)
-  { "Entry": {
-           "uuid": "b95242f0-e77b-11d9-95dd-000c414ce854",
-           "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
-      "attribute": "0004010a-ce7f-11d9-8cd5-0011113ae5d6",
-           "item": "555d1b70-e777-11d9-8aaf-000c414ce854",
-          "value": "99cff770-e77a-11d9-8196-000c414ce854"  }
-  }
\ No newline at end of file



From skinner at berlios.de  Sun Jul  3 02:42:25 2005
From: skinner at berlios.de (Brian Douglas Skinner at BerliOS)
Date: Sun, 3 Jul 2005 02:42:25 +0200
Subject: [openrecord-svn] r213 - trunk/source
Message-ID: <200507030042.j630gPif005104@sheep.berlios.de>

Author: skinner
Date: 2005-07-03 02:42:23 +0200 (Sun, 03 Jul 2005)
New Revision: 213

Removed:
   trunk/source/repositories/
Log:
moved the repositories directory up out of /source



From skinner at berlios.de  Sun Jul  3 05:00:22 2005
From: skinner at berlios.de (Brian Douglas Skinner at BerliOS)
Date: Sun, 3 Jul 2005 05:00:22 +0200
Subject: [openrecord-svn] r214 - in trunk/source: . view
Message-ID: <200507030300.j6330M6F017409@sheep.berlios.de>

Author: skinner
Date: 2005-07-03 05:00:10 +0200 (Sun, 03 Jul 2005)
New Revision: 214

Modified:
   trunk/source/BarChartPlugin.js
   trunk/source/DetailPlugin.js
   trunk/source/ItemView.js
   trunk/source/LoginView.js
   trunk/source/MultiEntriesView.js
   trunk/source/NavbarView.js
   trunk/source/OutlinePlugin.js
   trunk/source/PageView.js
   trunk/source/PluginView.js
   trunk/source/RootView.js
   trunk/source/SectionView.js
   trunk/source/TablePlugin.js
   trunk/source/View.js
   trunk/source/base_style.css
   trunk/source/view/EntryView.js
Log:
Started the task of re-organizing our CSS approach.

Modified: trunk/source/BarChartPlugin.js
===================================================================
--- trunk/source/BarChartPlugin.js	2005-07-03 00:42:23 UTC (rev 213)
+++ trunk/source/BarChartPlugin.js	2005-07-03 03:00:10 UTC (rev 214)
@@ -58,7 +58,7 @@
  */
 BarChartPlugin.prototype = new PluginView();  // makes BarChartPlugin be a subclass of PluginView
 function BarChartPlugin(superview, htmlElement, querySpec, layoutItem) {
-  PluginView.call(this, superview, htmlElement, querySpec, layoutItem);
+  PluginView.call(this, superview, htmlElement, querySpec, layoutItem, "BarChartPlugin");
 }
 
 

Modified: trunk/source/DetailPlugin.js
===================================================================
--- trunk/source/DetailPlugin.js	2005-07-03 00:42:23 UTC (rev 213)
+++ trunk/source/DetailPlugin.js	2005-07-03 03:00:10 UTC (rev 214)
@@ -59,7 +59,7 @@
  */
 DetailPlugin.prototype = new PluginView();  // makes DetailPlugin be a subclass of PluginView
 function DetailPlugin(superview, htmlElement, querySpec, layoutItem) {
-  PluginView.call(this, superview, htmlElement, querySpec, layoutItem);
+  PluginView.call(this, superview, htmlElement, querySpec, layoutItem, "DetailPlugin");
 }
 
 

Modified: trunk/source/ItemView.js
===================================================================
--- trunk/source/ItemView.js	2005-07-03 00:42:23 UTC (rev 213)
+++ trunk/source/ItemView.js	2005-07-03 03:00:10 UTC (rev 214)
@@ -61,7 +61,7 @@
   Util.assert(htmlElement instanceof HTMLElement);
   Util.assert(item instanceof Item);
 
-  View.call(this, superview, htmlElement);
+  View.call(this, superview, htmlElement, "ItemView");
 
   // instance properties
   this._item = item;

Modified: trunk/source/LoginView.js
===================================================================
--- trunk/source/LoginView.js	2005-07-03 00:42:23 UTC (rev 213)
+++ trunk/source/LoginView.js	2005-07-03 03:00:10 UTC (rev 214)
@@ -58,7 +58,7 @@
  */
 LoginView.prototype = new View();  // makes LoginView be a subclass of View
 function LoginView(superview, htmlElement) {
-  View.call(this, superview, htmlElement);
+  View.call(this, superview, htmlElement, "LoginView");
 
   // instance properties
   this._isCreatingNewAccount = false;

Modified: trunk/source/MultiEntriesView.js
===================================================================
--- trunk/source/MultiEntriesView.js	2005-07-03 00:42:23 UTC (rev 213)
+++ trunk/source/MultiEntriesView.js	2005-07-03 03:00:10 UTC (rev 214)
@@ -59,19 +59,17 @@
  * @param    htmlElement      The HTMLElement to display the HTML in. 
  * @param    item         The Item to be displayed and edited by this view. 
  * @param    attribute    The attribute of the item to be displayed.
- * @param    cssClass     A string that gives a CSS class name to assign to the HTML element. 
  * @param    isMultiLine     a boolean indicating if text view is single line or multi-line
  */
 MultiEntriesView.prototype = new View();  // makes MultiEntriesView be a subclass of View
-function MultiEntriesView(superview, htmlElement, item, attribute, cssClass) {
-  View.call(this, superview, htmlElement);
+function MultiEntriesView(superview, htmlElement, item, attribute) {
+  View.call(this, superview, htmlElement, "MultiEntriesView");
 
   Util.assert(item instanceof Item);
   Util.assert(attribute instanceof Item); // PENDING need to check that attribute is an attribute
   
   this._item = item;
   this._attribute = attribute;
-  this._className = cssClass;
   this._entryViews = null;
   this._listOfSuggestions = null;
 }
@@ -237,7 +235,7 @@
 MultiEntriesView.prototype._addEntryView = function(entry) {
   var spanElement = document.createElement("span");
   spanElement.style.width = '100%';
-  var anEntryView = new EntryView(this, spanElement, this._item, this._attribute, entry, this._className);
+  var anEntryView = new EntryView(this, spanElement, this._item, this._attribute, entry);
   this._entryViews.push(anEntryView);
   this.getHtmlElement().appendChild(spanElement);
   anEntryView.refresh();

Modified: trunk/source/NavbarView.js
===================================================================
--- trunk/source/NavbarView.js	2005-07-03 00:42:23 UTC (rev 213)
+++ trunk/source/NavbarView.js	2005-07-03 03:00:10 UTC (rev 214)
@@ -57,7 +57,7 @@
  */
 NavbarView.prototype = new View();  // makes NavbarView be a subclass of View
 function NavbarView(superview, htmlElement, htmlElementForAnchors) {
-  View.call(this, superview, htmlElement);
+  View.call(this, superview, htmlElement, "NavbarView");
   this._htmlElementForAnchors = htmlElementForAnchors;
 }
 

Modified: trunk/source/OutlinePlugin.js
===================================================================
--- trunk/source/OutlinePlugin.js	2005-07-03 00:42:23 UTC (rev 213)
+++ trunk/source/OutlinePlugin.js	2005-07-03 03:00:10 UTC (rev 214)
@@ -59,7 +59,7 @@
  */
 OutlinePlugin.prototype = new PluginView();  // makes OutlinePlugin be a subclass of PluginView
 function OutlinePlugin(superview, htmlElement, querySpec, layoutItem) {
-  PluginView.call(this, superview, htmlElement, querySpec, layoutItem);
+  PluginView.call(this, superview, htmlElement, querySpec, layoutItem, "OutlinePlugin");
 }
 
 

Modified: trunk/source/PageView.js
===================================================================
--- trunk/source/PageView.js	2005-07-03 00:42:23 UTC (rev 213)
+++ trunk/source/PageView.js	2005-07-03 03:00:10 UTC (rev 214)
@@ -44,7 +44,7 @@
 // -------------------------------------------------------------------
 // PageView public class constants
 // -------------------------------------------------------------------
-PageView.CSS_CLASS_PAGE_HEADER = "page_header";
+// PageView.CSS_CLASS_PAGE_HEADER = "page_header";
 PageView.UUID_FOR_ATTRIBUTE_SECTIONS_IN_PAGE = "00030000-ce7f-11d9-8cd5-0011113ae5d6";
 PageView.UUID_FOR_ATTRIBUTE_PAGE_THIS_SECTION_APPEARS_ON = "00030001-ce7f-11d9-8cd5-0011113ae5d6";
 
@@ -94,7 +94,7 @@
   Util.assert(htmlElement instanceof HTMLElement);
   Util.assert(pageItem instanceof Item);
 
-  View.call(this, superview, htmlElement);
+  View.call(this, superview, htmlElement, "PageView");
 
   // instance properties
   this._pageItem = pageItem;
@@ -153,11 +153,11 @@
   
   var headerElement = View.createAndAppendElement(pageDivElement, "h1");
   this._headerText = new EntryView(this, headerElement, this._pageItem, attributeCalledName,
-    this._pageItem.getSingleEntryFromAttribute(attributeCalledName), PageView.CSS_CLASS_PAGE_HEADER, false);
+    this._pageItem.getSingleEntryFromAttribute(attributeCalledName), false);
 
   var summaryViewDiv = View.createAndAppendElement(pageDivElement, "div");
   this._pageSummaryView = new EntryView(this, summaryViewDiv, this._pageItem, attributeCalledSummary,
-    this._pageItem.getSingleEntryFromAttribute(attributeCalledSummary), SectionView.CSS_CLASS_SUMMARY_TEXT, true);
+    this._pageItem.getSingleEntryFromAttribute(attributeCalledSummary), true);
 
   // add <div> elements for each of the sections on the page
   // and create a new SectionView for each section

Modified: trunk/source/PluginView.js
===================================================================
--- trunk/source/PluginView.js	2005-07-03 00:42:23 UTC (rev 213)
+++ trunk/source/PluginView.js	2005-07-03 03:00:10 UTC (rev 214)
@@ -49,10 +49,10 @@
  * @syntax   var PluginView = new PluginView()
  */
 PluginView.prototype = new View();  // makes PluginView be a subclass of View
-function PluginView(superview, htmlElement, querySpec, layoutItem) {
+function PluginView(superview, htmlElement, querySpec, layoutItem, cssClassName) {
   if (!superview) {return;} // initial call that subclasses of PluginViews make without parameters
 
-  View.call(this, superview, htmlElement);
+  View.call(this, superview, htmlElement, cssClassName);
 
   this._querySpec = querySpec;
   this._queryRunner = this.getWorld().newQueryRunner(this._querySpec, this);

Modified: trunk/source/RootView.js
===================================================================
--- trunk/source/RootView.js	2005-07-03 00:42:23 UTC (rev 213)
+++ trunk/source/RootView.js	2005-07-03 03:00:10 UTC (rev 214)
@@ -47,7 +47,6 @@
 RootView.CSS_CLASS_EDIT_MODE = "editmode";
 RootView.CSS_CLASS_VIEW_MODE = "viewmode";
 RootView.CSS_CLASS_EDIT_TOOL = "edit_tool";
-RootView.CSS_CLASS_CONTROL_SPAN = "control_span";
 
 RootView.ELEMENT_ID_DEBUG_TEXTAREA = "debug_textarea";
 
@@ -105,12 +104,12 @@
   var headerP = View.createAndAppendElement(rootDiv, "p", "header");
   var logoSpan = View.createAndAppendElement(headerP, "span", "logo");
   logoSpan.innerHTML = '<a href="http://openrecord.org"><span class="logostart">open</span><span class="logomiddle">record</span><span class="logoend">.org</span></a>';
-  var mainControlSpan = View.createAndAppendElement(headerP, "span", RootView.CSS_CLASS_CONTROL_SPAN, "main_control_span");
+  this._loginViewSpanElement = View.createAndAppendElement(headerP, "span");
   View.createAndAppendElement(headerP, "br");
-  var navbarDiv = View.createAndAppendElement(rootDiv, "div", "navbar");
+  this._navbarDivElement = View.createAndAppendElement(rootDiv, "div");
   var contentAreaDiv = View.createAndAppendElement(rootDiv, "div", "content_area");
-  var contentViewDiv = View.createAndAppendElement(contentAreaDiv, "div");
-  var debugDiv = View.createAndAppendElement(rootDiv, "div", "debug");
+  this._contentViewDivElement = View.createAndAppendElement(contentAreaDiv, "div");
+  this._debugDivElement = View.createAndAppendElement(rootDiv, "div", "debug");
 
   var footerP = View.createAndAppendElement(rootDiv, "p", "footer");
   var copyrightSpan = View.createAndAppendElement(footerP, "span", "copyright");
@@ -118,15 +117,10 @@
     'copyright rights relinquished under the Creative Commons ' +
     '<a rel="license external" href="http://creativecommons.org/licenses/publicdomain/">Public Domain Dedication</a>.';
 
-  var statusBlurbSpan = View.createAndAppendElement(footerP, "span", "fileformat");
+  this._statusBlurbSpanElement = View.createAndAppendElement(footerP, "span", "fileformat");
   View.createAndAppendElement(footerP, "br");
   
-  this._mainControlSpanElement = mainControlSpan;
   this._anchorSpan = anchorSpan;
-  this._navbarDivElement = navbarDiv;
-  this._contentViewDivElement = contentViewDiv;
-  this._debugDivElement = debugDiv;
-  this._statusBlurbSpanElement = statusBlurbSpan;
   this._rootDiv = rootDiv;
   
   Util.setErrorReportCallback(RootView.displayTextInDebugTextarea);
@@ -304,8 +298,7 @@
         if (!contentViewToSwitchTo) {
           itemFromUuid = this._world.getItemFromUuid(uuidText);
           if (itemFromUuid) {
-            divElement = window.document.createElement("div"); 
-            this._contentViewDivElement.appendChild(divElement);
+            divElement = View.createAndAppendElement(this._contentViewDivElement, "div");
             contentViewToSwitchTo = new ItemView(this, divElement, itemFromUuid);
             this._hashTableOfItemViewsKeyedByUuid[uuidText] = contentViewToSwitchTo;
           }
@@ -317,8 +310,7 @@
           if (!contentViewToSwitchTo) {
             pageFromUuid = this.getWorld().getItemFromUuid(uuidText);
             if (pageFromUuid) {
-              divElement = window.document.createElement("div"); 
-              this._contentViewDivElement.appendChild(divElement);
+              divElement = View.createAndAppendElement(this._contentViewDivElement, "div");
               contentViewToSwitchTo = new PageView(this, divElement, pageFromUuid);
               this._hashTableOfPageViewsKeyedByUuid[uuidText] = contentViewToSwitchTo;
             }
@@ -402,7 +394,7 @@
  */
 RootView.prototype._displayLoginSpan = function() {
   if (!this._loginView) {
-    this._loginView = new LoginView(this, this._mainControlSpanElement);
+    this._loginView = new LoginView(this, this._loginViewSpanElement);
     this._loginView.refresh();
   }
 };

Modified: trunk/source/SectionView.js
===================================================================
--- trunk/source/SectionView.js	2005-07-03 00:42:23 UTC (rev 213)
+++ trunk/source/SectionView.js	2005-07-03 03:00:10 UTC (rev 214)
@@ -55,8 +55,6 @@
 SectionView.CSS_CLASS_SELECTED = "selected";
 SectionView.CSS_CLASS_MORE_LINK = "more";
 SectionView.CSS_CLASS_ENTRY_VIEW = "entry_view";
-SectionView.CSS_CLASS_SECTION_HEADER = "section_header";
-SectionView.CSS_CLASS_SUMMARY_TEXT = "summary_text";
 
 SectionView.ELEMENT_ID_SELECT_MENU_PREFIX = "select_menu_";
 
@@ -92,7 +90,7 @@
  */
 SectionView.prototype = new View();  // makes SectionView be a subclass of View
 function SectionView(superview, htmlElement, sectionItem) {
-  View.call(this, superview, htmlElement);
+  View.call(this, superview, htmlElement, "SectionView");
 
   // instance properties
   Util.assert(sectionItem instanceof Item);
@@ -219,20 +217,18 @@
   }
   
   var sectionDiv = this.getHtmlElement();
-  var outerDiv = View.createAndAppendElement(sectionDiv, "div", SectionView.CSS_CLASS_SECTION);
-  var headerH2 = View.createAndAppendElement(outerDiv, "h2");
+  var headerH2 = View.createAndAppendElement(sectionDiv, "h2");
   var attributeCalledName = this.getWorld().getAttributeCalledName();
   var attributeCalledSummary = this.getWorld().getAttributeCalledSummary();
   this._headerView = new EntryView(this, headerH2, this._section, attributeCalledName,
-    this._section.getSingleEntryFromAttribute(attributeCalledName),
-    SectionView.CSS_CLASS_SECTION_HEADER);
-  var summaryDiv = View.createAndAppendElement(outerDiv, "div");
+    this._section.getSingleEntryFromAttribute(attributeCalledName));
+  var summaryDiv = View.createAndAppendElement(sectionDiv, "div");
   this._sectionSummaryView = new EntryView(this, summaryDiv, this._section, attributeCalledSummary,
-    this._section.getSingleEntryFromAttribute(attributeCalledSummary), SectionView.CSS_CLASS_ENTRY_VIEW, true);
-  View.createAndAppendElement(outerDiv, "p");
+    this._section.getSingleEntryFromAttribute(attributeCalledSummary), true);
+  View.createAndAppendElement(sectionDiv, "p");
 
   // create the editing controls, if we're in edit mode
-  var controlArea = View.createAndAppendElement(outerDiv, "p", RootView.CSS_CLASS_EDIT_TOOL);
+  var controlArea = View.createAndAppendElement(sectionDiv, "p", RootView.CSS_CLASS_EDIT_TOOL);
   var textShowMeA = document.createTextNode("Show me a ");
   controlArea.appendChild(textShowMeA);
 
@@ -261,7 +257,7 @@
   View.createAndAppendTextNode(controlArea,".");
 
   // create a div element for the plugin class to use
-  this._pluginDiv = View.createAndAppendElement(outerDiv, "div");
+  this._pluginDiv = View.createAndAppendElement(sectionDiv, "div");
   this._pluginView = this.getPluginInstanceFromPluginItem(selectedPluginItem, this._pluginDiv);
   this._myHasEverBeenDisplayedFlag = true;
   this.refresh();
@@ -346,8 +342,7 @@
   var listOfPossibleEntries = this.getWorld().getSuggestedItemsForAttribute(matchingAttribute);
   var entrySpan = View.createAndAppendElement(this._queryEditSpan, "span");
   
-  var entryView =  new EntryView(this, entrySpan, myQuery, attributeCalledQueryMatchingValue, matchingEntry,
-    RootView.CSS_CLASS_EDIT_MODE);
+  var entryView =  new EntryView(this, entrySpan, myQuery, attributeCalledQueryMatchingValue, matchingEntry);
   entryView.setSuggestions(listOfPossibleEntries);
   entryView.alwaysUseEditField();
   entryView.setAutoWiden(true);

Modified: trunk/source/TablePlugin.js
===================================================================
--- trunk/source/TablePlugin.js	2005-07-03 00:42:23 UTC (rev 213)
+++ trunk/source/TablePlugin.js	2005-07-03 03:00:10 UTC (rev 214)
@@ -69,11 +69,10 @@
  */
 TablePlugin.prototype = new PluginView();  // makes TablePlugin be a subclass of PluginView
 function TablePlugin(superview, htmlElement, querySpec, layoutItem) {
-  PluginView.call(this, superview, htmlElement, querySpec, layoutItem);
+  PluginView.call(this, superview, htmlElement, querySpec, layoutItem, "TablePlugin");
 
   // PENDING should probably make this independent of sectionview
-  this._cssClass = SectionView.CSS_CLASS_SIMPLE_TABLE;
-  this._cellClass = SectionView.CSS_CLASS_PLAIN;
+  this._cssClassForTable = SectionView.CSS_CLASS_SIMPLE_TABLE;
   this._table = null;
   this._sortAttribute = null;
   this._ascendingOrder = true;
@@ -355,9 +354,9 @@
   }
   
   //create new table, remove old table if already exists
-  View.removeChildrenOfElement(this.getHtmlElement());
-  this._table = document.createElement("table");
-  this._table.className = this._cssClass;
+  var viewDivElement = this.getHtmlElement();
+  View.removeChildrenOfElement(viewDivElement);
+  this._table = View.createAndAppendElement(viewDivElement, "table", this._cssClassForTable);
   
   this._buildHeader();
 
@@ -368,7 +367,6 @@
 
   this._buildTableBody();
   
-  this.getHtmlElement().appendChild(this._table);
   
   // if (this.isInEditMode()) {this._buildAttributeEditor();}
   this._buildAttributeEditor();
@@ -412,8 +410,7 @@
  */
 TablePlugin.prototype._insertCell = function(row, col, item, attribute) {
   var aCell = row.insertCell(col);
-  aCell.className = this._cellClass;
-  var multiEntriesView = new MultiEntriesView(this, aCell, item, attribute, this._cellClass);
+  var multiEntriesView = new MultiEntriesView(this, aCell, item, attribute);
   aCell.or_entriesView = multiEntriesView;
   multiEntriesView.refresh();
   if (this.isInEditMode()) {

Modified: trunk/source/View.js
===================================================================
--- trunk/source/View.js	2005-07-03 00:42:23 UTC (rev 213)
+++ trunk/source/View.js	2005-07-03 03:00:10 UTC (rev 214)
@@ -43,12 +43,16 @@
  * @scope    public instance constructor
  * @param    superview    The superview for this view. 
  * @param    htmlElement    The HTMLElement to display this view in. 
- * @syntax   DO NOT CALL THIS CONSTRUCTOR
+ * @param    className    Optional. The CSS className to assign to the htmlElement.
  */
-function View(superview, htmlElement) {
+function View(superview, htmlElement, className) {
   if (!superview) {return;} // initial call that subclasses of PluginViews make without parameters
   this._superview = superview;
   this._htmlElement = htmlElement;
+  this._className = className;
+  if (this._className) {
+    this._htmlElement.className = this._className;
+  }
   this._myHasEverBeenDisplayedFlag = false; // PENDING: this is accessed directly by subclasses, which is bad
 }
 
@@ -76,6 +80,17 @@
 
 
 /**
+ * Returns the CSS className associated with this view.
+ *
+ * @scope    public instance method
+ * @return   An HTMLElement. 
+ */
+View.prototype.getClassName = function() {
+  return this._className;
+};
+
+
+/**
  * Returns the World instance that this view is using.
  *
  * @scope    public instance method

Modified: trunk/source/base_style.css
===================================================================
--- trunk/source/base_style.css	2005-07-03 00:42:23 UTC (rev 213)
+++ trunk/source/base_style.css	2005-07-03 03:00:10 UTC (rev 214)
@@ -228,10 +228,6 @@
 /****************************************/
 /* Edit button styles                   */
 
-#main_control_span {
-  float: right;
-}
-
 div.editmode p.edit_tool {
   background-color: rgb(100%, 100%, 40%);
 }
@@ -248,7 +244,7 @@
 /****************************************/
 /* Navigation bar styles                */
 
-div.navbar {
+div.NavbarView {
   float: left;
   width: 100pt;
   margin: 0;
@@ -331,7 +327,7 @@
   padding: 0pt;
 }
 
-.page_header, .section_header {
+h1.EntryView input {
   color: rgb(0%, 0%, 50%);
   background: rgb(100%, 100%, 40%);
   font-size: 1em;
@@ -344,7 +340,20 @@
   padding: 0pt;
 }
 
-.summary_text {
+h2.EntryView input {
+  color: rgb(0%, 0%, 50%);
+  background: rgb(100%, 100%, 40%);
+  font-size: 1em;
+  width: 100%;
+  font-family: Arial, Verdana, sans-serif;
+  font-weight: bold;
+  border-width: thin;
+  border-style: solid;
+  border-color: rgb(70%, 70%, 70%);
+  padding: 0pt;
+}
+
+div.EntryView textarea {
   //font-size: large;
   background: rgb(100%, 100%, 40%);
   width: 100%;
@@ -440,7 +449,7 @@
   background: rgb(100%,100%,40%);
 }
 
-td.plain {
+td.MultiEntriesView {
   font-family: Arial, Verdana, sans-serif;
   text-align: left;
   border: thin solid #CCC;
@@ -486,7 +495,7 @@
   background: rgb(90%, 90%, 90%);
 }
 
-input.plain {
+.MultiEntriesView .EntryView input {
   font-family: Arial, Verdana, sans-serif;
   border: 0px;
   width: 100%;
@@ -494,7 +503,7 @@
   padding: 0px;
 }
 
-input.plain:hover {
+.MultiEntriesView .EntryView input:hover {
   border-width: 0px;
   width: 100%;
   background: rgb(100%, 100%, 40%);
@@ -566,8 +575,9 @@
 
 /****************************************/
 /* Control span styles                     */
-.control_span {
+.LoginView {
   font-size: x-small;
+  float: right;
 }
 
 .suggestion_box {
@@ -656,7 +666,7 @@
   color: rgb(0%,0%,0%);
 }
 
-div.section {
+div.SectionView {
   border-top: solid thin rgb(0%, 0%, 50%);
   margin-top: 3em;
   padding-left: 0px;

Modified: trunk/source/view/EntryView.js
===================================================================
--- trunk/source/view/EntryView.js	2005-07-03 00:42:23 UTC (rev 213)
+++ trunk/source/view/EntryView.js	2005-07-03 03:00:10 UTC (rev 214)
@@ -59,17 +59,16 @@
  * @param    htmlElement      The HTMLElement to display the HTML in. 
  * @param    item         The Item to be displayed and edited by this view. 
  * @param    attribute    The attribute of the item to be displayed.
- * @param    cssClassName    A string that gives a class name to assign to the HTML element. 
  * @param    entry    The entry that this EntryView displays. 
  * @param    isMultiLine     a boolean indicating if text view is single line or multi-line
  */
 EntryView.prototype = new View();  // makes EntryView be a subclass of View
-function EntryView(superview, htmlElement, item, attribute, entry, cssClassName, isMultiLine) {
+function EntryView(superview, htmlElement, item, attribute, entry, isMultiLine) {
   Util.assert((!entry) || entry instanceof Entry);
   Util.assert(item instanceof Item);
   Util.assert(attribute instanceof Item); // PENDING need to check that attribute is an attribute
   
-  View.call(this, superview, htmlElement);
+  View.call(this, superview, htmlElement, "EntryView");
 
   htmlElement.style.width = "100%";
   htmlElement.style.height = "100%"; // make this element expand to fill parent element where possible
@@ -77,7 +76,7 @@
   this._attribute = attribute;
   this._entry = entry;
   this._editField = null;
-  this._className = cssClassName;
+  // this._className = cssClassName;
   this._isMultiLine = isMultiLine;
   this._isEditing = false;
   this._proxyOnKeyFunction = null;
@@ -230,7 +229,7 @@
         editField = this._editField= document.createElement("input");
         editField.type = 'text';
       }
-      editField.className = this._className;
+      // editField.className = this._className;
       var listener = this; 
       editField.onblur = this.onBlur.bindAsEventListener(this);
       editField.onkeypress = this.onKeyPress.bindAsEventListener(this);



From skinner at berlios.de  Sun Jul  3 05:04:01 2005
From: skinner at berlios.de (Brian Douglas Skinner at BerliOS)
Date: Sun, 3 Jul 2005 05:04:01 +0200
Subject: [openrecord-svn] r215 - trunk/documentation
Message-ID: <200507030304.j63341X9017516@sheep.berlios.de>

Author: skinner
Date: 2005-07-03 05:03:57 +0200 (Sun, 03 Jul 2005)
New Revision: 215

Modified:
   trunk/documentation/release_planning.txt
Log:
updated task list

Modified: trunk/documentation/release_planning.txt
===================================================================
--- trunk/documentation/release_planning.txt	2005-07-03 03:00:10 UTC (rev 214)
+++ trunk/documentation/release_planning.txt	2005-07-03 03:03:57 UTC (rev 215)
@@ -244,7 +244,7 @@
 -------+----------+---------+----------------------------------------------
 Who    | Estimate | Actual  | Task
 -------+----------+---------+----------------------------------------------
-brian  | 0        | 0       |  1. Change "Edit"/"Done Editing" button to "Show Tools"/"Hide Tools"
+brian  | 0        | done    |  1. Change "Edit"/"Done Editing" button to "Show Tools"/"Hide Tools"
 brian  | 0.25 IED | 0.25    |  2. Allow editing for any logged in user, even if edit tools aren't shown
        |          |         |  3. Assign system attributes & categories to a "System" category
        |          |         |  4. Hide "System" items most of the time
@@ -264,7 +264,7 @@
        |          |         | 18. drag-and-drop to re-order table rows
        |          |         | 19. drag-and-drop to re-order table columns
        |          |         | 20. improve UI for "add new attribute" in Table View 
-       |          |         | 21. Rationalize our CSS style sheets
+brian  | 1    IED |         | 21. Rationalize our CSS style sheet approach
        |          |         | 22. Reach consensus on (colors, padding, and borders) and then implement
        |          |         | 23. Make sure view code uses transactions
        |          |         | 24. Deal with \n in page name or summary fields



From skinner at berlios.de  Sun Jul  3 18:58:56 2005
From: skinner at berlios.de (Brian Douglas Skinner at BerliOS)
Date: Sun, 3 Jul 2005 18:58:56 +0200
Subject: [openrecord-svn] r216 - trunk/source
Message-ID: <200507031658.j63Gwuu8008845@sheep.berlios.de>

Author: skinner
Date: 2005-07-03 18:58:52 +0200 (Sun, 03 Jul 2005)
New Revision: 216

Modified:
   trunk/source/SectionView.js
Log:
tiny bug fix

Modified: trunk/source/SectionView.js
===================================================================
--- trunk/source/SectionView.js	2005-07-03 03:03:57 UTC (rev 215)
+++ trunk/source/SectionView.js	2005-07-03 16:58:52 UTC (rev 216)
@@ -45,7 +45,7 @@
 // -------------------------------------------------------------------
 // SectionView public class constants
 // -------------------------------------------------------------------
-SectionView.CSS_CLASS_SECTION = "section";
+SectionView.CSS_CLASS_SECTION = "SectionView";
 SectionView.CSS_CLASS_SIMPLE_TABLE = "simple_table";
 SectionView.CSS_CLASS_NEW_ITEM = "newitem";
 SectionView.CSS_CLASS_PLAIN = "plain";



From skinner at berlios.de  Tue Jul  5 21:05:50 2005
From: skinner at berlios.de (Brian Douglas Skinner at BerliOS)
Date: Tue, 5 Jul 2005 21:05:50 +0200
Subject: [openrecord-svn] r217 - in trunk: . source source/view
Message-ID: <200507051905.j65J5ojE002414@sheep.berlios.de>

Author: skinner
Date: 2005-07-05 21:05:49 +0200 (Tue, 05 Jul 2005)
New Revision: 217

Added:
   trunk/source/view/ItemView.js
   trunk/source/view/LoginView.js
   trunk/source/view/MultiEntriesView.js
   trunk/source/view/NavbarView.js
   trunk/source/view/PageView.js
   trunk/source/view/PluginView.js
   trunk/source/view/RootView.js
   trunk/source/view/SectionView.js
   trunk/source/view/View.js
Removed:
   trunk/source/ItemView.js
   trunk/source/LoginView.js
   trunk/source/MultiEntriesView.js
   trunk/source/NavbarView.js
   trunk/source/PageView.js
   trunk/source/PluginView.js
   trunk/source/RootView.js
   trunk/source/SectionView.js
   trunk/source/View.js
Modified:
   trunk/dashboard.html
   trunk/demo_page.html
   trunk/dogfood.html
   trunk/source/LintTest.js
   trunk/source/view/LintTest.js
Log:
Moved 9 view classes down into the /view directory.

Modified: trunk/dashboard.html
===================================================================
--- trunk/dashboard.html	2005-07-03 16:58:52 UTC (rev 216)
+++ trunk/dashboard.html	2005-07-05 19:05:49 UTC (rev 217)
@@ -19,17 +19,18 @@
     <script type="text/javascript" src="source/util/Util.js"></script>
     <script type="text/javascript" src="source/util/Cookie.js"></script>
 
-    <script type="text/javascript" src="source/View.js"></script>
-    <script type="text/javascript" src="source/RootView.js"></script>
-    <script type="text/javascript" src="source/ItemView.js"></script>
-    <script type="text/javascript" src="source/PageView.js"></script>
-    <script type="text/javascript" src="source/SectionView.js"></script>
-    <script type="text/javascript" src="source/LoginView.js"></script>
-    <script type="text/javascript" src="source/MultiEntriesView.js"></script>
-    <script type="text/javascript" src="source/NavbarView.js"></script>
+    <script type="text/javascript" src="source/view/View.js"></script>
+    <script type="text/javascript" src="source/view/RootView.js"></script>
+    <script type="text/javascript" src="source/view/ItemView.js"></script>
+    <script type="text/javascript" src="source/view/PageView.js"></script>
+    <script type="text/javascript" src="source/view/SectionView.js"></script>
+    <script type="text/javascript" src="source/view/LoginView.js"></script>
+    <script type="text/javascript" src="source/view/MultiEntriesView.js"></script>
+    <script type="text/javascript" src="source/view/NavbarView.js"></script>
     <script type="text/javascript" src="source/view/SuggestionBox.js"></script>
     <script type="text/javascript" src="source/view/EntryView.js"></script>
-    <script type="text/javascript" src="source/PluginView.js"></script>
+    <script type="text/javascript" src="source/view/PluginView.js"></script>
+    
     <script type="text/javascript" src="source/TablePlugin.js"></script>
     <script type="text/javascript" src="source/OutlinePlugin.js"></script>
     <script type="text/javascript" src="source/DetailPlugin.js"></script>

Modified: trunk/demo_page.html
===================================================================
--- trunk/demo_page.html	2005-07-03 16:58:52 UTC (rev 216)
+++ trunk/demo_page.html	2005-07-05 19:05:49 UTC (rev 217)
@@ -19,17 +19,18 @@
     <script type="text/javascript" src="source/util/Util.js"></script>
     <script type="text/javascript" src="source/util/Cookie.js"></script>
 
-    <script type="text/javascript" src="source/View.js"></script>
-    <script type="text/javascript" src="source/RootView.js"></script>
-    <script type="text/javascript" src="source/ItemView.js"></script>
-    <script type="text/javascript" src="source/PageView.js"></script>
-    <script type="text/javascript" src="source/SectionView.js"></script>
-    <script type="text/javascript" src="source/LoginView.js"></script>
-    <script type="text/javascript" src="source/MultiEntriesView.js"></script>
-    <script type="text/javascript" src="source/NavbarView.js"></script>
+    <script type="text/javascript" src="source/view/View.js"></script>
+    <script type="text/javascript" src="source/view/RootView.js"></script>
+    <script type="text/javascript" src="source/view/ItemView.js"></script>
+    <script type="text/javascript" src="source/view/PageView.js"></script>
+    <script type="text/javascript" src="source/view/SectionView.js"></script>
+    <script type="text/javascript" src="source/view/LoginView.js"></script>
+    <script type="text/javascript" src="source/view/MultiEntriesView.js"></script>
+    <script type="text/javascript" src="source/view/NavbarView.js"></script>
     <script type="text/javascript" src="source/view/SuggestionBox.js"></script>
     <script type="text/javascript" src="source/view/EntryView.js"></script>
-    <script type="text/javascript" src="source/PluginView.js"></script>
+    <script type="text/javascript" src="source/view/PluginView.js"></script>
+    
     <script type="text/javascript" src="source/TablePlugin.js"></script>
     <script type="text/javascript" src="source/OutlinePlugin.js"></script>
     <script type="text/javascript" src="source/DetailPlugin.js"></script>

Modified: trunk/dogfood.html
===================================================================
--- trunk/dogfood.html	2005-07-03 16:58:52 UTC (rev 216)
+++ trunk/dogfood.html	2005-07-05 19:05:49 UTC (rev 217)
@@ -19,17 +19,18 @@
     <script type="text/javascript" src="source/util/Util.js"></script>
     <script type="text/javascript" src="source/util/Cookie.js"></script>
 
-    <script type="text/javascript" src="source/View.js"></script>
-    <script type="text/javascript" src="source/RootView.js"></script>
-    <script type="text/javascript" src="source/ItemView.js"></script>
-    <script type="text/javascript" src="source/PageView.js"></script>
-    <script type="text/javascript" src="source/SectionView.js"></script>
-    <script type="text/javascript" src="source/LoginView.js"></script>
-    <script type="text/javascript" src="source/MultiEntriesView.js"></script>
-    <script type="text/javascript" src="source/NavbarView.js"></script>
+    <script type="text/javascript" src="source/view/View.js"></script>
+    <script type="text/javascript" src="source/view/RootView.js"></script>
+    <script type="text/javascript" src="source/view/ItemView.js"></script>
+    <script type="text/javascript" src="source/view/PageView.js"></script>
+    <script type="text/javascript" src="source/view/SectionView.js"></script>
+    <script type="text/javascript" src="source/view/LoginView.js"></script>
+    <script type="text/javascript" src="source/view/MultiEntriesView.js"></script>
+    <script type="text/javascript" src="source/view/NavbarView.js"></script>
     <script type="text/javascript" src="source/view/SuggestionBox.js"></script>
     <script type="text/javascript" src="source/view/EntryView.js"></script>
-    <script type="text/javascript" src="source/PluginView.js"></script>
+    <script type="text/javascript" src="source/view/PluginView.js"></script>
+    
     <script type="text/javascript" src="source/TablePlugin.js"></script>
     <script type="text/javascript" src="source/OutlinePlugin.js"></script>
     <script type="text/javascript" src="source/DetailPlugin.js"></script>

Deleted: trunk/source/ItemView.js
===================================================================
--- trunk/source/ItemView.js	2005-07-03 16:58:52 UTC (rev 216)
+++ trunk/source/ItemView.js	2005-07-05 19:05:49 UTC (rev 217)
@@ -1,116 +0,0 @@
-/*****************************************************************************
- ItemView.js
- 
-******************************************************************************
- Written in 2005 by Brian Douglas Skinner <brian.skinner at gumption.org>
-  
- Copyright rights relinquished under the Creative Commons  
- Public Domain Dedication:
-    http://creativecommons.org/licenses/publicdomain/
-  
- You can copy freely from this file.  This work may be freely reproduced, 
- distributed, transmitted, used, modified, built upon, or otherwise exploited
- by anyone for any purpose.
-  
- This work is provided on an "AS IS" basis, without warranties or conditions 
- of any kind, either express or implied, including, without limitation, any 
- warranties or conditions of title, non-infringement, merchantability, or 
- fitness for a particular purpose. You are solely responsible for determining 
- the appropriateness of using or distributing the work and assume all risks 
- associated with use of this work, including but not limited to the risks and 
- costs of errors, compliance with applicable laws, damage to or loss of data 
- or equipment, and unavailability or interruption of operations.
-
- In no event shall the authors or contributors have any liability for any 
- direct, indirect, incidental, special, exemplary, or consequential damages,
- however caused and on any theory of liability, whether in contract, strict 
- liability, or tort (including negligence), arising in any way out of or in 
- connection with the use or distribution of the work.
-*****************************************************************************/
-
-
-// -------------------------------------------------------------------
-// Dependencies, expressed in the syntax that JSLint understands:
-// 
-/*global document, HTMLElement  */
-/*global Util  */
-/*global Item  */
-/*global DetailPlugin  */
-/*global RootView  */
-// -------------------------------------------------------------------
-
-
-// -------------------------------------------------------------------
-// ItemView public class constants
-// -------------------------------------------------------------------
-ItemView.ELEMENT_ID_DETAIL_DIV_PREFIX = "detail_plugin_div_for_item_";
-
-
-/**
- * The RootView uses an instance of a ItemView to display an Item in the
- * browser window.
- *
- * @scope    public instance constructor
- * @extends  View
- * @param    superview    The View that serves as the superview for this view. 
- * @param    htmlElement    The HTMLElement to display the HTML in. 
- * @param    item    The item to be displayed by this view. 
- */
-ItemView.prototype = new View();  // makes ItemView be a subclass of View
-function ItemView(superview, htmlElement, item) {
-  Util.assert(htmlElement instanceof HTMLElement);
-  Util.assert(item instanceof Item);
-
-  View.call(this, superview, htmlElement, "ItemView");
-
-  // instance properties
-  this._item = item;
-  this._pluginView = null;
-}
-
-
-/**
- * Returns a string that gives the name of the page.
- *
- * @scope    public instance method
- * @return   A string that gives the name of the page.
- */
-ItemView.prototype.getPageTitle = function() {
-  var pageTitle = this._item.getDisplayString();
-  return pageTitle;
-};
-
-
-/**
- * Re-creates all the HTML for the ItemView, and hands the HTML to the 
- * browser to be re-drawn.
- *
- * @scope    public instance method
- */
-ItemView.prototype.refresh = function() {
-  Util.assert(this._item instanceof Item);
-  
-  // PENDING: this needs to be changed from DOM level 0 to DOM level 2.
-  var listOfStrings = [];
-
-  // add an <h1> heading with the name of the page
-  listOfStrings.push("<h1 id=\"" + RootView.URL_ITEM_PREFIX + this._item._getUuid() + "\">" + this._item.getDisplayName() + "</h1>");
-
-  // add a <div> element for the detail plugin
-  var detailDivId = ItemView.ELEMENT_ID_DETAIL_DIV_PREFIX + this._item._getUuid();
-  listOfStrings.push("<div id=\"" + detailDivId + "\"></div>");
-
-  // write out all the new content 
-  var finalString = listOfStrings.join("");
-  this.getHtmlElement().innerHTML = finalString;
-
-  // let the detailPlugin add its own content
-  var detailPluginElement = document.getElementById(detailDivId);
-  this._pluginView = new DetailPlugin(this, detailPluginElement, [this._item]);
-  this._pluginView.refresh();
-};
-
-
-// -------------------------------------------------------------------
-// End of file
-// -------------------------------------------------------------------

Modified: trunk/source/LintTest.js
===================================================================
--- trunk/source/LintTest.js	2005-07-03 16:58:52 UTC (rev 216)
+++ trunk/source/LintTest.js	2005-07-05 19:05:49 UTC (rev 217)
@@ -56,14 +56,6 @@
 
 function testJsLintOnOpenRecordCode() {
   var listOfSourceCodeFiles = [
-    "View.js",
-    "RootView.js",
-    "ItemView.js",
-    "PageView.js",
-    "LoginView.js",
-    "NavbarView.js",
-    "SectionView.js",
-    "MultiEntriesView.js",
     "TablePlugin.js",
     "OutlinePlugin.js",
     "DetailPlugin.js",

Deleted: trunk/source/LoginView.js
===================================================================
--- trunk/source/LoginView.js	2005-07-03 16:58:52 UTC (rev 216)
+++ trunk/source/LoginView.js	2005-07-05 19:05:49 UTC (rev 217)
@@ -1,541 +0,0 @@
-/*****************************************************************************
- LoginView.js
-
-******************************************************************************
- Written in 2005 by 
-    Brian Douglas Skinner <brian.skinner at gumption.org>
-    Chih-Chao Lam <chao at cs.stanford.edu>
-
- Copyright rights relinquished under the Creative Commons  
- Public Domain Dedication:
-    http://creativecommons.org/licenses/publicdomain/
-
- You can copy freely from this file.  This work may be freely reproduced, 
- distributed, transmitted, used, modified, built upon, or otherwise exploited
- by anyone for any purpose.
-
- This work is provided on an "AS IS" basis, without warranties or conditions 
- of any kind, either express or implied, including, without limitation, any 
- warranties or conditions of title, non-infringement, merchantability, or 
- fitness for a particular purpose. You are solely responsible for determining 
- the appropriateness of using or distributing the work and assume all risks 
- associated with use of this work, including but not limited to the risks and 
- costs of errors, compliance with applicable laws, damage to or loss of data 
- or equipment, and unavailability or interruption of operations.
-
- In no event shall the authors or contributors have any liability for any 
- direct, indirect, incidental, special, exemplary, or consequential damages,
- however caused and on any theory of liability, whether in contract, strict 
- liability, or tort (including negligence), arising in any way out of or in 
- connection with the use or distribution of the work.
-*****************************************************************************/
-
-
-// -------------------------------------------------------------------
-// Dependencies, expressed in the syntax that JSLint understands:
-// 
-/*global document  */
-/*global Util  */
-/*global Cookie  */
-/*global UserSuggestionBox  */
-// -------------------------------------------------------------------
-
-
-// -------------------------------------------------------------------
-// LoginView public class constants
-// -------------------------------------------------------------------
-LoginView.COOKIE_NAME = "useruuid";
-
-
-/**
- * The RootView uses an instance of a LoginView to display a login prompt,
- * as well as controls for creating a new user account.
- *
- * @scope    public instance constructor
- * @extends  View
- * @param    superview    The view that this LoginView is nested in. 
- * @param    htmlElement    The HTMLElement to display the HTML in. 
- */
-LoginView.prototype = new View();  // makes LoginView be a subclass of View
-function LoginView(superview, htmlElement) {
-  View.call(this, superview, htmlElement, "LoginView");
-
-  // instance properties
-  this._isCreatingNewAccount = false;
-  var tenYearCookieExpiration = 10*365*24;   // PENDING: hardcode expiration to 10yrs
-  this._cookie = new Cookie(document, LoginView.COOKIE_NAME, tenYearCookieExpiration);
-  this._cookie.load();
-}
-
-
-// -------------------------------------------------------------------
-// Public instance methods
-// -------------------------------------------------------------------
-
-/**
- * Re-creates all the HTML for the LoginView, and hands the HTML to the 
- * browser to be re-drawn.
- *
- * @scope    public instance method
- */
-LoginView.prototype.refresh = function() {
-  if (!this._myHasEverBeenDisplayedFlag) {
-    this._rebuildView();
-  }
-};
-
-
-// -------------------------------------------------------------------
-// Private instance methods
-// -------------------------------------------------------------------
-
-/**
- * Re-creates the HTML for the chrome area containing the controls,
- * and hands the HTML to the browser to be re-drawn.
- *
- * @scope    private instance method
- */
-LoginView.prototype._rebuildView = function() {
-  var mySpan = this.getHtmlElement();
-  
-  View.removeChildrenOfElement(mySpan);
-  
-  var currentUser = this.getWorld().getCurrentUser();
-  if (!currentUser) {
-    // alert("displayControlSpan: !currentUser");
-    var userUuid = this._cookie.userUuid;
-    var password = this._cookie.password;
-    // alert("displayControlSpan: userUuid = " + userUuid);
-    if (userUuid) {
-      var userToLoginAs = this.getWorld().getItemFromUuid(userUuid);
-      if (userToLoginAs) { 
-        this.getWorld().login(userToLoginAs, password);
-        currentUser = this.getWorld().getCurrentUser();
-      }
-      if (!currentUser) {
-        this._cookie.userUuid = null;
-        this._cookie.store();
-      }
-    }
-  }
-  var editMode = currentUser ? true : false;
-  this.getRootView().setEditMode(editMode);
-  
-  var welcomeText, welcomeNode;
-  if (this._isCreatingNewAccount) {
-    // The user wants to create a new account.
-    // Create a line that looks like this:
-    //   Please enter new name and password:  _username_  _password_  [Create New Account]
-    
-    welcomeText = "Please enter new name and password:";
-    welcomeNode = document.createTextNode(welcomeText);
-    this.usernameInput = document.createElement("input");
-    this.usernameInput.size = 20;
-    this.usernameInput.value = "Albert Einstein";
-    
-    var passwordInput = document.createElement("input");
-    this.passwordInput.size = 10;
-    this.passwordInput.type = "password";
-    this.passwordInput.value = "randomdots";
-    this.passwordInput.onkeypress = this._createAccountPasswordKeyPress.bindAsEventListener(this);
-
-    var newAcctButton = document.createElement("input");
-    newAcctButton.value = "Create New Account";
-    newAcctButton.type = "button";
-    newAcctButton.onclick = this._clickOnNewAcctButton.bindAsEventListener(this);
-    mySpan.appendChild(welcomeNode);
-    mySpan.appendChild(this.usernameInput);
-    mySpan.appendChild(document.createTextNode(" "));
-    mySpan.appendChild(this.passwordInput);
-    mySpan.appendChild(document.createTextNode(" "));
-    mySpan.appendChild(newAcctButton);
-    this.usernameInput.select();
-  }
-  else if (currentUser) { 
-    // The user is already logged in.
-    // Create a line that looks like this:
-    //   Hello Jane Doe.  _Sign out_  [Edit]
-    
-    welcomeText = "Hello " + currentUser.getDisplayName() + ". ";
-    welcomeNode = document.createTextNode(welcomeText);
-    mySpan.appendChild(welcomeNode);
-
-    var signoutLink = document.createElement("a");
-    signoutLink.appendChild(document.createTextNode("Sign out"));
-    signoutLink.onclick = this._clickOnSignoutLink.bindAsEventListener(this);
-    mySpan.appendChild(signoutLink);
-
-    mySpan.appendChild(document.createTextNode(" "));
-
-    var toolsButton = document.createElement("input");
-    toolsButton.type = "button";
-    toolsButton.value = (this.getRootView().isInShowToolsMode()) ? "Hide Tools" : "Show Tools";
-    toolsButton.onclick = this._clickOnShowToolsButton.bindAsEventListener(this);
-    mySpan.appendChild(toolsButton);
-  }
-  else {
-    // The user has not yet signed in.
-    // Create a line that looks like this:
-    //   _Create Account_  or sign in:  _username_  _password_  [Sign in]
-    
-    var createAcctLink = document.createElement("a");
-    createAcctLink.appendChild(document.createTextNode("Create Account"));
-
-    welcomeText = " or sign in: "; 
-    welcomeNode = document.createTextNode(welcomeText);
-    this.usernameInput = document.createElement("input");
-    this.usernameInput.size = 20;
-    this.usernameInput.value = "Albert Einstein";
-    
-    this.passwordInput = document.createElement("input");
-    this.passwordInput.size = 10;
-    this.passwordInput.type = "password";
-    this.passwordInput.value = "randomdots";
-    this.passwordInput.onkeypress = this._signinPasswordKeyPress.bindAsEventListener(this);
-    this.passwordInput.onfocus = this._signinPasswordFocus.bindAsEventListener(this);
-
-    this._myUsernameSuggestionBox = new UserSuggestionBox(this.usernameInput, this.getWorld().getUsers(), this.passwordInput);
-
-    var signinButton = document.createElement("input");
-    signinButton.value = "Sign in";
-    signinButton.type = "button";
-    signinButton.onclick = this._clickOnSignInButton.bindAsEventListener(this);
-    createAcctLink.onclick = this._clickOnCreateAccountLink.bindAsEventListener(this,signinButton);
-    mySpan.appendChild(createAcctLink);
-    mySpan.appendChild(welcomeNode);
-    mySpan.appendChild(this.usernameInput);
-    mySpan.appendChild(document.createTextNode(" "));
-    mySpan.appendChild(this.passwordInput);
-    mySpan.appendChild(document.createTextNode(" "));
-    mySpan.appendChild(signinButton);
-  }
-};
-
-
-// -------------------------------------------------------------------
-// Event handler methods
-// -------------------------------------------------------------------
-
-/**
- * Called when sign out button is clicked.
- *
- * @scope    private instance method
- */
-LoginView.prototype._clickOnSignoutLink = function(eventObject) {
-  if (this.isInEditMode()) {
-    this.getRootView().setEditMode(false);
-  }
-  this._cookie.userUuid = null;
-  this._cookie.store();
-  this.getWorld().logout();
-  this._rebuildView();
-  this.getRootView().setShowToolsMode(false);
-  this.getRootView().setEditMode(false);
-};
-
-
-/**
- * Called when sign in password input field gets focus.
- *
- * @scope    private instance method
- */
-LoginView.prototype._signinPasswordFocus = function(eventObject) {
-  this.passwordInput.value = "";
-};
-
-
-/**
- * Called when sign in password input field is typed with keystroke.
- *
- * @scope    private instance method
- */
-LoginView.prototype._signinPasswordKeyPress = function(eventObject) {
-  // see if <return> is pressed, if so, similate clicking on sign in button
-  if (eventObject.keyCode == Util.ASCII_VALUE_FOR_RETURN) {
-    this._clickOnSignInButton(eventObject);
-  }
-};
-
-
-/**
- * Called when create account password input field is typed with keystroke.
- *
- * @scope    private instance method
- */
-LoginView.prototype._createAccountPasswordKeyPress = function(eventObject) {
-  // see if <return> is pressed, if so, similate clicking on sign in button
-  if (eventObject.keyCode == Util.ASCII_VALUE_FOR_RETURN) {
-    this._clickOnNewAcctButton(eventObject);
-  }
-};
-
-
-/**
- * Called when the user clicks on the "Create Account" link.
- *
- * @scope    private instance method
- */
-LoginView.prototype._clickOnCreateAccountLink = function(eventObject) {
-  this._isCreatingNewAccount = true;
-  this._rebuildView();
-};
-
-
-/**
- * Called when the user clicks on the "Create New Account" button.
- *
- * @scope    private instance method
- */
-LoginView.prototype._clickOnNewAcctButton = function(eventObject) {
-  var username = this.usernameInput.value;
-  var password = this.passwordInput.value;
-  if (password === null) {
-    password = "";
-  }
-  this._createNewUser(username, password);
-  this._isCreatingNewAccount = false;
-  this._rebuildView();
-};
-
-
-/**
- * Called when the user clicks on the "Sign in" button.
- *
- * @scope    private instance method
- */
-LoginView.prototype._clickOnSignInButton = function(eventObject) {
-
-  var listOfUsers = this.getWorld().getUsers();
-  var userNameEntered = this.usernameInput.value;
-  var key;
-  var currentUser = null;
-
-  for (key in listOfUsers) {
-    if (!currentUser) {
-      var user = listOfUsers[key];
-      var lowerCaseUserName = user.getDisplayName().toLowerCase();
-      var lowerCaseUserNameEntered = userNameEntered.toLowerCase();
-      var numberOfCharactersToCompare = lowerCaseUserNameEntered.length;
-      var shortUserName = lowerCaseUserName.substring(0, numberOfCharactersToCompare);
-      if (shortUserName == lowerCaseUserNameEntered) {
-        // we have a match!
-        var password = this.passwordInput.value;
-        if (password === null) {
-          password = "";
-        }
-        this._loginUser(user, password);
-        return;
-      }
-    }
-  }
-  this._reportError("Login failed. Unknown user.");
-};
-
-
-/**
- * Called when the user clicks on the "Edit" button.
- *
- * @scope    private instance method
- * @param    eventObject    An event object. 
- */
-LoginView.prototype._clickOnShowToolsButton = function(eventObject) {
-  this.getRootView().setShowToolsMode(!this.getRootView().isInShowToolsMode());
-  this._rebuildView();
-};
-
-
-// -------------------------------------------------------------------
-// Private helper methods
-// -------------------------------------------------------------------
-
-/**
- *
- */
-LoginView.prototype._loginUser = function(user, password) {
-  var loginSuccess = this.getWorld().login(user, password); 
-  if (loginSuccess) {
-    var userUuid = user._getUuid();
-    this._cookie.userUuid = userUuid;
-    this._cookie.password = password;
-    this._cookie.store();
-    this._rebuildView();
-  } else {
-    this._reportError("Login failed. Wrong password.");
-  }
-  this.getRootView().setEditMode(loginSuccess);
-};
-
-
-/**
- *
- */
-LoginView.prototype._reportError = function(errorString) {
-  var newErrorNode = document.createTextNode(errorString);
-  var mySpan = this.getHtmlElement();
-  if (this.errorNode) {
-    mySpan.replaceChild(newErrorNode, this.errorNode);
-  } else {
-    mySpan.appendChild(newErrorNode); 
-  }
-  this.errorNode = newErrorNode;
-};
-
-
-/**
- *
- */
-LoginView.prototype._createNewUser = function(username, password) {
-  function isValidUsername(username) {
-    // PENDING: hard coded to validate for alphanumeric usernames of 3 or more characters
-    if (!username) {return false;}
-    return username.search(/\w{3,}/) >= 0;
-  }
-
-  if (isValidUsername(username)) {
-    var newUser = this.getWorld().newUser(username, password); 
-    this._loginUser(newUser,password);
-  } else {
-    this._reportError("\n Your username must be 3 or more alphanumeric characters!");
-  }
-};
-
-
-// -------------------------------------------------------------------
-// Suggestion box methods
-// -------------------------------------------------------------------
-
-/**
- * PENDING: 
- * 
- * We wrote this UserSuggestionBox code back before we had the general
- * /view/SuggestionBox.js class.  The SuggestionBox.js class is better,
- * because it allows you to use the arrow keys to scroll through the
- * options.  We shouldn't be trying to maintain this UserSuggestionBox
- * too.  Instead, we should make SuggestionBox.js generic enough that
- * we can just use it instead of UserSuggestionBox.
- */
-function UserSuggestionBox(htmlInputField, listOfEntries, nextHtmlField) {
-  this._inputField = htmlInputField;
-  this._listOfEntries = listOfEntries.sort(UserSuggestionBox.compareEntryDisplayNames);
-  this._nextField = nextHtmlField;
-  
-  this._userSuggestionBoxDivElement = document.createElement('div');
-  // this._userSuggestionBoxDivElement.style.visibility = "hidden";
-  this._userSuggestionBoxDivElement.style.zIndex = 11;
-  this._userSuggestionBoxDivElement.style.display = "none";
-  document.body.appendChild(this._userSuggestionBoxDivElement);
-  
-  this._inputField.onkeyup = this._keyPressOnInputField.bindAsEventListener(this);
-  this._inputField.onfocus = this._focusOnInputField.bindAsEventListener(this);
-  this._inputField.onblur = this._blurOnInputField.bindAsEventListener(this);
-  this._keyPressOnInputField();
-}
-
-
-/**
- *
- */
-UserSuggestionBox.compareEntryDisplayNames = function(entryOne, entryTwo) {
-  var displayNameOne = entryOne.getDisplayName();
-  var displayNameTwo = entryTwo.getDisplayName();
-  if (displayNameOne == displayNameTwo) {
-    return 0;
-  } else {
-    return (displayNameOne > displayNameTwo) ?  1 : -1;
-  }
-};
-
-
-/**
- *
- */
-UserSuggestionBox.prototype._focusOnInputField = function(eventObject) {
-  this._inputField.value = "";
-  this._redisplayUserSuggestionBox();
-};
-
-
-/**
- *
- */
-UserSuggestionBox.prototype._keyPressOnInputField = function(eventObject) {
-  this._redisplayUserSuggestionBox();
-};
-
-
-/**
- *
- */
-UserSuggestionBox.prototype._blurOnInputField = function(eventObject) {
-  // make the suggestion box disappear
-  this._userSuggestionBoxDivElement.style.display = "none";
-};
-
-
-/**
- *
- */
-UserSuggestionBox.prototype._clickOnSelection = function(eventObject, string) {
-  this._inputField.value = string;
-  this._nextField.select();
-};
-
-
-/**
- *
- */
-UserSuggestionBox.prototype._redisplayUserSuggestionBox = function() {
-  var partialInputString = this._inputField.value;
-  var listOfMatchingStrings = [];
-  var key;
-  
-  for (key in this._listOfEntries) {
-    var entry = this._listOfEntries[key];
-    var lowerCaseEntryString = entry.getDisplayName().toLowerCase();
-    var lowerCaseInputString = partialInputString.toLowerCase();
-    var numberOfCharactersToCompare = lowerCaseInputString.length;
-    var shortEntryString = lowerCaseEntryString.substring(0, numberOfCharactersToCompare);
-    if (shortEntryString == lowerCaseInputString) {
-      // we have a match!
-      listOfMatchingStrings.push(entry.getDisplayName());
-    }
-  }
-  
-  if (listOfMatchingStrings.length === 0) {
-    // make the suggestion box disappear
-    this._userSuggestionBoxDivElement.style.display = "none";
-  } else {
-    View.removeChildrenOfElement(this._userSuggestionBoxDivElement);
-    var table = document.createElement('table');
-    var rowNumber = 0;
-    var columnNumber = 0;
-    for (key in listOfMatchingStrings) {
-      var string = listOfMatchingStrings[key];
-      var textNode = document.createTextNode(string);
-      var row = table.insertRow(rowNumber);
-      var cell = row.insertCell(columnNumber);
-      cell.appendChild(textNode);
-      cell.onmousedown = this._clickOnSelection.bindAsEventListener(this, string);
-      rowNumber += 1;
-    }
-    this._userSuggestionBoxDivElement.appendChild(table);
-    
-    // set-up the suggestion box to open just below the input field it comes from
-    var suggestionBoxTop = Util.getOffsetTopFromElement(this._inputField) + this._inputField.offsetHeight;
-    var suggestionBoxLeft = Util.getOffsetLeftFromElement(this._inputField);
-    this._userSuggestionBoxDivElement.style.top = suggestionBoxTop + "px"; 
-    this._userSuggestionBoxDivElement.style.left = suggestionBoxLeft + "px";
-    // alert(this._inputField.offsetWidth);
-    this._userSuggestionBoxDivElement.style.width = (this._inputField.offsetWidth - 2)+ "px";
-    
-    // this._userSuggestionBoxDivElement.style.zIndex = 11;
-    this._userSuggestionBoxDivElement.className = "suggestion_box";
-    this._userSuggestionBoxDivElement.style.visibility = "visible";
-    this._userSuggestionBoxDivElement.style.display = "block";
-  }
-};
-
-
-// -------------------------------------------------------------------
-// End of file
-// -------------------------------------------------------------------

Deleted: trunk/source/MultiEntriesView.js
===================================================================
--- trunk/source/MultiEntriesView.js	2005-07-03 16:58:52 UTC (rev 216)
+++ trunk/source/MultiEntriesView.js	2005-07-05 19:05:49 UTC (rev 217)
@@ -1,296 +0,0 @@
-/*****************************************************************************
- MultiEntries.js
- 
-******************************************************************************
- Written in 2005 by 
-    Brian Douglas Skinner <brian.skinner at gumption.org>
-    Chih-Chao Lam <chao at cs.stanford.edu>
-  
- Copyright rights relinquished under the Creative Commons  
- Public Domain Dedication:
-    http://creativecommons.org/licenses/publicdomain/
-  
- You can copy freely from this file.  This work may be freely reproduced, 
- distributed, transmitted, used, modified, built upon, or otherwise exploited
- by anyone for any purpose.
-  
- This work is provided on an "AS IS" basis, without warranties or conditions 
- of any kind, either express or implied, including, without limitation, any 
- warranties or conditions of title, non-infringement, merchantability, or 
- fitness for a particular purpose. You are solely responsible for determining 
- the appropriateness of using or distributing the work and assume all risks 
- associated with use of this work, including but not limited to the risks and 
- costs of errors, compliance with applicable laws, damage to or loss of data 
- or equipment, and unavailability or interruption of operations.
-
- In no event shall the authors or contributors have any liability for any 
- direct, indirect, incidental, special, exemplary, or consequential damages,
- however caused and on any theory of liability, whether in contract, strict 
- liability, or tort (including negligence), arising in any way out of or in 
- connection with the use or distribution of the work.
-*****************************************************************************/
-
-
-// -------------------------------------------------------------------
-// Dependencies, expressed in the syntax that JSLint understands:
-// 
-/*global document  */
-/*global Util  */
-/*global Item  */
-/*global EntryView  */
-// -------------------------------------------------------------------
-
-
-
-// -------------------------------------------------------------------
-// MultiEntriesView public class constants
-// -------------------------------------------------------------------
-MultiEntriesView.SEPARATOR = " ? ";
-MultiEntriesView.SEPARATOR_COLOR = '#999999';
-
-
-/**
- * An instance of MultiEntriesView can be placed in any parent container View
- * to display and (if in edit mode) edit multi-lines of text
- *
- * @scope    public instance constructor
- * @extends  View
- * @param    superview    The view that this view is nested in. 
- * @param    htmlElement      The HTMLElement to display the HTML in. 
- * @param    item         The Item to be displayed and edited by this view. 
- * @param    attribute    The attribute of the item to be displayed.
- * @param    isMultiLine     a boolean indicating if text view is single line or multi-line
- */
-MultiEntriesView.prototype = new View();  // makes MultiEntriesView be a subclass of View
-function MultiEntriesView(superview, htmlElement, item, attribute) {
-  View.call(this, superview, htmlElement, "MultiEntriesView");
-
-  Util.assert(item instanceof Item);
-  Util.assert(attribute instanceof Item); // PENDING need to check that attribute is an attribute
-  
-  this._item = item;
-  this._attribute = attribute;
-  this._entryViews = null;
-  this._listOfSuggestions = null;
-}
-
-
-/**
- * Updates the HTML elements in this view to reflect any changes in 
- * the item's attribute values.
- *
- * @scope    public instance method
- */
-MultiEntriesView.prototype.refresh = function() {
-  if (!this._myHasEverBeenDisplayedFlag) {
-    this._buildView();
-  } else {
-  // if (weHaveBeenNotifiedOfChangesTo(this._item)) {
-  //   var newText = getNewValueFrom(this._item);
-  //   this.textNode.data = newText;
-  // }
-  }
-};
-
-
-/**
- * This method will only ever be called by one of our EntryView subviews.
- * The EntryView will call this method during the transaction in which
- * the EntryView is creating the first Entry for a provisional item, 
- * causing the provisional item to become "real".
- * 
- * @scope    package instance method
- * @param    item      The Item which just became real. 
- */
-MultiEntriesView.prototype._provisionalItemJustBecomeReal = function(item) {
-  var superview = this.getSuperview();
-  if (superview._provisionalItemJustBecomeReal) {
-    superview._provisionalItemJustBecomeReal(item);
-  }
-};
-
-
-/**
- *
- */
-MultiEntriesView.prototype.noLongerProvisional = function() {
-  Util.assert(this._entryViews.length == 1); // provisional item should only have one entry
-  for (var key in this._entryViews) {
-    var entry = this._entryViews[key];
-    entry.noLongerProvisional();
-  }
-};
-
-
-/**
- *
- */
-MultiEntriesView.prototype.select = function(selectFirst) {
-  var index = selectFirst ? 0 : this._entryViews.length - 1;
-  this._entryViews[index].startEditing();
-};
-
-
-/**
- *
- */
-MultiEntriesView.prototype.setSuggestions = function(listOfSuggestions) {
-  this._listOfSuggestions = listOfSuggestions;
-  for (var key in this._entryViews) {
-    var entry = this._entryViews[key];
-    entry.setSuggestions(listOfSuggestions);
-  }
-};
-
-
-/**
- *
- */
-MultiEntriesView.prototype.setKeyPressFunction = function(keyPressFunction) {
-  Util.assert(keyPressFunction instanceof Function);
-  this._keyPressFunction = keyPressFunction;
-};
-
-
-/**
- * Sets a function to be used when onclick is called to the EntryView
- *
- * @scope    public instance method
- * @param    onClickFunction    A function to call. 
- */
-MultiEntriesView.prototype.setClickFunction = function(onClickFunction) {
-  Util.assert(onClickFunction instanceof Function);
-  this._clickFunction = onClickFunction;
-};
-
-
-/**
- *
- */
-MultiEntriesView.prototype._handleClick = function(eventObject, entryView) {
-  if (this._clickFunction && this._clickFunction(eventObject, entryView)) {
-    return true;
-  }
-  return false;
-};
-
-
-/**
- *
- */
-MultiEntriesView.prototype._handleOwnClick = function(eventObject) {
-  var lastEntry = this._entryViews[this._entryViews.length-1];
-  if (this._handleClick(eventObject, lastEntry)) {return true;}
-  if (eventObject.target == this.getHtmlElement()) {lastEntry.startEditing();}
-};
-
-
-/**
- *
- */
-MultiEntriesView.prototype._keyPressOnEditField = function(eventObject, entryView) {
-  Util.assert(entryView instanceof EntryView);
-  var asciiValueOfKey = eventObject.keyCode;
-  var move, doCreateNewEntry;
-  switch (asciiValueOfKey) {
-    case Util.ASCII_VALUE_FOR_LEFT_ARROW: move = -1; break;
-    case Util.ASCII_VALUE_FOR_RIGHT_ARROW: move = 1; break;
-    case Util.ASCII_VALUE_FOR_RETURN:
-      if (eventObject.altKey) {
-        doCreateNewEntry = true;
-        break;
-      }
-      if (entryView != this._entryViews[this._entryViews.length-1]) {move=1;}
-      break;
-    default: 
-      move = 0; 
-      break;
-  }
-  if (doCreateNewEntry) {
-    entryView.stopEditing();
-    this._addSeparator();
-    this._addEntryView(null).startEditing();
-    return true;
-  }
-  if (move !== 0) {
-    var index = Util.getArrayIndex(this._entryViews, entryView);
-    Util.assert(index != -1);
-    index += move;
-    if (index >= 0 && index < this._entryViews.length) {
-      entryView.stopEditing();
-      this._entryViews[index].startEditing();
-      return true;
-    }
-  }
-  if (this._keyPressFunction && this._keyPressFunction(eventObject, entryView)) {
-    return true;
-  }
-  return false;
-};
-
-
-/**
- *
- */
-MultiEntriesView.prototype._addEntryView = function(entry) {
-  var spanElement = document.createElement("span");
-  spanElement.style.width = '100%';
-  var anEntryView = new EntryView(this, spanElement, this._item, this._attribute, entry);
-  this._entryViews.push(anEntryView);
-  this.getHtmlElement().appendChild(spanElement);
-  anEntryView.refresh();
-  if (this.isInEditMode()) {
-    var listener = this;
-    anEntryView.setSuggestions(this._listOfSuggestions);
-    anEntryView.setKeyPressFunction(function (evt, entryView) {return listener._keyPressOnEditField(evt, entryView);});
-    anEntryView.setClickFunction(function (evt, entryView) {return listener._handleClick(evt, entryView);});
-  }
-  return anEntryView;
-};
-
-
-/**
- *
- */
-MultiEntriesView.prototype._addSeparator = function() {
-  var spanElement = document.createElement("span");
-  spanElement.appendChild(document.createTextNode(MultiEntriesView.SEPARATOR));
-  spanElement.style.color = MultiEntriesView.SEPARATOR_COLOR;
-  this.getHtmlElement().appendChild(spanElement);
-  return spanElement;
-};
-
-
-/**
- * Re-creates all the HTML for the MultiEntriesView, and hands the HTML to the 
- * browser to be re-drawn.
- *
- * @scope    public instance method
- */
-MultiEntriesView.prototype._buildView = function() {
-  var htmlElement = this.getHtmlElement();
-  View.removeChildrenOfElement(htmlElement);
-  this._entryViews = [];
-  
-  var entries = this._item.getEntriesForAttribute(this._attribute);
-  if (this._item.isProvisional() || entries.length === 0) {
-    this._addEntryView(null);
-  }
-  else {
-    for (var i=0; i<entries.length; ++i) {
-      var anEntry = entries[i];
-      this._addEntryView(anEntry);
-      if (i < (entries.length-1)) { this._addSeparator();}
-    }
-  }
-  
-  if (this.isInEditMode()) {
-    htmlElement.onclick = this._handleOwnClick.bindAsEventListener(this);
-  } 
-  this._myHasEverBeenDisplayedFlag = true;
-};
-
-
-// -------------------------------------------------------------------
-// End of file
-// -------------------------------------------------------------------
\ No newline at end of file

Deleted: trunk/source/NavbarView.js
===================================================================
--- trunk/source/NavbarView.js	2005-07-03 16:58:52 UTC (rev 216)
+++ trunk/source/NavbarView.js	2005-07-05 19:05:49 UTC (rev 217)
@@ -1,160 +0,0 @@
-/*****************************************************************************
- NavbarView.js
-
-******************************************************************************
- Written in 2005 by 
-    Brian Douglas Skinner <brian.skinner at gumption.org>
-    Mignon Belongie
-
- Copyright rights relinquished under the Creative Commons  
- Public Domain Dedication:
-    http://creativecommons.org/licenses/publicdomain/
-
- You can copy freely from this file.  This work may be freely reproduced, 
- distributed, transmitted, used, modified, built upon, or otherwise exploited
- by anyone for any purpose.
-
- This work is provided on an "AS IS" basis, without warranties or conditions 
- of any kind, either express or implied, including, without limitation, any 
- warranties or conditions of title, non-infringement, merchantability, or 
- fitness for a particular purpose. You are solely responsible for determining 
- the appropriateness of using or distributing the work and assume all risks 
- associated with use of this work, including but not limited to the risks and 
- costs of errors, compliance with applicable laws, damage to or loss of data 
- or equipment, and unavailability or interruption of operations.
-
- In no event shall the authors or contributors have any liability for any 
- direct, indirect, incidental, special, exemplary, or consequential damages,
- however caused and on any theory of liability, whether in contract, strict 
- liability, or tort (including negligence), arising in any way out of or in 
- connection with the use or distribution of the work.
-*****************************************************************************/
-
-
-// -------------------------------------------------------------------
-// Dependencies, expressed in the syntax that JSLint understands:
-// 
-/*global window */
-/*global RootView */
-// -------------------------------------------------------------------
-
-
-// -------------------------------------------------------------------
-// NavbarView public class constants
-// -------------------------------------------------------------------
-NavbarView.CSS_CLASS_MENU      = "menu";
-NavbarView.CSS_CLASS_MENU_ITEM = "menu_item";
-
-
-/**
- * The RootView uses an instance of a NavbarView to display a navigation
- * bar, with links to pages.
- *
- * @scope    public instance constructor
- * @extends  View
- * @param    superview    The view that serves as the superview for this view. 
- * @param    htmlElement    The HTMLElement to display the HTML in. 
- */
-NavbarView.prototype = new View();  // makes NavbarView be a subclass of View
-function NavbarView(superview, htmlElement, htmlElementForAnchors) {
-  View.call(this, superview, htmlElement, "NavbarView");
-  this._htmlElementForAnchors = htmlElementForAnchors;
-}
-
-
-/**
- * Re-creates all the HTML for the view, and hands the HTML to the 
- * browser to be re-drawn.
- *
- * @scope    public instance method
- */
-NavbarView.prototype.refresh = function() {
-  if (!this.hasEverBeenDisplayed()) {
-    this._rebuildView();
-    this._myHasEverBeenDisplayedFlag = true;
-  }
-};
-
-
-// -------------------------------------------------------------------
-// Private instance methods
-// -------------------------------------------------------------------
-
-/**
- * Re-creates the HTML for the view, and hands the HTML to the 
- * browser to be re-drawn.
- *
- * @scope    private instance method
- */
-NavbarView.prototype._rebuildView = function() {
-  var categoryCalledPage = this.getWorld().getItemFromUuid(RootView.UUID_FOR_CATEGORY_PAGE);
-  categoryCalledPage.addObserver(this);
-  var listOfPages = this.getWorld().getItemsInCategory(categoryCalledPage);
-  var key;
-  var page;
-
-  View.removeChildrenOfElement(this._htmlElementForAnchors);
-  for (key in listOfPages) {
-    page = listOfPages[key];
-    var anchor = View.createAndAppendElement(this._htmlElementForAnchors, "a");
-    anchor.setAttribute("name", RootView.URL_PAGE_PREFIX + page._getUuid());
-  }
-  
-  var divElement = this.getHtmlElement();
-  View.removeChildrenOfElement(divElement); 
-  var ulElement = View.createAndAppendElement(divElement, "ul", NavbarView.CSS_CLASS_MENU);
-  var rootView = this.getRootView();
-  for (key in listOfPages) {
-    page = listOfPages[key];
-    page.addObserver(this);
-    var liElement = View.createAndAppendElement(ulElement, "li", NavbarView.CSS_CLASS_MENU_ITEM);
-    var anchorElement = View.createAndAppendElement(liElement, "a");
-    var menuUrl = rootView.getUrlForItem(page);
-    anchorElement.setAttribute("href", menuUrl);
-    var menuText = page.getDisplayString();
-    View.createAndAppendTextNode(anchorElement, menuText);
-    anchorElement.onclick = RootView.clickOnLocalLink.bindAsEventListener();
-  }
-  
-  var newPageButton = View.createAndAppendElement(divElement, "input", RootView.CSS_CLASS_EDIT_TOOL);
-  newPageButton.type = "button";
-  newPageButton.value = "New Page";
-  newPageButton.onclick = this._clickOnNewPageButton.bindAsEventListener(this);
-};
-
-
-// -------------------------------------------------------------------
-// Event handler methods
-// -------------------------------------------------------------------
-
-/**
- * Called when the user clicks on the "New Page" button.
- *
- * @scope    private instance method
- */
-NavbarView.prototype._clickOnNewPageButton = function(eventObject) {
-  var rootView = this.getRootView();
-  var newPage = rootView.newPage();
-  window.location = rootView.getUrlForItem(newPage);
-  rootView.setCurrentContentViewFromUrl();
-};
-
-
-// -------------------------------------------------------------------
-// Observer methods
-// -------------------------------------------------------------------
-
-/**
- * Called after there's been some change to one of the pages displayed
- * in the Navbar.
- *
- * @scope    public instance method
- */
-NavbarView.prototype.observedItemHasChanged = function(item, listOfRecordsForItem) {
-  // alert("Navbar observed: " + item.getDisplayString());
-  this._rebuildView();
-};
-
-// -------------------------------------------------------------------
-// End of file
-// -------------------------------------------------------------------

Deleted: trunk/source/PageView.js
===================================================================
--- trunk/source/PageView.js	2005-07-03 16:58:52 UTC (rev 216)
+++ trunk/source/PageView.js	2005-07-05 19:05:49 UTC (rev 217)
@@ -1,234 +0,0 @@
-/*****************************************************************************
- PageView.js
- 
-******************************************************************************
- Written in 2005 by 
-    Brian Douglas Skinner <brian.skinner at gumption.org>
-    Chih-Chao Lam <chao at cs.stanford.edu>
-  
- Copyright rights relinquished under the Creative Commons  
- Public Domain Dedication:
-    http://creativecommons.org/licenses/publicdomain/
-  
- You can copy freely from this file.  This work may be freely reproduced, 
- distributed, transmitted, used, modified, built upon, or otherwise exploited
- by anyone for any purpose.
-  
- This work is provided on an "AS IS" basis, without warranties or conditions 
- of any kind, either express or implied, including, without limitation, any 
- warranties or conditions of title, non-infringement, merchantability, or 
- fitness for a particular purpose. You are solely responsible for determining 
- the appropriateness of using or distributing the work and assume all risks 
- associated with use of this work, including but not limited to the risks and 
- costs of errors, compliance with applicable laws, damage to or loss of data 
- or equipment, and unavailability or interruption of operations.
-
- In no event shall the authors or contributors have any liability for any 
- direct, indirect, incidental, special, exemplary, or consequential damages,
- however caused and on any theory of liability, whether in contract, strict 
- liability, or tort (including negligence), arising in any way out of or in 
- connection with the use or distribution of the work.
-*****************************************************************************/
-
-
-// -------------------------------------------------------------------
-// Dependencies, expressed in the syntax that JSLint understands:
-// 
-/*global document, HTMLElement  */
-/*global Util  */
-/*global Item  */
-/*global RootView, SectionView, TablePlugin, EntryView  */
-// -------------------------------------------------------------------
-
-
-// -------------------------------------------------------------------
-// PageView public class constants
-// -------------------------------------------------------------------
-// PageView.CSS_CLASS_PAGE_HEADER = "page_header";
-PageView.UUID_FOR_ATTRIBUTE_SECTIONS_IN_PAGE = "00030000-ce7f-11d9-8cd5-0011113ae5d6";
-PageView.UUID_FOR_ATTRIBUTE_PAGE_THIS_SECTION_APPEARS_ON = "00030001-ce7f-11d9-8cd5-0011113ae5d6";
-
-
-/**
- * Creates a new section in the repository
- *
- * @scope    public class method
- * @param    inPage    The Page Item to insert the new section into
- */
-PageView.newSection = function(repository, inPage) {
-  var attributeCalledQuerySpec = repository.getAttributeCalledQuerySpec();
-  var categoryCalledQuery = repository.getCategoryCalledQuery();
-  var attributeCalledPluginView = repository.getItemFromUuid(SectionView.UUID_FOR_ATTRIBUTE_PLUGIN_VIEW);
-  var attributeCalledSectionsInPage = repository.getItemFromUuid(PageView.UUID_FOR_ATTRIBUTE_SECTIONS_IN_PAGE);
-  var attributeCalledPageThisSectionAppearsOn = repository.getItemFromUuid(PageView.UUID_FOR_ATTRIBUTE_PAGE_THIS_SECTION_APPEARS_ON);
-  var attributeCalledSectionThisQueryBelongsTo = repository.getItemFromUuid(SectionView.UUID_FOR_ATTRIBUTE_SECTION_THIS_QUERY_BELONGS_TO);
-  var categoryCalledSection = repository.getItemFromUuid(RootView.UUID_FOR_CATEGORY_SECTION);
-  var tablePluginView = repository.getItemFromUuid(TablePlugin.UUID_FOR_PLUGIN_VIEW_TABLE);
-  
-  repository.beginTransaction();
-  var newSection = repository.newItem("New Section");
-  newSection.assignToCategory(categoryCalledSection);
-  inPage.addConnectionEntry(attributeCalledSectionsInPage, newSection, attributeCalledPageThisSectionAppearsOn);
-  newSection.addEntryForAttribute(attributeCalledPluginView, tablePluginView);
-
-  var newQuery = repository.newItem("New Query");
-  newQuery.assignToCategory(categoryCalledQuery);
-  newSection.addConnectionEntry(attributeCalledQuerySpec, newQuery, attributeCalledSectionThisQueryBelongsTo);
-  repository.endTransaction();
-  return newSection;
-};
-
-
-/**
- * The RootView uses an instance of a PageView to display a Page in the
- * browser window.
- *
- * @scope    public instance constructor
- * @extends  View
- * @param    superview    The View that serves as the superview for this view. 
- * @param    htmlElement    The HTMLElement to display this view in. 
- * @param    pageItem        The page item to be displayed by this view. 
- */
-PageView.prototype = new View();  // makes PageView be a subclass of View
-function PageView(superview, htmlElement, pageItem) {
-  Util.assert(htmlElement instanceof HTMLElement);
-  Util.assert(pageItem instanceof Item);
-
-  View.call(this, superview, htmlElement, "PageView");
-
-  // instance properties
-  this._pageItem = pageItem;
-  
-  this._pageSummaryView = null;
-  this._headerText = null;
-  this._listOfSectionViews = [];
-}
-
-
-/**
- * Returns a string that gives the name of the page.
- *
- * @scope    public instance method
- * @return   A string that gives the name of the page.
- */
-PageView.prototype.getPageTitle = function() {
-  var pageTitle = this._pageItem.getDisplayString();
-  return pageTitle;
-};
-
-  
-/**
- * Updates the HTML elements in this view to reflect any changes in 
- * the data, and tells the sub-views to refresh themselves too.
- *
- * @scope    public instance method
- */
-PageView.prototype.refresh = function() {
-  if (!this._myHasEverBeenDisplayedFlag) {
-    this.doInitialDisplay();
-  } else {
-    this._headerText.refresh();
-    this._pageSummaryView.refresh();
-    for (var key in this._listOfSectionViews) {
-      var sectionView = this._listOfSectionViews[key];      
-      sectionView.refresh();
-    }
-  }
-};
-
-
-/**
- * Re-creates all the HTML for the PageView, and hands the HTML to the 
- * browser to be re-drawn.
- *
- * @scope    public instance method
- */
-PageView.prototype.doInitialDisplay = function() {
-  Util.assert(this.getHtmlElement() instanceof HTMLElement);
-  
-  var attributeCalledName = this.getWorld().getAttributeCalledName();
-  var attributeCalledSummary = this.getWorld().getAttributeCalledSummary();
-
-  var pageDivElement = this.getHtmlElement();
-  
-  var headerElement = View.createAndAppendElement(pageDivElement, "h1");
-  this._headerText = new EntryView(this, headerElement, this._pageItem, attributeCalledName,
-    this._pageItem.getSingleEntryFromAttribute(attributeCalledName), false);
-
-  var summaryViewDiv = View.createAndAppendElement(pageDivElement, "div");
-  this._pageSummaryView = new EntryView(this, summaryViewDiv, this._pageItem, attributeCalledSummary,
-    this._pageItem.getSingleEntryFromAttribute(attributeCalledSummary), true);
-
-  // add <div> elements for each of the sections on the page
-  // and create a new SectionView for each section
-  var attributeCalledSectionsInPage = this.getWorld().getItemFromUuid(PageView.UUID_FOR_ATTRIBUTE_SECTIONS_IN_PAGE);
-  var listOfEntriesForSections = this._pageItem.getEntriesForAttribute(attributeCalledSectionsInPage);
-  
-  for (var key in listOfEntriesForSections) {
-    var entryForSection = listOfEntriesForSections[key];
-    var section = entryForSection.getConnectedItem(this._pageItem);
-    if (section) {
-      this._buildNewSection(section);
-    }
-  }
-
-  this._buildEditControls();
-  this._myHasEverBeenDisplayedFlag = true;
-  this.refresh();
-};
-
-
-/**
- * Creates a new section in this page.
- *
- * @scope    private instance method
- * @param    sectionItem    newSection item
- * @param    insertBeforeElement    Optional. The HTML element that this new section view should come before on the page.
- */
-PageView.prototype._buildNewSection = function(sectionItem, insertBeforeElement) {
-  var pageDivElement = this.getHtmlElement();
-  var sectionViewDiv = document.createElement("div");
-  var sectionView = new SectionView(this, sectionViewDiv, sectionItem);
-  if (insertBeforeElement) {
-    pageDivElement.insertBefore(sectionViewDiv, insertBeforeElement);
-  }
-  else {
-    pageDivElement.appendChild(sectionViewDiv);
-  }
-  this._listOfSectionViews.push(sectionView);
-  return sectionView;
-};
-
-
-/**
- * Called when the user clicks on the "New Section" button.
- *
- * @scope    private instance method
- */
-PageView.prototype._addNewSection = function() {
-  var newSection = PageView.newSection(this.getWorld(), this._pageItem);
-  this._buildNewSection(newSection, this._editModeDiv).refresh();
-};
-
-
-/**
- * Create the "new section" button in EditMode.
- *
- * @scope    private instance method
- */
-PageView.prototype._buildEditControls = function() {
-  if (!this._editModeDiv) {
-    var pageDivElement = this.getHtmlElement();
-    var cssClass = SectionView.CSS_CLASS_SECTION + " " + RootView.CSS_CLASS_EDIT_TOOL;
-    this._editModeDiv = View.createAndAppendElement(pageDivElement, "div", cssClass);
-    View.createAndAppendElement(this._editModeDiv, "br");
-    var editButton = View.createAndAppendElement(this._editModeDiv, "input");
-    editButton.type = "Button";
-    editButton.value = "New Section";
-    editButton.onclick = this._addNewSection.bindAsEventListener(this);
-  }
-};
-
-// -------------------------------------------------------------------
-// End of file
-// -------------------------------------------------------------------

Deleted: trunk/source/PluginView.js
===================================================================
--- trunk/source/PluginView.js	2005-07-03 16:58:52 UTC (rev 216)
+++ trunk/source/PluginView.js	2005-07-05 19:05:49 UTC (rev 217)
@@ -1,119 +0,0 @@
-/*****************************************************************************
- PluginView.js
-
-******************************************************************************
- Written in 2005 by 
-    Chih-Chao Lam <chao at cs.stanford.edu>
-
- Copyright rights relinquished under the Creative Commons  
- Public Domain Dedication:
-    http://creativecommons.org/licenses/publicdomain/
-
- You can copy freely from this file.  This work may be freely reproduced, 
- distributed, transmitted, used, modified, built upon, or otherwise exploited
- by anyone for any purpose.
-
- This work is provided on an "AS IS" basis, without warranties or conditions 
- of any kind, either express or implied, including, without limitation, any 
- warranties or conditions of title, non-infringement, merchantability, or 
- fitness for a particular purpose. You are solely responsible for determining 
- the appropriateness of using or distributing the work and assume all risks 
- associated with use of this work, including but not limited to the risks and 
- costs of errors, compliance with applicable laws, damage to or loss of data 
- or equipment, and unavailability or interruption of operations.
-
- In no event shall the authors or contributors have any liability for any 
- direct, indirect, incidental, special, exemplary, or consequential damages,
- however caused and on any theory of liability, whether in contract, strict 
- liability, or tort (including negligence), arising in any way out of or in 
- connection with the use or distribution of the work.
-*****************************************************************************/
-
-
-// -------------------------------------------------------------------
-// Dependencies, expressed in the syntax that JSLint understands:
-// 
-/*global View  */
-// -------------------------------------------------------------------
-
-
-/**
- * A PluginView displays one or more content items. 
- *
- * @scope    public instance constructor
- * @extends  View
- * @param    superview    The superview for this view. 
- * @param    htmlElement    The HTMLElement to display this view in. 
- * @param    querySpec    The Query Spec item that provides the items for this PluginView to display
- * @param    layoutItem    ???. 
- * @syntax   var PluginView = new PluginView()
- */
-PluginView.prototype = new View();  // makes PluginView be a subclass of View
-function PluginView(superview, htmlElement, querySpec, layoutItem, cssClassName) {
-  if (!superview) {return;} // initial call that subclasses of PluginViews make without parameters
-
-  View.call(this, superview, htmlElement, cssClassName);
-
-  this._querySpec = querySpec;
-  this._queryRunner = this.getWorld().newQueryRunner(this._querySpec, this);
-  this._layout = layoutItem;
-  this._pluginItem = null;
-}
-
-
-// -------------------------------------------------------------------
-// Public instance methods
-// -------------------------------------------------------------------
-
-/**
- * Returns the registered name of this PluginView.
- *
- * @scope    public instance method
- * @return   A string.
- */
-PluginView.prototype.getPluginItem = function() {
-  if (!this._pluginItem) {
-    var pluginClass = this.getClass();
-    // alert(pluginClass);
-    var pluginItemUuid = pluginClass.getPluginItemUuid();
-    this._pluginItem = this.getWorld().getItemFromUuid(pluginItemUuid);
-  }
-  return this._pluginItem;
-};
-
-
-/**
- * Gets the list of content items to display.
- *
- * @scope    PENDING
- */
-PluginView.prototype.fetchItems = function() {
-  this._listOfItems = this._queryRunner.getResultItems();
-  return this._listOfItems;
-};
-
-
-/**
- * Returns the query spec item used to populate this plugin view.
- *
- * @scope    public instance method
- * @return   A query spec item.
- */
-PluginView.prototype.getQuerySpec = function() {
-  return this._querySpec;
-};
-
-
-/**
- * Does final clean-up.
- *
- * @scope    public instance method
- */
-PluginView.prototype.endOfLife = function() {
-  View.removeChildrenOfElement(this.getHtmlElement());
-};
-
-
-// -------------------------------------------------------------------
-// End of file
-// -------------------------------------------------------------------

Deleted: trunk/source/RootView.js
===================================================================
--- trunk/source/RootView.js	2005-07-03 16:58:52 UTC (rev 216)
+++ trunk/source/RootView.js	2005-07-05 19:05:49 UTC (rev 217)
@@ -1,550 +0,0 @@
-/*****************************************************************************
- RootView.js
- 
-******************************************************************************
- Written in 2005 by 
-    Brian Douglas Skinner <brian.skinner at gumption.org>
-    Chih-Chao Lam <chao at cs.stanford.edu>
-  
- Copyright rights relinquished under the Creative Commons  
- Public Domain Dedication:
-    http://creativecommons.org/licenses/publicdomain/
-  
- You can copy freely from this file.  This work may be freely reproduced, 
- distributed, transmitted, used, modified, built upon, or otherwise exploited
- by anyone for any purpose.
-  
- This work is provided on an "AS IS" basis, without warranties or conditions 
- of any kind, either express or implied, including, without limitation, any 
- warranties or conditions of title, non-infringement, merchantability, or 
- fitness for a particular purpose. You are solely responsible for determining 
- the appropriateness of using or distributing the work and assume all risks 
- associated with use of this work, including but not limited to the risks and 
- costs of errors, compliance with applicable laws, damage to or loss of data 
- or equipment, and unavailability or interruption of operations.
-
- In no event shall the authors or contributors have any liability for any 
- direct, indirect, incidental, special, exemplary, or consequential damages,
- however caused and on any theory of liability, whether in contract, strict 
- liability, or tort (including negligence), arising in any way out of or in 
- connection with the use or distribution of the work.
-*****************************************************************************/
-
-
-// -------------------------------------------------------------------
-// Dependencies, expressed in the syntax that JSLint understands:
-// 
-/*global window, document, alert, HTMLDivElement */
-/*global Item, World, Util */
-/*global View, PageView, ItemView, NavbarView, LoginView */
-// -------------------------------------------------------------------
-
-
-// -------------------------------------------------------------------
-// RootView public class constants
-// -------------------------------------------------------------------
-RootView.CSS_CLASS_PAGE_EDIT_BUTTON = "page_edit_button";
-RootView.CSS_CLASS_EDIT_MODE = "editmode";
-RootView.CSS_CLASS_VIEW_MODE = "viewmode";
-RootView.CSS_CLASS_EDIT_TOOL = "edit_tool";
-
-RootView.ELEMENT_ID_DEBUG_TEXTAREA = "debug_textarea";
-
-RootView.URL_PAGE_PREFIX = "page";
-RootView.URL_ITEM_PREFIX = "item";
-RootView.URL_HASH_PAGE_PREFIX = "#" + RootView.URL_PAGE_PREFIX;
-RootView.URL_HASH_ITEM_PREFIX = "#" + RootView.URL_ITEM_PREFIX;
-
-RootView.UUID_FOR_CATEGORY_PAGE    = "00020000-ce7f-11d9-8cd5-0011113ae5d6";
-RootView.UUID_FOR_CATEGORY_SECTION = "00020100-ce7f-11d9-8cd5-0011113ae5d6";
-
-
-// -------------------------------------------------------------------
-// RootView class properties
-// -------------------------------------------------------------------
-RootView._ourSingleInstance = null;
-
-
-/**
- * The OpenRecord app uses a single instance of RootView, which serves as the
- * outer-most view in the browser, and contains the current PageView as well
- * as some standard chrome (like the Edit button).
- *
- * @scope    public instance constructor
- * @syntax   var rootView = new RootView()
- */
-function RootView(world) {
-  window.onerror = Util.handleError;
-  // window.onunload = window.doOnunloadActions;
-  // window.onfocus = window.doOnfocusActions;
-  // window.onblur = window.doOnblurActions;
-  // window.onresize = window.doOnresizeActions;  
-  Util.setTargetsForExternalLinks();
-  
-  RootView._ourSingleInstance = this;
-   
-  Util.assert(world instanceof World);
-
-  // instance properties
-  this._world = world;
-  this._editMode = false;
-  this._showToolsMode = false;
-  this._numberOfCallsToDebug = 0;
-  this._debugTextarea = null;
-  
-  this._hashTableOfItemViewsKeyedByUuid = {};
-  this._hashTableOfPageViewsKeyedByUuid = {};
-  this._currentContentView = null;
-  this._homePage = null;
-  
-  window.document.body.innerHTML = "";
-  var rootDiv = View.createAndAppendElement(window.document.body, "div");
-  var anchorSpan = View.createAndAppendElement(rootDiv, "span");
- 
-  var headerP = View.createAndAppendElement(rootDiv, "p", "header");
-  var logoSpan = View.createAndAppendElement(headerP, "span", "logo");
-  logoSpan.innerHTML = '<a href="http://openrecord.org"><span class="logostart">open</span><span class="logomiddle">record</span><span class="logoend">.org</span></a>';
-  this._loginViewSpanElement = View.createAndAppendElement(headerP, "span");
-  View.createAndAppendElement(headerP, "br");
-  this._navbarDivElement = View.createAndAppendElement(rootDiv, "div");
-  var contentAreaDiv = View.createAndAppendElement(rootDiv, "div", "content_area");
-  this._contentViewDivElement = View.createAndAppendElement(contentAreaDiv, "div");
-  this._debugDivElement = View.createAndAppendElement(rootDiv, "div", "debug");
-
-  var footerP = View.createAndAppendElement(rootDiv, "p", "footer");
-  var copyrightSpan = View.createAndAppendElement(footerP, "span", "copyright");
-  copyrightSpan.innerHTML = 'You can copy freely from this site &mdash; ' +
-    'copyright rights relinquished under the Creative Commons ' +
-    '<a rel="license external" href="http://creativecommons.org/licenses/publicdomain/">Public Domain Dedication</a>.';
-
-  this._statusBlurbSpanElement = View.createAndAppendElement(footerP, "span", "fileformat");
-  View.createAndAppendElement(footerP, "br");
-  
-  this._anchorSpan = anchorSpan;
-  this._rootDiv = rootDiv;
-  
-  Util.setErrorReportCallback(RootView.displayTextInDebugTextarea);
-  this.setCurrentContentViewFromUrl();
-}
-
-
-// -------------------------------------------------------------------
-// Public class methods
-// -------------------------------------------------------------------
-
-/**
- * Returns the singleton RootView instance.
- *
- * @deprecated INSTEAD USE THE INSTANCE METHOD getRootView() AVAILABLE ON ALL View INSTANCES.
- * @scope    public class method
- * @return   The singleton instance of RootView. 
- */
-RootView.getRootView = function() {
-  return RootView._ourSingleInstance;
-};
-
-
-// -------------------------------------------------------------------
-// Public instance methods
-// -------------------------------------------------------------------
-
-/**
- * Returns the World instance that this RootView is using.
- *
- * @scope    public instance method
- * @return   A World object. 
- */
-RootView.prototype.getWorld = function() {
-  return this._world;
-};
-
-
-/**
- * Returns the page item to be used as the home page.
- *
- * @scope    public instance method
- * @return   A page item.
- */
-RootView.prototype.getHomePage = function() {
-  if (!this._homePage) {
-    var categoryCalledPage = this.getWorld().getItemFromUuid(RootView.UUID_FOR_CATEGORY_PAGE);
-    var listOfPages = this.getWorld().getItemsInCategory(categoryCalledPage);
-    if (listOfPages && listOfPages.length > 0) {
-      this._homePage = listOfPages[0];
-    } else {
-      Util.assert(false);
-    }
-  }
-  return this._homePage;
-};
-
-
-/**
- * Overrides the View method and returns this view.
- *
- * @scope    public instance method
- * @return   This view.
- */
-RootView.prototype.getRootView = function() {
-  return this;
-};
-
-
-/**
- * Returns true if we are in Edit Mode.
- *
- * @scope    public instance method
- * @return   A boolean value. True if we are in Edit Mode.
- */
-RootView.prototype.isInEditMode = function() {
-  return this._editMode;
-};
-
-    
-/**
- * Switches the UI into and out of edit mode.
- *
- * @scope    public instance method
- * @param    editModeFlag    A boolean. True to switch into edit mode, false to switch out.
- */
-RootView.prototype.setEditMode = function(editModeFlag) {
-  if (editModeFlag != this._editMode) {
-    var world = this.getWorld();
-    if (this._editMode) {
-      // world.endTransaction();
-      // window.document.body.style.cursor = "auto";
-    } else {
-      // world.beginTransaction();
-      // window.document.body.style.cursor = "crosshair";
-    }
-    this._editMode = !this._editMode;
-    this.display();
-    // this.displayTextInDebugTextarea(this._editMode);
-    // if (!this._editMode && window.location && (window.location.protocol == "file:")) {
-    //  RootView.displayTextInDebugTextarea(world._getJsonStringRepresentingAllItems());
-    // }
-  }
-};
-
-
-/**
- * Returns true if we are in Show Tools Mode.
- *
- * @scope    public instance method
- * @return   A boolean value. True if we are in Show Tools Mode.
- */
-RootView.prototype.isInShowToolsMode = function() {
-  return this._showToolsMode;
-};
-
-    
-/**
- * Switches the UI between showing edit tools and hiding edit tools.
- *
- * @scope    public instance method
- * @param    showToolsFlag    A boolean. True to show edit tools, false to hide edit tools.
- */
-RootView.prototype.setShowToolsMode = function(showToolsFlag) {
-  if (showToolsFlag != this._showToolsMode) {
-    this._showToolsMode = !this._showToolsMode;
-    this._rootDiv.className = (this.isInShowToolsMode()) ? RootView.CSS_CLASS_EDIT_MODE : RootView.CSS_CLASS_VIEW_MODE;
-  }
-};
-
-
-/**
- * Given an item, returns a relative URL that can be used to redirect the 
- * browser to a page that displays that time.
- *
- * @scope    public instance method
- * @param    item    Any item.
- */
-RootView.prototype.getUrlForItem = function(item) {
-  Util.assert(item instanceof Item);
-  var categoryCalledPage = this.getWorld().getItemFromUuid(RootView.UUID_FOR_CATEGORY_PAGE);
-  var prefix;
-  if (item.isInCategory(categoryCalledPage)) {
-    prefix = RootView.URL_HASH_PAGE_PREFIX;
-  } else {
-    prefix = RootView.URL_HASH_ITEM_PREFIX;
-  }
-  var url = prefix + item._getUuid();
-  return url;
-};
-
-
-/**
- * Gets the browser URL from window.location, finds or creates a corresponding
- * PageView or ItemView, and sets the current content view to the newly selected
- * PageView or ItemView.
- *
- * @scope    public instance method
- */
-RootView.prototype.setCurrentContentViewFromUrl = function() {
-  var contentViewToSwitchTo = null;
-  
-  if (window.location) {
-    if (window.location.hash) {
-      var originalHash = window.location.hash;
-      var uuidText = null;
-      var pageFromUuid = null;
-      var itemFromUuid = null;
-      var divElement = null;
-      var isUrlForPage = (originalHash.indexOf(RootView.URL_HASH_PAGE_PREFIX) != -1);
-      var isUrlForItem = (originalHash.indexOf(RootView.URL_HASH_ITEM_PREFIX) != -1);
-      if (isUrlForItem) {
-        uuidText = originalHash.replace(RootView.URL_HASH_ITEM_PREFIX, "");
-        contentViewToSwitchTo = this._hashTableOfItemViewsKeyedByUuid[uuidText];
-        if (!contentViewToSwitchTo) {
-          itemFromUuid = this._world.getItemFromUuid(uuidText);
-          if (itemFromUuid) {
-            divElement = View.createAndAppendElement(this._contentViewDivElement, "div");
-            contentViewToSwitchTo = new ItemView(this, divElement, itemFromUuid);
-            this._hashTableOfItemViewsKeyedByUuid[uuidText] = contentViewToSwitchTo;
-          }
-        }
-      } else {
-        if (isUrlForPage) {
-          uuidText = originalHash.replace(RootView.URL_HASH_PAGE_PREFIX, "");
-          contentViewToSwitchTo = this._hashTableOfPageViewsKeyedByUuid[uuidText];
-          if (!contentViewToSwitchTo) {
-            pageFromUuid = this.getWorld().getItemFromUuid(uuidText);
-            if (pageFromUuid) {
-              divElement = View.createAndAppendElement(this._contentViewDivElement, "div");
-              contentViewToSwitchTo = new PageView(this, divElement, pageFromUuid);
-              this._hashTableOfPageViewsKeyedByUuid[uuidText] = contentViewToSwitchTo;
-            }
-          }
-        } 
-      }
-    } 
-  }
-  
-  if (!contentViewToSwitchTo) {
-    var page = this.getHomePage();
-    contentViewToSwitchTo = this._hashTableOfPageViewsKeyedByUuid[page._getUuid()];
-    if (!contentViewToSwitchTo) {
-      divElement = window.document.createElement("div"); 
-      this._contentViewDivElement.appendChild(divElement);
-      contentViewToSwitchTo = new PageView(this, divElement, page);
-      this._hashTableOfPageViewsKeyedByUuid[page._getUuid()] = contentViewToSwitchTo;
-    }
-  }
-  if (this._currentContentView) {
-    this._currentContentView.includeOnScreen(false);
-  }
-  this._currentContentView = contentViewToSwitchTo;
-  this.display();
-};
-
-  
-/**
- * Re-creates all the HTML for the RootView, including the chrome and 
- * the current PageView, and hands the HTML to the browser to be re-drawn.
- *
- * @scope    public instance method
- */
-RootView.prototype.display = function() {
-  Util.assert(this._currentContentView instanceof Object);
-
-  document.title = this._currentContentView.getPageTitle() + " - openrecord.org";
-  this._rootDiv.className = (this.isInShowToolsMode()) ? RootView.CSS_CLASS_EDIT_MODE : RootView.CSS_CLASS_VIEW_MODE;
-  this._displayLoginSpan();
-  this._displayNavbar();
-  this._displayDebugArea();
-  this._currentContentView.includeOnScreen(true);
-  window.focus();
-};
-
-
-/**
- * Creates a new page.  Creates an new item representing a page, gives the
- * item an initial name and short name, puts one section in the page, and
- * sets up an initial query for the section.
- *
- * @scope    public instance method
- * @return   The newly created page item.
- */
-RootView.prototype.newPage = function() {
-  var repository = this.getWorld();
-  repository.beginTransaction();
-  var newPage = repository.newItem("New Page");
-  var attributeCalledSummary = repository.getAttributeCalledSummary();
-  var categoryCalledPage = repository.getItemFromUuid(RootView.UUID_FOR_CATEGORY_PAGE);
-  newPage.assignToCategory(categoryCalledPage);
-  newPage.addEntryForAttribute(attributeCalledSummary, "This is a new page.");
-
-  PageView.newSection(repository, newPage);
-
-  repository.endTransaction();
-  
-  return newPage;
-};
-
-
-// -------------------------------------------------------------------
-// Private instance methods
-// -------------------------------------------------------------------
-
-/**
- * Creates the HTML for the LoginView, and hands the HTML to the browser 
- * to be drawn.
- *
- * @scope    private instance method
- */
-RootView.prototype._displayLoginSpan = function() {
-  if (!this._loginView) {
-    this._loginView = new LoginView(this, this._loginViewSpanElement);
-    this._loginView.refresh();
-  }
-};
-
-
-/**
- * Re-creates the HTML for the Navbar, and hands the HTML to the browser 
- * to be re-drawn.
- *
- * @scope    private instance method
- */
-RootView.prototype._displayNavbar = function() {
-  if (!this._navbarView) {
-    this._navbarView = new NavbarView(this, this._navbarDivElement, this._anchorSpan);
-  }
-  this._navbarView.refresh();
-};
-
-
-/**
- * Re-creates the HTML for the Debug area, and hands the HTML to the browser 
- * to be re-drawn.
- *
- * @scope    private instance method
- */
-RootView.prototype._displayDebugArea = function() {
-  Util.assert(this._debugDivElement instanceof HTMLDivElement);
-
-  var listOfStrings = [];
-  listOfStrings.push("<textarea readonly id=\"" + RootView.ELEMENT_ID_DEBUG_TEXTAREA + "\" rows=\"20\" cols=\"100\" wrap=\"virtual\"></textarea>");
-  var finalString = listOfStrings.join("");
-  this._debugDivElement.innerHTML = finalString;
-  this._debugTextarea = document.getElementById(RootView.ELEMENT_ID_DEBUG_TEXTAREA);
-};
-
-
-// -------------------------------------------------------------------
-// Debug error display methods
-// -------------------------------------------------------------------
-
-/**
- * Displays a text string in the status blurb span.
- *
- * @scope    public class method
- * @param    text    A text string to be displayed. 
- */
-RootView.displayStatusBlurb = function(text) {
-  RootView._ourSingleInstance.displayStatusBlurb(text);
-};
-
-
-/**
- * Displays a text string in the status blurb span.
- *
- * @scope    public instance method
- * @param    text    A text string to be displayed. 
- */
-RootView.prototype.displayStatusBlurb = function(text) {
-  this._statusBlurbSpanElement.innerHTML = text;
-};
-
-
-/**
- * Displays a text string in the debug textarea.
- *
- * @scope    public class method
- * @param    text    A text string to be displayed. 
- */
-RootView.displayTextInDebugTextarea = function(text) {
-  RootView._ourSingleInstance.displayTextInDebugTextarea(text);
-};
-
-
-/**
- * Displays a text string in the debug textarea.
- *
- * @scope    public instance method
- * @param    text    A text string to be displayed. 
- */
-RootView.prototype.displayTextInDebugTextarea = function(text) {
-  this._numberOfCallsToDebug += 1;
-  if (this._numberOfCallsToDebug > 20) {
-    return;
-  }
-  if (this._debugTextarea) {
-    this._debugTextarea.value += text + "\n\n============================\n\n";
-    this._debugTextarea.style.visibility = "visible";
-    this._debugTextarea.style.display = "block";
-    this._debugTextarea.scrollIntoView();
-  }
-  else {
-    alert(text);
-  }
-};
-
-
-/**
- * Given a JavaScript object, gets all the values of all the object's properties,
- * and displays them in the debug textarea.
- *
- * @scope    public instance method
- * @param    object    Any sort of object. 
- */
-RootView.prototype.displayObjectInDebugTextarea = function(object) {
-  var outputText = "";
-  for (var property in object) {
-    outputText += property + " == " + object[property] + "\n";
-  }
-  this.displayTextInDebugTextarea(outputText);
-};
-
-
-// -------------------------------------------------------------------
-// Event handler methods
-// -------------------------------------------------------------------
-
-/**
- * Called when the user clicks on a menu item in the navbar, or on any other 
- * auto-generated link that points to other OpenRecord content.
- * 
- * Called from an HTML "li" element or an HTML "a" element on a generated page.
- * There is no need to call this method directly.
- *
- * @scope    public class method
- * @param    inEventObject    An event object. 
- */
-RootView.clickOnLocalLink = function(eventObject) {
-  eventObject = eventObject || window.event;
-  
-  var startTiming = new Date();
-  
-  // Cursor styles available:
-  // "wait", "auto", "default", "crosshair", "help"
-  // "n-resize", "s-resize", "e-resize", "w-resize"
-  // "ne-resize", "se-resize", "nw-resize", "sw-resize"
-  // window.document.body.style.cursor = "wait";
-
-  var htmlAnchorElement = Util.getTargetFromEvent(eventObject);
-  
-  window.location = htmlAnchorElement.href;
-  RootView._ourSingleInstance.setCurrentContentViewFromUrl();
-
-  // window.document.body.style.cursor = "default";
-  
-  var stopTiming = new Date();
-  var delayInMilliseconds = stopTiming.getTime() - startTiming.getTime();
-  RootView._ourSingleInstance.displayStatusBlurb("Page load: " + delayInMilliseconds + " milliseconds");
-};
-
-
-// -------------------------------------------------------------------
-// End of file
-// -------------------------------------------------------------------

Deleted: trunk/source/SectionView.js
===================================================================
--- trunk/source/SectionView.js	2005-07-03 16:58:52 UTC (rev 216)
+++ trunk/source/SectionView.js	2005-07-05 19:05:49 UTC (rev 217)
@@ -1,502 +0,0 @@
-/*****************************************************************************
- SectionView.js
- 
-******************************************************************************
- Written in 2005 by 
-    Brian Douglas Skinner <brian.skinner at gumption.org>
-    Chih-Chao Lam <chao at cs.stanford.edu>
-    Mignon Belongie
-  
- Copyright rights relinquished under the Creative Commons  
- Public Domain Dedication:
-    http://creativecommons.org/licenses/publicdomain/
-  
- You can copy freely from this file.  This work may be freely reproduced, 
- distributed, transmitted, used, modified, built upon, or otherwise exploited
- by anyone for any purpose.
-  
- This work is provided on an "AS IS" basis, without warranties or conditions 
- of any kind, either express or implied, including, without limitation, any 
- warranties or conditions of title, non-infringement, merchantability, or 
- fitness for a particular purpose. You are solely responsible for determining 
- the appropriateness of using or distributing the work and assume all risks 
- associated with use of this work, including but not limited to the risks and 
- costs of errors, compliance with applicable laws, damage to or loss of data 
- or equipment, and unavailability or interruption of operations.
-
- In no event shall the authors or contributors have any liability for any 
- direct, indirect, incidental, special, exemplary, or consequential damages,
- however caused and on any theory of liability, whether in contract, strict 
- liability, or tort (including negligence), arising in any way out of or in 
- connection with the use or distribution of the work.
-*****************************************************************************/
-
-
-// -------------------------------------------------------------------
-// Dependencies, expressed in the syntax that JSLint understands:
-// 
-/*global window, document  */
-/*global Util  */
-/*global Item  */
-/*global RootView, PageView, TablePlugin, EntryView  */
-// -------------------------------------------------------------------
-
-
-// -------------------------------------------------------------------
-// SectionView public class constants
-// -------------------------------------------------------------------
-SectionView.CSS_CLASS_SECTION = "SectionView";
-SectionView.CSS_CLASS_SIMPLE_TABLE = "simple_table";
-SectionView.CSS_CLASS_NEW_ITEM = "newitem";
-SectionView.CSS_CLASS_PLAIN = "plain";
-SectionView.CSS_CLASS_LABEL = "label";
-SectionView.CSS_CLASS_TITLE = "title";
-SectionView.CSS_CLASS_TEXT_FIELD_IN_TABLE_CELL = "text_field_in_table_cell";
-SectionView.CSS_CLASS_SELECTED = "selected";
-SectionView.CSS_CLASS_MORE_LINK = "more";
-SectionView.CSS_CLASS_ENTRY_VIEW = "entry_view";
-
-SectionView.ELEMENT_ID_SELECT_MENU_PREFIX = "select_menu_";
-
-SectionView.UUID_FOR_ATTRIBUTE_PLUGIN_VIEW       = "00040101-ce7f-11d9-8cd5-0011113ae5d6";
-SectionView.UUID_FOR_ATTRIBUTE_LAYOUT_DATA       = "00040102-ce7f-11d9-8cd5-0011113ae5d6";
-SectionView.UUID_FOR_ATTRIBUTE_APPLIES_TO_PLUGIN = "00040103-ce7f-11d9-8cd5-0011113ae5d6";
-
-SectionView.UUID_FOR_ATTRIBUTE_SECTION_THIS_LAYOUT_DATA_BELONGS_TO = "00040104-ce7f-11d9-8cd5-0011113ae5d6";
-SectionView.UUID_FOR_ATTRIBUTE_SECTION_THIS_QUERY_BELONGS_TO = "00040105-ce7f-11d9-8cd5-0011113ae5d6";
-// TablePlugin.UUID_FOR_ATTRIBUTE_TABLE_COLUMNS = "0004010a-ce7f-11d9-8cd5-0011113ae5d6";
-
-SectionView.UUID_FOR_CATEGORY_PLUGIN_VIEW        = "00040201-ce7f-11d9-8cd5-0011113ae5d6";
-SectionView.UUID_FOR_CATEGORY_LAYOUT_DATA        = "00040202-ce7f-11d9-8cd5-0011113ae5d6";
-
-
-// -------------------------------------------------------------------
-// SectionView class properties
-// -------------------------------------------------------------------
-SectionView._ourListOfRegisteredPluginClasses = [];
-SectionView._ourHashTableOfPluginClassesKeyedByPluginItemUuid = null;
-
-
-/**
- * A PageView uses instances of a SectionViews to display the Sections 
- * of a page. 
- *
- * @scope    public instance constructor
- * @extends  View
- * @param    superview    The view that serves as the superview for this view. 
- * @param    htmlElement    The HTMLElement to display the HTML in. 
- * @param    sectionItem    The Section item to be displayed in by this view. 
- * @syntax   var sectionView = new SectionView()
- */
-SectionView.prototype = new View();  // makes SectionView be a subclass of View
-function SectionView(superview, htmlElement, sectionItem) {
-  View.call(this, superview, htmlElement, "SectionView");
-
-  // instance properties
-  Util.assert(sectionItem instanceof Item);
-  this._section = sectionItem;
-
-  this._pluginView = null;
-  this._pluginDiv = null;
-  this._sectionSummaryView = null;
-  this._headerView = null;
-  this._queryEditSpan = null;
-  
-  if (!SectionView._ourHashTableOfPluginClassesKeyedByPluginItemUuid) {
-    SectionView._ourHashTableOfPluginClassesKeyedByPluginItemUuid = {};
-    for (var key in SectionView._ourListOfRegisteredPluginClasses) {
-      var pluginClass = SectionView._ourListOfRegisteredPluginClasses[key];
-      var pluginItemUuid = pluginClass.getPluginItemUuid();
-      SectionView._ourHashTableOfPluginClassesKeyedByPluginItemUuid[pluginItemUuid] = pluginClass;
-    }
-  }
-}
-
-
-// -------------------------------------------------------------------
-// Public class methods
-// -------------------------------------------------------------------
-
-/**
- * Given the name of a plugin ("Table", "Outline", etc.), returns a newly
- * created plugin object of that type, initialized to be the plugin for this 
- * SectionView.
- *
- * @scope    public class method
- * @param    pluginClass    A JavaScript class, such as TablePlugin. 
- * @param    pluginItemUuid    The UUID of the item representing that class of plugin. 
- */
-SectionView.registerPlugin = function(pluginClass, pluginItemUuid) {
-  SectionView._ourListOfRegisteredPluginClasses.push(pluginClass);
-};
-
-
-// -------------------------------------------------------------------
-// Public instance methods
-// -------------------------------------------------------------------
-
-/**
- * Given an item representing a class of plugin view, this method returns a 
- * newly created plugin view object of that class, initialized to be the plugin 
- * for this SectionView.
- *
- * @scope    public instance method
- * @param    pluginItem    An item representing a class of plugin view. 
- * @param    pluginDiv    The HTMLDivElement to display the plugin in. 
- * @return   A newly created plugin object, initialized to be the plugin for this section.
- */
-SectionView.prototype.getPluginInstanceFromPluginItem = function(pluginItem, pluginDiv) {
-  Util.assert(pluginItem instanceof Item);
-  
-  var newPlugin = null;
-  var pluginClass;
-  pluginClass = SectionView._ourHashTableOfPluginClassesKeyedByPluginItemUuid[pluginItem._getUuid()];
-  if (pluginClass) {
-    var pluginType = this.getWorld().getItemFromUuid(pluginClass.getPluginItemUuid());
-    var layoutData = this._getLayoutDataForPlugin(pluginType);
-    newPlugin = new pluginClass(this, pluginDiv, this.getQuerySpec(), layoutData);
-  }
-  return newPlugin;
-};
-
-
-/**
- * Returns query associated to this section.
- *
- * @scope    public instance method
- * @return   query associated to this section.
- */
-SectionView.prototype.getQuerySpec = function() {
-  var attributeCalledQuerySpec = this.getWorld().getAttributeCalledQuerySpec();
-  var queryEntry = this._section.getSingleEntryFromAttribute(attributeCalledQuerySpec);
-  if (queryEntry) {
-    return queryEntry.getConnectedItem(this._section);
-  }
-  return null;
-};
-
-
-/**
- * Updates the HTML elements in this view to reflect any changes in 
- * the data, and tells the sub-views to refresh themselves too.
- *
- * @scope    public instance method
- */
-SectionView.prototype.refresh = function() {
-  if (!this._myHasEverBeenDisplayedFlag) {
-    this.doInitialDisplay();
-  } else {
-    // refresh the <h2> element with the value: this._section.getDisplayName();  
-    this._refreshQueryEditSpan();
-    this._sectionSummaryView.refresh();
-    this._pluginView.refresh();
-    this._headerView.refresh();
-  }
-};
-
-
-/**
- * Re-creates all the HTML for the SectionView, and hands the HTML to the 
- * browser to be re-drawn.
- *
- * @scope    public instance method
- */
-SectionView.prototype.doInitialDisplay = function() {
-  if (!this.getHtmlElement()) {
-    return;
-  }
-  var attributeCalledPluginView = this.getWorld().getItemFromUuid(SectionView.UUID_FOR_ATTRIBUTE_PLUGIN_VIEW);
-  var selectedPluginViewEntry = this._section.getSingleEntryFromAttribute(attributeCalledPluginView);
-  var selectedPluginItem;
-  var selectedPluginClass;
-  if (selectedPluginViewEntry) {
-    selectedPluginItem = selectedPluginViewEntry.getValue();
-    selectedPluginClass = SectionView._ourHashTableOfPluginClassesKeyedByPluginItemUuid[selectedPluginItem._getUuid()];
-  } else {
-    selectedPluginClass = TablePlugin; 
-  }
-  
-  var sectionDiv = this.getHtmlElement();
-  var headerH2 = View.createAndAppendElement(sectionDiv, "h2");
-  var attributeCalledName = this.getWorld().getAttributeCalledName();
-  var attributeCalledSummary = this.getWorld().getAttributeCalledSummary();
-  this._headerView = new EntryView(this, headerH2, this._section, attributeCalledName,
-    this._section.getSingleEntryFromAttribute(attributeCalledName));
-  var summaryDiv = View.createAndAppendElement(sectionDiv, "div");
-  this._sectionSummaryView = new EntryView(this, summaryDiv, this._section, attributeCalledSummary,
-    this._section.getSingleEntryFromAttribute(attributeCalledSummary), true);
-  View.createAndAppendElement(sectionDiv, "p");
-
-  // create the editing controls, if we're in edit mode
-  var controlArea = View.createAndAppendElement(sectionDiv, "p", RootView.CSS_CLASS_EDIT_TOOL);
-  var textShowMeA = document.createTextNode("Show me a ");
-  controlArea.appendChild(textShowMeA);
-
-  // PENDING: We shouldn't call the private method _getUuid()
-  var selectMenuId = SectionView.ELEMENT_ID_SELECT_MENU_PREFIX + this._section._getUuid();
-  var selectElement = View.createAndAppendElement(controlArea, "select", null, selectMenuId);
-  var optionElement;
-  var listener;
-  selectElement.setAttribute("name", selectMenuId);
-  for (var key in SectionView._ourHashTableOfPluginClassesKeyedByPluginItemUuid) {
-    var pluginClass = SectionView._ourHashTableOfPluginClassesKeyedByPluginItemUuid[key];
-    optionElement = View.createAndAppendElement(selectElement, "option");
-    optionElement.selected = (selectedPluginClass == pluginClass);
-    optionElement.value = pluginClass.getPluginItemUuid();
-    var pluginItem = this.getWorld().getItemFromUuid(pluginClass.getPluginItemUuid());
-    optionElement.text = pluginItem.getDisplayString();
-    listener = this; 
-    Util.addEventListener(optionElement, "click", function(event) {listener.clickOnPluginSelectionMenu(event);});
-  }
-  
-  View.createAndAppendTextNode(controlArea," of items whose ");
-
-  this._queryEditSpan = View.createAndAppendElement(controlArea, "span");
-  // this._refreshQueryEditSpan();
-
-  View.createAndAppendTextNode(controlArea,".");
-
-  // create a div element for the plugin class to use
-  this._pluginDiv = View.createAndAppendElement(sectionDiv, "div");
-  this._pluginView = this.getPluginInstanceFromPluginItem(selectedPluginItem, this._pluginDiv);
-  this._myHasEverBeenDisplayedFlag = true;
-  this.refresh();
-};
-
-
-/**
- * Returns layout data of this section for a particular plugin
- * Creates a the layout data item if doesn't exist
- *
- * @param    pluginTypeItem    An item representing a class of plugin
- * @return    layout data of this section for a particular plugin
- */
-SectionView.prototype._getLayoutDataForPlugin = function(pluginTypeItem) {
-  var repository = this.getWorld();
-  var attributeLayoutData = repository.getItemFromUuid(SectionView.UUID_FOR_ATTRIBUTE_LAYOUT_DATA);
-  var entriesLayoutData = this._section.getEntriesForAttribute(attributeLayoutData);
-  var attributeAppliesToPlugin = repository.getItemFromUuid(SectionView.UUID_FOR_ATTRIBUTE_APPLIES_TO_PLUGIN);
-  if (entriesLayoutData) {
-    for (var i=0; i < entriesLayoutData.length; ++i) {
-      var layoutItem = entriesLayoutData[i].getConnectedItem(this._section);
-      var entriesAppliesToPlugin = layoutItem.getEntriesForAttribute(attributeAppliesToPlugin);
-      Util.assert(entriesAppliesToPlugin && entriesAppliesToPlugin.length == 1);
-      if (entriesAppliesToPlugin[0].getValue() == pluginTypeItem) {
-        return layoutItem;
-      }
-    }
-  }
-  
-  // layoutData not found, so create the item
-  var categoryCalledLayoutData = repository.getItemFromUuid(SectionView.UUID_FOR_CATEGORY_LAYOUT_DATA);
-  var attributeCalledSectionThisLayoutDataBelongsTo = repository.getItemFromUuid(SectionView.UUID_FOR_ATTRIBUTE_SECTION_THIS_LAYOUT_DATA_BELONGS_TO);
-  repository.beginTransaction();
-  layoutItem = repository.newItem("Layout data for " + pluginTypeItem.getDisplayString() + " of " + this._section.getDisplayString());
-  layoutItem.assignToCategory(categoryCalledLayoutData);
-  layoutItem.addEntryForAttribute(attributeAppliesToPlugin, pluginTypeItem);
-  // this._section.addEntryForAttribute(attributeLayoutData, layoutItem, repository.getTypeCalledItem());
-  this._section.addConnectionEntry(attributeLayoutData, layoutItem, attributeCalledSectionThisLayoutDataBelongsTo);
-  repository.endTransaction();
-  return layoutItem;
-};
-
-
-/**
- * Re-creates all the HTML for the SectionView, and hands the HTML to the 
- * browser to be re-drawn.
- *
- */
-SectionView.prototype._refreshQueryEditSpan = function() {
-  View.removeChildrenOfElement(this._queryEditSpan);
-  
-  var myQuery = this.getQuerySpec();
-  var attributeCalledQueryMatchingAttribute = this.getWorld().getAttributeCalledQueryMatchingAttribute();
-  var listOfMatchingAttrs = myQuery.getEntriesForAttribute(attributeCalledQueryMatchingAttribute);
-  var matchingAttribute;
-  if (listOfMatchingAttrs.length === 0) {
-    // by default matching attribute is category
-    matchingAttribute = this.getWorld().getAttributeCalledCategory();
-  }
-  else {
-    Util.assert(listOfMatchingAttrs.length==1, 'more than one matching attributes');
-    matchingAttribute = listOfMatchingAttrs[0].getValue();
-  }
-  var attributeCalledQueryMatchingValue = this.getWorld().getAttributeCalledQueryMatchingValue();
-  var listOfMatchingEntries = myQuery.getEntriesForAttribute(attributeCalledQueryMatchingValue);
-  var hasMatchingEntries = (listOfMatchingEntries && (listOfMatchingEntries.length > 0));
-  var matchingEntry = hasMatchingEntries ? listOfMatchingEntries[0] : null;
-  
-  var listOfAttributes = this.getWorld().getAttributes();
-  var selectElement = View.createAndAppendElement(this._queryEditSpan, "select");
-  for (var key in listOfAttributes) {
-    var anAttribute = listOfAttributes[key];
-    var optionElement = View.createAndAppendElement(selectElement, "option");
-    optionElement.selected = (matchingAttribute.getDisplayString() == anAttribute.getDisplayString());
-    optionElement.value = anAttribute._getUuid();
-    optionElement.onclick = this.clickOnAttributeMenu.bindAsEventListener(this);
-    optionElement.text = anAttribute.getDisplayString();
-  }
-  
-  View.createAndAppendTextNode(this._queryEditSpan, " is ");
-  
-  var listOfPossibleEntries = this.getWorld().getSuggestedItemsForAttribute(matchingAttribute);
-  var entrySpan = View.createAndAppendElement(this._queryEditSpan, "span");
-  
-  var entryView =  new EntryView(this, entrySpan, myQuery, attributeCalledQueryMatchingValue, matchingEntry);
-  entryView.setSuggestions(listOfPossibleEntries);
-  entryView.alwaysUseEditField();
-  entryView.setAutoWiden(true);
-  var attributeCalledExpectedType = this.getWorld().getAttributeCalledExpectedType();
-  var listOfExpectedTypeEntries = matchingAttribute.getEntriesForAttribute(attributeCalledExpectedType);
-  entryView.setExpectedTypeEntries(listOfExpectedTypeEntries);
-  entryView.refresh();
-  var listener = this;
-  entryView.setKeyPressFunction(function (evt, entryView) {return listener.keyPressOnMatchingValueField(evt, entryView);});
-  myQuery.addObserver(this);
-};
-
-
-// -------------------------------------------------------------------
-// Event handler methods
-// -------------------------------------------------------------------
-
-/**
- * Called when user is editing the matching value edit field.
- * We want to trap a "return" key 
- *
- * @scope    public instance method
- * @return   Returns true if the user pressed the return key, or false otherwise.
- */
-SectionView.prototype.keyPressOnMatchingValueField = function(event, anEntryView) {
-  if (event.keyCode == Util.ASCII_VALUE_FOR_RETURN) {
-    anEntryView.stopEditing();
-    return true;
-  }
-  return false;
-};
-
-
-/**
- * Called when the query belong to this section has changed
- *
- * @scope    public instance method
- */
-SectionView.prototype.observedItemHasChanged = function(item) {
-  item.removeObserver(this); //item no longer needs to be observed as query editor span is rebuilt
-  var myQuery = this.getQuerySpec();
-  Util.assert(item == myQuery);
-  var pluginItem = this._pluginView.getPluginItem();
-  this._pluginView.endOfLife();
-  this._pluginView = this.getPluginInstanceFromPluginItem(pluginItem, this._pluginDiv);
-  this.refresh();
-};
-
-
-/**
- * Called when the user clicks on any of the plugin option-select controls.
- * Called from an HTML option element within an HTML select element.
- *
- * @scope    public instance method
- * @param    inEventObject    An event object. 
- */
-SectionView.prototype.clickOnPluginSelectionMenu = function(eventObject) {
-  eventObject = eventObject || window.event;
-  var optionElement = Util.getTargetFromEvent(eventObject);
-  // PENDING: We could replace the lines above with "var optionElement = this;"
-  // That would work fine in Firefox, but maybe it wouldn't work in other browsers?  
-  
-  var selectElement = optionElement.parentNode;
-  var newChoiceUuid = optionElement.value;
-  var attributeCalledPluginView = this.getWorld().getItemFromUuid(SectionView.UUID_FOR_ATTRIBUTE_PLUGIN_VIEW);
-  var newPluginViewItem = this.getWorld().getItemFromUuid(newChoiceUuid);
- 
-  if (this._pluginView.getPluginItem() == newPluginViewItem) { 
-    return;
-  } else {
-    this._pluginView.endOfLife();
-    this._pluginView = this.getPluginInstanceFromPluginItem(newPluginViewItem, this._pluginDiv);
-
-    var oldEntry = this._section.getSingleEntryFromAttribute(attributeCalledPluginView);
-    if (oldEntry) {
-      this._section.replaceEntry(oldEntry, newPluginViewItem);
-    } else {
-      this._section.addEntryForAttribute(attributeCalledPluginView, newPluginViewItem);
-    }
-    /*
-    var pluginNameEntries = this._section.getEntriesForAttribute(attributeCalledPluginName);
-    if (pluginNameEntries && pluginNameEntries[0]) {
-      var oldEntry = pluginNameEntries[0];
-      this._section.replaceEntry(oldEntry, newChoiceName);
-    } else {
-      this._section.addEntryForAttribute(attributeCalledPluginName, newChoiceName);
-    }
-    */
-    this.refresh();
-  }
-};
-
-
-/**
- * Called when the user clicks on a control for selecting a category for a query.
- * Called from an HTML option element within an HTML select element.
- *
- * @scope    public instance method
- * @param    inEventObject    An event object. 
- */
-SectionView.prototype.clickOnAttributeMenu = function(eventObject) {
-  eventObject = eventObject || window.event;
-  var optionElement = Util.getTargetFromEvent(eventObject);
-  // PENDING: We could replace the lines above with "var optionElement = this;"
-  // That would work fine in Firefox, but maybe it wouldn't work in other browsers?  
-  
-  var selectElement = optionElement.parentNode;
-  var newChoiceUuid = optionElement.value;
-  var newQueryMatchingAttribute = this.getWorld().getItemFromUuid(newChoiceUuid);
-  var newChoiceName = newQueryMatchingAttribute.getDisplayString();
-  
-  var myQuery = this.getQuerySpec();
-  var attributeCalledQueryMatchingAttribute = this.getWorld().getAttributeCalledQueryMatchingAttribute();
-  var listOfMatchingAttrs = myQuery.getEntriesForAttribute(attributeCalledQueryMatchingAttribute);
-  var matchingAttribute;
-  if (listOfMatchingAttrs.length === 0) {
-    // by default matching attribute is category
-    matchingAttribute = this.getWorld().getAttributeCalledCategory();
-  }
-  else {
-    Util.assert(listOfMatchingAttrs.length==1, 'more than one matching attributes');
-    matchingAttribute = listOfMatchingAttrs[0].getValue();
-  }
-  if (matchingAttribute.getDisplayString() != newChoiceName) {
-    if (listOfMatchingAttrs.length === 0) {
-      myQuery.addEntryForAttribute(attributeCalledQueryMatchingAttribute, newQueryMatchingAttribute);
-    } else {
-      myQuery.replaceEntry(listOfMatchingAttrs[0], newQueryMatchingAttribute);
-    }
-
-    /* PENDING, PROBLEM to check Can't delete entries already created by previous matching attribute */
-    var attributeCalledQueryMatchingValue = this.getWorld().getAttributeCalledQueryMatchingValue();
-    var listOfMatchingEntries = myQuery.getEntriesForAttribute(attributeCalledQueryMatchingValue);
-    for (var i in listOfMatchingEntries) {
-      var anEntry = listOfMatchingEntries[i];
-      anEntry.voteToDelete();
-      Util.assert(anEntry.hasBeenDeleted());
-    }
-    listOfMatchingEntries = myQuery.getEntriesForAttribute(attributeCalledQueryMatchingValue);
-    Util.assert(listOfMatchingEntries.length === 0);
-    
-    // I think we need these next 3 lines in to make sure the view gets updated  
-    // to reflect the new query.  When we get a chance we should probably do 
-    // some refactoring so that the plugin can register as an observer of the
-    // query item, and then the plugin itself can know what to do when the
-    // query item changes.  
-    var pluginItem = this._pluginView.getPluginItem();
-    this._pluginView.endOfLife();
-    this._pluginView = this.getPluginInstanceFromPluginItem(pluginItem, this._pluginDiv);
-
-    this.refresh();
-  }
-};
-
-// -------------------------------------------------------------------
-// End of file
-// -------------------------------------------------------------------

Deleted: trunk/source/View.js
===================================================================
--- trunk/source/View.js	2005-07-03 16:58:52 UTC (rev 216)
+++ trunk/source/View.js	2005-07-05 19:05:49 UTC (rev 217)
@@ -1,245 +0,0 @@
-/*****************************************************************************
- View.js
- 
-******************************************************************************
- Written in 2005 by Brian Douglas Skinner <brian.skinner at gumption.org>
-  
- Copyright rights relinquished under the Creative Commons  
- Public Domain Dedication:
-    http://creativecommons.org/licenses/publicdomain/
-  
- You can copy freely from this file.  This work may be freely reproduced, 
- distributed, transmitted, used, modified, built upon, or otherwise exploited
- by anyone for any purpose.
-  
- This work is provided on an "AS IS" basis, without warranties or conditions 
- of any kind, either express or implied, including, without limitation, any 
- warranties or conditions of title, non-infringement, merchantability, or 
- fitness for a particular purpose. You are solely responsible for determining 
- the appropriateness of using or distributing the work and assume all risks 
- associated with use of this work, including but not limited to the risks and 
- costs of errors, compliance with applicable laws, damage to or loss of data 
- or equipment, and unavailability or interruption of operations.
-
- In no event shall the authors or contributors have any liability for any 
- direct, indirect, incidental, special, exemplary, or consequential damages,
- however caused and on any theory of liability, whether in contract, strict 
- liability, or tort (including negligence), arising in any way out of or in 
- connection with the use or distribution of the work.
-*****************************************************************************/
-
-
-// -------------------------------------------------------------------
-// Dependencies, expressed in the syntax that JSLint understands:
-// 
-/*global window, HTMLElement  */
-/*global Util  */
-// -------------------------------------------------------------------
-
-
-/**
- * The View class serves as an abstract superclass for other view classes.
- *
- * @scope    public instance constructor
- * @param    superview    The superview for this view. 
- * @param    htmlElement    The HTMLElement to display this view in. 
- * @param    className    Optional. The CSS className to assign to the htmlElement.
- */
-function View(superview, htmlElement, className) {
-  if (!superview) {return;} // initial call that subclasses of PluginViews make without parameters
-  this._superview = superview;
-  this._htmlElement = htmlElement;
-  this._className = className;
-  if (this._className) {
-    this._htmlElement.className = this._className;
-  }
-  this._myHasEverBeenDisplayedFlag = false; // PENDING: this is accessed directly by subclasses, which is bad
-}
-
-
-/**
- * Returns the parent view in the view hierarchy.
- *
- * @scope    public instance method
- * @return   A View object. 
- */
-View.prototype.getSuperview = function() {
-  return this._superview;
-};
-
-
-/**
- * Returns the HTMLElement that the view displays itself in.
- *
- * @scope    public instance method
- * @return   An HTMLElement. 
- */
-View.prototype.getHtmlElement = function() {
-  return this._htmlElement;
-};
-
-
-/**
- * Returns the CSS className associated with this view.
- *
- * @scope    public instance method
- * @return   An HTMLElement. 
- */
-View.prototype.getClassName = function() {
-  return this._className;
-};
-
-
-/**
- * Returns the World instance that this view is using.
- *
- * @scope    public instance method
- * @return   A World object. 
- */
-View.prototype.getWorld = function() {
-  return this._superview.getWorld();
-};
-
-
-/**
- * Returns the root view of the view hierarchy.
- *
- * @scope    public instance method
- * @return   An instance of RootView.
- */
-View.prototype.getRootView = function() {
-  if (!this.getSuperview()) {
-    return null;
-  } else {
-    return this.getSuperview().getRootView();
-  }
-};
-
-
-/**
- * Returns true if we are in Edit Mode.
- *
- * @scope    public instance method
- * @return   A boolean value. True if we are in Edit Mode.
- */
-View.prototype.isInEditMode = function() {
-  return this._superview.isInEditMode();
-};
-
-
-/**
- * Returns true if this view has ever been displayed
- *
- * @scope    public instance method
- * @return   A boolean value. True if the view has ever been displayed.
- */
-View.prototype.hasEverBeenDisplayed = function() {
-  return this._myHasEverBeenDisplayedFlag;
-};
-
-
-/**
- * Re-creates all the HTML for the View, and hands the HTML to the 
- * browser to be re-drawn.
- *
- * @scope    public instance method
- */
-View.prototype.refresh = function() {
-  if (!this.hasEverBeenDisplayed()) {
-    // generate HTML elements for the view
-    this._myHasEverBeenDisplayedFlag = true;
-  } else {
-    // update existing HTML elements for the view
-  }
-};
-
-
-/**
- * A toggle switch to set whether this view is drawn on-screen or hidden
- * off-screen.
- *
- * @scope    public instance method
- * @param    visibleFlag    True if the view should be visible on screen. False if the view should be hidden off screen.
- */
-View.prototype.includeOnScreen = function(visibleFlag) {
-  Util.assert(Util.isBoolean(visibleFlag));
-
-  if (visibleFlag) {
-    this.refresh();
-    this._htmlElement.style.display = "block";
-  } else {
-    this._htmlElement.style.display = "none";
-  }
-};
-
-
-// -------------------------------------------------------------------
-// HTML element helper methods
-// -------------------------------------------------------------------
-
-/**
- * Given an HTML element, this method deletes all of the contents from
- * within the element.
- *
- * @scope    public class method
- * @param    element    An HTML element. 
- */
-View.removeChildrenOfElement = function(element) {
-  Util.assert(element instanceof HTMLElement);
-  element.innerHTML = '';
-};
-
-
-/**
- * Given an HTML element, we first call document.createElement() to 
- * create a new element, and then call appendChild() to add the new 
- * element to the given element.
- *
- * @scope    public class method
- * @param    parentElement    The existing element that we should append the new element to. 
- * @param    tagName    The HTML tag for the element ("div", "p", "span", etc.). 
- * @param    cssClassName    Optional. The HTML/CSS class to assign to the new element. 
- * @param    elementId    Optional. The HTML id to assign to the new element. 
- * @return   The newly created HTML element.
- */
-View.createAndAppendElement = function(parentElement, tagName, cssClassName, elementId) {
-  Util.assert(parentElement instanceof HTMLElement);
-  Util.assert(Util.isString(tagName));
-  Util.assert(!cssClassName || Util.isString(cssClassName));
-  Util.assert(!elementId || Util.isString(elementId));
-
-  var newElement = window.document.createElement(tagName);
-  if (cssClassName) {
-    newElement.className = cssClassName;
-  }
-  if (elementId) {
-    newElement.id = elementId;
-  }
-  parentElement.appendChild(newElement);
-  return newElement;
-};
-
-
-/**
- * Given an HTML element, we first call document.createTextNode() to 
- * create a new text node, and then call appendChild() to add the new 
- * text node to the given element.
- *
- * @scope    public class method
- * @param    parentElement    The existing element that we should append the new element to. 
- * @param    textString    The text string to put in the text node.
- * @return   The newly created text node.
- */
-View.createAndAppendTextNode = function(parentElement, textString) {
-  Util.assert(parentElement instanceof HTMLElement);
-  Util.assert(Util.isString(textString));
-
-  var newTextNode = window.document.createTextNode(textString);
-  parentElement.appendChild(newTextNode);
-  return newTextNode;
-};
-
-
-// -------------------------------------------------------------------
-// End of file
-// -------------------------------------------------------------------

Copied: trunk/source/view/ItemView.js (from rev 214, trunk/source/ItemView.js)

Modified: trunk/source/view/LintTest.js
===================================================================
--- trunk/source/view/LintTest.js	2005-07-03 16:58:52 UTC (rev 216)
+++ trunk/source/view/LintTest.js	2005-07-05 19:05:49 UTC (rev 217)
@@ -39,6 +39,14 @@
 
 function testJsLintOnOpenRecordCode() {
   var listOfSourceCodeFiles = [
+    "View.js",
+    "RootView.js",
+    "ItemView.js",
+    "PageView.js",
+    "LoginView.js",
+    "NavbarView.js",
+    "SectionView.js",
+    "MultiEntriesView.js",
     "EntryView.js",
     "SuggestionBox.js"];
   var prefix = "../../../source/view/";

Copied: trunk/source/view/LoginView.js (from rev 214, trunk/source/LoginView.js)

Copied: trunk/source/view/MultiEntriesView.js (from rev 214, trunk/source/MultiEntriesView.js)

Copied: trunk/source/view/NavbarView.js (from rev 214, trunk/source/NavbarView.js)

Copied: trunk/source/view/PageView.js (from rev 214, trunk/source/PageView.js)

Copied: trunk/source/view/PluginView.js (from rev 214, trunk/source/PluginView.js)

Copied: trunk/source/view/RootView.js (from rev 214, trunk/source/RootView.js)

Copied: trunk/source/view/SectionView.js (from rev 216, trunk/source/SectionView.js)

Copied: trunk/source/view/View.js (from rev 214, trunk/source/View.js)



From skinner at berlios.de  Tue Jul  5 22:03:11 2005
From: skinner at berlios.de (Brian Douglas Skinner at BerliOS)
Date: Tue, 5 Jul 2005 22:03:11 +0200
Subject: [openrecord-svn] r218 - in trunk/source: . view
Message-ID: <200507052003.j65K3Bso006289@sheep.berlios.de>

Author: skinner
Date: 2005-07-05 22:03:10 +0200 (Tue, 05 Jul 2005)
New Revision: 218

Modified:
   trunk/source/base_style.css
   trunk/source/view/EntryView.js
   trunk/source/view/SuggestionBox.js
Log:
Fixed a suggestion box bug caused by my earlier switch from using names to using short names.  Also did some minor clean-up. 

Modified: trunk/source/base_style.css
===================================================================
--- trunk/source/base_style.css	2005-07-05 19:05:49 UTC (rev 217)
+++ trunk/source/base_style.css	2005-07-05 20:03:10 UTC (rev 218)
@@ -574,13 +574,28 @@
 
 
 /****************************************/
-/* Control span styles                     */
+/* LoginView styles                     */
+
 .LoginView {
   font-size: x-small;
   float: right;
 }
 
-.suggestion_box {
+
+/****************************************/
+/* SectionView styles                 */
+
+div.SectionView {
+  border-top: solid thin rgb(0%, 0%, 50%);
+  margin-top: 3em;
+  padding-left: 0px;
+}
+
+
+/****************************************/
+/* SuggestionBox styles                 */
+
+.SuggestionBox {
   background: rgb(100%, 100%, 100%);
   font-size: small;
   border-style: solid;
@@ -593,7 +608,7 @@
   position: absolute;
 }
 
-.suggestion_box table {
+.SuggestionBox table {
   margin: 0px;
   border: 0px;
   padding: 0px;
@@ -601,21 +616,21 @@
   border-collapse: collapse; 
 }
 
-.suggestion_box tr {
+.SuggestionBox tr {
   margin: 0px;
   border: 0px;
   padding: 0px;
   width: 100%;
 }
 
-.suggestion_box td {
+.SuggestionBox td {
   margin: 0px;
   border: 0px;
   padding: 2px;
   width: 100%;
 }
 
-.suggestion_box tr:hover {
+.SuggestionBox tr:hover {
   background: rgb(100%, 100%, 70%);
 }
 
@@ -666,11 +681,6 @@
   color: rgb(0%,0%,0%);
 }
 
-div.SectionView {
-  border-top: solid thin rgb(0%, 0%, 50%);
-  margin-top: 3em;
-  padding-left: 0px;
-}
 
 /****************************************/
 /* END                                  */

Modified: trunk/source/view/EntryView.js
===================================================================
--- trunk/source/view/EntryView.js	2005-07-05 19:05:49 UTC (rev 217)
+++ trunk/source/view/EntryView.js	2005-07-05 20:03:10 UTC (rev 218)
@@ -110,6 +110,7 @@
   }
 };
 
+
 /**
  *
  */
@@ -120,6 +121,7 @@
   }
 };
 
+
 /**
  *
  */
@@ -127,6 +129,7 @@
   this._autoWiden = autoWiden;
 };
 
+
 /**
  *
  */
@@ -260,6 +263,7 @@
     var newValue;
     if (this._suggestionBox) {
       newValue = this._suggestionBox.getSelectedItem();
+      // alert(newValue);
     }
     if (!newValue) {
       newValue = this._editField.value;
@@ -289,7 +293,9 @@
     }
 
     // we need this _writeValue() to be after all display related code, because this may trigger an observer call
-    if (!stillProvisional) { this._writeValue(newValue); }
+    if (!stillProvisional) { 
+      this._writeValue(newValue); 
+    }
   }
 };
 
@@ -306,7 +312,7 @@
  * @param    value    The new value to be saved. 
  */
 EntryView.prototype._transformToExpectedType = function(value) {
-if (value && Util.isString(value)) {
+  if (value && Util.isString(value)) {
     var repository = this.getWorld();
     var listOfExpectedTypeEntries;
     if (this._expectedTypeEntries) {
@@ -352,6 +358,8 @@
   }
   return value;
 };
+
+
 /**
  * Writes edited value back into item entry of repository.
  *

Modified: trunk/source/view/SuggestionBox.js
===================================================================
--- trunk/source/view/SuggestionBox.js	2005-07-05 19:05:49 UTC (rev 217)
+++ trunk/source/view/SuggestionBox.js	2005-07-05 20:03:10 UTC (rev 218)
@@ -41,19 +41,23 @@
 
 
 /**
+ * A DetailPlugin display one or more content items. 
  *
+ * @scope    public instance constructor
+ * @param    htmlInputField    The HTMLElement that this suggestion box is associated with. 
+ * @param    listOfItems    The items to populate the suggestion box with.
  */
-function SuggestionBox(inHTMLInputField, listOfItems) {
-  this._inputField = inHTMLInputField;
-  this._listOfSuggestedItems = listOfItems.sort(SuggestionBox._compareItemDisplayNames);
+function SuggestionBox(htmlInputField, listOfItems) {
+  this._inputField = htmlInputField;
+  this._listOfSuggestedItems = listOfItems.sort(SuggestionBox._compareItemDisplayStrings);
   this._selectedItem = null;
-  this._shouldHide = inHTMLInputField.value.length === 0;
+  this._shouldHide = htmlInputField.value.length === 0;
   
-  this._attributeSuggestionBoxDivElement = document.createElement('div');
-  // this._attributeSuggestionBoxDivElement.style.visibility = "hidden";
-  this._attributeSuggestionBoxDivElement.style.zIndex = 11;
-  this._attributeSuggestionBoxDivElement.style.display = "none";
-  document.body.appendChild(this._attributeSuggestionBoxDivElement);
+  this._suggestionBoxDivElement = View.createAndAppendElement(document.body, "div", "SuggestionBox");
+  // this._suggestionBoxDivElement = document.createElement('div');
+  this._suggestionBoxDivElement.style.zIndex = 11;
+  this._suggestionBoxDivElement.style.display = "none";
+  // document.body.appendChild(this._suggestionBoxDivElement);
 
  /* this._inputField.onkeyup = this._keyPressOnInputField.bindAsEventListener(this);
   this._inputField.onfocus = this._focusOnInputField.bindAsEventListener(this);
@@ -65,13 +69,20 @@
 /**
  *
  */
-SuggestionBox.prototype.getSelectedItem = function () {
+SuggestionBox.prototype.getSelectedItem = function() {
   if (!this._selectedItem) {
     // check if typed item is identical to suggested item
     var editValue = this._inputField.value;
-    for (var i = 0; i < this._listOfSuggestedItems.length; ++i) {
-      var item = this._listOfSuggestedItems[i];
-      if (editValue.toLowerCase() == item.getDisplayName().toLowerCase()) {return item;}
+    // for (var i = 0; i < this._listOfSuggestedItems.length; ++i) {
+    //   var item = this._listOfSuggestedItems[i];
+    for (var key in this._listOfSuggestedItems) {
+      var item = this._listOfSuggestedItems[key];
+      if (editValue.toLowerCase() == item.getDisplayName().toLowerCase()) {
+        return item;
+      }
+      if (editValue.toLowerCase() == item.getDisplayString().toLowerCase()) {
+        return item;
+      }
     }
   }
   return this._selectedItem;
@@ -81,7 +92,7 @@
 /**
  *
  */
-SuggestionBox._compareItemDisplayNames = function (itemOne, itemTwo) {
+SuggestionBox._compareItemDisplayStrings = function(itemOne, itemTwo) {
   var displayNameOne = itemOne.getDisplayString();
   var displayNameTwo = itemTwo.getDisplayString();
   if (displayNameOne == displayNameTwo) {
@@ -95,7 +106,7 @@
 /**
  *
  */
-SuggestionBox.prototype._focusOnInputField = function (inEventObject) {
+SuggestionBox.prototype._focusOnInputField = function(eventObject) {
   this._redisplaySuggestionBox();
 };
 
@@ -103,11 +114,11 @@
 /**
  *
  */
-SuggestionBox.prototype._keyPressOnInputField = function (inEventObject) {
+SuggestionBox.prototype._keyPressOnInputField = function(eventObject) {
   var numberOfMatchingItems = this._listOfMatchingItems.length;
   if (numberOfMatchingItems === 0) {return false;}
 
-  var asciiValueOfKey = inEventObject.keyCode;
+  var asciiValueOfKey = eventObject.keyCode;
   var index = -1;
   var doSelectItem = false;
   switch (asciiValueOfKey) {
@@ -165,7 +176,7 @@
 /**
  *
  */
-SuggestionBox.prototype._keyUpOnInputField = function (inEventObject) {
+SuggestionBox.prototype._keyUpOnInputField = function(eventObject) {
   this._redisplaySuggestionBox();
 };
 
@@ -173,16 +184,16 @@
 /**
  *
  */
-SuggestionBox.prototype._blurOnInputField = function () {
+SuggestionBox.prototype._blurOnInputField = function() {
   // make the suggestion box disappear
-  this._attributeSuggestionBoxDivElement.style.display = "none";
+  this._suggestionBoxDivElement.style.display = "none";
 };
 
 
 /**
  *
  */
-SuggestionBox.prototype._clickOnSelection = function (inEventObject, item) {
+SuggestionBox.prototype._clickOnSelection = function(eventObject, item) {
   this._selectedItem = item;
 };
 
@@ -190,12 +201,12 @@
 /**
  *
  */
-SuggestionBox.prototype._setShouldHide = function (shouldHide) {
+SuggestionBox.prototype._setShouldHide = function(shouldHide) {
   // make the suggestion box disappear
   this._shouldHide = shouldHide;
   this._selectedItem = null;
   if (shouldHide) {
-    this._attributeSuggestionBoxDivElement.style.display = "none";
+    this._suggestionBoxDivElement.style.display = "none";
   }
   else {
     this._redisplaySuggestionBox();
@@ -206,7 +217,7 @@
 /**
  *
  */
-SuggestionBox.prototype._redisplaySuggestionBox = function () {
+SuggestionBox.prototype._redisplaySuggestionBox = function() {
   //if (this._shouldHide) {return;} // if SuggestionBox is in hide mode, don't show the box
   
   var partialInputString = this._inputField.value;
@@ -229,9 +240,9 @@
 
   if (this._shouldHide || listOfMatchingItems.length === 0) {
     // make the suggestion box disappear
-    this._attributeSuggestionBoxDivElement.style.display = "none";
+    this._suggestionBoxDivElement.style.display = "none";
   } else {
-    View.removeChildrenOfElement(this._attributeSuggestionBoxDivElement);
+    View.removeChildrenOfElement(this._suggestionBoxDivElement);
     var table = document.createElement('table');
     var rowNumber = 0;
     var columnNumber = 0;
@@ -246,20 +257,19 @@
       cell.onmousedown = this._clickOnSelection.bindAsEventListener(this, item);
       rowNumber += 1;
     }
-    this._attributeSuggestionBoxDivElement.appendChild(table);
+    this._suggestionBoxDivElement.appendChild(table);
 
     // set-up the suggestion box to open just below the input field it comes from
     var suggestionBoxTop = Util.getOffsetTopFromElement(this._inputField) + this._inputField.offsetHeight;
     var suggestionBoxLeft = Util.getOffsetLeftFromElement(this._inputField);
-    this._attributeSuggestionBoxDivElement.style.top = suggestionBoxTop + "px"; 
-    this._attributeSuggestionBoxDivElement.style.left = suggestionBoxLeft + "px";
+    this._suggestionBoxDivElement.style.top = suggestionBoxTop + "px"; 
+    this._suggestionBoxDivElement.style.left = suggestionBoxLeft + "px";
     // alert(this._inputField.offsetWidth);
-    this._attributeSuggestionBoxDivElement.style.width = (this._inputField.offsetWidth - 2)+ "px";
+    this._suggestionBoxDivElement.style.width = (this._inputField.offsetWidth - 2)+ "px";
 
-    // this._attributeSuggestionBoxDivElement.style.zIndex = 11;
-    this._attributeSuggestionBoxDivElement.className = "suggestion_box";
-    this._attributeSuggestionBoxDivElement.style.visibility = "visible";
-    this._attributeSuggestionBoxDivElement.style.display = "block";
+    // this._suggestionBoxDivElement.className = "suggestion_box";
+    this._suggestionBoxDivElement.style.visibility = "visible";
+    this._suggestionBoxDivElement.style.display = "block";
   }
 };
 



From skinner at berlios.de  Tue Jul  5 22:45:47 2005
From: skinner at berlios.de (Brian Douglas Skinner at BerliOS)
Date: Tue, 5 Jul 2005 22:45:47 +0200
Subject: [openrecord-svn] r219 - in trunk/source: util view
Message-ID: <200507052045.j65Kjleq010052@sheep.berlios.de>

Author: skinner
Date: 2005-07-05 22:45:46 +0200 (Tue, 05 Jul 2005)
New Revision: 219

Modified:
   trunk/source/util/LintTool.js
   trunk/source/view/EntryView.js
Log:
In EntryView, wrapped the text node within a span element, so that we can do more CSS style stuff.  Also added some more lint tests.

Modified: trunk/source/util/LintTool.js
===================================================================
--- trunk/source/util/LintTool.js	2005-07-05 20:03:10 UTC (rev 218)
+++ trunk/source/util/LintTool.js	2005-07-05 20:45:46 UTC (rev 219)
@@ -61,47 +61,66 @@
  * the lint tests.
  *
  * @scope    public class method
- * @param    stringContainingCode    A string containing JavaScript code. 
+ * @param    codeString    A string containing JavaScript code. 
  * @return   Returns an error message string, or returns an empty string if there are no errors (according to jslint).
  */
-LintTool.getErrorReportForCodeInString = function(stringContainingCode) {
+LintTool.getErrorReportForCodeInString = function(codeString) {
   var errorMessage = "";
 
-  // call jslint, and see if it reported errors
+  // Call jslint, and see if it reported errors.
   jslint.laxLineEnd = false;
   jslint.plusplus = true;
   jslint.cap = false;
   jslint.jscript = false;
-  jslint(stringContainingCode);
+  jslint(codeString);
   var report = jslint.report();
   var jslintIsOkay = (report.substr(0, 2) == 'ok');
   if (!jslintIsOkay) {
     errorMessage = report + '\n';
   }
   
-  // now check for tabs, backspaces, etc.
-  var noTabs = (stringContainingCode.indexOf("\t") == -1);
-  if (!noTabs) {
-    errorMessage += "There are tab characters in the file." + '\n';
-  }
-  var noBackspaces = (stringContainingCode.indexOf("\b") == -1);
-  if (!noBackspaces) {
-    errorMessage += "There are backspace characters in the file." + '\n';
-  }
-  var noCarriageReturns = (stringContainingCode.indexOf("\r") == -1);
-  if (!noCarriageReturns) {
-    errorMessage += "There are carriage return characters in the file." + '\n';
-  }
-  var noFormFeeds = (stringContainingCode.indexOf("\f") == -1);
-  if (!noCarriageReturns) {
-    errorMessage += "There are carriage return characters in the file." + '\n';
-  }
-  // var allClean = jslintIsOkay && noTabs && noBackspaces && noCarriageReturns && noFormFeeds;
+  // Check for tabs, backspaces, etc.
+  errorMessage += LintTool.checkForString(codeString, '\t', "There are tab characters in the file.");
+  errorMessage += LintTool.checkForString(codeString, '\b', "There are backspace characters in the file.");
+  errorMessage += LintTool.checkForString(codeString, '\r', "There are carriage return characters in the file.");
+  errorMessage += LintTool.checkForString(codeString, '\f', "There are form feed characters in the file.");
+  
+  // Check for discouraged code
+  // We have to break 'document' + '.write' into two parts, or else this LintTool.js
+  // file won't pass its own lint test.
+  errorMessage += LintTool.checkForString(codeString, 'document' + '.write');
+  errorMessage += LintTool.checkForString(codeString, 'document' + '.all');
+  errorMessage += LintTool.checkForString(codeString, 'document' + '.layers');
+
   return errorMessage;
 }; 
 
 
 /**
+ * Given a string containing JavaScript code, this method checks to make
+ * sure the code does not contain some specific sub-string, and returns 
+ * an error message if the sub-string is found.
+ *
+ * @scope    public class method
+ * @param    codeString    A string containing JavaScript code. 
+ * @param    memberString    The sub-string that should not be in the code. 
+ * @param    errorMessage    Optional. The error message to return if the memberString was found in codeString. 
+ * @return   Returns an error message string, or returns an empty string if there are no errors.
+ */
+LintTool.checkForString = function(codeString, memberString, errorMessage) {
+  var returnString = "";
+  var clean = (codeString.indexOf(memberString) == -1);
+  if (!clean) {
+    if (!errorMessage) {
+      errorMessage = 'The file contains discouraged code: "' + memberString + '"';
+    }
+    returnString += errorMessage + '\n';
+  }
+  return returnString;
+};
+  
+
+/**
  * Given the URL of a file containing JavaScript code, returns null if the code passes 
  * the lint tests.
  *

Modified: trunk/source/view/EntryView.js
===================================================================
--- trunk/source/view/EntryView.js	2005-07-05 20:03:10 UTC (rev 218)
+++ trunk/source/view/EntryView.js	2005-07-05 20:45:46 UTC (rev 219)
@@ -75,8 +75,11 @@
   this._item = item;
   this._attribute = attribute;
   this._entry = entry;
+  
   this._editField = null;
-  // this._className = cssClassName;
+  this._textNode = null;
+  this._textSpan = null;
+  
   this._isMultiLine = isMultiLine;
   this._isEditing = false;
   this._proxyOnKeyFunction = null;
@@ -196,8 +199,10 @@
   else if (this._isLozenge()) {
     htmlElement.className += " " + EntryView.CSS_CLASS_VALUE_IS_ITEM;
   }
-  this._textNode = document.createTextNode(textString);
-  htmlElement.appendChild(this._textNode);
+  this._textSpan = View.createAndAppendElement(htmlElement, "span");
+  this._textNode = View.createAndAppendTextNode(this._textSpan, textString);
+  // this._textNode = document.createTextNode(textString);
+  // htmlElement.appendChild(this._textNode);
   htmlElement.onclick =  this.onClick.bindAsEventListener(this);
   if (this._alwaysUseEditField) {
     this.startEditing(true);
@@ -246,7 +251,8 @@
     if (this._isMultiLine) {editField.style.height = (this.getHtmlElement().offsetHeight) + "px";}  
     
     this._setupSuggestionBox();
-    this.getHtmlElement().replaceChild(editField, this._textNode);
+    // this.getHtmlElement().replaceChild(editField, this._textNode);
+    this.getHtmlElement().replaceChild(editField, this._textSpan);
     if (!dontSelect) {editField.select();}
     this._isEditing = true;
   }
@@ -263,7 +269,6 @@
     var newValue;
     if (this._suggestionBox) {
       newValue = this._suggestionBox.getSelectedItem();
-      // alert(newValue);
     }
     if (!newValue) {
       newValue = this._editField.value;
@@ -289,7 +294,8 @@
       }
       this._textNode.data = newValueDisplayString;
       this._suggestionBox = null;
-      this.getHtmlElement().replaceChild(this._textNode, this._editField);
+      // this.getHtmlElement().replaceChild(this._textNode, this._editField);
+      this.getHtmlElement().replaceChild(this._textSpan, this._editField);
     }
 
     // we need this _writeValue() to be after all display related code, because this may trigger an observer call



From skinner at berlios.de  Wed Jul  6 00:16:50 2005
From: skinner at berlios.de (Brian Douglas Skinner at BerliOS)
Date: Wed, 6 Jul 2005 00:16:50 +0200
Subject: [openrecord-svn] r220 - in trunk/source: . view
Message-ID: <200507052216.j65MGo15015999@sheep.berlios.de>

Author: skinner
Date: 2005-07-06 00:16:49 +0200 (Wed, 06 Jul 2005)
New Revision: 220

Modified:
   trunk/source/base_style.css
   trunk/source/view/EntryView.js
   trunk/source/view/SectionView.js
Log:
Did more work on organizing our CSS approach.  Different types of values can now have different styles.  For example, Datess are now italic, Numbers are bold, and negative numbers are red.

Modified: trunk/source/base_style.css
===================================================================
--- trunk/source/base_style.css	2005-07-05 20:45:46 UTC (rev 219)
+++ trunk/source/base_style.css	2005-07-05 22:16:49 UTC (rev 220)
@@ -226,7 +226,7 @@
 
 
 /****************************************/
-/* Edit button styles                   */
+/* Edit tool styles                     */
 
 div.editmode p.edit_tool {
   background-color: rgb(100%, 100%, 40%);
@@ -242,7 +242,7 @@
 
 
 /****************************************/
-/* Navigation bar styles                */
+/* NavbarView styles                */
 
 div.NavbarView {
   float: left;
@@ -327,6 +327,36 @@
   padding: 0pt;
 }
 
+h1.EntryView .TextValue {
+  border-width: thin;
+  border-style: solid;
+  border-color: rgb(100%, 100%, 100%);
+}
+
+h2.EntryView span {
+  border-width: thin;
+  border-style: solid;
+  border-color: rgb(100%, 100%, 100%);
+}
+
+h1.EntryView .TextValue:hover {
+  border-width: thin;
+  border-style: solid;
+  border-color: rgb(70%, 70%, 70%);
+}
+
+h2.EntryView span:hover {
+  border-width: thin;
+  border-style: solid;
+  border-color: rgb(70%, 70%, 70%);
+}
+
+div.EntryView span:hover {
+  border-width: thin;
+  border-style: solid;
+  border-color: rgb(70%, 70%, 70%);
+}
+
 h1.EntryView input {
   color: rgb(0%, 0%, 50%);
   background: rgb(100%, 100%, 40%);
@@ -634,26 +664,45 @@
   background: rgb(100%, 100%, 70%);
 }
 
+
 /****************************************/
-/* Text view styles                     */
+/* EntryView styles                     */
 
-.entry_view {
-  /* height: 100%; */
+.EntryView {
   width: 100%;
-  font-family: Arial, Verdana, sans-serif;
-  color: rgb(0%, 0%, 0%);
-  background: rgb(100%, 100%, 40%);
-  border: none; 
-  /* overflow: visible; */
+  height: 100%;
 }
 
-.entryViewItem {
-  background-color:#DEE7F8;
+.EntryView .provisional {
+  color: #999999;
+}
+
+.ItemValue, .ConnectionValue {
+  background-color: #DEE7F8; // light blue
   padding: 1px;
   border: thin solid #A4BDEC;	
-  -moz-border-radius: 6px; // WARNING: Mozilla only attribute. This just makes a rect, a rounded-rect
+  -moz-border-radius: 6px; // WARNING: Mozilla only attribute. This just makes a rectangle have rounded corners
 }
 
+.DateValue {
+  font-style: italic;
+}
+
+.NumberValue {
+  font-weight: bold;
+}
+
+.TextValue {
+}
+
+.UrlValue {
+  text-decoration: underline;
+}
+
+.NegativeNumber {
+  color: rgb(100%, 0%, 0%);
+}
+
 /* obsolete? 
 div.editmode .text_block:hover {
   background: rgb(100%, 100%, 70%);
@@ -668,6 +717,7 @@
   border: solid thin rgb(100%, 100%, 100%); 
 } */
 
+
 /****************************************/
 /* PENDING -- time to delete these?     */
 

Modified: trunk/source/view/EntryView.js
===================================================================
--- trunk/source/view/EntryView.js	2005-07-05 20:45:46 UTC (rev 219)
+++ trunk/source/view/EntryView.js	2005-07-05 22:16:49 UTC (rev 220)
@@ -44,11 +44,25 @@
 // -------------------------------------------------------------------
 // EntryView public class constants
 // -------------------------------------------------------------------
-// EntryView.ELEMENT_CLASS_TEXT_BLOCK = "text_block"; 
-EntryView.CSS_CLASS_VALUE_IS_ITEM = "entryViewItem";
-EntryView.PROVISIONAL_COLOR = '#999999';
+EntryView.CSS_CLASS_PROVISIONAL      = "provisional";
 
+EntryView.CSS_CLASS_TEXT_VALUE       = "TextValue";
+EntryView.CSS_CLASS_NUMBER_VALUE     = "NumberValue";
+EntryView.CSS_CLASS_DATE_VALUE       = "DateValue";
+EntryView.CSS_CLASS_CHECKMARK_VALUE  = "CheckmarkValue";
+EntryView.CSS_CLASS_URL_VALUE        = "UrlValue";
+EntryView.CSS_CLASS_ITEM_VALUE       = "ItemValue";
+EntryView.CSS_CLASS_CONNECTION_VALUE = "ConnectionValue";
 
+EntryView.CSS_CLASS_NEGATIVE_NUMBER  = "NegativeNumber";
+
+
+// -------------------------------------------------------------------
+// EntryView private class variables
+// -------------------------------------------------------------------
+EntryView._ourHashTableOfTypesKeyedByClassName = null;
+
+
 /**
  * An instance of EntryView can be placed in any parent container View
  * to display and (if in edit mode) edit multi-lines of text
@@ -70,8 +84,6 @@
   
   View.call(this, superview, htmlElement, "EntryView");
 
-  htmlElement.style.width = "100%";
-  htmlElement.style.height = "100%"; // make this element expand to fill parent element where possible
   this._item = item;
   this._attribute = attribute;
   this._entry = entry;
@@ -138,8 +150,8 @@
  */
 EntryView.prototype.setExpectedTypeEntries = function(expectedTypeEntries) {
   Util.assert(Util.isArray(expectedTypeEntries));
-  for(var i=0;i < expectedTypeEntries.length; ++i) {
-    Util.assert(expectedTypeEntries[i] instanceof Entry);
+  for (var key in expectedTypeEntries) {
+    Util.assert(expectedTypeEntries[key] instanceof Entry);
   }
   this._expectedTypeEntries = expectedTypeEntries;
 };
@@ -192,18 +204,16 @@
   
   var textString = this._getText();
   
+  this._textSpan = View.createAndAppendElement(htmlElement, "span");
+  this._textNode = View.createAndAppendTextNode(this._textSpan, textString);
   if (this._isProvisional) {
-    this._oldColor = htmlElement.style.color;
-    htmlElement.style.color = EntryView.PROVISIONAL_COLOR;
+    this._textSpan.className = EntryView.CSS_CLASS_PROVISIONAL;
   }
-  else if (this._isLozenge()) {
-    htmlElement.className += " " + EntryView.CSS_CLASS_VALUE_IS_ITEM;
+  else if (!this._alwaysUseEditField) {
+    this._setClassName();
   }
-  this._textSpan = View.createAndAppendElement(htmlElement, "span");
-  this._textNode = View.createAndAppendTextNode(this._textSpan, textString);
-  // this._textNode = document.createTextNode(textString);
-  // htmlElement.appendChild(this._textNode);
-  htmlElement.onclick =  this.onClick.bindAsEventListener(this);
+  
+  htmlElement.onclick = this.onClick.bindAsEventListener(this);
   if (this._alwaysUseEditField) {
     this.startEditing(true);
   }
@@ -215,6 +225,25 @@
 /**
  *
  */
+EntryView.prototype._setClassName = function() {
+  if (this._entry) {
+    var dataType = this._entry.getType();
+    var className = this._getClassNameFromType(dataType);
+    this._textSpan.className = className;
+    
+    var typeNumber = this.getWorld().getItemFromUuid(World.UUID_FOR_TYPE_NUMBER);
+    if (dataType == typeNumber) {
+      if (this._entry.getValue() < 0) {
+        this._textSpan.className += " " + EntryView.CSS_CLASS_NEGATIVE_NUMBER;
+      }
+    }
+  }
+};
+
+
+/**
+ *
+ */
 EntryView.prototype._canStartEditing = function() {
   return (!this._isEditing  && !(this._valueIsItem && !this._alwaysUseEditField));
 };
@@ -237,7 +266,6 @@
         editField = this._editField= document.createElement("input");
         editField.type = 'text';
       }
-      // editField.className = this._className;
       var listener = this; 
       editField.onblur = this.onBlur.bindAsEventListener(this);
       editField.onkeypress = this.onKeyPress.bindAsEventListener(this);
@@ -247,11 +275,11 @@
       editField.size = 5; //editField.defaultValue.length+1;
     }
     
-    //editField.style.width = this.getHtmlElement().offsetWidth + "px";  
-    if (this._isMultiLine) {editField.style.height = (this.getHtmlElement().offsetHeight) + "px";}  
+    if (this._isMultiLine) {
+      editField.style.height = (this.getHtmlElement().offsetHeight) + "px";
+    }  
     
     this._setupSuggestionBox();
-    // this.getHtmlElement().replaceChild(editField, this._textNode);
     this.getHtmlElement().replaceChild(editField, this._textSpan);
     if (!dontSelect) {editField.select();}
     this._isEditing = true;
@@ -294,7 +322,6 @@
       }
       this._textNode.data = newValueDisplayString;
       this._suggestionBox = null;
-      // this.getHtmlElement().replaceChild(this._textNode, this._editField);
       this.getHtmlElement().replaceChild(this._textSpan, this._editField);
     }
 
@@ -397,12 +424,9 @@
       }
       if (value instanceof Item) {
         this._valueIsItem = true;
-        var htmlElement = this.getHtmlElement();
-        if (this._isLozenge() && !htmlElement.className.match(EntryView.CSS_CLASS_VALUE_IS_ITEM)) {
-          htmlElement.className += " " + EntryView.CSS_CLASS_VALUE_IS_ITEM;
-        }
       }
-    }    
+      this._setClassName();
+    }
     this.getWorld().endTransaction();
   }
   this._restoreText(true); // call restore text in case item is transformed (e.g. Dates will be normalized)
@@ -584,7 +608,7 @@
 EntryView.prototype.noLongerProvisional = function() {
   if (this._isProvisional) {
     this._isProvisional = false;
-    this.getHtmlElement().style.color = this._oldColor;
+    this._textSpan.className = "";
     // need to set line below because _writeValue() hasn't returned an entry yet
     this._entry = this._item.getSingleEntryFromAttribute(this._attribute); 
     this._buildView();
@@ -592,6 +616,69 @@
 };
 
 
+/**
+ * PENDING.
+ *
+ * @scope    private instance method
+ */
+EntryView.prototype._buildTypeHashTable = function() {
+  var text      = this.getWorld().getItemFromUuid(World.UUID_FOR_TYPE_TEXT);
+  var number    = this.getWorld().getItemFromUuid(World.UUID_FOR_TYPE_NUMBER);
+  var dateType  = this.getWorld().getItemFromUuid(World.UUID_FOR_TYPE_DATE);
+  var checkMark = this.getWorld().getItemFromUuid(World.UUID_FOR_TYPE_CHECK_MARK);
+  var url       = this.getWorld().getItemFromUuid(World.UUID_FOR_TYPE_URL);
+  var itemType  = this.getWorld().getItemFromUuid(World.UUID_FOR_TYPE_ITEM);
+  var connectionType  = this.getWorld().getItemFromUuid(World.UUID_FOR_TYPE_CONNECTION);
+  
+  this._ourHashTableOfTypesKeyedByClassName = {};
+  this._ourHashTableOfTypesKeyedByClassName[EntryView.CSS_CLASS_TEXT_VALUE] = text;
+  this._ourHashTableOfTypesKeyedByClassName[EntryView.CSS_CLASS_NUMBER_VALUE] = number;
+  this._ourHashTableOfTypesKeyedByClassName[EntryView.CSS_CLASS_DATE_VALUE] = dateType;
+  this._ourHashTableOfTypesKeyedByClassName[EntryView.CSS_CLASS_CHECKMARK_VALUE] = checkMark;
+  this._ourHashTableOfTypesKeyedByClassName[EntryView.CSS_CLASS_URL_VALUE] = url;
+  this._ourHashTableOfTypesKeyedByClassName[EntryView.CSS_CLASS_ITEM_VALUE] = itemType;
+  this._ourHashTableOfTypesKeyedByClassName[EntryView.CSS_CLASS_CONNECTION_VALUE] = connectionType;
+};
+
+
+/**
+ * Given an item that represents a basic data type, this method returns the 
+ * corresponding CSS className for that data type.
+ *
+ * @scope    private instance method
+ * @param    type    An item that represents a basic data type, like Text, Number, or URL. 
+ * @return   A string with the CSS className for that type.
+ */
+EntryView.prototype._getClassNameFromType = function(type) {
+  if (!this._ourHashTableOfTypesKeyedByClassName) {
+    this._buildTypeHashTable();
+  }
+  for (var className in this._ourHashTableOfTypesKeyedByClassName) {
+    typeItem = this._ourHashTableOfTypesKeyedByClassName[className];
+    if (type == typeItem) {
+      return className;
+    }
+  }
+  Util.assert(false, "no such type: " + type.getDisplayString());
+};
+
+
+/**
+ * Given a string with the CSS className of a basic data type, this method
+ * returns the corresponding item that represents the same data type.
+ *
+ * @scope    private instance method
+ * @param    className    A string with the CSS className for a type.
+ * @return   An item that represents a basic data type, like Text, Number, or URL. 
+ */
+EntryView.prototype._getTypeFromTypeClassName = function(className) {
+  if (!this._ourHashTableOfTypesKeyedByClassName) {
+    this._buildTypeHashTable();
+  }
+  return this._ourHashTableOfTypesKeyedByClassName[className];
+};
+
+
 // -------------------------------------------------------------------
 // End of file
 // -------------------------------------------------------------------
\ No newline at end of file

Modified: trunk/source/view/SectionView.js
===================================================================
--- trunk/source/view/SectionView.js	2005-07-05 20:45:46 UTC (rev 219)
+++ trunk/source/view/SectionView.js	2005-07-05 22:16:49 UTC (rev 220)
@@ -54,7 +54,7 @@
 SectionView.CSS_CLASS_TEXT_FIELD_IN_TABLE_CELL = "text_field_in_table_cell";
 SectionView.CSS_CLASS_SELECTED = "selected";
 SectionView.CSS_CLASS_MORE_LINK = "more";
-SectionView.CSS_CLASS_ENTRY_VIEW = "entry_view";
+// SectionView.CSS_CLASS_ENTRY_VIEW = "entry_view";
 
 SectionView.ELEMENT_ID_SELECT_MENU_PREFIX = "select_menu_";
 



From chaolam at berlios.de  Wed Jul  6 08:05:13 2005
From: chaolam at berlios.de (Chih-Chao Lam at BerliOS)
Date: Wed, 6 Jul 2005 08:05:13 +0200
Subject: [openrecord-svn] r221 - in trunk/source: . util view
Message-ID: <200507060605.j6665DnC027600@sheep.berlios.de>

Author: chaolam
Date: 2005-07-06 08:05:05 +0200 (Wed, 06 Jul 2005)
New Revision: 221

Modified:
   trunk/source/TablePlugin.js
   trunk/source/base_style.css
   trunk/source/util/Util.js
   trunk/source/view/EntryView.js
   trunk/source/view/MultiEntriesView.js
   trunk/source/view/RootView.js
Log:
Added initial support for selecting and deleting Entries.
Contains several bugs but thought it's worth checking it in first.
I think I've also slowed things down. Will look into it, but maybe Brian can help too (wink :)



Modified: trunk/source/TablePlugin.js
===================================================================
--- trunk/source/TablePlugin.js	2005-07-05 22:16:49 UTC (rev 220)
+++ trunk/source/TablePlugin.js	2005-07-06 06:05:05 UTC (rev 221)
@@ -417,7 +417,7 @@
     multiEntriesView.setSuggestions(this._hashTableOfEntries[attribute.getUniqueKeyString()]);
     var listener = this;
     multiEntriesView.setKeyPressFunction(function (evt, entryView) {return listener.keyPressOnEditField(evt, entryView);});
-    multiEntriesView.setClickFunction(function (evt, entryView) {return listener._handleClick(evt, entryView);});
+    //multiEntriesView.setClickFunction(function (evt, entryView) {return listener._handleClick(evt, entryView);});
   }
 };
 

Modified: trunk/source/base_style.css
===================================================================
--- trunk/source/base_style.css	2005-07-05 22:16:49 UTC (rev 220)
+++ trunk/source/base_style.css	2005-07-06 06:05:05 UTC (rev 221)
@@ -684,6 +684,10 @@
   -moz-border-radius: 6px; // WARNING: Mozilla only attribute. This just makes a rectangle have rounded corners
 }
 
+.ItemValueSelected {
+  background-color:#598bec;
+  color: #FFFFFF;
+}
 .DateValue {
   font-style: italic;
 }

Modified: trunk/source/util/Util.js
===================================================================
--- trunk/source/util/Util.js	2005-07-05 22:16:49 UTC (rev 220)
+++ trunk/source/util/Util.js	2005-07-06 06:05:05 UTC (rev 221)
@@ -71,7 +71,10 @@
 Util.ASCII_VALUE_FOR_UP_ARROW = 38;    // 126
 Util.ASCII_VALUE_FOR_RIGHT_ARROW = 39; // 124
 Util.ASCII_VALUE_FOR_DOWN_ARROW = 40;  // 125
+Util.KEYCODE_FOR_BACKSPACE = 8;
+Util.KEYCODE_FOR_DELETE = 46;
 
+
 Util.ABBREV_MONTHS_ARRAY = new Array("Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec");
 
 
@@ -717,7 +720,48 @@
   return cumulativeOffset;
 };
 
+// Functions to manipulate CSS
 
+/**
+ * Return true in htmlElement has css classname aClass
+ * @param htmlElement The HTML element to check on
+ * @param aClass The String representing class name to check on
+ */
+Util.css_hasClass = function(htmlElement, aClass) {
+  var matchingRegex = new RegExp("(^|\\s)" + aClass + "($|\\s)");
+  return htmlElement.className.match(matchingRegex);
+};
+
+/**
+ * Adds css classname aClass to an html Element
+ * @param htmlElement The HTML element whose class is to be added
+ * @param newClass The String representing class name to add
+ */
+Util.css_addClass = function(htmlElement, newClass) {
+  if (!Util.css_hasClass(htmlElement,newClass)) {
+    htmlElement.className += ' ' + newClass;
+    return true;
+  }
+  return false;
+};
+
+/**
+ * Removes css classname aClass from an html Element
+ * @param htmlElement The HTML element whose class is to be removed
+ * @param oldClass The String representing class name to remove
+ */
+Util.css_removeClass = function(htmlElement, oldClass) {
+  if (Util.css_hasClass(htmlElement,oldClass)) {
+    var matchingRegex = new RegExp("(^|\\s)" + oldClass); //BUG need to avoid replacing classNames that are a superset of oldClass
+    htmlElement.className = htmlElement.className.replace(matchingRegex,'');
+  }
+};
+
+// String Utilities
+Util.getStringFromKeyEvent = function(eventObj) {
+  return String.fromCharCode(eventObj.charCode); //Mozilla only call
+};
+
 // -------------------------------------------------------------------
 // End of file
 // -------------------------------------------------------------------

Modified: trunk/source/view/EntryView.js
===================================================================
--- trunk/source/view/EntryView.js	2005-07-05 22:16:49 UTC (rev 220)
+++ trunk/source/view/EntryView.js	2005-07-06 06:05:05 UTC (rev 221)
@@ -44,6 +44,7 @@
 // -------------------------------------------------------------------
 // EntryView public class constants
 // -------------------------------------------------------------------
+EntryView.CSS_SELECTED = "ItemValueSelected";
 EntryView.CSS_CLASS_PROVISIONAL      = "provisional";
 
 EntryView.CSS_CLASS_TEXT_VALUE       = "TextValue";
@@ -234,7 +235,7 @@
     var typeNumber = this.getWorld().getItemFromUuid(World.UUID_FOR_TYPE_NUMBER);
     if (dataType == typeNumber) {
       if (this._entry.getValue() < 0) {
-        this._textSpan.className += " " + EntryView.CSS_CLASS_NEGATIVE_NUMBER;
+        Util.css_addClass(this._textSpan,EntryView.CSS_CLASS_NEGATIVE_NUMBER);
       }
     }
   }
@@ -243,18 +244,42 @@
 
 /**
  *
- */
 EntryView.prototype._canStartEditing = function() {
   return (!this._isEditing  && !(this._valueIsItem && !this._alwaysUseEditField));
+}; */
+
+EntryView.prototype.unSelect = function() {
+  Util.assert(this._isLozenge());
+  Util.css_removeClass(this._textSpan,EntryView.CSS_SELECTED);
 };
 
+/** Select this Entry
+ *
+ */
+EntryView.prototype.selectView = function(eventObject) {
+  var rootView = this.getRootView();
+  if (this._isLozenge()) {
+    Util.css_addClass(this._textSpan,EntryView.CSS_SELECTED);
+    var addToSelection = (eventObject) && (eventObject.shiftKey || eventObject.ctrlKey || eventObject.metaKey);
+    if (addToSelection) {
+      rootView.addToSelection(this);
+    }
+    else {
+      rootView.setSelection(this);
+    }
+  }
+  else {
+    rootView.setSelection(null);
+    this.startEditing();
+  }
+};
 
 /**
  * Switch to edit text field for editing.
  *
  * @scope    public instance method
  */
-EntryView.prototype.startEditing = function(dontSelect) {
+EntryView.prototype.startEditing = function(dontSelect,initialStr) {
   var canStartEditing = !(this._isEditing || this._isLozenge());
   if (canStartEditing) {
     var editField = this._editField;
@@ -271,7 +296,7 @@
       editField.onkeypress = this.onKeyPress.bindAsEventListener(this);
       editField.onkeyup = this.onKeyUp.bindAsEventListener(this);
       editField.onfocus = this.onFocus.bindAsEventListener(this);
-      editField.defaultValue = this._isProvisional ? '' : this._textNode.data;
+      editField.defaultValue = this._isProvisional ? '' : (initialStr) ? initialStr : this._textNode.data;
       editField.size = 5; //editField.defaultValue.length+1;
     }
     
@@ -282,6 +307,7 @@
     this._setupSuggestionBox();
     this.getHtmlElement().replaceChild(editField, this._textSpan);
     if (!dontSelect) {editField.select();}
+    if (initialStr) {editField.focus();}
     this._isEditing = true;
   }
 };
@@ -491,7 +517,8 @@
     return true;
   }
   if (this.isInEditMode()) {
-    this.startEditing();
+    this.selectView(eventObject);
+    return true;
   }
 };
 
@@ -601,6 +628,32 @@
   */
 };
 
+/**
+ * This method is called when user types on the keyboard. This view is given a chance
+ * to process the keypress event, if it is a user selected view
+ * This is different from EntryView.onKeyPress(), which receives key press events directly from the browser
+ */
+EntryView.prototype.handleKeyEventWhenSelected = function(myEvent) {
+  if (myEvent.ctrlKey || myEvent.metaKey) {
+    // ignore keyboard shortcuts
+    return false;
+  }
+  if (myEvent.keyCode ==  Util.KEYCODE_FOR_BACKSPACE || myEvent.keyCode == Util.KEYCODE_FOR_DELETE ||
+      myEvent.keyCode === 0) {
+    Util.assert(this._entry !== null);
+    this._entry.voteToDelete();
+    this._entry = null;
+    this._valueIsItem = false;
+    this._setClassName();
+    this.getRootView().removeFromSelection(this);
+    this._buildView();
+    if (myEvent.keyCode === 0) {
+      this.startEditing(true,Util.getStringFromKeyEvent(myEvent));
+      return true;
+    }
+    return false;
+  }
+};
 
 /**
  *

Modified: trunk/source/view/MultiEntriesView.js
===================================================================
--- trunk/source/view/MultiEntriesView.js	2005-07-05 22:16:49 UTC (rev 220)
+++ trunk/source/view/MultiEntriesView.js	2005-07-06 06:05:05 UTC (rev 221)
@@ -127,7 +127,7 @@
  */
 MultiEntriesView.prototype.select = function(selectFirst) {
   var index = selectFirst ? 0 : this._entryViews.length - 1;
-  this._entryViews[index].startEditing();
+  this._entryViews[index].selectView();
 };
 
 
@@ -181,7 +181,7 @@
 MultiEntriesView.prototype._handleOwnClick = function(eventObject) {
   var lastEntry = this._entryViews[this._entryViews.length-1];
   if (this._handleClick(eventObject, lastEntry)) {return true;}
-  if (eventObject.target == this.getHtmlElement()) {lastEntry.startEditing();}
+  if (eventObject.target == this.getHtmlElement()) {lastEntry.selectView();}
 };
 
 
@@ -218,7 +218,7 @@
     index += move;
     if (index >= 0 && index < this._entryViews.length) {
       entryView.stopEditing();
-      this._entryViews[index].startEditing();
+      this._entryViews[index].selectView();
       return true;
     }
   }

Modified: trunk/source/view/RootView.js
===================================================================
--- trunk/source/view/RootView.js	2005-07-05 22:16:49 UTC (rev 220)
+++ trunk/source/view/RootView.js	2005-07-06 06:05:05 UTC (rev 221)
@@ -96,6 +96,8 @@
   this._hashTableOfPageViewsKeyedByUuid = {};
   this._currentContentView = null;
   this._homePage = null;
+  this._selections = [];
+  document.onkeypress = this._onKeyPress.bindAsEventListener(this);
   
   window.document.body.innerHTML = "";
   var rootDiv = View.createAndAppendElement(window.document.body, "div");
@@ -506,7 +508,44 @@
   this.displayTextInDebugTextarea(outputText);
 };
 
+/**
+ * Sets the selection to the given selectable object (current View) or null
+ * Unselects the current selection if any
+ * @scope    public instance method
+ * @param    aView    A selectable object
+ */
+RootView.prototype.setSelection = function(aView) {
+  // unselect current selection
+  for (var i in this._selections) {
+    this._selections[i].unSelect();
+  }
+  if (aView) {
+    Util.assert(aView instanceof View);
+    this._selections = [aView];
+  }
+  else {this._selections = [];}
+};
 
+/**
+ * Adds the selection with the given selectable object (current View) 
+ * @scope    public instance method
+ * @param    aView    A selectable object
+ */
+RootView.prototype.addToSelection = function(aView) {
+  Util.assert(aView instanceof View);
+  Util.addObjectToSet(aView,this._selections);
+};
+
+/**
+ * Removes the given selectable object (current View) from selection
+ * @scope    public instance method
+ * @param    aView    A selectable object
+ */
+RootView.prototype.removeFromSelection = function(aView) {
+  Util.assert(aView instanceof View);
+  Util.assert(Util.removeObjectFromSet(aView,this._selections));
+};
+  
 // -------------------------------------------------------------------
 // Event handler methods
 // -------------------------------------------------------------------
@@ -544,6 +583,14 @@
   RootView._ourSingleInstance.displayStatusBlurb("Page load: " + delayInMilliseconds + " milliseconds");
 };
 
+RootView.prototype._onKeyPress = function(anEvent) {
+  if (!(anEvent.target instanceof HTMLInputElement || anEvent.target instanceof HTMLTextAreaElement)) {
+    for (var i in this._selections) {
+      var selectObj = this._selections[i];
+      if (!selectObj.handleKeyEventWhenSelected(anEvent)) {break;}
+    }
+  }
+};
 
 // -------------------------------------------------------------------
 // End of file



From chaolam at berlios.de  Wed Jul  6 20:09:07 2005
From: chaolam at berlios.de (Chih-Chao Lam at BerliOS)
Date: Wed, 6 Jul 2005 20:09:07 +0200
Subject: [openrecord-svn] r222 - trunk/source/view
Message-ID: <200507061809.j66I97BV027079@sheep.berlios.de>

Author: chaolam
Date: 2005-07-06 20:09:07 +0200 (Wed, 06 Jul 2005)
New Revision: 222

Modified:
   trunk/source/view/EntryView.js
Log:
Small fix to make Entry._ourHashTableOfTypesKeyedByClassName get used instead of instance variable analogue, so that all instances share this variable

Modified: trunk/source/view/EntryView.js
===================================================================
--- trunk/source/view/EntryView.js	2005-07-06 06:05:05 UTC (rev 221)
+++ trunk/source/view/EntryView.js	2005-07-06 18:09:07 UTC (rev 222)
@@ -683,14 +683,14 @@
   var itemType  = this.getWorld().getItemFromUuid(World.UUID_FOR_TYPE_ITEM);
   var connectionType  = this.getWorld().getItemFromUuid(World.UUID_FOR_TYPE_CONNECTION);
   
-  this._ourHashTableOfTypesKeyedByClassName = {};
-  this._ourHashTableOfTypesKeyedByClassName[EntryView.CSS_CLASS_TEXT_VALUE] = text;
-  this._ourHashTableOfTypesKeyedByClassName[EntryView.CSS_CLASS_NUMBER_VALUE] = number;
-  this._ourHashTableOfTypesKeyedByClassName[EntryView.CSS_CLASS_DATE_VALUE] = dateType;
-  this._ourHashTableOfTypesKeyedByClassName[EntryView.CSS_CLASS_CHECKMARK_VALUE] = checkMark;
-  this._ourHashTableOfTypesKeyedByClassName[EntryView.CSS_CLASS_URL_VALUE] = url;
-  this._ourHashTableOfTypesKeyedByClassName[EntryView.CSS_CLASS_ITEM_VALUE] = itemType;
-  this._ourHashTableOfTypesKeyedByClassName[EntryView.CSS_CLASS_CONNECTION_VALUE] = connectionType;
+  EntryView._ourHashTableOfTypesKeyedByClassName = {};
+  EntryView._ourHashTableOfTypesKeyedByClassName[EntryView.CSS_CLASS_TEXT_VALUE] = text;
+  EntryView._ourHashTableOfTypesKeyedByClassName[EntryView.CSS_CLASS_NUMBER_VALUE] = number;
+  EntryView._ourHashTableOfTypesKeyedByClassName[EntryView.CSS_CLASS_DATE_VALUE] = dateType;
+  EntryView._ourHashTableOfTypesKeyedByClassName[EntryView.CSS_CLASS_CHECKMARK_VALUE] = checkMark;
+  EntryView._ourHashTableOfTypesKeyedByClassName[EntryView.CSS_CLASS_URL_VALUE] = url;
+  EntryView._ourHashTableOfTypesKeyedByClassName[EntryView.CSS_CLASS_ITEM_VALUE] = itemType;
+  EntryView._ourHashTableOfTypesKeyedByClassName[EntryView.CSS_CLASS_CONNECTION_VALUE] = connectionType;
 };
 
 
@@ -703,11 +703,11 @@
  * @return   A string with the CSS className for that type.
  */
 EntryView.prototype._getClassNameFromType = function(type) {
-  if (!this._ourHashTableOfTypesKeyedByClassName) {
+  if (!EntryView._ourHashTableOfTypesKeyedByClassName) {
     this._buildTypeHashTable();
   }
-  for (var className in this._ourHashTableOfTypesKeyedByClassName) {
-    typeItem = this._ourHashTableOfTypesKeyedByClassName[className];
+  for (var className in EntryView._ourHashTableOfTypesKeyedByClassName) {
+    typeItem = EntryView._ourHashTableOfTypesKeyedByClassName[className];
     if (type == typeItem) {
       return className;
     }
@@ -725,10 +725,10 @@
  * @return   An item that represents a basic data type, like Text, Number, or URL. 
  */
 EntryView.prototype._getTypeFromTypeClassName = function(className) {
-  if (!this._ourHashTableOfTypesKeyedByClassName) {
+  if (!EntryView._ourHashTableOfTypesKeyedByClassName) {
     this._buildTypeHashTable();
   }
-  return this._ourHashTableOfTypesKeyedByClassName[className];
+  return EntryView._ourHashTableOfTypesKeyedByClassName[className];
 };
 
 



From skinner at berlios.de  Wed Jul  6 20:17:08 2005
From: skinner at berlios.de (Brian Douglas Skinner at BerliOS)
Date: Wed, 6 Jul 2005 20:17:08 +0200
Subject: [openrecord-svn] r223 - trunk/source/view
Message-ID: <200507061817.j66IH8EQ027775@sheep.berlios.de>

Author: skinner
Date: 2005-07-06 20:17:08 +0200 (Wed, 06 Jul 2005)
New Revision: 223

Modified:
   trunk/source/view/EntryView.js
   trunk/source/view/LoginView.js
Log:
Fixed minor bug in LoginView and cleaned-up one constant in EntryView.

Modified: trunk/source/view/EntryView.js
===================================================================
--- trunk/source/view/EntryView.js	2005-07-06 18:09:07 UTC (rev 222)
+++ trunk/source/view/EntryView.js	2005-07-06 18:17:08 UTC (rev 223)
@@ -44,7 +44,7 @@
 // -------------------------------------------------------------------
 // EntryView public class constants
 // -------------------------------------------------------------------
-EntryView.CSS_SELECTED = "ItemValueSelected";
+EntryView.CSS_CLASS_SELECTED         = "ItemValueSelected";
 EntryView.CSS_CLASS_PROVISIONAL      = "provisional";
 
 EntryView.CSS_CLASS_TEXT_VALUE       = "TextValue";
@@ -250,7 +250,7 @@
 
 EntryView.prototype.unSelect = function() {
   Util.assert(this._isLozenge());
-  Util.css_removeClass(this._textSpan,EntryView.CSS_SELECTED);
+  Util.css_removeClass(this._textSpan, EntryView.CSS_CLASS_SELECTED);
 };
 
 /** Select this Entry
@@ -259,7 +259,7 @@
 EntryView.prototype.selectView = function(eventObject) {
   var rootView = this.getRootView();
   if (this._isLozenge()) {
-    Util.css_addClass(this._textSpan,EntryView.CSS_SELECTED);
+    Util.css_addClass(this._textSpan, EntryView.CSS_CLASS_SELECTED);
     var addToSelection = (eventObject) && (eventObject.shiftKey || eventObject.ctrlKey || eventObject.metaKey);
     if (addToSelection) {
       rootView.addToSelection(this);

Modified: trunk/source/view/LoginView.js
===================================================================
--- trunk/source/view/LoginView.js	2005-07-06 18:09:07 UTC (rev 222)
+++ trunk/source/view/LoginView.js	2005-07-06 18:17:08 UTC (rev 223)
@@ -529,7 +529,7 @@
     this._userSuggestionBoxDivElement.style.width = (this._inputField.offsetWidth - 2)+ "px";
     
     // this._userSuggestionBoxDivElement.style.zIndex = 11;
-    this._userSuggestionBoxDivElement.className = "suggestion_box";
+    this._userSuggestionBoxDivElement.className = "SuggestionBox";
     this._userSuggestionBoxDivElement.style.visibility = "visible";
     this._userSuggestionBoxDivElement.style.display = "block";
   }



From skinner at berlios.de  Wed Jul  6 22:50:56 2005
From: skinner at berlios.de (Brian Douglas Skinner at BerliOS)
Date: Wed, 6 Jul 2005 22:50:56 +0200
Subject: [openrecord-svn] r224 - in trunk/source: . view
Message-ID: <200507062050.j66KouwB016287@sheep.berlios.de>

Author: skinner
Date: 2005-07-06 22:50:55 +0200 (Wed, 06 Jul 2005)
New Revision: 224

Modified:
   trunk/source/OutlinePlugin.js
   trunk/source/TablePlugin.js
   trunk/source/view/EntryView.js
   trunk/source/view/NavbarView.js
   trunk/source/view/PageView.js
   trunk/source/view/RootView.js
   trunk/source/view/SectionView.js
   trunk/source/view/SuggestionBox.js
   trunk/source/view/View.js
Log:
Replaced the old View.createAndAppendElement() with a new improved View.appendNewElement() method.  Also added a new View.newElement() method.

Modified: trunk/source/OutlinePlugin.js
===================================================================
--- trunk/source/OutlinePlugin.js	2005-07-06 18:17:08 UTC (rev 223)
+++ trunk/source/OutlinePlugin.js	2005-07-06 20:50:55 UTC (rev 224)
@@ -103,19 +103,20 @@
   var listOfContentItems = this.fetchItems();
   var outlineDiv = this.getHtmlElement();
   View.removeChildrenOfElement(outlineDiv);
-  var ulElement = View.createAndAppendElement(outlineDiv, "ul");
+  var ulElement = View.appendNewElement(outlineDiv, "ul");
   for (var contentItemKey in listOfContentItems) {
     var contentItem = listOfContentItems[contentItemKey];
-    var liElement = View.createAndAppendElement(ulElement, "li");
-    View.createAndAppendTextNode(liElement, contentItem.getDisplayName("{no name}") + " ");
-    var anchorElement = View.createAndAppendElement(liElement, "a", SectionView.CSS_CLASS_MORE_LINK);
+    var liText = contentItem.getDisplayName("{no name}") + " ";
+    var liElement = View.appendNewElement(ulElement, "li", null, null, liText);
+    // View.appendNewTextNode(liElement, contentItem.getDisplayName("{no name}") + " ");
+    var anchorElement = View.appendNewElement(liElement, "a", SectionView.CSS_CLASS_MORE_LINK);
 
     // PENDING: 
     //  We shouldn't call the private method _getUuid()
     //  We need a better way to get the URL for a content item
     anchorElement.setAttribute("href", RootView.URL_HASH_ITEM_PREFIX + contentItem._getUuid());
 
-    // View.createAndAppendTextNode(anchorElement, "(more &#8658;)");
+    // View.appendNewTextNode(anchorElement, "(more &#8658;)");
     anchorElement.innerHTML = "(more &#8658;)";
     Util.addEventListener(anchorElement, "click", RootView.clickOnLocalLink);
   }

Modified: trunk/source/TablePlugin.js
===================================================================
--- trunk/source/TablePlugin.js	2005-07-06 18:17:08 UTC (rev 223)
+++ trunk/source/TablePlugin.js	2005-07-06 20:50:55 UTC (rev 224)
@@ -198,14 +198,14 @@
  */
 TablePlugin.prototype._buildAttributeEditor = function() {
   var htmlElement = this.getHtmlElement();
-  View.createAndAppendElement(htmlElement, "br");
-  var selectElt = View.createAndAppendElement(htmlElement, "select", RootView.CSS_CLASS_EDIT_TOOL);
+  View.appendNewElement(htmlElement, "br");
+  var selectElt = View.appendNewElement(htmlElement, "select", RootView.CSS_CLASS_EDIT_TOOL);
   var listOfAttributes = this.getWorld().getAttributes();
-  var optionElt = View.createAndAppendElement(selectElt, "option");
+  var optionElt = View.appendNewElement(selectElt, "option");
   optionElt.text = "Add new attribute:";
   for (var key in listOfAttributes) {
     var attribute = listOfAttributes[key];
-    optionElt = View.createAndAppendElement(selectElt, "option");
+    optionElt = View.appendNewElement(selectElt, "option");
     if (Util.isObjectInSet(attribute, this._displayAttributes)) {
       optionElt.text = '* ';
     }
@@ -214,8 +214,8 @@
     optionElt.onclick = this._attributeEditorChanged.bindAsEventListener(this);
   }
   this._selectElement = selectElt;
-  /*View.createAndAppendTextNode(htmlElement, " Import Data:");
-  var importButton = View.createAndAppendElement(htmlElement,"input");
+  /*View.appendNewTextNode(htmlElement, " Import Data:");
+  var importButton = View.appendNewElement(htmlElement,"input");
   importButton.type = "file";
   importButton.onchange = this._importData.bindAsEventListener(this, importButton);*/
 };
@@ -356,7 +356,7 @@
   //create new table, remove old table if already exists
   var viewDivElement = this.getHtmlElement();
   View.removeChildrenOfElement(viewDivElement);
-  this._table = View.createAndAppendElement(viewDivElement, "table", this._cssClassForTable);
+  this._table = View.appendNewElement(viewDivElement, "table", this._cssClassForTable);
   
   this._buildHeader();
 

Modified: trunk/source/view/EntryView.js
===================================================================
--- trunk/source/view/EntryView.js	2005-07-06 18:17:08 UTC (rev 223)
+++ trunk/source/view/EntryView.js	2005-07-06 20:50:55 UTC (rev 224)
@@ -204,13 +204,16 @@
   View.removeChildrenOfElement(htmlElement);
   
   var textString = this._getText();
-  
-  this._textSpan = View.createAndAppendElement(htmlElement, "span");
-  this._textNode = View.createAndAppendTextNode(this._textSpan, textString);
-  if (this._isProvisional) {
-    this._textSpan.className = EntryView.CSS_CLASS_PROVISIONAL;
-  }
-  else if (!this._alwaysUseEditField) {
+  var className = (this._isProvisional ? EntryView.CSS_CLASS_PROVISIONAL : '');
+  this._textSpan = View.appendNewElement(htmlElement, "span", className, null);
+  this._textNode = View.appendNewTextNode(this._textSpan, textString);
+  // if (this._isProvisional) {
+  //   this._textSpan.className = EntryView.CSS_CLASS_PROVISIONAL;
+  // }
+  // else if (!this._alwaysUseEditField) {
+  //   this._setClassName();
+  // }
+  if (!this._isProvisional && !this._alwaysUseEditField) {
     this._setClassName();
   }
   

Modified: trunk/source/view/NavbarView.js
===================================================================
--- trunk/source/view/NavbarView.js	2005-07-06 18:17:08 UTC (rev 223)
+++ trunk/source/view/NavbarView.js	2005-07-06 20:50:55 UTC (rev 224)
@@ -96,27 +96,28 @@
   View.removeChildrenOfElement(this._htmlElementForAnchors);
   for (key in listOfPages) {
     page = listOfPages[key];
-    var anchor = View.createAndAppendElement(this._htmlElementForAnchors, "a");
-    anchor.setAttribute("name", RootView.URL_PAGE_PREFIX + page._getUuid());
+    var anchorName = RootView.URL_PAGE_PREFIX + page._getUuid();
+    View.appendNewElement(this._htmlElementForAnchors, "a", null, {name: anchorName});
+    // anchor.setAttribute("name", RootView.URL_PAGE_PREFIX + page._getUuid());
   }
   
   var divElement = this.getHtmlElement();
   View.removeChildrenOfElement(divElement); 
-  var ulElement = View.createAndAppendElement(divElement, "ul", NavbarView.CSS_CLASS_MENU);
+  var ulElement = View.appendNewElement(divElement, "ul", NavbarView.CSS_CLASS_MENU);
   var rootView = this.getRootView();
   for (key in listOfPages) {
     page = listOfPages[key];
     page.addObserver(this);
-    var liElement = View.createAndAppendElement(ulElement, "li", NavbarView.CSS_CLASS_MENU_ITEM);
-    var anchorElement = View.createAndAppendElement(liElement, "a");
+    var liElement = View.appendNewElement(ulElement, "li", NavbarView.CSS_CLASS_MENU_ITEM);
     var menuUrl = rootView.getUrlForItem(page);
-    anchorElement.setAttribute("href", menuUrl);
     var menuText = page.getDisplayString();
-    View.createAndAppendTextNode(anchorElement, menuText);
+    var anchorElement = View.appendNewElement(liElement, "a", null, {href: menuUrl}, menuText);
+    // anchorElement.setAttribute("href", menuUrl);
+    // View.appendNewTextNode(anchorElement, menuText);
     anchorElement.onclick = RootView.clickOnLocalLink.bindAsEventListener();
   }
   
-  var newPageButton = View.createAndAppendElement(divElement, "input", RootView.CSS_CLASS_EDIT_TOOL);
+  var newPageButton = View.appendNewElement(divElement, "input", RootView.CSS_CLASS_EDIT_TOOL);
   newPageButton.type = "button";
   newPageButton.value = "New Page";
   newPageButton.onclick = this._clickOnNewPageButton.bindAsEventListener(this);

Modified: trunk/source/view/PageView.js
===================================================================
--- trunk/source/view/PageView.js	2005-07-06 18:17:08 UTC (rev 223)
+++ trunk/source/view/PageView.js	2005-07-06 20:50:55 UTC (rev 224)
@@ -151,11 +151,11 @@
 
   var pageDivElement = this.getHtmlElement();
   
-  var headerElement = View.createAndAppendElement(pageDivElement, "h1");
+  var headerElement = View.appendNewElement(pageDivElement, "h1");
   this._headerText = new EntryView(this, headerElement, this._pageItem, attributeCalledName,
     this._pageItem.getSingleEntryFromAttribute(attributeCalledName), false);
 
-  var summaryViewDiv = View.createAndAppendElement(pageDivElement, "div");
+  var summaryViewDiv = View.appendNewElement(pageDivElement, "div");
   this._pageSummaryView = new EntryView(this, summaryViewDiv, this._pageItem, attributeCalledSummary,
     this._pageItem.getSingleEntryFromAttribute(attributeCalledSummary), true);
 
@@ -220,9 +220,9 @@
   if (!this._editModeDiv) {
     var pageDivElement = this.getHtmlElement();
     var cssClass = SectionView.CSS_CLASS_SECTION + " " + RootView.CSS_CLASS_EDIT_TOOL;
-    this._editModeDiv = View.createAndAppendElement(pageDivElement, "div", cssClass);
-    View.createAndAppendElement(this._editModeDiv, "br");
-    var editButton = View.createAndAppendElement(this._editModeDiv, "input");
+    this._editModeDiv = View.appendNewElement(pageDivElement, "div", cssClass);
+    View.appendNewElement(this._editModeDiv, "br");
+    var editButton = View.appendNewElement(this._editModeDiv, "input");
     editButton.type = "Button";
     editButton.value = "New Section";
     editButton.onclick = this._addNewSection.bindAsEventListener(this);

Modified: trunk/source/view/RootView.js
===================================================================
--- trunk/source/view/RootView.js	2005-07-06 18:17:08 UTC (rev 223)
+++ trunk/source/view/RootView.js	2005-07-06 20:50:55 UTC (rev 224)
@@ -100,27 +100,27 @@
   document.onkeypress = this._onKeyPress.bindAsEventListener(this);
   
   window.document.body.innerHTML = "";
-  var rootDiv = View.createAndAppendElement(window.document.body, "div");
-  var anchorSpan = View.createAndAppendElement(rootDiv, "span");
+  var rootDiv = View.appendNewElement(window.document.body, "div");
+  var anchorSpan = View.appendNewElement(rootDiv, "span");
  
-  var headerP = View.createAndAppendElement(rootDiv, "p", "header");
-  var logoSpan = View.createAndAppendElement(headerP, "span", "logo");
+  var headerP = View.appendNewElement(rootDiv, "p", "header");
+  var logoSpan = View.appendNewElement(headerP, "span", "logo");
   logoSpan.innerHTML = '<a href="http://openrecord.org"><span class="logostart">open</span><span class="logomiddle">record</span><span class="logoend">.org</span></a>';
-  this._loginViewSpanElement = View.createAndAppendElement(headerP, "span");
-  View.createAndAppendElement(headerP, "br");
-  this._navbarDivElement = View.createAndAppendElement(rootDiv, "div");
-  var contentAreaDiv = View.createAndAppendElement(rootDiv, "div", "content_area");
-  this._contentViewDivElement = View.createAndAppendElement(contentAreaDiv, "div");
-  this._debugDivElement = View.createAndAppendElement(rootDiv, "div", "debug");
+  this._loginViewSpanElement = View.appendNewElement(headerP, "span");
+  View.appendNewElement(headerP, "br");
+  this._navbarDivElement = View.appendNewElement(rootDiv, "div");
+  var contentAreaDiv = View.appendNewElement(rootDiv, "div", "content_area");
+  this._contentViewDivElement = View.appendNewElement(contentAreaDiv, "div");
+  this._debugDivElement = View.appendNewElement(rootDiv, "div", "debug");
 
-  var footerP = View.createAndAppendElement(rootDiv, "p", "footer");
-  var copyrightSpan = View.createAndAppendElement(footerP, "span", "copyright");
+  var footerP = View.appendNewElement(rootDiv, "p", "footer");
+  var copyrightSpan = View.appendNewElement(footerP, "span", "copyright");
   copyrightSpan.innerHTML = 'You can copy freely from this site &mdash; ' +
     'copyright rights relinquished under the Creative Commons ' +
     '<a rel="license external" href="http://creativecommons.org/licenses/publicdomain/">Public Domain Dedication</a>.';
 
-  this._statusBlurbSpanElement = View.createAndAppendElement(footerP, "span", "fileformat");
-  View.createAndAppendElement(footerP, "br");
+  this._statusBlurbSpanElement = View.appendNewElement(footerP, "span", "fileformat");
+  View.appendNewElement(footerP, "br");
   
   this._anchorSpan = anchorSpan;
   this._rootDiv = rootDiv;
@@ -300,7 +300,7 @@
         if (!contentViewToSwitchTo) {
           itemFromUuid = this._world.getItemFromUuid(uuidText);
           if (itemFromUuid) {
-            divElement = View.createAndAppendElement(this._contentViewDivElement, "div");
+            divElement = View.appendNewElement(this._contentViewDivElement, "div");
             contentViewToSwitchTo = new ItemView(this, divElement, itemFromUuid);
             this._hashTableOfItemViewsKeyedByUuid[uuidText] = contentViewToSwitchTo;
           }
@@ -312,7 +312,7 @@
           if (!contentViewToSwitchTo) {
             pageFromUuid = this.getWorld().getItemFromUuid(uuidText);
             if (pageFromUuid) {
-              divElement = View.createAndAppendElement(this._contentViewDivElement, "div");
+              divElement = View.appendNewElement(this._contentViewDivElement, "div");
               contentViewToSwitchTo = new PageView(this, divElement, pageFromUuid);
               this._hashTableOfPageViewsKeyedByUuid[uuidText] = contentViewToSwitchTo;
             }

Modified: trunk/source/view/SectionView.js
===================================================================
--- trunk/source/view/SectionView.js	2005-07-06 18:17:08 UTC (rev 223)
+++ trunk/source/view/SectionView.js	2005-07-06 20:50:55 UTC (rev 224)
@@ -217,30 +217,30 @@
   }
   
   var sectionDiv = this.getHtmlElement();
-  var headerH2 = View.createAndAppendElement(sectionDiv, "h2");
+  var headerH2 = View.appendNewElement(sectionDiv, "h2");
   var attributeCalledName = this.getWorld().getAttributeCalledName();
   var attributeCalledSummary = this.getWorld().getAttributeCalledSummary();
   this._headerView = new EntryView(this, headerH2, this._section, attributeCalledName,
     this._section.getSingleEntryFromAttribute(attributeCalledName));
-  var summaryDiv = View.createAndAppendElement(sectionDiv, "div");
+  var summaryDiv = View.appendNewElement(sectionDiv, "div");
   this._sectionSummaryView = new EntryView(this, summaryDiv, this._section, attributeCalledSummary,
     this._section.getSingleEntryFromAttribute(attributeCalledSummary), true);
-  View.createAndAppendElement(sectionDiv, "p");
+  View.appendNewElement(sectionDiv, "p");
 
   // create the editing controls, if we're in edit mode
-  var controlArea = View.createAndAppendElement(sectionDiv, "p", RootView.CSS_CLASS_EDIT_TOOL);
-  var textShowMeA = document.createTextNode("Show me a ");
-  controlArea.appendChild(textShowMeA);
+  var controlArea = View.appendNewElement(sectionDiv, "p", RootView.CSS_CLASS_EDIT_TOOL, null, "Show me a ");
+  // var textShowMeA = document.createTextNode("Show me a ");
+  // controlArea.appendChild(textShowMeA);
 
   // PENDING: We shouldn't call the private method _getUuid()
-  var selectMenuId = SectionView.ELEMENT_ID_SELECT_MENU_PREFIX + this._section._getUuid();
-  var selectElement = View.createAndAppendElement(controlArea, "select", null, selectMenuId);
+  // var selectMenuId = SectionView.ELEMENT_ID_SELECT_MENU_PREFIX + this._section._getUuid();
+  var selectElement = View.appendNewElement(controlArea, "select");
   var optionElement;
   var listener;
-  selectElement.setAttribute("name", selectMenuId);
+  // selectElement.setAttribute("name", selectMenuId);
   for (var key in SectionView._ourHashTableOfPluginClassesKeyedByPluginItemUuid) {
     var pluginClass = SectionView._ourHashTableOfPluginClassesKeyedByPluginItemUuid[key];
-    optionElement = View.createAndAppendElement(selectElement, "option");
+    optionElement = View.appendNewElement(selectElement, "option");
     optionElement.selected = (selectedPluginClass == pluginClass);
     optionElement.value = pluginClass.getPluginItemUuid();
     var pluginItem = this.getWorld().getItemFromUuid(pluginClass.getPluginItemUuid());
@@ -249,15 +249,15 @@
     Util.addEventListener(optionElement, "click", function(event) {listener.clickOnPluginSelectionMenu(event);});
   }
   
-  View.createAndAppendTextNode(controlArea," of items whose ");
+  View.appendNewTextNode(controlArea," of items whose ");
 
-  this._queryEditSpan = View.createAndAppendElement(controlArea, "span");
+  this._queryEditSpan = View.appendNewElement(controlArea, "span");
   // this._refreshQueryEditSpan();
 
-  View.createAndAppendTextNode(controlArea,".");
+  View.appendNewTextNode(controlArea,".");
 
   // create a div element for the plugin class to use
-  this._pluginDiv = View.createAndAppendElement(sectionDiv, "div");
+  this._pluginDiv = View.appendNewElement(sectionDiv, "div");
   this._pluginView = this.getPluginInstanceFromPluginItem(selectedPluginItem, this._pluginDiv);
   this._myHasEverBeenDisplayedFlag = true;
   this.refresh();
@@ -327,20 +327,20 @@
   var matchingEntry = hasMatchingEntries ? listOfMatchingEntries[0] : null;
   
   var listOfAttributes = this.getWorld().getAttributes();
-  var selectElement = View.createAndAppendElement(this._queryEditSpan, "select");
+  var selectElement = View.appendNewElement(this._queryEditSpan, "select");
   for (var key in listOfAttributes) {
     var anAttribute = listOfAttributes[key];
-    var optionElement = View.createAndAppendElement(selectElement, "option");
+    var optionElement = View.appendNewElement(selectElement, "option");
     optionElement.selected = (matchingAttribute.getDisplayString() == anAttribute.getDisplayString());
     optionElement.value = anAttribute._getUuid();
     optionElement.onclick = this.clickOnAttributeMenu.bindAsEventListener(this);
     optionElement.text = anAttribute.getDisplayString();
   }
   
-  View.createAndAppendTextNode(this._queryEditSpan, " is ");
+  View.appendNewTextNode(this._queryEditSpan, " is ");
   
   var listOfPossibleEntries = this.getWorld().getSuggestedItemsForAttribute(matchingAttribute);
-  var entrySpan = View.createAndAppendElement(this._queryEditSpan, "span");
+  var entrySpan = View.appendNewElement(this._queryEditSpan, "span");
   
   var entryView =  new EntryView(this, entrySpan, myQuery, attributeCalledQueryMatchingValue, matchingEntry);
   entryView.setSuggestions(listOfPossibleEntries);

Modified: trunk/source/view/SuggestionBox.js
===================================================================
--- trunk/source/view/SuggestionBox.js	2005-07-06 18:17:08 UTC (rev 223)
+++ trunk/source/view/SuggestionBox.js	2005-07-06 20:50:55 UTC (rev 224)
@@ -53,11 +53,9 @@
   this._selectedItem = null;
   this._shouldHide = htmlInputField.value.length === 0;
   
-  this._suggestionBoxDivElement = View.createAndAppendElement(document.body, "div", "SuggestionBox");
-  // this._suggestionBoxDivElement = document.createElement('div');
+  this._suggestionBoxDivElement = View.appendNewElement(document.body, "div", "SuggestionBox");
   this._suggestionBoxDivElement.style.zIndex = 11;
   this._suggestionBoxDivElement.style.display = "none";
-  // document.body.appendChild(this._suggestionBoxDivElement);
 
  /* this._inputField.onkeyup = this._keyPressOnInputField.bindAsEventListener(this);
   this._inputField.onfocus = this._focusOnInputField.bindAsEventListener(this);

Modified: trunk/source/view/View.js
===================================================================
--- trunk/source/view/View.js	2005-07-06 18:17:08 UTC (rev 223)
+++ trunk/source/view/View.js	2005-07-06 20:50:55 UTC (rev 224)
@@ -191,30 +191,67 @@
 
 
 /**
- * Given an HTML element, we first call document.createElement() to 
- * create a new element, and then call appendChild() to add the new 
- * element to the given element.
+ * This method calls document.createElement() to create a new element, and 
+ * then initialized the new element with the values provided by the caller.
  *
  * @scope    public class method
- * @param    parentElement    The existing element that we should append the new element to. 
  * @param    tagName    The HTML tag for the element ("div", "p", "span", etc.). 
  * @param    cssClassName    Optional. The HTML/CSS class to assign to the new element. 
- * @param    elementId    Optional. The HTML id to assign to the new element. 
+ * @param    attributesInJson    Optional. A JSON object with additional attributes to set on the new element. 
+ * @param    text    Optional. A text string to put in a text node within the new element. 
  * @return   The newly created HTML element.
  */
-View.createAndAppendElement = function(parentElement, tagName, cssClassName, elementId) {
-  Util.assert(parentElement instanceof HTMLElement);
+View.newElement = function(tagName, cssClassName, attributesInJson, text) {
   Util.assert(Util.isString(tagName));
   Util.assert(!cssClassName || Util.isString(cssClassName));
-  Util.assert(!elementId || Util.isString(elementId));
+  Util.assert(!attributesInJson || Util.isObject(attributesInJson));
+  Util.assert(!text|| Util.isString(text));
 
   var newElement = window.document.createElement(tagName);
   if (cssClassName) {
     newElement.className = cssClassName;
   }
-  if (elementId) {
-    newElement.id = elementId;
+  if (attributesInJson) {
+    for (var key in attributesInJson) {
+      if (key == 'id') {
+        newElement.id = attributesInJson[key];
+      } else {
+        newElement.setAttribute(key, attributesInJson[key]);
+      }
+    }
   }
+  if (text) {
+    newElement.appendChild(window.document.createTextNode(text));
+  }
+  return newElement;
+};
+
+
+/**
+ * Given an HTML element, we first call document.createElement() to 
+ * create a new element, and then call appendChild() to add the new 
+ * element to the given element.
+ *
+ * Example:
+ * <pre>
+ * var menuUrl = "http://en.wikipedia.org/";
+ * var menuText = "Wikipedia";
+ * var menuItem = View.appendNewElement(mainMenu, "li", NavbarView.CSS_CLASS_MENU_ITEM);
+ * var link = View.appendNewElement(menuItem, "a", null, {href: menuUrl}, menuText);
+ * </pre>
+ *
+ * @scope    public class method
+ * @param    parentElement    The existing element that we should append the new element to. 
+ * @param    tagName    The HTML tag for the element ("div", "p", "span", etc.). 
+ * @param    cssClassName    Optional. The HTML/CSS class to assign to the new element. 
+ * @param    attributesInJson    Optional. A JSON object with additional attributes to set on the new element. 
+ * @param    text    Optional. A text string to put in a text node within the new element. 
+ * @return   The newly created HTML element.
+ */
+View.appendNewElement = function(parentElement, tagName, cssClassName, attributesInJson, text) {
+  Util.assert(parentElement instanceof HTMLElement);
+  
+  var newElement = View.newElement(tagName, cssClassName, attributesInJson, text);
   parentElement.appendChild(newElement);
   return newElement;
 };
@@ -230,7 +267,7 @@
  * @param    textString    The text string to put in the text node.
  * @return   The newly created text node.
  */
-View.createAndAppendTextNode = function(parentElement, textString) {
+View.appendNewTextNode = function(parentElement, textString) {
   Util.assert(parentElement instanceof HTMLElement);
   Util.assert(Util.isString(textString));
 



From chaolam at berlios.de  Thu Jul  7 00:30:56 2005
From: chaolam at berlios.de (Chih-Chao Lam at BerliOS)
Date: Thu, 7 Jul 2005 00:30:56 +0200
Subject: [openrecord-svn] r225 - in trunk/source: . view
Message-ID: <200507062230.j66MUuOB029395@sheep.berlios.de>

Author: chaolam
Date: 2005-07-07 00:30:52 +0200 (Thu, 07 Jul 2005)
New Revision: 225

Modified:
   trunk/source/TablePlugin.js
   trunk/source/view/EntryView.js
   trunk/source/view/MultiEntriesView.js
   trunk/source/view/RootView.js
Log:
Fixed several selection bugs:
Replacing multiple entries works better now
Navigation keys work better too!

Modified: trunk/source/TablePlugin.js
===================================================================
--- trunk/source/TablePlugin.js	2005-07-06 20:50:55 UTC (rev 224)
+++ trunk/source/TablePlugin.js	2005-07-06 22:30:52 UTC (rev 225)
@@ -573,15 +573,15 @@
   
   var move = null;
   switch (asciiValueOfKey) {
-/*    case Util.ASCII_VALUE_FOR_LEFT_ARROW:
+    case Util.ASCII_VALUE_FOR_LEFT_ARROW:
       move = MOVE_LEFT;
-      break;*/
+      break;
     case Util.ASCII_VALUE_FOR_UP_ARROW:
       move = MOVE_UP;
       break;
-/*    case Util.ASCII_VALUE_FOR_RIGHT_ARROW:
+    case Util.ASCII_VALUE_FOR_RIGHT_ARROW:
       move = MOVE_RIGHT;
-      break;*/
+      break;
     case Util.ASCII_VALUE_FOR_DOWN_ARROW:
       move = MOVE_DOWN;
       break;
@@ -645,7 +645,7 @@
     var nextMultiEntryView = nextCell.or_entriesView;
     nextMultiEntryView.select(move != MOVE_LEFT);
   }
-  return !move;
+  return move;
 };
 
 

Modified: trunk/source/view/EntryView.js
===================================================================
--- trunk/source/view/EntryView.js	2005-07-06 20:50:55 UTC (rev 224)
+++ trunk/source/view/EntryView.js	2005-07-06 22:30:52 UTC (rev 225)
@@ -585,7 +585,9 @@
   if (this._suggestionBox && this._suggestionBox._keyPressOnInputField(eventObject)) {
     return true;
   }
-  if (this._keyPressFunction && this._keyPressFunction(eventObject, this)) {
+  var ignoreKeyPressFunc = this._isEditing && (eventObject.keyCode == Util.ASCII_VALUE_FOR_LEFT_ARROW || 
+    eventObject.keyCode == Util.ASCII_VALUE_FOR_RIGHT_ARROW);
+  if (!ignoreKeyPressFunc && this._keyPressFunction && this._keyPressFunction(eventObject, this)) {
     return true;
   }
   var editField = this._editField;
@@ -641,6 +643,9 @@
     // ignore keyboard shortcuts
     return false;
   }
+  if (this._keyPressFunction && this._keyPressFunction(myEvent, this)) {
+    return true;
+  }
   if (myEvent.keyCode ==  Util.KEYCODE_FOR_BACKSPACE || myEvent.keyCode == Util.KEYCODE_FOR_DELETE ||
       myEvent.keyCode === 0) {
     Util.assert(this._entry !== null);
@@ -649,7 +654,13 @@
     this._valueIsItem = false;
     this._setClassName();
     this.getRootView().removeFromSelection(this);
-    this._buildView();
+    if ((myEvent.keyCode ==  Util.KEYCODE_FOR_BACKSPACE || myEvent.keyCode == Util.KEYCODE_FOR_DELETE) &&
+        this.getSuperview().entryRemoved) {
+      this.getSuperview().entryRemoved(this);
+    }
+    else {
+      this._buildView();
+    }
     if (myEvent.keyCode === 0) {
       this.startEditing(true,Util.getStringFromKeyEvent(myEvent));
       return true;

Modified: trunk/source/view/MultiEntriesView.js
===================================================================
--- trunk/source/view/MultiEntriesView.js	2005-07-06 20:50:55 UTC (rev 224)
+++ trunk/source/view/MultiEntriesView.js	2005-07-06 22:30:52 UTC (rev 225)
@@ -130,7 +130,9 @@
   this._entryViews[index].selectView();
 };
 
-
+MultiEntriesView.prototype.entryRemoved = function(anEntryView) {
+  this._buildView();
+};
 /**
  *
  */

Modified: trunk/source/view/RootView.js
===================================================================
--- trunk/source/view/RootView.js	2005-07-06 20:50:55 UTC (rev 224)
+++ trunk/source/view/RootView.js	2005-07-06 22:30:52 UTC (rev 225)
@@ -97,7 +97,7 @@
   this._currentContentView = null;
   this._homePage = null;
   this._selections = [];
-  document.onkeypress = this._onKeyPress.bindAsEventListener(this);
+  document.addEventListener("keypress",this._onKeyPress.bindAsEventListener(this),false);
   
   window.document.body.innerHTML = "";
   var rootDiv = View.appendNewElement(window.document.body, "div");
@@ -587,7 +587,10 @@
   if (!(anEvent.target instanceof HTMLInputElement || anEvent.target instanceof HTMLTextAreaElement)) {
     for (var i in this._selections) {
       var selectObj = this._selections[i];
-      if (!selectObj.handleKeyEventWhenSelected(anEvent)) {break;}
+      if (selectObj.handleKeyEventWhenSelected(anEvent)) {
+        anEvent.preventDefault();
+        return true;
+      }
     }
   }
 };



From skinner at berlios.de  Thu Jul  7 07:05:39 2005
From: skinner at berlios.de (Brian Douglas Skinner at BerliOS)
Date: Thu, 7 Jul 2005 07:05:39 +0200
Subject: [openrecord-svn] r226 - in trunk: . source/view
Message-ID: <200507070505.j6755dnJ031385@sheep.berlios.de>

Author: skinner
Date: 2005-07-07 07:05:32 +0200 (Thu, 07 Jul 2005)
New Revision: 226

Modified:
   trunk/dashboard.html
   trunk/demo_page.html
   trunk/dogfood.html
   trunk/source/view/RootView.js
Log:
Minor changes: RootView now displays within a single <div> tag, instead of replacing the entire document body.

Modified: trunk/dashboard.html
===================================================================
--- trunk/dashboard.html	2005-07-06 22:30:52 UTC (rev 225)
+++ trunk/dashboard.html	2005-07-07 05:05:32 UTC (rev 226)
@@ -57,8 +57,10 @@
   </head>
   
   <body>
-    <p>Sorry, the browser you're using doesn't support JavaScript. 
-    This page won't display correctly.</p>
+    <div id="OpenRecord">
+      <p>Sorry, the browser you're using doesn't support JavaScript. 
+      This page won't display correctly.</p>
+    </div>
     
 <!-- Creative Commons metadata for Public Domain License 
 

Modified: trunk/demo_page.html
===================================================================
--- trunk/demo_page.html	2005-07-06 22:30:52 UTC (rev 225)
+++ trunk/demo_page.html	2005-07-07 05:05:32 UTC (rev 226)
@@ -57,8 +57,10 @@
   </head>
   
   <body>
-    <p>Sorry, the browser you're using doesn't support JavaScript. 
-    This page won't display correctly.</p>
+    <div id="OpenRecord">
+      <p>Sorry, the browser you're using doesn't support JavaScript. 
+      This page won't display correctly.</p>
+    </div>
     
 <!-- Creative Commons metadata for Public Domain License 
 

Modified: trunk/dogfood.html
===================================================================
--- trunk/dogfood.html	2005-07-06 22:30:52 UTC (rev 225)
+++ trunk/dogfood.html	2005-07-07 05:05:32 UTC (rev 226)
@@ -57,8 +57,10 @@
   </head>
   
   <body>
-    <p>Sorry, the browser you're using doesn't support JavaScript. 
-    This page won't display correctly.</p>
+    <div id="OpenRecord">
+      <p>Sorry, the browser you're using doesn't support JavaScript. 
+      This page won't display correctly.</p>
+    </div>
     
 <!-- Creative Commons metadata for Public Domain License 
 

Modified: trunk/source/view/RootView.js
===================================================================
--- trunk/source/view/RootView.js	2005-07-06 22:30:52 UTC (rev 225)
+++ trunk/source/view/RootView.js	2005-07-07 05:05:32 UTC (rev 226)
@@ -99,8 +99,15 @@
   this._selections = [];
   document.addEventListener("keypress",this._onKeyPress.bindAsEventListener(this),false);
   
-  window.document.body.innerHTML = "";
-  var rootDiv = View.appendNewElement(window.document.body, "div");
+  // window.document.body.innerHTML = "";
+  // var rootDiv = View.appendNewElement(window.document.body, "div");
+  var rootDiv = document.getElementById('OpenRecord');
+  if (!rootDiv) {
+    alert('Sorry, I could not find my <div id="OpenRecord"> element');
+    return;
+  }
+  View.removeChildrenOfElement(rootDiv);
+  
   var anchorSpan = View.appendNewElement(rootDiv, "span");
  
   var headerP = View.appendNewElement(rootDiv, "p", "header");



From skinner at berlios.de  Mon Jul 11 02:20:39 2005
From: skinner at berlios.de (Brian Douglas Skinner at BerliOS)
Date: Mon, 11 Jul 2005 02:20:39 +0200
Subject: [openrecord-svn] r227 - trunk/documentation
Message-ID: <200507110020.j6B0KdwK007590@sheep.berlios.de>

Author: skinner
Date: 2005-07-11 02:20:36 +0200 (Mon, 11 Jul 2005)
New Revision: 227

Modified:
   trunk/documentation/release_planning.txt
Log:
updates to release_planning.txt

Modified: trunk/documentation/release_planning.txt
===================================================================
--- trunk/documentation/release_planning.txt	2005-07-07 05:05:32 UTC (rev 226)
+++ trunk/documentation/release_planning.txt	2005-07-11 00:20:36 UTC (rev 227)
@@ -251,11 +251,11 @@
        |          |         |  5. Attempt to embed an OpenRecord view in a MediaWiki page
        |          |         |  6. Refactor our observer notification API (and implementation)
 chao   | 0.5  IED |         |  7. Wire up observers & keep views in sync
-       |          |         |  8. be able to select a lozenge 
+chao   |          | done?   |  8. be able to select a lozenge 
        |          |         |  9. be able to select a table row 
        |          |         | 10. be able to select a non-lozenge literal entry
        |          |         | 11. be able to select the text within an entry
-       |          |         | 12. be able to delete a selected lozenge 
+chao   |          | done?   | 12. be able to delete a selected lozenge 
        |          |         | 13. be able to delete a selected table row 
 chao   | 0.5  IED |         | 14. improve keyboard navigation: tab, arrow, and return keys
        |          |         | 15. Get data model to pass the ordinal unit tests again



From skinner at berlios.de  Mon Jul 11 02:24:43 2005
From: skinner at berlios.de (Brian Douglas Skinner at BerliOS)
Date: Mon, 11 Jul 2005 02:24:43 +0200
Subject: [openrecord-svn] r228 - trunk/documentation
Message-ID: <200507110024.j6B0OhWn009733@sheep.berlios.de>

Author: skinner
Date: 2005-07-11 02:24:41 +0200 (Mon, 11 Jul 2005)
New Revision: 228

Modified:
   trunk/documentation/release_planning.txt
Log:
updates to release_planning.txt

Modified: trunk/documentation/release_planning.txt
===================================================================
--- trunk/documentation/release_planning.txt	2005-07-11 00:20:36 UTC (rev 227)
+++ trunk/documentation/release_planning.txt	2005-07-11 00:24:41 UTC (rev 228)
@@ -347,7 +347,8 @@
 Bug
   name
   summary
-  (most Bug items will also be categorized as Task items, so each Bug will also have all the attributes of a Task)
+  (most Bug items will also be categorized as Task items, so each Bug will also 
+  have all the attributes of a Task)
   
 
    
@@ -426,7 +427,8 @@
    column hiding, etc.
 ---------------------------------------------------
  + Draft a Contributor Agreement
-     We need to draft some sort of Contributor Agreement, like the Apache Contributor Agreement or the Python Contributor Agreement.
+     We need to draft some sort of Contributor Agreement, like the Apache 
+     Contributor Agreement or the Python Contributor Agreement.
      See:
        http://www.apache.org/licenses/icla.txt
        http://www.python.org/psf/contrib-form.html
@@ -524,9 +526,11 @@
 ===========================       
 Issues for post iteration#2
 ===========================       
-+ How should we rename "VirtualServer"?
-+ How should we interoperate with other repositories(openrecord + other sources of data)?
-+ Should we rename "World"?
-+ BUG: need to convert HTML entity codes back at client-server layer
-+ BUG: Can't really create own plugins yet (e.g. UUID need to be assigned, plugin item created)
-+ Q: Do we (and how) need a concept of focus for Views? Currently, only Text input and Textarea gets keyboard focus. We need it for table selections and possibly selecting "lozenges" (item references stored in the EntryView)
\ No newline at end of file
+ + How should we rename "VirtualServer"?
+ + How should we interoperate with other repositories(openrecord + other sources of data)?
+ + Should we rename "World"?
+ + BUG: need to convert HTML entity codes back at client-server layer
+ + BUG: Can't really create own plugins yet (e.g. UUID need to be assigned, plugin item created)
+ + Q: Do we (and how) need a concept of focus for Views? Currently, only Text input 
+    and Textarea gets keyboard focus. We need it for table selections and possibly 
+    selecting "lozenges" (item references stored in the EntryView)
\ No newline at end of file



From chaolam at berlios.de  Tue Jul 12 01:00:08 2005
From: chaolam at berlios.de (Chih-Chao Lam at BerliOS)
Date: Tue, 12 Jul 2005 01:00:08 +0200
Subject: [openrecord-svn] r229 - in trunk: . source source/view third_party third_party/scriptaculous
Message-ID: <200507112300.j6BN08h5003220@sheep.berlios.de>

Author: chaolam
Date: 2005-07-12 01:00:00 +0200 (Tue, 12 Jul 2005)
New Revision: 229

Added:
   trunk/third_party/scriptaculous/
   trunk/third_party/scriptaculous/controls.js
   trunk/third_party/scriptaculous/dragdrop.js
   trunk/third_party/scriptaculous/effects.js
   trunk/third_party/scriptaculous/prototype.js
Modified:
   trunk/dashboard.html
   trunk/demo_page.html
   trunk/dogfood.html
   trunk/source/TablePlugin.js
   trunk/source/base_style.css
   trunk/source/view/EntryView.js
   trunk/source/view/LoginView.js
   trunk/source/view/MultiEntriesView.js
Log:
1)Integrated modified version of scriptaculous and prototype libraries
2) added experimental Drag and Drop skeletal functionality
3) Refactored LoginView to use View.newElement() api, and added special effects from scriptaculous library

Modified: trunk/dashboard.html
===================================================================
--- trunk/dashboard.html	2005-07-11 00:24:41 UTC (rev 228)
+++ trunk/dashboard.html	2005-07-11 23:00:00 UTC (rev 229)
@@ -14,6 +14,9 @@
     <title>Dashboard Demo Page</title>
     <link rel="stylesheet" type="text/css" href="source/base_style.css" />
     <script type="text/javascript" src="third_party/md5/md5.js"></script>
+    <script type="text/javascript" src="third_party/scriptaculous/prototype.js"></script>
+    <script type="text/javascript" src="third_party/scriptaculous/effects.js"></script>
+    <script type="text/javascript" src="third_party/scriptaculous/dragdrop.js"></script>
     
     <script type="text/javascript" src="source/util/Uuid.js"></script>
     <script type="text/javascript" src="source/util/Util.js"></script>

Modified: trunk/demo_page.html
===================================================================
--- trunk/demo_page.html	2005-07-11 00:24:41 UTC (rev 228)
+++ trunk/demo_page.html	2005-07-11 23:00:00 UTC (rev 229)
@@ -14,6 +14,9 @@
     <title>openrecord.org - Demo Page</title>
     <link rel="stylesheet" type="text/css" href="source/base_style.css" />
     <script type="text/javascript" src="third_party/md5/md5.js"></script>
+    <script type="text/javascript" src="third_party/scriptaculous/prototype.js"></script>
+    <script type="text/javascript" src="third_party/scriptaculous/effects.js"></script>
+    <script type="text/javascript" src="third_party/scriptaculous/dragdrop.js"></script>
     
     <script type="text/javascript" src="source/util/Uuid.js"></script>
     <script type="text/javascript" src="source/util/Util.js"></script>

Modified: trunk/dogfood.html
===================================================================
--- trunk/dogfood.html	2005-07-11 00:24:41 UTC (rev 228)
+++ trunk/dogfood.html	2005-07-11 23:00:00 UTC (rev 229)
@@ -14,6 +14,9 @@
     <title>openrecord.org - Dogfood Page</title>
     <link rel="stylesheet" type="text/css" href="source/base_style.css" />
     <script type="text/javascript" src="third_party/md5/md5.js"></script>
+    <script type="text/javascript" src="third_party/scriptaculous/prototype.js"></script>
+    <script type="text/javascript" src="third_party/scriptaculous/effects.js"></script>
+    <script type="text/javascript" src="third_party/scriptaculous/dragdrop.js"></script>
     
     <script type="text/javascript" src="source/util/Uuid.js"></script>
     <script type="text/javascript" src="source/util/Util.js"></script>

Modified: trunk/source/TablePlugin.js
===================================================================
--- trunk/source/TablePlugin.js	2005-07-11 00:24:41 UTC (rev 228)
+++ trunk/source/TablePlugin.js	2005-07-11 23:00:00 UTC (rev 229)
@@ -313,6 +313,13 @@
 
 
 /**
+ *
+ */
+TablePlugin.prototype._handleDrop = function(element) {
+  alert('table plugin: ' + element + ' was dropped on ' + this);
+};
+
+/**
  * Constructs the table header 
  *
  * @scope    private instance method
@@ -324,18 +331,21 @@
   for (var i=0; i<this._displayAttributes.length; ++i) {
     var attribute = this._displayAttributes[i];
     if (!this._sortAttribute) {this._sortAttribute = attribute;}
-    var aCell = document.createElement("th");
-    var headerString = attribute.getDisplayString();
-    aCell.appendChild(document.createTextNode(headerString));
+    var headerElt = View.appendNewElement(headerRow,"th");
+    var aCell = View.appendNewElement(headerElt,"span",null,null,attribute.getDisplayString());
+    aCell.style.background = "rgb(90%, 90%, 90%)";
     if (this._sortAttribute == attribute) {
       aCell.appendChild(this.getSortIcon());
     }
     aCell.onclick = this.clickOnHeader.bindAsEventListener(this, attribute);
-    
-    headerRow.appendChild(aCell);
+    if (this.isInEditMode()) {
+      new Draggable(aCell, {revert:true});
+    }
     ++numCols;
   }
   this._numberOfColumns = numCols;
+  var listener = this;
+  Droppables.add(headerRow, {onDrop: function(element) {listener._handleDrop(element);}});   
 };
 
 
@@ -545,11 +555,11 @@
 
 /**
  * 
- */
 TablePlugin.prototype._handleClick = function(eventObject, anEntryView) {
   var rowElement = anEntryView.getSuperview().getHtmlElement().parentNode; // entryView -> multiEntriesView -> cellElment -> rowElement
   return this.selectRow(rowElement);
 };
+*/
 
 
 /**
@@ -638,7 +648,7 @@
         userHitReturnInLastRow = true;
       }
       var nextRow = this._table.rows[nextRowNumber];
-      this.selectRow(nextRow);
+      //this.selectRow(nextRow);
       nextCell = nextRow.cells[cellElement.cellIndex];
     }
     

Modified: trunk/source/base_style.css
===================================================================
--- trunk/source/base_style.css	2005-07-11 00:24:41 UTC (rev 228)
+++ trunk/source/base_style.css	2005-07-11 23:00:00 UTC (rev 229)
@@ -465,7 +465,7 @@
   background: rgb(100%, 100%, 100%);
 }
 
-.viewmode .simple_table tr:hover {
+.viewmode .simple_table {
   background: rgb(100%, 100%, 0%);
 }
 

Modified: trunk/source/view/EntryView.js
===================================================================
--- trunk/source/view/EntryView.js	2005-07-11 00:24:41 UTC (rev 228)
+++ trunk/source/view/EntryView.js	2005-07-11 23:00:00 UTC (rev 229)
@@ -236,11 +236,17 @@
     this._textSpan.className = className;
     
     var typeNumber = this.getWorld().getItemFromUuid(World.UUID_FOR_TYPE_NUMBER);
+    var itemType  = this.getWorld().getItemFromUuid(World.UUID_FOR_TYPE_ITEM);
+    var connectionType  = this.getWorld().getItemFromUuid(World.UUID_FOR_TYPE_CONNECTION);
     if (dataType == typeNumber) {
       if (this._entry.getValue() < 0) {
         Util.css_addClass(this._textSpan,EntryView.CSS_CLASS_NEGATIVE_NUMBER);
       }
     }
+    else if (this.isInEditMode() && (dataType == itemType || dataType == connectionType)) {
+      this._textSpan.setAttribute("or_entry",this._entry);
+      new Draggable(this._textSpan, {revert:true});
+    }
   }
 };
 
@@ -262,7 +268,6 @@
 EntryView.prototype.selectView = function(eventObject) {
   var rootView = this.getRootView();
   if (this._isLozenge()) {
-    Util.css_addClass(this._textSpan, EntryView.CSS_CLASS_SELECTED);
     var addToSelection = (eventObject) && (eventObject.shiftKey || eventObject.ctrlKey || eventObject.metaKey);
     if (addToSelection) {
       rootView.addToSelection(this);
@@ -270,6 +275,7 @@
     else {
       rootView.setSelection(this);
     }
+    Util.css_addClass(this._textSpan, EntryView.CSS_CLASS_SELECTED); // must set this after setting rootView selection
   }
   else {
     rootView.setSelection(null);
@@ -299,8 +305,13 @@
       editField.onkeypress = this.onKeyPress.bindAsEventListener(this);
       editField.onkeyup = this.onKeyUp.bindAsEventListener(this);
       editField.onfocus = this.onFocus.bindAsEventListener(this);
-      editField.defaultValue = this._isProvisional ? '' : (initialStr) ? initialStr : this._textNode.data;
-      editField.size = 5; //editField.defaultValue.length+1;
+      editField.value = this._isProvisional ? '' : (initialStr) ? initialStr : this._textNode.data;
+      if (this.getSuperview().getEntryWidth) {
+        var recommendedWidth = this.getSuperview().getEntryWidth();
+        if (recommendedWidth > 0) {
+          editField.style.width = recommendedWidth + 'px';
+        }
+      }
     }
     
     if (this._isMultiLine) {

Modified: trunk/source/view/LoginView.js
===================================================================
--- trunk/source/view/LoginView.js	2005-07-11 00:24:41 UTC (rev 228)
+++ trunk/source/view/LoginView.js	2005-07-11 23:00:00 UTC (rev 229)
@@ -121,34 +121,22 @@
   var editMode = currentUser ? true : false;
   this.getRootView().setEditMode(editMode);
   
-  var welcomeText, welcomeNode;
+  this.errorNode = View.appendNewElement(mySpan,"span",null,{id:"login_view_error"});
+  this.errorNode.style.display = 'None';
+  this.errorNode.style.color = '#EE0000';
   if (this._isCreatingNewAccount) {
     // The user wants to create a new account.
     // Create a line that looks like this:
-    //   Please enter new name and password:  _username_  _password_  [Create New Account]
+    //   Enter new name and password:  _username_  _password_  [Create New Account]
     
-    welcomeText = "Please enter new name and password:";
-    welcomeNode = document.createTextNode(welcomeText);
-    this.usernameInput = document.createElement("input");
-    this.usernameInput.size = 20;
-    this.usernameInput.value = "Albert Einstein";
-    
-    var passwordInput = document.createElement("input");
-    this.passwordInput.size = 10;
-    this.passwordInput.type = "password";
-    this.passwordInput.value = "randomdots";
+    View.appendNewTextNode(mySpan,"Enter new name and password:");
+    this.usernameInput = View.appendNewElement(mySpan,"input",null,{size:20,value:"Albert Einstein"});
+    View.appendNewTextNode(mySpan," ");
+    this.passwordInput = View.appendNewElement(mySpan,"input",null,{size:10,type:"password",value:"randomdots"});
     this.passwordInput.onkeypress = this._createAccountPasswordKeyPress.bindAsEventListener(this);
-
-    var newAcctButton = document.createElement("input");
-    newAcctButton.value = "Create New Account";
-    newAcctButton.type = "button";
-    newAcctButton.onclick = this._clickOnNewAcctButton.bindAsEventListener(this);
-    mySpan.appendChild(welcomeNode);
-    mySpan.appendChild(this.usernameInput);
-    mySpan.appendChild(document.createTextNode(" "));
-    mySpan.appendChild(this.passwordInput);
-    mySpan.appendChild(document.createTextNode(" "));
-    mySpan.appendChild(newAcctButton);
+    View.appendNewTextNode(mySpan," ");
+    View.appendNewElement(mySpan,"input",null,{value:"Create New Account",type:"button"}).onclick = 
+      this._clickOnNewAcctButton.bindAsEventListener(this);
     this.usernameInput.select();
   }
   else if (currentUser) { 
@@ -156,59 +144,32 @@
     // Create a line that looks like this:
     //   Hello Jane Doe.  _Sign out_  [Edit]
     
-    welcomeText = "Hello " + currentUser.getDisplayName() + ". ";
-    welcomeNode = document.createTextNode(welcomeText);
-    mySpan.appendChild(welcomeNode);
-
-    var signoutLink = document.createElement("a");
-    signoutLink.appendChild(document.createTextNode("Sign out"));
-    signoutLink.onclick = this._clickOnSignoutLink.bindAsEventListener(this);
-    mySpan.appendChild(signoutLink);
-
-    mySpan.appendChild(document.createTextNode(" "));
-
-    var toolsButton = document.createElement("input");
-    toolsButton.type = "button";
-    toolsButton.value = (this.getRootView().isInShowToolsMode()) ? "Hide Tools" : "Show Tools";
-    toolsButton.onclick = this._clickOnShowToolsButton.bindAsEventListener(this);
-    mySpan.appendChild(toolsButton);
+    View.appendNewTextNode(mySpan,"Hello " + currentUser.getDisplayName() + ". ");
+    View.appendNewElement(mySpan,"a",null,null,"Sign out").onclick = this._clickOnSignoutLink.bindAsEventListener(this);
+    View.appendNewTextNode(mySpan," ");
+    View.appendNewElement(mySpan,"input",null,{type:"button",value:
+      (this.getRootView().isInShowToolsMode()) ? "Hide Tools" : "Show Tools"}).onclick =
+        this._clickOnShowToolsButton.bindAsEventListener(this);
   }
   else {
     // The user has not yet signed in.
     // Create a line that looks like this:
     //   _Create Account_  or sign in:  _username_  _password_  [Sign in]
     
-    var createAcctLink = document.createElement("a");
-    createAcctLink.appendChild(document.createTextNode("Create Account"));
-
-    welcomeText = " or sign in: "; 
-    welcomeNode = document.createTextNode(welcomeText);
-    this.usernameInput = document.createElement("input");
-    this.usernameInput.size = 20;
-    this.usernameInput.value = "Albert Einstein";
-    
-    this.passwordInput = document.createElement("input");
-    this.passwordInput.size = 10;
-    this.passwordInput.type = "password";
-    this.passwordInput.value = "randomdots";
+    View.appendNewElement(mySpan,"a",null,null,"Create Account").onclick = 
+      this._clickOnCreateAccountLink.bindAsEventListener(this);
+    View.appendNewTextNode(mySpan," or sign in: ");
+    this.usernameInput = View.appendNewElement(mySpan,"input",null,{size:20,value:"Albert Einstein"});
+    mySpan.appendChild(document.createTextNode(" "));
+    this.passwordInput = View.appendNewElement(mySpan,"input",null,{size:10,type:"password",value:"randomdots"});
     this.passwordInput.onkeypress = this._signinPasswordKeyPress.bindAsEventListener(this);
     this.passwordInput.onfocus = this._signinPasswordFocus.bindAsEventListener(this);
-
     this._myUsernameSuggestionBox = new UserSuggestionBox(this.usernameInput, this.getWorld().getUsers(), this.passwordInput);
-
-    var signinButton = document.createElement("input");
-    signinButton.value = "Sign in";
-    signinButton.type = "button";
-    signinButton.onclick = this._clickOnSignInButton.bindAsEventListener(this);
-    createAcctLink.onclick = this._clickOnCreateAccountLink.bindAsEventListener(this,signinButton);
-    mySpan.appendChild(createAcctLink);
-    mySpan.appendChild(welcomeNode);
-    mySpan.appendChild(this.usernameInput);
     mySpan.appendChild(document.createTextNode(" "));
-    mySpan.appendChild(this.passwordInput);
-    mySpan.appendChild(document.createTextNode(" "));
-    mySpan.appendChild(signinButton);
+    View.appendNewElement(mySpan,"input",null,{value:"Sign in",type:"button"}).onclick =
+      this._clickOnSignInButton.bindAsEventListener(this);
   }
+  
 };
 
 
@@ -293,8 +254,6 @@
     password = "";
   }
   this._createNewUser(username, password);
-  this._isCreatingNewAccount = false;
-  this._rebuildView();
 };
 
 
@@ -370,14 +329,11 @@
  *
  */
 LoginView.prototype._reportError = function(errorString) {
-  var newErrorNode = document.createTextNode(errorString);
   var mySpan = this.getHtmlElement();
-  if (this.errorNode) {
-    mySpan.replaceChild(newErrorNode, this.errorNode);
-  } else {
-    mySpan.appendChild(newErrorNode); 
-  }
-  this.errorNode = newErrorNode;
+  Effect.Shake(mySpan);
+  View.removeChildrenOfElement(this.errorNode);
+  View.appendNewTextNode(this.errorNode,errorString + ' ');
+  Effect.Appear(this.errorNode, {duration:2.0, transition:Effect.Transitions.wobble});
 };
 
 
@@ -394,8 +350,10 @@
   if (isValidUsername(username)) {
     var newUser = this.getWorld().newUser(username, password); 
     this._loginUser(newUser,password);
+    this._isCreatingNewAccount = false;
+    this._rebuildView();
   } else {
-    this._reportError("\n Your username must be 3 or more alphanumeric characters!");
+    this._reportError("Invalid username"); //pending better error message
   }
 };
 
@@ -420,7 +378,7 @@
   this._nextField = nextHtmlField;
   
   this._userSuggestionBoxDivElement = document.createElement('div');
-  // this._userSuggestionBoxDivElement.style.visibility = "hidden";
+  this._userSuggestionBoxDivElement.style.visibility = "hidden";
   this._userSuggestionBoxDivElement.style.zIndex = 11;
   this._userSuggestionBoxDivElement.style.display = "none";
   document.body.appendChild(this._userSuggestionBoxDivElement);
@@ -428,7 +386,7 @@
   this._inputField.onkeyup = this._keyPressOnInputField.bindAsEventListener(this);
   this._inputField.onfocus = this._focusOnInputField.bindAsEventListener(this);
   this._inputField.onblur = this._blurOnInputField.bindAsEventListener(this);
-  this._keyPressOnInputField();
+  //this._keyPressOnInputField();
 }
 
 

Modified: trunk/source/view/MultiEntriesView.js
===================================================================
--- trunk/source/view/MultiEntriesView.js	2005-07-11 00:24:41 UTC (rev 228)
+++ trunk/source/view/MultiEntriesView.js	2005-07-11 23:00:00 UTC (rev 229)
@@ -109,6 +109,15 @@
   }
 };
 
+/**
+ *
+ */
+MultiEntriesView.prototype.getEntryWidth = function() {
+  if (this._entryViews.length > 1) {
+    return -1;
+  }
+  return this.getHtmlElement().offsetWidth-8;
+};
 
 /**
  *
@@ -186,7 +195,14 @@
   if (eventObject.target == this.getHtmlElement()) {lastEntry.selectView();}
 };
 
+/**
+ *
+ */
+MultiEntriesView.prototype._handleDrop = function(element) {
+  alert(element + ' was dropped on ' + this);
+};
 
+
 /**
  *
  */
@@ -288,6 +304,9 @@
   
   if (this.isInEditMode()) {
     htmlElement.onclick = this._handleOwnClick.bindAsEventListener(this);
+    var listener = this;
+    Droppables.add(htmlElement, {accept: [EntryView.CSS_CLASS_CONNECTION_VALUE,EntryView.CSS_ITEM_VALUE],
+      onDrop: function(element) {listener._handleDrop(element);}});
   } 
   this._myHasEverBeenDisplayedFlag = true;
 };

Added: trunk/third_party/scriptaculous/controls.js
===================================================================
--- trunk/third_party/scriptaculous/controls.js	2005-07-11 00:24:41 UTC (rev 228)
+++ trunk/third_party/scriptaculous/controls.js	2005-07-11 23:00:00 UTC (rev 229)
@@ -0,0 +1,261 @@
+// Copyright (c) 2005 Thomas Fuchs (http://script.aculo.us, http://mir.aculo.us)
+// 
+// Permission is hereby granted, free of charge, to any person obtaining
+// a copy of this software and associated documentation files (the
+// "Software"), to deal in the Software without restriction, including
+// without limitation the rights to use, copy, modify, merge, publish,
+// distribute, sublicense, and/or sell copies of the Software, and to
+// permit persons to whom the Software is furnished to do so, subject to
+// the following conditions:
+// 
+// The above copyright notice and this permission notice shall be
+// included in all copies or substantial portions of the Software.
+// 
+// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
+// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
+// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
+// NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
+// LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
+// OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
+// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
+
+
+Element.collectTextNodesIgnoreClass = function(element, ignoreclass) {
+  var children = $(element).childNodes;
+  var text     = "";
+  var classtest = new RegExp("^([^ ]+ )*" + ignoreclass+ "( [^ ]+)*$","i");
+  
+  for (var i = 0; i < children.length; i++) {
+    if(children[i].nodeType==3) {
+      text+=children[i].nodeValue;
+    } else {
+      if((!children[i].className.match(classtest)) && children[i].hasChildNodes())
+        text += Element.collectTextNodesIgnoreClass(children[i], ignoreclass);
+    }
+  }
+  
+  return text;
+}
+
+Ajax.Autocompleter = Class.create();
+Ajax.Autocompleter.prototype = Object.extend(new Ajax.Base(),{
+  initialize: function(element, update, url, options) {
+    this.element     = $(element); 
+    this.update      = $(update);  
+    this.has_focus   = false; 
+    this.changed     = false; 
+    this.active      = false; 
+    this.index       = 0;     
+    this.entry_count = 0;    
+    this.url         = url;
+
+    this.setOptions(options);
+    this.options.asynchronous = true;
+    this.options.onComplete   = this.onComplete.bind(this)
+    this.options.frequency    = this.options.frequency || 0.4;
+    this.options.min_chars    = this.options.min_chars || 1;
+    this.options.method       = 'post';
+    
+    this.options.onShow = this.options.onShow || 
+      function(element, update){ 
+        if(!update.style.position || update.style.position=='absolute') {
+          update.style.position = 'absolute';
+          var offsets = Position.cumulativeOffset(element);
+          update.style.left = offsets[0] + 'px';
+          update.style.top  = (offsets[1] + element.offsetHeight) + 'px';
+          update.style.width = element.offsetWidth + 'px';
+        }
+        new Effect.Appear(update,{duration:0.3});
+      };
+    this.options.onHide = this.options.onHide || 
+      function(element, update){ new Effect.Fade(update,{duration:0.3}) };
+    
+    
+    if(this.options.indicator)
+      this.indicator = $(this.options.indicator);
+       
+    this.observer = null;
+    
+    Element.hide(this.update);
+    
+    Event.observe(this.element, "blur", this.onBlur.bindAsEventListener(this));
+    Event.observe(this.element, "keypress", this.onKeyPress.bindAsEventListener(this));
+  },
+  
+  show: function() {
+    if(this.update.style.display=='none') this.options.onShow(this.element, this.update);
+    if(!this.iefix && (navigator.appVersion.indexOf('MSIE')>0) && this.update.style.position=='absolute') {
+      new Insertion.After(this.update, 
+       '<iframe id="' + this.update.id + '_iefix" '+
+       'style="display:none;filter:progid:DXImageTransform.Microsoft.Alpha(apacity=0);" ' +
+       'src="javascript:;" frameborder="0" scrolling="no"></iframe>');
+      this.iefix = $(this.update.id+'_iefix');
+    }
+    if(this.iefix) {
+      Position.clone(this.update, this.iefix);
+      this.iefix.style.zIndex = 1;
+      this.update.style.zIndex = 2;
+      Element.show(this.iefix);
+    }
+  },
+  
+  hide: function() {
+    if(this.update.style.display=='') this.options.onHide(this.element, this.update);
+    if(this.iefix) Element.hide(this.iefix);
+  },
+  
+  startIndicator: function() {
+    if(this.indicator) Element.show(this.indicator);
+  },
+  
+  stopIndicator: function() {
+    if(this.indicator) Element.hide(this.indicator);
+  },
+  
+  onObserverEvent: function() {
+    this.changed = false;   
+    if(this.element.value.length>=this.options.min_chars) {
+      this.startIndicator();
+      this.options.parameters = this.options.callback ?
+        this.options.callback(this.element, Form.Element.getValue(this.element)) :
+          Form.Element.serialize(this.element);
+      new Ajax.Request(this.url, this.options);
+    } else {
+      this.active = false;
+      this.hide();
+    }
+  },
+  
+  addObservers: function(element) {
+    Event.observe(element, "mouseover", this.onHover.bindAsEventListener(this));
+    Event.observe(element, "click", this.onClick.bindAsEventListener(this));
+  },
+  
+  onComplete: function(request) {
+    if(!this.changed && this.has_focus) {
+      this.update.innerHTML = request.responseText;
+      Element.cleanWhitespace(this.update);
+      Element.cleanWhitespace(this.update.firstChild);
+
+      if(this.update.firstChild && this.update.firstChild.childNodes) {
+        this.entry_count = 
+          this.update.firstChild.childNodes.length;
+        for (var i = 0; i < this.entry_count; i++) {
+          var entry = this.get_entry(i);
+          entry.autocompleteIndex = i;
+          this.addObservers(entry);
+        }
+      } else { 
+        this.entry_count = 0;
+      }
+      
+      this.stopIndicator();
+      
+      this.index = 0;
+      this.render();
+    }
+  },
+  
+  onKeyPress: function(event) {
+    if(this.active)
+      switch(event.keyCode) {
+       case Event.KEY_TAB:
+       case Event.KEY_RETURN:
+         this.select_entry();
+         Event.stop(event);
+       case Event.KEY_ESC:
+         this.hide();
+         this.active = false;
+         return;
+       case Event.KEY_LEFT:
+       case Event.KEY_RIGHT:
+         return;
+       case Event.KEY_UP:
+         this.mark_previous();
+         this.render();
+         if(navigator.appVersion.indexOf('AppleWebKit')>0) Event.stop(event);
+         return;
+       case Event.KEY_DOWN:
+         this.mark_next();
+         this.render();
+         if(navigator.appVersion.indexOf('AppleWebKit')>0) Event.stop(event);
+         return;
+      }
+     else 
+      if(event.keyCode==Event.KEY_TAB || event.keyCode==Event.KEY_RETURN) 
+        return;
+    
+    this.changed = true;
+    this.has_focus = true;
+    
+    if(this.observer) clearTimeout(this.observer);
+      this.observer = 
+        setTimeout(this.onObserverEvent.bind(this), this.options.frequency*1000);
+  },
+  
+  onHover: function(event) {
+    var element = Event.findElement(event, 'LI');
+    if(this.index != element.autocompleteIndex) 
+    {
+        this.index = element.autocompleteIndex;
+        this.render();
+    }
+    Event.stop(event);
+  },
+  
+  onClick: function(event) {
+    var element = Event.findElement(event, 'LI');
+    this.index = element.autocompleteIndex;
+    this.select_entry();
+    Event.stop(event);
+  },
+  
+  onBlur: function(event) {
+    // needed to make click events working
+    setTimeout(this.hide.bind(this), 250);
+    this.has_focus = false;
+    this.active = false;     
+  }, 
+  
+  render: function() {
+    if(this.entry_count > 0) {
+      for (var i = 0; i < this.entry_count; i++)
+        this.index==i ? 
+          Element.addClassName(this.get_entry(i),"selected") : 
+          Element.removeClassName(this.get_entry(i),"selected");
+        
+      if(this.has_focus) { 
+        if(this.get_current_entry().scrollIntoView) 
+          this.get_current_entry().scrollIntoView(false);
+        
+        this.show();
+        this.active = true;
+      }
+    } else this.hide();
+  },
+  
+  mark_previous: function() {
+    if(this.index > 0) this.index--
+      else this.index = this.entry_count-1;
+  },
+  
+  mark_next: function() {
+    if(this.index < this.entry_count-1) this.index++
+      else this.index = 0;
+  },
+  
+  get_entry: function(index) {
+    return this.update.firstChild.childNodes[index];
+  },
+  
+  get_current_entry: function() {
+    return this.get_entry(this.index);
+  },
+  
+  select_entry: function() {
+    this.active = false;
+    value = Element.collectTextNodesIgnoreClass(this.get_current_entry(), 'informal').unescapeHTML();
+    this.element.value = value;
+    this.element.focus();
+  }
+});
\ No newline at end of file

Added: trunk/third_party/scriptaculous/dragdrop.js
===================================================================
--- trunk/third_party/scriptaculous/dragdrop.js	2005-07-11 00:24:41 UTC (rev 228)
+++ trunk/third_party/scriptaculous/dragdrop.js	2005-07-11 23:00:00 UTC (rev 229)
@@ -0,0 +1,476 @@
+// Copyright (c) 2005 Thomas Fuchs (http://script.aculo.us, http://mir.aculo.us)
+// 
+// Element.Class part Copyright (c) 2005 by Rick Olson
+// 
+// Permission is hereby granted, free of charge, to any person obtaining
+// a copy of this software and associated documentation files (the
+// "Software"), to deal in the Software without restriction, including
+// without limitation the rights to use, copy, modify, merge, publish,
+// distribute, sublicense, and/or sell copies of the Software, and to
+// permit persons to whom the Software is furnished to do so, subject to
+// the following conditions:
+// 
+// The above copyright notice and this permission notice shall be
+// included in all copies or substantial portions of the Software.
+// 
+// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
+// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
+// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
+// NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
+// LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
+// OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
+// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
+
+Element.Class = {
+    // Element.toggleClass(element, className) toggles the class being on/off
+    // Element.toggleClass(element, className1, className2) toggles between both classes,
+    //   defaulting to className1 if neither exist
+    toggle: function(element, className) {
+      if(Element.Class.has(element, className)) {
+        Element.Class.remove(element, className);
+        if(arguments.length == 3) Element.Class.add(element, arguments[2]);
+      } else {
+        Element.Class.add(element, className);
+        if(arguments.length == 3) Element.Class.remove(element, arguments[2]);
+      }
+    },
+
+    // gets space-delimited classnames of an element as an array
+    get: function(element) {
+      element = $(element);
+      return element.className.split(' ');
+    },
+
+    // functions adapted from original functions by Gavin Kistner
+    remove: function(element) {
+      element = $(element);
+      var regEx;
+      for(var i = 1; i < arguments.length; i++) {
+        regEx = new RegExp("^" + arguments[i] + "\\b\\s*|\\s*\\b" + arguments[i] + "\\b", 'g');
+        element.className = element.className.replace(regEx, '')
+      }
+    },
+
+    add: function(element) {
+      element = $(element);
+      for(var i = 1; i < arguments.length; i++) {
+        Element.Class.remove(element, arguments[i]);
+        element.className += (element.className.length > 0 ? ' ' : '') + arguments[i];
+      }
+    },
+
+    // returns true if all given classes exist in said element
+    has: function(element) {
+      element = $(element);
+      if(!element || !element.className) return false;
+      var regEx;
+      for(var i = 1; i < arguments.length; i++) {
+        regEx = new RegExp("\\b" + arguments[i] + "\\b");
+        if(!regEx.test(element.className)) return false;
+      }
+      return true;
+    },
+    
+    // expects arrays of strings and/or strings as optional paramters
+    // Element.Class.has_any(element, ['classA','classB','classC'], 'classD')
+    has_any: function(element) {
+      element = $(element);
+      if(!element || !element.className) return false;
+      var regEx;
+      for(var i = 1; i < arguments.length; i++) {
+        if((typeof arguments[i] == 'object') && 
+          (arguments[i].constructor == Array)) {
+          for(var j = 0; j < arguments[i].length; j++) {
+            regEx = new RegExp("\\b" + arguments[i][j] + "\\b");
+            if(regEx.test(element.className)) return true;
+          }
+        } else {
+          regEx = new RegExp("\\b" + arguments[i] + "\\b");
+          if(regEx.test(element.className)) return true;
+        }
+      }
+      return false;
+    },
+    
+    childrenWith: function(element, className) {
+      var children = $(element).getElementsByTagName('*');
+      var elements = new Array();
+      
+      for (var i = 0; i < children.length; i++) {
+        if (Element.Class.has(children[i], className)) {
+          elements.push(children[i]);
+          break;
+        }
+      }
+      
+      return elements;
+    }
+}
+
+/*--------------------------------------------------------------------------*/
+
+var Droppables = {
+  drops: false,
+  
+  add: function(element) {
+    var element = $(element);
+    var options = Object.extend({
+      greedy:     true,
+      hoverclass: null  
+    },arguments[1] || {});
+    
+    // cache containers
+    if(options.containment) {
+      options._containers = new Array();
+      var containment = options.containment;
+      if((typeof containment == 'object') && 
+        (containment.constructor == Array)) {
+        for(var i=0; i<containment.length; i++)
+          options._containers.push($(containment[i]));
+      } else {
+        options._containers.push($(containment));
+      }
+      options._containers_length = 
+        options._containers.length-1;
+    }
+    
+    if(element.style.position=='') //fix IE
+      element.style.position = 'relative'; 
+    
+    // activate the droppable
+    element.droppable = options;
+    
+    if(!this.drops) this.drops = [];
+    this.drops.push(element);
+  },
+  
+  is_contained: function(element, drop) {
+    var containers = drop.droppable._containers;
+    var parentNode = element.parentNode;
+    var i = drop.droppable._containers_length;
+    do { if(parentNode==containers[i]) return true; } while (i--);
+    return false;
+  },
+  
+  is_affected: function(pX, pY, element, drop) {
+    return (
+      (drop!=element) &&
+      ((!drop.droppable._containers) ||
+        this.is_contained(element, drop)) &&
+      ((!drop.droppable.accept) ||
+        (Element.Class.has_any(element, drop.droppable.accept))) &&
+      Position.within(drop, pX, pY) );
+  },
+  
+  deactivate: function(drop) {
+    Element.Class.remove(drop, drop.droppable.hoverclass);
+    this.last_active = null;
+  },
+  
+  activate: function(drop) {
+    if(this.last_active) this.deactivate(this.last_active);
+    if(drop.droppable.hoverclass) {
+      Element.Class.add(drop, drop.droppable.hoverclass);
+      this.last_active = drop;
+    }
+  },
+  
+  show: function(event, element) {
+    if(!this.drops) return;
+    var pX = Event.pointerX(event);
+    var pY = Event.pointerY(event);
+    Position.prepare();
+    
+    var i = this.drops.length-1; do {
+      var drop = this.drops[i];
+      if(this.is_affected(pX, pY, element, drop)) {
+        if(drop.droppable.onHover)
+           drop.droppable.onHover(
+            element, drop, Position.overlap(drop.droppable.overlap, drop));
+        if(drop.droppable.greedy) { 
+          this.activate(drop);
+          return;
+        }
+      }
+    } while (i--);
+  },
+  
+  fire: function(event, element) {
+    if(!this.drops) return;
+    var pX = Event.pointerX(event);
+    var pY = Event.pointerY(event);
+    Position.prepare();
+    
+    var i = this.drops.length-1; do {
+      var drop = this.drops[i];
+      if(this.is_affected(pX, pY, element, drop))
+        if(drop.droppable.onDrop)
+           drop.droppable.onDrop(element);
+    } while (i--);
+  },
+  
+  reset: function() {
+    if(this.last_active)
+      this.deactivate(this.last_active);
+  }
+}
+
+Draggables = {
+  observers: new Array(),
+  addObserver: function(observer) {
+    this.observers.push(observer);    
+  },
+  notify: function(eventName, draggable) {  // 'onStart', 'onEnd'
+    for(var i = 0; i < this.observers.length; i++)
+      this.observers[i][eventName](draggable);
+  }
+}
+
+/*--------------------------------------------------------------------------*/
+
+Draggable = Class.create();
+Draggable.prototype = {
+  initialize: function(element) {
+    var options = Object.extend({
+      handle: false,
+      starteffect: function(element) { 
+        new Effect.Opacity(element, {duration:0.2, from:1.0, to:0.7}); 
+      },
+      reverteffect: function(element, top_offset, left_offset) {
+        new Effect.MoveBy(element, -top_offset, -left_offset, {duration:0.4});
+      },
+      endeffect: function(element) { 
+         new Effect.Opacity(element, {duration:0.2, from:0.7, to:1.0}); 
+      },
+      zindex: 1000,
+      revert: false
+    },arguments[1] || {});
+    
+    this.element      = $(element);
+    this.element.drag = this;
+    this.handle       = options.handle ? $(options.handle) : this.element;
+    
+    // fix IE
+    if(!this.element.style.position)
+      this.element.style.position = 'relative';
+    
+    this.offsetX      = 0;
+    this.offsetY      = 0;
+    this.originalLeft = this.currentLeft();
+    this.originalTop  = this.currentTop();
+    this.originalX    = this.element.offsetLeft;
+    this.originalY    = this.element.offsetTop;
+    this.originalZ    = parseInt(this.element.style.zIndex || "0");
+    
+    this.options      = options;
+    
+    this.active       = false;
+    this.dragging     = false;   
+    
+    Event.observe(this.handle, "mousedown", this.startDrag.bindAsEventListener(this));
+    Event.observe(document, "mouseup", this.endDrag.bindAsEventListener(this));
+    Event.observe(document, "mousemove", this.update.bindAsEventListener(this));
+  },
+  currentLeft: function() {
+    return parseInt(this.element.style.left || '0');
+  },
+  currentTop: function() {
+    return parseInt(this.element.style.top || '0')
+  },
+  startDrag: function(event) {
+    if(Event.isLeftClick(event)) {
+      this.active = true;
+      
+      var style = this.element.style;
+      this.originalY = this.element.offsetTop  - this.currentTop()  - this.originalTop;
+      this.originalX = this.element.offsetLeft - this.currentLeft() - this.originalLeft;
+      this.offsetY =  event.clientY - this.originalY - this.originalTop;
+      this.offsetX =  event.clientX - this.originalX - this.originalLeft;
+      
+      Event.stop(event);
+    }
+  },
+  endDrag: function(event) {
+    if(this.active && this.dragging) {
+      this.active = false;
+      this.dragging = false;
+      
+      Droppables.fire(event, this.element);
+      Draggables.notify('onEnd', this);
+      
+      var revert = this.options.revert;
+      if(revert && typeof revert == 'function') revert = revert(this.element);
+      
+      if(revert && this.options.reverteffect) {
+        this.options.reverteffect(this.element, 
+          this.currentTop()-this.originalTop,
+          this.currentLeft()-this.originalLeft);
+      } else {
+        this.originalLeft = this.currentLeft();
+        this.originalTop  = this.currentTop();
+      }
+      this.element.style.zIndex = this.originalZ;
+     
+      if(this.options.endeffect) 
+        this.options.endeffect(this.element);
+      
+      Droppables.reset();
+      Event.stop(event);
+    }
+    this.active = false;
+    this.dragging = false;
+  },
+  draw: function(event) {
+    var style = this.element.style;
+    this.originalX = this.element.offsetLeft - this.currentLeft() - this.originalLeft;
+    this.originalY = this.element.offsetTop  - this.currentTop()  - this.originalTop;
+    if((!this.options.constraint) || (this.options.constraint=='horizontal'))
+      style.left = ((event.clientX - this.originalX) - this.offsetX) + "px";
+    if((!this.options.constraint) || (this.options.constraint=='vertical'))
+      style.top  = ((event.clientY - this.originalY) - this.offsetY) + "px";
+    if(style.visibility=="hidden") style.visibility = ""; // fix gecko rendering
+  },
+  update: function(event) {
+   if(this.active) {
+      if(!this.dragging) {
+        var style = this.element.style;
+        this.dragging = true;
+        if(style.position=="") style.position = "relative";
+        style.zIndex = this.options.zindex;
+        Draggables.notify('onStart', this);
+        if(this.options.starteffect) this.options.starteffect(this.element);
+      }
+      
+      Droppables.show(event, this.element);
+      this.draw(event);
+      if(this.options.change) this.options.change(this);
+      
+      // fix AppleWebKit rendering
+      if(navigator.appVersion.indexOf('AppleWebKit')>0) window.scrollBy(0,0); 
+      
+      Event.stop(event);
+   }
+  }
+}
+
+/*--------------------------------------------------------------------------*/
+
+SortableObserver = Class.create();
+SortableObserver.prototype = {
+  initialize: function(element, observer) {
+    this.element   = $(element);
+    this.observer  = observer;
+    this.lastValue = Sortable.serialize(this.element);
+  },
+  onStart: function() {
+    this.lastValue = Sortable.serialize(this.element);
+  },
+  onEnd: function() {    
+    if(this.lastValue != Sortable.serialize(this.element))
+      this.observer(this.element)
+  }
+}
+
+Sortable = {
+  create: function(element) {
+    var element = $(element);
+    var options = Object.extend({ 
+      tag:         'li',       // assumes li children, override with tag: 'tagname'
+      overlap:     'vertical', // one of 'vertical', 'horizontal'
+      constraint:  'vertical', // one of 'vertical', 'horizontal', false
+      containment: element,    // also takes array of elements (or id's); or false
+      handle:      false,      // or a CSS class
+      only:        false,
+      hoverclass:  null,
+      onChange:    function() {},
+      onUpdate:    function() {}
+    },arguments[1] || {});
+    element.sortable = options;
+    
+    // build options for the draggables
+    var options_for_draggable = {
+      revert:      true,
+      constraint:  options.constraint,
+      handle:      handle };
+    if(options.starteffect)
+      options_for_draggable.starteffect = options.starteffect;
+    if(options.reverteffect)
+      options_for_draggable.reverteffect = options.reverteffect;
+    if(options.endeffect)
+      options_for_draggable.endeffect = options.endeffect;
+    if(options.zindex)
+      options_for_draggable.zindex = options.zindex;
+    
+    // build options for the droppables  
+    var options_for_droppable = {
+      overlap:     options.overlap,
+      containment: options.containment,
+      hoverclass:  options.hoverclass,
+      onHover: function(element, dropon, overlap) { 
+        if(overlap>0.5) {
+          if(dropon.previousSibling != element) {
+            var oldParentNode = element.parentNode;
+            element.style.visibility = "hidden"; // fix gecko rendering
+            dropon.parentNode.insertBefore(element, dropon);
+            if(dropon.parentNode!=oldParentNode && oldParentNode.sortable) 
+              oldParentNode.sortable.onChange(element);
+            if(dropon.parentNode.sortable)
+              dropon.parentNode.sortable.onChange(element);
+          }
+        } else {                
+          var nextElement = dropon.nextSibling || null;
+          if(nextElement != element) {
+            var oldParentNode = element.parentNode;
+            element.style.visibility = "hidden"; // fix gecko rendering
+            dropon.parentNode.insertBefore(element, nextElement);
+            if(dropon.parentNode!=oldParentNode && oldParentNode.sortable) 
+              oldParentNode.sortable.onChange(element);
+            if(dropon.parentNode.sortable)
+              dropon.parentNode.sortable.onChange(element);
+          }
+        }
+      }
+    }
+
+    // fix for gecko engine
+    Element.cleanWhitespace(element); 
+    
+    // for onupdate
+    Draggables.addObserver(new SortableObserver(element, options.onUpdate));
+    
+    // make it so 
+    var elements = element.childNodes;
+    for (var i = 0; i < elements.length; i++) 
+      if(elements[i].tagName && elements[i].tagName==options.tag.toUpperCase() &&
+        (!options.only || (Element.Class.has(elements[i], options.only)))) {
+        
+        // handles are per-draggable
+        var handle = options.handle ? 
+          Element.Class.childrenWith(elements[i], options.handle)[0] : elements[i];
+        
+        new Draggable(elements[i], Object.extend(options_for_draggable,{ handle: handle }));
+        Droppables.add(elements[i], options_for_droppable);
+      }
+      
+  },
+  serialize: function(element) {
+    var element = $(element);
+    var options = Object.extend({
+      tag:  element.sortable.tag,
+      only: element.sortable.only,
+      name: element.id
+    },arguments[1] || {});
+    
+    var items = $(element).childNodes;
+    var queryComponents = new Array();
+ 
+    for(var i=0; i<items.length; i++)
+      if(items[i].tagName && items[i].tagName==options.tag.toUpperCase() &&
+        (!options.only || (Element.Class.has(items[i], options.only))))
+        queryComponents.push(
+          encodeURIComponent(options.name) + "[]=" + 
+          encodeURIComponent(items[i].id.split("_")[1]));
+
+    return queryComponents.join("&");
+  }
+} 
\ No newline at end of file

Added: trunk/third_party/scriptaculous/effects.js
===================================================================
--- trunk/third_party/scriptaculous/effects.js	2005-07-11 00:24:41 UTC (rev 228)
+++ trunk/third_party/scriptaculous/effects.js	2005-07-11 23:00:00 UTC (rev 229)
@@ -0,0 +1,570 @@
+// Copyright (c) 2005 Thomas Fuchs (http://script.aculo.us, http://mir.aculo.us)
+//
+// Parts (c) 2005 Justin Palmer (http://encytemedia.com/)
+// Parts (c) 2005 Mark Pilgrim (http://diveintomark.org/)
+// 
+// Permission is hereby granted, free of charge, to any person obtaining
+// a copy of this software and associated documentation files (the
+// "Software"), to deal in the Software without restriction, including
+// without limitation the rights to use, copy, modify, merge, publish,
+// distribute, sublicense, and/or sell copies of the Software, and to
+// permit persons to whom the Software is furnished to do so, subject to
+// the following conditions:
+// 
+// The above copyright notice and this permission notice shall be
+// included in all copies or substantial portions of the Software.
+// 
+// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
+// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
+// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
+// NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
+// LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
+// OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
+// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
+
+
+Effect = {}
+Effect2 = Effect; // deprecated
+
+/* ------------- transitions ------------- */
+
+Effect.Transitions = {}
+
+Effect.Transitions.linear = function(pos) {
+  return pos;
+}
+Effect.Transitions.sinoidal = function(pos) {
+  return (-Math.cos(pos*Math.PI)/2) + 0.5;
+}
+Effect.Transitions.reverse  = function(pos) {
+  return 1-pos;
+}
+Effect.Transitions.flicker = function(pos) {
+  return ((-Math.cos(pos*Math.PI)/4) + 0.75) + Math.random(0.25);
+}
+Effect.Transitions.wobble = function(pos) {
+  return (-Math.cos(pos*Math.PI*(9*pos))/2) + 0.5;
+}
+Effect.Transitions.pulse = function(pos) {
+   return (Math.floor(pos*10) % 2 == 0 ? 
+    (pos*10-Math.floor(pos*10)) : 1-(pos*10-Math.floor(pos*10)));
+}
+
+Effect.Transitions.none = function(pos) {
+    return 0;
+}
+Effect.Transitions.full = function(pos) {
+    return 1;
+}
+
+/* ------------- core effects ------------- */
+
+Effect.Base = function() {};
+Effect.Base.prototype = {
+  setOptions: function(options) {
+    this.options = Object.extend({
+      transition: Effect.Transitions.sinoidal,
+      duration:   1.0,   // seconds
+      fps:        25.0,  // max. 100fps
+      sync:       false, // true for combining
+      from:       0.0,
+      to:         1.0
+    },options || {});
+  },
+  start: function(options) {
+    this.setOptions(options || {});
+    this.currentFrame    = 0;
+    this.startOn  = new Date().getTime();
+    this.finishOn = this.startOn + (this.options.duration*1000);
+    if(this.options.beforeStart) this.options.beforeStart(this);
+    if(!this.options.sync) this.loop();  
+  },
+  loop: function() {
+    timePos = new Date().getTime();
+    if(timePos >= this.finishOn) {
+      this.render(this.options.to);
+      if(this.finish) this.finish(); 
+      if(this.options.afterFinish) this.options.afterFinish(this);
+      return;  
+    }
+    pos   = (timePos - this.startOn) / (this.finishOn - this.startOn);
+    frame = Math.round(pos * this.options.fps * this.options.duration);
+    if(frame > this.currentFrame) {
+      this.render(pos);
+      this.currentFrame = frame;
+    }
+    this.timeout = setTimeout(this.loop.bind(this), 10);
+  },
+  render: function(pos) {
+    if(this.options.transition) pos = this.options.transition(pos);
+    pos  = pos * (this.options.to-this.options.from);
+    pos += this.options.from; 
+    if(this.options.beforeUpdate) this.options.beforeUpdate(this);
+    if(this.update) this.update(pos);
+    if(this.options.afterUpdate) this.options.afterUpdate(this);  
+  },
+  cancel: function() {
+    if(this.timeout) clearTimeout(this.timeout);
+  }
+}
+
+Effect.Parallel = Class.create();
+  Effect.Parallel.prototype = Object.extend(new Effect.Base(),{
+    initialize: function(effects) {
+      this.effects = effects || [];
+       this.start(arguments[1]);
+    },
+    update: function(position) {
+       for (var i = 0; i < this.effects.length; i++)
+        this.effects[i].render(position);  
+    },
+    finish: function(position) {
+       for (var i = 0; i < this.effects.length; i++)
+          if(this.effects[i].finish) this.effects[i].finish(position);
+    }
+  });
+
+// Internet Explorer caveat: works only on elements the have
+// a 'layout', meaning having a given width or height. 
+// There is no way to safely set this automatically.
+Effect.Opacity = Class.create();
+Effect.Opacity.prototype = Object.extend(new Effect.Base(),{
+  initialize: function(element) {
+    this.element = $(element);
+    options = Object.extend({
+      from: 0.0,
+      to:   1.0
+    },arguments[1] || {});
+    this.start(options);
+  },
+  update: function(position) {
+    this.setOpacity(position);
+  }, 
+  setOpacity: function(opacity) {
+    opacity = (opacity == 1) ? 0.99999 : opacity;
+    this.element.style.opacity = opacity;
+    this.element.style.filter = "alpha(opacity:"+opacity*100+")";
+  }
+});
+
+Effect.MoveBy = Class.create();
+ Effect.MoveBy.prototype = Object.extend(new Effect.Base(),{
+   initialize: function(element, toTop, toLeft) {
+     this.element      = $(element);
+     this.originalTop  = parseFloat(this.element.style.top || '0');
+     this.originalLeft = parseFloat(this.element.style.left || '0');
+     this.toTop        = toTop;
+     this.toLeft       = toLeft;
+     if(this.element.style.position == "")
+       this.element.style.position = "relative";
+     this.start(arguments[3]);
+   },
+   update: function(position) {
+     topd  = this.toTop  * position + this.originalTop;
+     leftd = this.toLeft * position + this.originalLeft;
+     this.setPosition(topd, leftd);
+   },
+   setPosition: function(topd, leftd) {
+     this.element.style.top  = topd  + "px";
+     this.element.style.left = leftd + "px";
+   }
+});
+
+Effect.Scale = Class.create();
+Effect.Scale.prototype = Object.extend(new Effect.Base(),{
+  initialize: function(element, percent) {
+    this.element = $(element)
+    options = Object.extend({
+      scaleX: true,
+      scaleY: true,
+      scaleContent: true,
+      scaleFromCenter: false,
+      scaleMode: 'box',        // 'box' or 'contents' or {} with provided values
+      scaleFrom: 100.0
+    },arguments[2] || {});
+    this.originalTop    = this.element.offsetTop;
+    this.originalLeft   = this.element.offsetLeft;
+    if (this.element.style.fontSize=="") this.sizeEm = 1.0;
+    if (this.element.style.fontSize && this.element.style.fontSize.indexOf("em")>0)
+       this.sizeEm      = parseFloat(this.element.style.fontSize);
+    this.factor = (percent/100.0) - (options.scaleFrom/100.0);
+    if(options.scaleMode=='box') {
+      this.originalHeight = this.element.clientHeight;
+      this.originalWidth  = this.element.clientWidth; 
+    } else 
+    if(options.scaleMode=='contents') {
+      this.originalHeight = this.element.scrollHeight;
+      this.originalWidth  = this.element.scrollWidth;
+    } else {
+      this.originalHeight = options.scaleMode.originalHeight;
+      this.originalWidth  = options.scaleMode.originalWidth;
+    }
+    this.start(options);
+  },
+
+  update: function(position) {
+    currentScale = (this.options.scaleFrom/100.0) + (this.factor * position);
+    if(this.options.scaleContent && this.sizeEm) 
+      this.element.style.fontSize = this.sizeEm*currentScale + "em";
+    this.setDimensions(
+     this.originalWidth * currentScale, 
+     this.originalHeight * currentScale);
+  },
+
+  setDimensions: function(width, height) {
+    if(this.options.scaleX) this.element.style.width = width + 'px';
+    if(this.options.scaleY) this.element.style.height = height + 'px';
+    if(this.options.scaleFromCenter) {
+      topd  = (height - this.originalHeight)/2;
+      leftd = (width  - this.originalWidth)/2;
+      if(this.element.style.position=='absolute') {
+        if(this.options.scaleY) this.element.style.top = this.originalTop-topd + "px";
+        if(this.options.scaleX) this.element.style.left = this.originalLeft-leftd + "px";
+      } else {
+        if(this.options.scaleY) this.element.style.top = -topd + "px";
+        if(this.options.scaleX) this.element.style.left = -leftd + "px";
+      }
+    }
+  }
+});
+
+Effect.Highlight = Class.create();
+Effect.Highlight.prototype = Object.extend(new Effect.Base(),{
+  initialize: function(element) {
+    this.element = $(element);
+    
+    // try to parse current background color as default for endcolor
+    // browser stores this as: "rgb(255, 255, 255)", convert to "#ffffff" format
+    var endcolor = "#ffffff";
+    var current = this.element.style.backgroundColor;
+    if(current && current.slice(0,4) == "rgb(") {
+      endcolor = "#";
+      var cols = current.slice(4,current.length-1).split(',');
+      var i=0; do { endcolor += parseInt(cols[i]).toColorPart() } while (++i<3); }
+      
+    var options = Object.extend({
+      startcolor: "#ffff99",
+      endcolor:   endcolor
+    },arguments[1] || {});
+    
+    // init color calculations
+    this.colors_base = [
+      parseInt(options.startcolor.slice(1,3),16),
+      parseInt(options.startcolor.slice(3,5),16),
+      parseInt(options.startcolor.slice(5),16) ];
+    this.colors_delta = [
+      parseInt(options.endcolor.slice(1,3),16)-this.colors_base[0],
+      parseInt(options.endcolor.slice(3,5),16)-this.colors_base[1],
+      parseInt(options.endcolor.slice(5),16)-this.colors_base[2] ];
+
+    this.start(options);
+  },
+  update: function(position) {
+    var colors = [
+      Math.round(this.colors_base[0]+(this.colors_delta[0]*position)),
+      Math.round(this.colors_base[1]+(this.colors_delta[1]*position)),
+      Math.round(this.colors_base[2]+(this.colors_delta[2]*position)) ];
+    this.element.style.backgroundColor = "#" +
+      colors[0].toColorPart() + colors[1].toColorPart() + colors[2].toColorPart();
+  }
+});
+
+
+/* ------------- prepackaged effects ------------- */
+
+Effect.Fade =  function(element) {
+  options = Object.extend({
+  from: 1.0,
+  to:   0.0,
+  afterFinish: function(effect) 
+    { Element.hide(effect.element);
+      effect.setOpacity(1); } 
+  },arguments[1] || {});
+  new Effect.Opacity(element,options);
+}
+
+Effect.Appear =  function(element) {
+  options = Object.extend({
+  from: 0.0,
+  to:   1.0,
+  beforeStart: function(effect)  
+    { effect.setOpacity(0);
+      Element.show(effect.element); },
+  afterUpdate: function(effect)  
+    { Element.show(effect.element); }
+  },arguments[1] || {});
+  new Effect.Opacity(element,options);
+}
+
+Effect.Puff = function(element) {
+  new Effect.Parallel(
+   [ new Effect.Scale(element, 200, { sync: true, scaleFromCenter: true }), 
+     new Effect.Opacity(element, { sync: true, to: 0.0, from: 1.0 } ) ], 
+     { duration: 1.0, 
+      afterUpdate: function(effect) 
+       { effect.effects[0].element.style.position = 'absolute'; },
+      afterFinish: function(effect)
+       { Element.hide(effect.effects[0].element); }
+     }
+   );
+}
+
+Effect.BlindUp = function(element) {
+  $(element)._overflow = $(element).style.overflow || 'visible';
+  $(element).style.overflow = 'hidden';
+  new Effect.Scale(element, 0, 
+    Object.extend({ scaleContent: false, 
+      scaleX: false, 
+      afterFinish: function(effect) 
+        { 
+          Element.hide(effect.element);
+          effect.element.style.overflow = effect.element._overflow;
+        } 
+    },arguments[1] || {})
+  );
+}
+
+Effect.BlindDown = function(element) {
+  $(element).style.height   = '0px';
+  $(element)._overflow = $(element).style.overflow || 'visible';
+  $(element).style.overflow = 'hidden';
+  Element.show(element);
+  new Effect.Scale(element, 100, 
+    Object.extend({ scaleContent: false, 
+      scaleX: false, 
+      scaleMode: 'contents',
+      scaleFrom: 0,
+      afterFinish: function(effect) {
+        effect.element.style.overflow = effect.element._overflow;
+      }
+    },arguments[1] || {})
+  );
+}
+
+Effect.SwitchOff = function(element) {
+  new Effect.Appear(element,
+    { duration: 0.4,
+     transition: Effect.Transitions.flicker,
+     afterFinish: function(effect)
+      {  effect.element.style.overflow = 'hidden';
+        new Effect.Scale(effect.element, 1, 
+         { duration: 0.3, scaleFromCenter: true,
+          scaleX: false, scaleContent: false,
+          afterUpdate: function(effect) { 
+           if(effect.element.style.position=="")
+             effect.element.style.position = 'relative'; },
+          afterFinish: function(effect) { Element.hide(effect.element); }
+         } )
+      }
+    } )
+}
+
+Effect.DropOut = function(element) {
+  new Effect.Parallel(
+    [ new Effect.MoveBy(element, 100, 0, { sync: true }), 
+      new Effect.Opacity(element, { sync: true, to: 0.0, from: 1.0 } ) ], 
+    { duration: 0.5, 
+     afterFinish: function(effect)
+       { Element.hide(effect.effects[0].element); } 
+    });
+}
+
+Effect.Shake = function(element) {
+  new Effect.MoveBy(element, 0, 20, 
+    { duration: 0.05, afterFinish: function(effect) {
+  new Effect.MoveBy(effect.element, 0, -40, 
+    { duration: 0.1, afterFinish: function(effect) { 
+  new Effect.MoveBy(effect.element, 0, 40, 
+    { duration: 0.1, afterFinish: function(effect) {  
+  new Effect.MoveBy(effect.element, 0, -40, 
+    { duration: 0.1, afterFinish: function(effect) {  
+  new Effect.MoveBy(effect.element, 0, 40, 
+    { duration: 0.1, afterFinish: function(effect) {  
+  new Effect.MoveBy(effect.element, 0, -20, 
+    { duration: 0.05, afterFinish: function(effect) {  
+  }}) }}) }}) }}) }}) }});
+}
+
+Effect.SlideDown = function(element) {
+  $(element)._overflow = $(element).style.overflow || 'visible';
+  $(element).style.height   = '0px';
+  $(element).style.overflow = 'hidden';
+  $(element).firstChild.style.position = 'relative';
+  Element.show(element);
+  new Effect.Scale(element, 100, 
+   Object.extend({ scaleContent: false, 
+    scaleX: false, 
+    scaleMode: 'contents',
+    scaleFrom: 0,
+    afterUpdate: function(effect) 
+      { effect.element.firstChild.style.bottom = 
+          (effect.originalHeight - effect.element.clientHeight) + 'px'; },
+    afterFinish: function(effect) 
+      {  effect.element.style.overflow = effect.element._overflow; }
+    },arguments[1] || {})
+  );
+}
+  
+Effect.SlideUp = function(element) {
+  $(element)._overflow = $(element).style.overflow || 'visible';
+  $(element).style.overflow = 'hidden';
+  $(element).firstChild.style.position = 'relative';
+  Element.show(element);
+  new Effect.Scale(element, 0, 
+   Object.extend({ scaleContent: false, 
+    scaleX: false, 
+    afterUpdate: function(effect) 
+      { effect.element.firstChild.style.bottom = 
+          (effect.originalHeight - effect.element.clientHeight) + 'px'; },
+    afterFinish: function(effect)
+      { 
+        Element.hide(effect.element);
+        effect.element.style.overflow = effect.element._overflow; 
+      }
+   },arguments[1] || {})
+  );
+}
+
+Effect.Squish = function(element) {
+ new Effect.Scale(element, 0, 
+   { afterFinish: function(effect) { Element.hide(effect.element); } });
+}
+
+Effect.Grow = function(element) {
+  element = $(element);
+  var options = arguments[1] || {};
+  
+  var originalWidth = element.clientWidth;
+  var originalHeight = element.clientHeight;
+  element.style.overflow = 'hidden';
+  Element.show(element);
+  
+  var direction = options.direction || 'center';
+  var moveTransition = options.moveTransition || Effect.Transitions.sinoidal;
+  var scaleTransition = options.scaleTransition || Effect.Transitions.sinoidal;
+  var opacityTransition = options.opacityTransition || Effect.Transitions.full;
+  
+  var initialMoveX, initialMoveY;
+  var moveX, moveY;
+  
+  switch (direction) {
+    case 'top-left':
+      initialMoveX = initialMoveY = moveX = moveY = 0; 
+      break;
+    case 'top-right':
+      initialMoveX = originalWidth;
+      initialMoveY = moveY = 0;
+      moveX = -originalWidth;
+      break;
+    case 'bottom-left':
+      initialMoveX = moveX = 0;
+      initialMoveY = originalHeight;
+      moveY = -originalHeight;
+      break;
+    case 'bottom-right':
+      initialMoveX = originalWidth;
+      initialMoveY = originalHeight;
+      moveX = -originalWidth;
+      moveY = -originalHeight;
+      break;
+    case 'center':
+      initialMoveX = originalWidth / 2;
+      initialMoveY = originalHeight / 2;
+      moveX = -originalWidth / 2;
+      moveY = -originalHeight / 2;
+      break;
+  }
+  
+  new Effect.MoveBy(element, initialMoveY, initialMoveX, { 
+    duration: 0.01, 
+    beforeUpdate: function(effect) { $(element).style.height = '0px'; },
+    afterFinish: function(effect) {
+      new Effect.Parallel(
+        [ new Effect.Opacity(element, { sync: true, to: 1.0, from: 0.0, transition: opacityTransition }),
+          new Effect.MoveBy(element, moveY, moveX, { sync: true, transition: moveTransition }),
+          new Effect.Scale(element, 100, { 
+            scaleMode: { originalHeight: originalHeight, originalWidth: originalWidth }, 
+            sync: true, scaleFrom: 0, scaleTo: 100, transition: scaleTransition })],
+        options); }
+    });
+}
+
+Effect.Shrink = function(element) {
+  element = $(element);
+  var options = arguments[1] || {};
+  
+  var originalWidth = element.clientWidth;
+  var originalHeight = element.clientHeight;
+  element.style.overflow = 'hidden';
+  Element.show(element);
+
+  var direction = options.direction || 'center';
+  var moveTransition = options.moveTransition || Effect.Transitions.sinoidal;
+  var scaleTransition = options.scaleTransition || Effect.Transitions.sinoidal;
+  var opacityTransition = options.opacityTransition || Effect.Transitions.none;
+  
+  var moveX, moveY;
+  
+  switch (direction) {
+    case 'top-left':
+      moveX = moveY = 0;
+      break;
+    case 'top-right':
+      moveX = originalWidth;
+      moveY = 0;
+      break;
+    case 'bottom-left':
+      moveX = 0;
+      moveY = originalHeight;
+      break;
+    case 'bottom-right':
+      moveX = originalWidth;
+      moveY = originalHeight;
+      break;
+    case 'center':  
+      moveX = originalWidth / 2;
+      moveY = originalHeight / 2;
+      break;
+  }
+  
+  new Effect.Parallel(
+    [ new Effect.Opacity(element, { sync: true, to: 0.0, from: 1.0, transition: opacityTransition }),
+      new Effect.Scale(element, 0, { sync: true, transition: moveTransition }),
+      new Effect.MoveBy(element, moveY, moveX, { sync: true, transition: scaleTransition }) ],
+    options);
+}
+
+Effect.Pulsate = function(element) {
+  var options    = arguments[1] || {};
+  var transition = options.transition || Effect.Transitions.sinoidal;
+  var reverser   = function(pos){ return transition(1-Effect.Transitions.pulse(pos)) };
+  reverser.bind(transition);
+  new Effect.Opacity(element, 
+    Object.extend(Object.extend({  duration: 3.0,
+       afterFinish: function(effect) { Element.show(effect.element); }
+    },options),{transition: reverser}));
+}
+
+Effect.Fold = function(element) {
+ $(element).style.overflow = 'hidden';
+ new Effect.Scale(element, 5, Object.extend({   
+   scaleContent: false,
+   scaleTo: 100,
+   scaleX: false,
+   afterFinish: function(effect) {
+   new Effect.Scale(element, 1, { 
+     scaleContent: false, 
+     scaleTo: 0,
+     scaleY: false,
+     afterFinish: function(effect) { Element.hide(effect.element) } });
+ }},arguments[1] || {}));
+}
+
+// old: new Effect.ContentZoom(element, percent)
+// new: Element.setContentZoom(element, percent) 
+
+Element.setContentZoom = function(element, percent) {
+  var element = $(element);
+  element.style.fontSize = (percent/100) + "em";  
+  if(navigator.appVersion.indexOf('AppleWebKit')>0) window.scrollBy(0,0);
+}

Added: trunk/third_party/scriptaculous/prototype.js
===================================================================
--- trunk/third_party/scriptaculous/prototype.js	2005-07-11 00:24:41 UTC (rev 228)
+++ trunk/third_party/scriptaculous/prototype.js	2005-07-11 23:00:00 UTC (rev 229)
@@ -0,0 +1,1028 @@
+/*  Prototype JavaScript framework, version 1.3.0
+ *  (c) 2005 Sam Stephenson <sam at conio.net>
+ *
+ *  THIS FILE IS AUTOMATICALLY GENERATED. When sending patches, please diff
+ *  against the source tree, available from the Prototype darcs repository. 
+ *
+ *  Prototype is freely distributable under the terms of an MIT-style license.
+ *
+ *  For details, see the Prototype web site: http://prototype.conio.net/
+ *
+/*--------------------------------------------------------------------------*/
+
+var Prototype = {
+  Version: '1.3.0',
+  emptyFunction: function() {}
+}
+
+var Class = {
+  create: function() {
+    return function() { 
+      this.initialize.apply(this, arguments);
+    }
+  }
+}
+
+var Abstract = new Object();
+
+Object.extend = function(destination, source) {
+  for (property in source) {
+    destination[property] = source[property];
+  }
+  return destination;
+  // test;
+}
+
+/*Object.prototype.extend = function(object) {
+  return Object.extend.apply(this, [this, object]);
+}*/
+
+Function.prototype.bind = function(object) {
+  var __method = this;
+  return function() {
+    __method.apply(object, arguments);
+  }
+}
+
+Function.prototype.bindAsEventListener = function(object) {
+  var __method = this;
+  return function(event) {
+    __method.call(object, event || window.event);
+  }
+}
+
+Number.prototype.toColorPart = function() {
+  var digits = this.toString(16);
+  if (this < 16) return '0' + digits;
+  return digits;
+}
+
+var Try = {
+  these: function() {
+    var returnValue;
+
+    for (var i = 0; i < arguments.length; i++) {
+      var lambda = arguments[i];
+      try {
+        returnValue = lambda();
+        break;
+      } catch (e) {}
+    }
+
+    return returnValue;
+  }
+}
+
+/*--------------------------------------------------------------------------*/
+
+var PeriodicalExecuter = Class.create();
+PeriodicalExecuter.prototype = {
+  initialize: function(callback, frequency) {
+    this.callback = callback;
+    this.frequency = frequency;
+    this.currentlyExecuting = false;
+
+    this.registerCallback();
+  },
+
+  registerCallback: function() {
+    setInterval(this.onTimerEvent.bind(this), this.frequency * 1000);
+  },
+
+  onTimerEvent: function() {
+    if (!this.currentlyExecuting) {
+      try { 
+        this.currentlyExecuting = true;
+        this.callback(); 
+      } finally { 
+        this.currentlyExecuting = false;
+      }
+    }
+  }
+}
+
+/*--------------------------------------------------------------------------*/
+
+function $() {
+  var elements = new Array();
+
+  for (var i = 0; i < arguments.length; i++) {
+    var element = arguments[i];
+    if (typeof element == 'string')
+      element = document.getElementById(element);
+
+    if (arguments.length == 1) 
+      return element;
+
+    elements.push(element);
+  }
+
+  return elements;
+}
+
+if (!Array.prototype.push) {
+  Array.prototype.push = function() {
+		var startLength = this.length;
+		for (var i = 0; i < arguments.length; i++)
+      this[startLength + i] = arguments[i];
+	  return this.length;
+  }
+}
+
+if (!Function.prototype.apply) {
+  // Based on code from http://www.youngpup.net/
+  Function.prototype.apply = function(object, parameters) {
+    var parameterStrings = new Array();
+    if (!object)     object = window;
+    if (!parameters) parameters = new Array();
+    
+    for (var i = 0; i < parameters.length; i++)
+      parameterStrings[i] = 'parameters[' + i + ']';
+    
+    object.__apply__ = this;
+    var result = eval('object.__apply__(' + 
+      parameterStrings[i].join(', ') + ')');
+    object.__apply__ = null;
+    
+    return result;
+  }
+}
+
+Object.extend(String.prototype,{
+  stripTags: function() {
+    return this.replace(/<\/?[^>]+>/gi, '');
+  },
+
+  escapeHTML: function() {
+    var div = document.createElement('div');
+    var text = document.createTextNode(this);
+    div.appendChild(text);
+    return div.innerHTML;
+  },
+
+  unescapeHTML: function() {
+    var div = document.createElement('div');
+    div.innerHTML = this.stripTags();
+    return div.childNodes[0].nodeValue;
+  }
+});
+
+var Ajax = {
+  getTransport: function() {
+    return Try.these(
+      function() {return new ActiveXObject('Msxml2.XMLHTTP')},
+      function() {return new ActiveXObject('Microsoft.XMLHTTP')},
+      function() {return new XMLHttpRequest()}
+    ) || false;
+  }
+}
+
+Ajax.Base = function() {};
+Ajax.Base.prototype = {
+  setOptions: function(options) {
+    this.options = Object.extend({
+      method:       'post',
+      asynchronous: true,
+      parameters:   ''
+    },(options || {}));
+  },
+
+  responseIsSuccess: function() {
+    return this.transport.status == undefined
+        || this.transport.status == 0 
+        || (this.transport.status >= 200 && this.transport.status < 300);
+  },
+
+  responseIsFailure: function() {
+    return !this.responseIsSuccess();
+  }
+}
+
+Ajax.Request = Class.create();
+Ajax.Request.Events = 
+  ['Uninitialized', 'Loading', 'Loaded', 'Interactive', 'Complete'];
+
+Ajax.Request.prototype = Object.extend(new Ajax.Base(),{
+  initialize: function(url, options) {
+    this.transport = Ajax.getTransport();
+    this.setOptions(options);
+    this.request(url);
+  },
+
+  request: function(url) {
+    var parameters = this.options.parameters || '';
+    if (parameters.length > 0) parameters += '&_=';
+
+    try {
+      if (this.options.method == 'get')
+        url += '?' + parameters;
+
+      this.transport.open(this.options.method, url,
+        this.options.asynchronous);
+
+      if (this.options.asynchronous) {
+        this.transport.onreadystatechange = this.onStateChange.bind(this);
+        setTimeout((function() {this.respondToReadyState(1)}).bind(this), 10);
+      }
+
+      this.setRequestHeaders();
+
+      var body = this.options.postBody ? this.options.postBody : parameters;
+      this.transport.send(this.options.method == 'post' ? body : null);
+
+    } catch (e) {
+    }
+  },
+
+  setRequestHeaders: function() {
+    var requestHeaders = 
+      ['X-Requested-With', 'XMLHttpRequest',
+       'X-Prototype-Version', Prototype.Version];
+
+    if (this.options.method == 'post') {
+      requestHeaders.push('Content-type', 
+        'application/x-www-form-urlencoded');
+
+      /* Force "Connection: close" for Mozilla browsers to work around
+       * a bug where XMLHttpReqeuest sends an incorrect Content-length
+       * header. See Mozilla Bugzilla #246651. 
+       */
+      if (this.transport.overrideMimeType)
+        requestHeaders.push('Connection', 'close');
+    }
+
+    if (this.options.requestHeaders)
+      requestHeaders.push.apply(requestHeaders, this.options.requestHeaders);
+
+    for (var i = 0; i < requestHeaders.length; i += 2)
+      this.transport.setRequestHeader(requestHeaders[i], requestHeaders[i+1]);
+  },
+
+  onStateChange: function() {
+    var readyState = this.transport.readyState;
+    if (readyState != 1)
+      this.respondToReadyState(this.transport.readyState);
+  },
+
+  respondToReadyState: function(readyState) {
+    var event = Ajax.Request.Events[readyState];
+
+    if (event == 'Complete' && this.responseIsFailure())
+      (this.options['on' + this.transport.status]
+       || this.options.onFailure
+       || Prototype.emptyFunction)(this.transport);
+
+    (this.options['on' + event] || Prototype.emptyFunction)(this.transport);    
+  }
+});
+
+Ajax.Updater = Class.create();
+Ajax.Updater.ScriptFragment = '(?:<script.*?>)((\n|.)*?)(?:<\/script>)';
+
+Object.extend(Object.extend(Ajax.Updater.prototype,Ajax.Request.prototype),{
+  initialize: function(container, url, options) {
+    this.containers = {
+      success: container.success ? $(container.success) : $(container),
+      failure: container.failure ? $(container.failure) :
+        (container.success ? null : $(container))
+    }
+
+    this.transport = Ajax.getTransport();
+    this.setOptions(options);
+
+    var onComplete = this.options.onComplete || Prototype.emptyFunction;
+    this.options.onComplete = (function() {
+      this.updateContent();
+      onComplete(this.transport);
+    }).bind(this);
+
+    this.request(url);
+  },
+
+  updateContent: function() {
+    var receiver = this.responseIsSuccess() ?
+      this.containers.success : this.containers.failure;
+
+    var match    = new RegExp(Ajax.Updater.ScriptFragment, 'img');
+    var response = this.transport.responseText.replace(match, '');
+    var scripts  = this.transport.responseText.match(match);
+
+    if (receiver) {
+      if (this.options.insertion) {
+        new this.options.insertion(receiver, response);
+      } else {
+        receiver.innerHTML = response;
+      }
+    }
+
+    if (this.responseIsSuccess()) {
+      if (this.onComplete)
+        setTimeout((function() {this.onComplete(
+          this.transport)}).bind(this), 10);
+    }
+
+    if (this.options.evalScripts && scripts) {
+      match = new RegExp(Ajax.Updater.ScriptFragment, 'im');
+      setTimeout((function() {
+        for (var i = 0; i < scripts.length; i++)
+          eval(scripts[i].match(match)[1]);
+      }).bind(this), 10);
+    }
+  }
+});
+
+Ajax.PeriodicalUpdater = Class.create();
+Ajax.PeriodicalUpdater.prototype = Object.extend(new Ajax.Base(),{
+  initialize: function(container, url, options) {
+    this.setOptions(options);
+    this.onComplete = this.options.onComplete;
+
+    this.frequency = (this.options.frequency || 2);
+    this.decay = 1;
+
+    this.updater = {};
+    this.container = container;
+    this.url = url;
+
+    this.start();
+  },
+
+  start: function() {
+    this.options.onComplete = this.updateComplete.bind(this);
+    this.onTimerEvent();
+  },
+
+  stop: function() {
+    this.updater.onComplete = undefined;
+    clearTimeout(this.timer);
+    (this.onComplete || Ajax.emptyFunction).apply(this, arguments);
+  },
+
+  updateComplete: function(request) {
+    if (this.options.decay) {
+      this.decay = (request.responseText == this.lastText ? 
+        this.decay * this.options.decay : 1);
+
+      this.lastText = request.responseText;
+    }
+    this.timer = setTimeout(this.onTimerEvent.bind(this), 
+      this.decay * this.frequency * 1000);
+  },
+
+  onTimerEvent: function() {
+    this.updater = new Ajax.Updater(this.container, this.url, this.options);
+  }
+});
+
+document.getElementsByClassName = function(className) {
+  var children = document.getElementsByTagName('*') || document.all;
+  var elements = new Array();
+  
+  for (var i = 0; i < children.length; i++) {
+    var child = children[i];
+    var classNames = child.className.split(' ');
+    for (var j = 0; j < classNames.length; j++) {
+      if (classNames[j] == className) {
+        elements.push(child);
+        break;
+      }
+    }
+  }
+  
+  return elements;
+}
+
+/*--------------------------------------------------------------------------*/
+
+if (!window.Element) {
+  var Element = new Object();
+}
+
+Object.extend(Element, {
+  toggle: function() {
+    for (var i = 0; i < arguments.length; i++) {
+      var element = $(arguments[i]);
+      element.style.display = 
+        (element.style.display == 'none' ? '' : 'none');
+    }
+  },
+
+  hide: function() {
+    for (var i = 0; i < arguments.length; i++) {
+      var element = $(arguments[i]);
+      element.style.display = 'none';
+    }
+  },
+
+  show: function() {
+    for (var i = 0; i < arguments.length; i++) {
+      var element = $(arguments[i]);
+      element.style.display = '';
+    }
+  },
+
+  remove: function(element) {
+    element = $(element);
+    element.parentNode.removeChild(element);
+  },
+   
+  getHeight: function(element) {
+    element = $(element);
+    return element.offsetHeight; 
+  },
+
+  hasClassName: function(element, className) {
+    element = $(element);
+    if (!element)
+      return;
+    var a = element.className.split(' ');
+    for (var i = 0; i < a.length; i++) {
+      if (a[i] == className)
+        return true;
+    }
+    return false;
+  },
+
+  addClassName: function(element, className) {
+    element = $(element);
+    Element.removeClassName(element, className);
+    element.className += ' ' + className;
+  },
+
+  removeClassName: function(element, className) {
+    element = $(element);
+    if (!element)
+      return;
+    var newClassName = '';
+    var a = element.className.split(' ');
+    for (var i = 0; i < a.length; i++) {
+      if (a[i] != className) {
+        if (i > 0)
+          newClassName += ' ';
+        newClassName += a[i];
+      }
+    }
+    element.className = newClassName;
+  },
+  
+  // removes whitespace-only text node children
+  cleanWhitespace: function(element) {
+    var element = $(element);
+    for (var i = 0; i < element.childNodes.length; i++) {
+      var node = element.childNodes[i];
+      if (node.nodeType == 3 && !/\S/.test(node.nodeValue)) 
+        Element.remove(node);
+    }
+  }
+});
+
+var Toggle = new Object();
+Toggle.display = Element.toggle;
+
+/*--------------------------------------------------------------------------*/
+
+Abstract.Insertion = function(adjacency) {
+  this.adjacency = adjacency;
+}
+
+Abstract.Insertion.prototype = {
+  initialize: function(element, content) {
+    this.element = $(element);
+    this.content = content;
+    
+    if (this.adjacency && this.element.insertAdjacentHTML) {
+      this.element.insertAdjacentHTML(this.adjacency, this.content);
+    } else {
+      this.range = this.element.ownerDocument.createRange();
+      if (this.initializeRange) this.initializeRange();
+      this.fragment = this.range.createContextualFragment(this.content);
+      this.insertContent();
+    }
+  }
+}
+
+var Insertion = new Object();
+
+Insertion.Before = Class.create();
+Insertion.Before.prototype = Object.extend(new Abstract.Insertion('beforeBegin'),{
+  initializeRange: function() {
+    this.range.setStartBefore(this.element);
+  },
+  
+  insertContent: function() {
+    this.element.parentNode.insertBefore(this.fragment, this.element);
+  }
+});
+
+Insertion.Top = Class.create();
+Insertion.Top.prototype = Object.extend(new Abstract.Insertion('afterBegin'),{
+  initializeRange: function() {
+    this.range.selectNodeContents(this.element);
+    this.range.collapse(true);
+  },
+  
+  insertContent: function() {  
+    this.element.insertBefore(this.fragment, this.element.firstChild);
+  }
+});
+
+Insertion.Bottom = Class.create();
+Insertion.Bottom.prototype = Object.extend(new Abstract.Insertion('beforeEnd'),{
+  initializeRange: function() {
+    this.range.selectNodeContents(this.element);
+    this.range.collapse(this.element);
+  },
+  
+  insertContent: function() {
+    this.element.appendChild(this.fragment);
+  }
+});
+
+Insertion.After = Class.create();
+Insertion.After.prototype = Object.extend(new Abstract.Insertion('afterEnd'),{
+  initializeRange: function() {
+    this.range.setStartAfter(this.element);
+  },
+  
+  insertContent: function() {
+    this.element.parentNode.insertBefore(this.fragment, 
+      this.element.nextSibling);
+  }
+});
+
+var Field = {
+  clear: function() {
+    for (var i = 0; i < arguments.length; i++)
+      $(arguments[i]).value = '';
+  },
+
+  focus: function(element) {
+    $(element).focus();
+  },
+  
+  present: function() {
+    for (var i = 0; i < arguments.length; i++)
+      if ($(arguments[i]).value == '') return false;
+    return true;
+  },
+  
+  select: function(element) {
+    $(element).select();
+  },
+   
+  activate: function(element) {
+    $(element).focus();
+    $(element).select();
+  }
+}
+
+/*--------------------------------------------------------------------------*/
+
+var Form = {
+  serialize: function(form) {
+    var elements = Form.getElements($(form));
+    var queryComponents = new Array();
+    
+    for (var i = 0; i < elements.length; i++) {
+      var queryComponent = Form.Element.serialize(elements[i]);
+      if (queryComponent)
+        queryComponents.push(queryComponent);
+    }
+    
+    return queryComponents.join('&');
+  },
+  
+  getElements: function(form) {
+    var form = $(form);
+    var elements = new Array();
+
+    for (tagName in Form.Element.Serializers) {
+      var tagElements = form.getElementsByTagName(tagName);
+      for (var j = 0; j < tagElements.length; j++)
+        elements.push(tagElements[j]);
+    }
+    return elements;
+  },
+  
+  getInputs: function(form, typeName, name) {
+    var form = $(form);
+    var inputs = form.getElementsByTagName('input');
+    
+    if (!typeName && !name)
+      return inputs;
+      
+    var matchingInputs = new Array();
+    for (var i = 0; i < inputs.length; i++) {
+      var input = inputs[i];
+      if ((typeName && input.type != typeName) ||
+          (name && input.name != name)) 
+        continue;
+      matchingInputs.push(input);
+    }
+
+    return matchingInputs;
+  },
+
+  disable: function(form) {
+    var elements = Form.getElements(form);
+    for (var i = 0; i < elements.length; i++) {
+      var element = elements[i];
+      element.blur();
+      element.disabled = 'true';
+    }
+  },
+
+  enable: function(form) {
+    var elements = Form.getElements(form);
+    for (var i = 0; i < elements.length; i++) {
+      var element = elements[i];
+      element.disabled = '';
+    }
+  },
+
+  focusFirstElement: function(form) {
+    var form = $(form);
+    var elements = Form.getElements(form);
+    for (var i = 0; i < elements.length; i++) {
+      var element = elements[i];
+      if (element.type != 'hidden' && !element.disabled) {
+        Field.activate(element);
+        break;
+      }
+    }
+  },
+
+  reset: function(form) {
+    $(form).reset();
+  }
+}
+
+Form.Element = {
+  serialize: function(element) {
+    var element = $(element);
+    var method = element.tagName.toLowerCase();
+    var parameter = Form.Element.Serializers[method](element);
+    
+    if (parameter)
+      return encodeURIComponent(parameter[0]) + '=' + 
+        encodeURIComponent(parameter[1]);                   
+  },
+  
+  getValue: function(element) {
+    var element = $(element);
+    var method = element.tagName.toLowerCase();
+    var parameter = Form.Element.Serializers[method](element);
+    
+    if (parameter) 
+      return parameter[1];
+  }
+}
+
+Form.Element.Serializers = {
+  input: function(element) {
+    switch (element.type.toLowerCase()) {
+      case 'submit':
+      case 'hidden':
+      case 'password':
+      case 'text':
+        return Form.Element.Serializers.textarea(element);
+      case 'checkbox':  
+      case 'radio':
+        return Form.Element.Serializers.inputSelector(element);
+    }
+    return false;
+  },
+
+  inputSelector: function(element) {
+    if (element.checked)
+      return [element.name, element.value];
+  },
+
+  textarea: function(element) {
+    return [element.name, element.value];
+  },
+
+  select: function(element) {
+    var value = '';
+    if (element.type == 'select-one') {
+      var index = element.selectedIndex;
+      if (index >= 0)
+        value = element.options[index].value || element.options[index].text;
+    } else {
+      value = new Array();
+      for (var i = 0; i < element.length; i++) {
+        var opt = element.options[i];
+        if (opt.selected)
+          value.push(opt.value || opt.text);
+      }
+    }
+    return [element.name, value];
+  }
+}
+
+/*--------------------------------------------------------------------------*/
+
+var $F = Form.Element.getValue;
+
+/*--------------------------------------------------------------------------*/
+
+Abstract.TimedObserver = function() {}
+Abstract.TimedObserver.prototype = {
+  initialize: function(element, frequency, callback) {
+    this.frequency = frequency;
+    this.element   = $(element);
+    this.callback  = callback;
+    
+    this.lastValue = this.getValue();
+    this.registerCallback();
+  },
+  
+  registerCallback: function() {
+    setInterval(this.onTimerEvent.bind(this), this.frequency * 1000);
+  },
+  
+  onTimerEvent: function() {
+    var value = this.getValue();
+    if (this.lastValue != value) {
+      this.callback(this.element, value);
+      this.lastValue = value;
+    }
+  }
+}
+
+Form.Element.Observer = Class.create();
+Form.Element.Observer.prototype = Object.extend(new Abstract.TimedObserver(),{
+  getValue: function() {
+    return Form.Element.getValue(this.element);
+  }
+});
+
+Form.Observer = Class.create();
+Form.Observer.prototype = Object.extend(new Abstract.TimedObserver(),{
+  getValue: function() {
+    return Form.serialize(this.element);
+  }
+});
+
+/*--------------------------------------------------------------------------*/
+
+Abstract.EventObserver = function() {}
+Abstract.EventObserver.prototype = {
+  initialize: function(element, callback) {
+    this.element  = $(element);
+    this.callback = callback;
+    
+    this.lastValue = this.getValue();
+    if (this.element.tagName.toLowerCase() == 'form')
+      this.registerFormCallbacks();
+    else
+      this.registerCallback(this.element);
+  },
+  
+  onElementEvent: function() {
+    var value = this.getValue();
+    if (this.lastValue != value) {
+      this.callback(this.element, value);
+      this.lastValue = value;
+    }
+  },
+  
+  registerFormCallbacks: function() {
+    var elements = Form.getElements(this.element);
+    for (var i = 0; i < elements.length; i++)
+      this.registerCallback(elements[i]);
+  },
+  
+  registerCallback: function(element) {
+    if (element.type) {
+      switch (element.type.toLowerCase()) {
+        case 'checkbox':  
+        case 'radio':
+          element.target = this;
+          element.prev_onclick = element.onclick || Prototype.emptyFunction;
+          element.onclick = function() {
+            this.prev_onclick(); 
+            this.target.onElementEvent();
+          }
+          break;
+        case 'password':
+        case 'text':
+        case 'textarea':
+        case 'select-one':
+        case 'select-multiple':
+          element.target = this;
+          element.prev_onchange = element.onchange || Prototype.emptyFunction;
+          element.onchange = function() {
+            this.prev_onchange(); 
+            this.target.onElementEvent();
+          }
+          break;
+      }
+    }    
+  }
+}
+
+Form.Element.EventObserver = Class.create();
+Form.Element.EventObserver.prototype = Object.extend(new Abstract.EventObserver(),{
+  getValue: function() {
+    return Form.Element.getValue(this.element);
+  }
+});
+
+Form.EventObserver = Class.create();
+Form.EventObserver.prototype = Object.extend(new Abstract.EventObserver(),{
+  getValue: function() {
+    return Form.serialize(this.element);
+  }
+});
+
+
+if (!window.Event) {
+  var Event = new Object();
+}
+
+Object.extend(Event, {
+  KEY_BACKSPACE: 8,
+  KEY_TAB:       9,
+  KEY_RETURN:   13,
+  KEY_ESC:      27,
+  KEY_LEFT:     37,
+  KEY_UP:       38,
+  KEY_RIGHT:    39,
+  KEY_DOWN:     40,
+  KEY_DELETE:   46,
+
+  element: function(event) {
+    return event.target || event.srcElement;
+  },
+
+  isLeftClick: function(event) {
+    return (((event.which) && (event.which == 1)) ||
+            ((event.button) && (event.button == 1)));
+  },
+
+  pointerX: function(event) {
+    return event.pageX || (event.clientX + 
+      (document.documentElement.scrollLeft || document.body.scrollLeft));
+  },
+
+  pointerY: function(event) {
+    return event.pageY || (event.clientY + 
+      (document.documentElement.scrollTop || document.body.scrollTop));
+  },
+
+  stop: function(event) {
+    if (event.preventDefault) { 
+      event.preventDefault(); 
+      event.stopPropagation(); 
+    } else {
+      event.returnValue = false;
+    }
+  },
+
+  // find the first node with the given tagName, starting from the
+  // node the event was triggered on; traverses the DOM upwards
+  findElement: function(event, tagName) {
+    var element = Event.element(event);
+    while (element.parentNode && (!element.tagName ||
+        (element.tagName.toUpperCase() != tagName.toUpperCase())))
+      element = element.parentNode;
+    return element;
+  },
+
+  observe: function(element, name, observer, useCapture) {
+    var element = $(element);
+    useCapture = useCapture || false;
+    
+    if (name == 'keypress') {
+      if (navigator.appVersion.indexOf('AppleWebKit') > 0) {
+        element.addEventListener('keydown', observer, useCapture);
+        return;
+      }
+      if (element.addEventListener) {
+        element.addEventListener('keypress', observer, useCapture);
+      } else if (element.attachEvent) {
+        element.attachEvent('onkeydown', observer);
+      }
+    } else {
+      if (element.addEventListener) {
+        element.addEventListener(name, observer, useCapture);
+      } else if (element.attachEvent) {
+        element.attachEvent('on' + name, observer);
+      }
+    }
+  },
+
+  stopObserving: function(element, name, observer, useCapture) {
+    var element = $(element);
+    useCapture = useCapture || false;
+    
+    if (name == 'keypress') {
+      if (navigator.appVersion.indexOf('AppleWebKit') > 0) {
+        element.removeEventListener('keydown', observer, useCapture);
+        return;
+      }
+      if (element.removeEventListener) {
+        element.removeEventListener('keypress', observer, useCapture);
+      } else if (element.detachEvent) {
+        element.detachEvent('onkeydown', observer);
+      }
+    } else {
+      if (element.removeEventListener) {
+        element.removeEventListener(name, observer, useCapture);
+      } else if (element.detachEvent) {
+        element.detachEvent('on' + name, observer);
+      }
+    }
+  }
+});
+
+var Position = {
+
+  // set to true if needed, warning: firefox performance problems
+  // NOT neeeded for page scrolling, only if draggable contained in
+  // scrollable elements
+  includeScrollOffsets: false, 
+
+  // must be called before calling withinIncludingScrolloffset, every time the
+  // page is scrolled
+  prepare: function() {
+    this.deltaX =  window.pageXOffset 
+                || document.documentElement.scrollLeft 
+                || document.body.scrollLeft 
+                || 0;
+    this.deltaY =  window.pageYOffset 
+                || document.documentElement.scrollTop 
+                || document.body.scrollTop 
+                || 0;
+  },
+
+  realOffset: function(element) {
+    var valueT = 0, valueL = 0;
+    do {
+      valueT += element.scrollTop  || 0;
+      valueL += element.scrollLeft || 0; 
+      element = element.parentNode;
+    } while (element);
+    return [valueL, valueT];
+  },
+
+  cumulativeOffset: function(element) {
+    var valueT = 0, valueL = 0;
+    do {
+      valueT += element.offsetTop  || 0;
+      valueL += element.offsetLeft || 0;
+      element = element.offsetParent;
+    } while (element);
+    return [valueL, valueT];
+  },
+
+  // caches x/y coordinate pair to use with overlap
+  within: function(element, x, y) {
+    if (this.includeScrollOffsets)
+      return this.withinIncludingScrolloffsets(element, x, y);
+    this.xcomp = x;
+    this.ycomp = y;
+    this.offset = this.cumulativeOffset(element);
+
+    return (y >= this.offset[1] &&
+            y <  this.offset[1] + element.offsetHeight &&
+            x >= this.offset[0] && 
+            x <  this.offset[0] + element.offsetWidth);
+  },
+
+  withinIncludingScrolloffsets: function(element, x, y) {
+    var offsetcache = this.realOffset(element);
+
+    this.xcomp = x + offsetcache[0] - this.deltaX;
+    this.ycomp = y + offsetcache[1] - this.deltaY;
+    this.offset = this.cumulativeOffset(element);
+
+    return (this.ycomp >= this.offset[1] &&
+            this.ycomp <  this.offset[1] + element.offsetHeight &&
+            this.xcomp >= this.offset[0] && 
+            this.xcomp <  this.offset[0] + element.offsetWidth);
+  },
+
+  // within must be called directly before
+  overlap: function(mode, element) {  
+    if (!mode) return 0;  
+    if (mode == 'vertical') 
+      return ((this.offset[1] + element.offsetHeight) - this.ycomp) / 
+        element.offsetHeight;
+    if (mode == 'horizontal')
+      return ((this.offset[0] + element.offsetWidth) - this.xcomp) / 
+        element.offsetWidth;
+  },
+
+  clone: function(source, target) {
+    source = $(source);
+    target = $(target);
+    target.style.position = 'absolute';
+    var offsets = this.cumulativeOffset(source);
+    target.style.top    = offsets[1] + 'px';
+    target.style.left   = offsets[0] + 'px';
+    target.style.width  = source.offsetWidth + 'px';
+    target.style.height = source.offsetHeight + 'px';
+  }
+}



From chaolam at berlios.de  Tue Jul 12 19:13:22 2005
From: chaolam at berlios.de (Chih-Chao Lam at BerliOS)
Date: Tue, 12 Jul 2005 19:13:22 +0200
Subject: [openrecord-svn] r230 - in trunk: source source/model source/view third_party/scriptaculous
Message-ID: <200507121713.j6CHDMTt016990@sheep.berlios.de>

Author: chaolam
Date: 2005-07-12 19:13:16 +0200 (Tue, 12 Jul 2005)
New Revision: 230

Modified:
   trunk/source/TablePlugin.js
   trunk/source/base_style.css
   trunk/source/model/StubVirtualServer.js
   trunk/source/model/World.js
   trunk/source/view/EntryView.js
   trunk/source/view/MultiEntriesView.js
   trunk/third_party/scriptaculous/controls.js
   trunk/third_party/scriptaculous/dragdrop.js
   trunk/third_party/scriptaculous/effects.js
   trunk/third_party/scriptaculous/prototype.js
Log:
1) Added official scriptaculous libraries (they got rid of Object.prototype.extend() yay!)
2) Made Entry know how to get AutoSuggest items by default, got rid of AutoSuggest items from TablePlugin
3) Numerous bug fixes
4) Skeletal attempt at handling the "drop" part of Drag and Drog for Entry lozenges

Modified: trunk/source/TablePlugin.js
===================================================================
--- trunk/source/TablePlugin.js	2005-07-11 23:00:00 UTC (rev 229)
+++ trunk/source/TablePlugin.js	2005-07-12 17:13:16 UTC (rev 230)
@@ -141,13 +141,10 @@
   var displayAttrs = [];
   var anAttribute;
   if (entriesTableColumns.length > 0) {
-    this._hashTableOfEntries = {};
     for (var i=0;i<entriesTableColumns.length;++i) {
       anAttribute = entriesTableColumns[i].getValue();
       Util.assert(anAttribute instanceof Item);
       displayAttrs.push(anAttribute);
-      this._hashTableOfEntries[anAttribute.getUniqueKeyString()] =
-        this.getWorld().getSuggestedItemsForAttribute(anAttribute);
     }
   }
   else {
@@ -167,7 +164,6 @@
 TablePlugin.prototype._buildAttributeHashFromScratch = function() {
   var attributeCalledCategory = this.getWorld().getAttributeCalledCategory();
   var hashTableOfAttributes = {};
-  var hashTableOfEntries = {};
   for (var iKey in this._listOfItems) {
     var contentItem = this._listOfItems[iKey];
     var listOfAttributesForItem = contentItem.getAttributes();
@@ -176,12 +172,10 @@
       if (attribute != attributeCalledCategory) {
         var attributeKeyString = attribute.getUniqueKeyString();
         hashTableOfAttributes[attributeKeyString] = attribute;
-        hashTableOfEntries[attributeKeyString] = this.getWorld().getSuggestedItemsForAttribute(attribute);
       }
     }
   }
   
-  this._hashTableOfEntries = hashTableOfEntries;
   if (Util.lengthOfHashTable(hashTableOfAttributes) < 1) {
     var attributeCalledName = this.getWorld().getAttributeCalledName();
     var key = attributeCalledName.getUniqueKeyString();
@@ -424,7 +418,7 @@
   aCell.or_entriesView = multiEntriesView;
   multiEntriesView.refresh();
   if (this.isInEditMode()) {
-    multiEntriesView.setSuggestions(this._hashTableOfEntries[attribute.getUniqueKeyString()]);
+    //multiEntriesView.setSuggestions(this._hashTableOfEntries[attribute.getUniqueKeyString()]);
     var listener = this;
     multiEntriesView.setKeyPressFunction(function (evt, entryView) {return listener.keyPressOnEditField(evt, entryView);});
     //multiEntriesView.setClickFunction(function (evt, entryView) {return listener._handleClick(evt, entryView);});
@@ -533,11 +527,9 @@
           break;
         }
       }
-      delete this._hashTableOfEntries[attributeUuid];
     }
     else {
       this._displayAttributes.push(changedAttribute);
-      this._hashTableOfEntries[attributeUuid] = this.getWorld().getSuggestedItemsForAttribute(changedAttribute);
     }
     if (noStoredColumns) {
       for (i=0;i<this._displayAttributes.length;++i) {

Modified: trunk/source/base_style.css
===================================================================
--- trunk/source/base_style.css	2005-07-11 23:00:00 UTC (rev 229)
+++ trunk/source/base_style.css	2005-07-12 17:13:16 UTC (rev 230)
@@ -627,7 +627,7 @@
 
 .SuggestionBox {
   background: rgb(100%, 100%, 100%);
-  font-size: small;
+  font-size: 0.8em;
   border-style: solid;
   border-width: thin;
   border-color: #000000;

Modified: trunk/source/model/StubVirtualServer.js
===================================================================
--- trunk/source/model/StubVirtualServer.js	2005-07-11 23:00:00 UTC (rev 229)
+++ trunk/source/model/StubVirtualServer.js	2005-07-12 17:13:16 UTC (rev 230)
@@ -777,6 +777,16 @@
   return item;
 };
 
+/**
+ * Given a UUID, returns the existing entry identified by that UUID. 
+ * 
+ * @scope    private instance method
+ * @param    uuid    The UUID of the entry to be returned. 
+ * @return   The entry identified by the given UUID.
+ */
+StubVirtualServer.prototype.__getEntryFromUuid = function(uuid) {
+  return this._hashTableOfEntriesKeyedByUuid[uuid];
+};
 
 /**
  * Given a UUID, either (a) returns the existing entry identified by that UUID, 

Modified: trunk/source/model/World.js
===================================================================
--- trunk/source/model/World.js	2005-07-11 23:00:00 UTC (rev 229)
+++ trunk/source/model/World.js	2005-07-12 17:13:16 UTC (rev 230)
@@ -862,6 +862,16 @@
   return (this._virtualServer.getItemFromUuid(uuid, observer));
 };
 
+/**
+ * Given a UUID, returns the entry identified by that UUID.
+ *
+ * @scope    public instance method
+ * @param    uuid    The UUID of the item to be returned. 
+ * @return   The entry identified by the given UUID.
+ */
+World.prototype.getEntryFromUuid = function(uuid) {
+  return (this._virtualServer.__getEntryFromUuid(uuid));
+};
 
 // -------------------------------------------------------------------
 // Query methods

Modified: trunk/source/view/EntryView.js
===================================================================
--- trunk/source/view/EntryView.js	2005-07-11 23:00:00 UTC (rev 229)
+++ trunk/source/view/EntryView.js	2005-07-12 17:13:16 UTC (rev 230)
@@ -112,13 +112,14 @@
  *
  */
 EntryView.prototype._setupSuggestionBox = function() {
-  if (this._suggestions) {
-    var suggestionBox = new SuggestionBox(this._editField, this._suggestions);
+  var listOfSuggestions = this._suggestions || this.getWorld().getSuggestedItemsForAttribute(this._attribute);
+  if (listOfSuggestions && listOfSuggestions.length > 0) {
+    var suggestionBox = new SuggestionBox(this._editField, listOfSuggestions);
     this._suggestionBox = suggestionBox;
     if (this._editField && this._autoWiden) {
       var maxLength = 4;
-      for (var i=0; i < this._suggestions.length;++i) {
-        var aSuggestion = this._suggestions[i];
+      for (var i=0; i < listOfSuggestions.length;++i) {
+        var aSuggestion = listOfSuggestions[i];
         if (aSuggestion.getDisplayString().length > maxLength) {maxLength = aSuggestion.getDisplayString().length;}
       }
       this._editField.size = maxLength;
@@ -244,7 +245,7 @@
       }
     }
     else if (this.isInEditMode() && (dataType == itemType || dataType == connectionType)) {
-      this._textSpan.setAttribute("or_entry",this._entry);
+      this._textSpan.setAttribute("id",this._entry._getUuid()); //pending, why is _getUuid a private method?
       new Draggable(this._textSpan, {revert:true});
     }
   }
@@ -407,7 +408,7 @@
             return value;
           case typeCalledNumber:
             var floatVal = parseFloat(value);
-            if (floatVal != NaN) {return floatVal;}
+            if (!isNaN(floatVal)) {return floatVal;}
             break;
           case typeCalledDate:
             var dateVal = Date.parse(value);
@@ -417,11 +418,6 @@
             if (aType.isInCategory(categoryCalledCategory)) {
               value = repository.newItem(value);
               value.assignToCategory(aType);
-              if (this._suggestions) {
-                // add new item to suggestion list if list is present
-                // PENDING: should this be using an observer instead?
-                Util.addObjectToSet(value, this._suggestions);
-              }
               return value;
             }
             break;
@@ -459,7 +455,7 @@
         this._entry = this._item.replaceEntryWithEntryForAttribute(this._entry, this._attribute, value);
       }
       var superview = this.getSuperview();
-      if (superview._provisionalItemJustBecomeReal) {
+      if (this._isProvisional && superview._provisionalItemJustBecomeReal) {
         superview._provisionalItemJustBecomeReal(this._item);
       }
       if (value instanceof Item) {
@@ -532,7 +528,7 @@
   }
   if (this.isInEditMode()) {
     this.selectView(eventObject);
-    return true;
+    return false;
   }
 };
 

Modified: trunk/source/view/MultiEntriesView.js
===================================================================
--- trunk/source/view/MultiEntriesView.js	2005-07-11 23:00:00 UTC (rev 229)
+++ trunk/source/view/MultiEntriesView.js	2005-07-12 17:13:16 UTC (rev 230)
@@ -103,6 +103,7 @@
  * @param    item      The Item which just became real. 
  */
 MultiEntriesView.prototype._provisionalItemJustBecomeReal = function(item) {
+  Util.assert(item == this._item);
   var superview = this.getSuperview();
   if (superview._provisionalItemJustBecomeReal) {
     superview._provisionalItemJustBecomeReal(item);
@@ -174,6 +175,15 @@
   this._clickFunction = onClickFunction;
 };
 
+/**
+ *
+ */
+MultiEntriesView.prototype.hasEntry = function(anEntry) {
+  for (var i in this._entryViews) {
+    if (this._entryViews[i] == anEntry) {return true;}
+  }
+  return false;
+};
 
 /**
  *
@@ -199,7 +209,16 @@
  *
  */
 MultiEntriesView.prototype._handleDrop = function(element) {
-  alert(element + ' was dropped on ' + this);
+  var uuid = element.getAttribute("id");
+  if (!uuid) {Util.assert(false);}
+  var droppedEntry = this.getWorld().getEntryFromUuid(uuid);
+  if (!droppedEntry) {Util.assert(false);}
+  if (!this.hasEntry(droppedEntry)) {
+/*    var entryItem = Util.isArray(droppedEntry._item) ? droppedEntry._item[0] : droppedEntry._item; //pending HACK
+    var newEntry = this.getWorld()._newEntry(this._item, null,
+      this._attribute, droppedEntry.getValue(entryItem), droppedEntry.getType());
+    this._addEntryView(newEntry);*/ //PENDING discussion with Brian on ConnectionEntries
+  }
 };
 
 
@@ -306,6 +325,7 @@
     htmlElement.onclick = this._handleOwnClick.bindAsEventListener(this);
     var listener = this;
     Droppables.add(htmlElement, {accept: [EntryView.CSS_CLASS_CONNECTION_VALUE,EntryView.CSS_ITEM_VALUE],
+      hoverclass: "test",
       onDrop: function(element) {listener._handleDrop(element);}});
   } 
   this._myHasEverBeenDisplayedFlag = true;

Modified: trunk/third_party/scriptaculous/controls.js
===================================================================
--- trunk/third_party/scriptaculous/controls.js	2005-07-11 23:00:00 UTC (rev 229)
+++ trunk/third_party/scriptaculous/controls.js	2005-07-12 17:13:16 UTC (rev 230)
@@ -1,4 +1,5 @@
 // Copyright (c) 2005 Thomas Fuchs (http://script.aculo.us, http://mir.aculo.us)
+//           (c) 2005 Ivan Krstic (http://blogs.law.harvard.edu/ivan)
 // 
 // Permission is hereby granted, free of charge, to any person obtaining
 // a copy of this software and associated documentation files (the
@@ -19,7 +20,6 @@
 // OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 // WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 
-
 Element.collectTextNodesIgnoreClass = function(element, ignoreclass) {
   var children = $(element).childNodes;
   var text     = "";
@@ -37,42 +37,70 @@
   return text;
 }
 
-Ajax.Autocompleter = Class.create();
-Ajax.Autocompleter.prototype = Object.extend(new Ajax.Base(),{
-  initialize: function(element, update, url, options) {
+// Autocompleter.Base handles all the autocompletion functionality 
+// that's independent of the data source for autocompletion. This
+// includes drawing the autocompletion menu, observing keyboard
+// and mouse events, and similar.
+//
+// Specific autocompleters need to provide, at the very least, 
+// a getUpdatedChoices function that will be invoked every time
+// the text inside the monitored textbox changes. This method 
+// should get the text for which to provide autocompletion by
+// invoking this.getEntry(), NOT by directly accessing
+// this.element.value. This is to allow incremental tokenized
+// autocompletion. Specific auto-completion logic (AJAX, etc)
+// belongs in getUpdatedChoices.
+//
+// Tokenized incremental autocompletion is enabled automatically
+// when an autocompleter is instantiated with the 'tokens' option
+// in the options parameter, e.g.:
+// new Ajax.Autocompleter('id','upd', '/url/', { tokens: ',' });
+// will incrementally autocomplete with a comma as the token.
+// Additionally, ',' in the above example can be replaced with
+// a token array, e.g. { tokens: new Array (',', '\n') } which
+// enables autocompletion on multiple tokens. This is most 
+// useful when one of the tokens is \n (a newline), as it 
+// allows smart autocompletion after linebreaks.
+
+var Autocompleter = {}
+Autocompleter.Base = function() {};
+Autocompleter.Base.prototype = {
+  base_initialize: function(element, update, options) {
     this.element     = $(element); 
     this.update      = $(update);  
     this.has_focus   = false; 
     this.changed     = false; 
     this.active      = false; 
     this.index       = 0;     
-    this.entry_count = 0;    
-    this.url         = url;
+    this.entry_count = 0;
 
-    this.setOptions(options);
-    this.options.asynchronous = true;
-    this.options.onComplete   = this.onComplete.bind(this)
+    if (this.setOptions)
+      this.setOptions(options);
+    else
+      this.options = {}
+     
+    this.options.tokens       = this.options.tokens || new Array();
     this.options.frequency    = this.options.frequency || 0.4;
     this.options.min_chars    = this.options.min_chars || 1;
-    this.options.method       = 'post';
-    
-    this.options.onShow = this.options.onShow || 
-      function(element, update){ 
-        if(!update.style.position || update.style.position=='absolute') {
-          update.style.position = 'absolute';
+    this.options.onShow       = this.options.onShow || 
+    function(element, update){ 
+      if(!update.style.position || update.style.position=='absolute') {
+        update.style.position = 'absolute';
           var offsets = Position.cumulativeOffset(element);
           update.style.left = offsets[0] + 'px';
           update.style.top  = (offsets[1] + element.offsetHeight) + 'px';
           update.style.width = element.offsetWidth + 'px';
-        }
-        new Effect.Appear(update,{duration:0.3});
-      };
+      }
+      new Effect.Appear(update,{duration:0.15});
+    };
     this.options.onHide = this.options.onHide || 
-      function(element, update){ new Effect.Fade(update,{duration:0.3}) };
+    function(element, update){ new Effect.Fade(update,{duration:0.15}) };
     
-    
     if(this.options.indicator)
       this.indicator = $(this.options.indicator);
+
+    if (typeof(this.options.tokens) == 'string') 
+      this.options.tokens = new Array(this.options.tokens);
        
     this.observer = null;
     
@@ -81,14 +109,14 @@
     Event.observe(this.element, "blur", this.onBlur.bindAsEventListener(this));
     Event.observe(this.element, "keypress", this.onKeyPress.bindAsEventListener(this));
   },
-  
+
   show: function() {
     if(this.update.style.display=='none') this.options.onShow(this.element, this.update);
     if(!this.iefix && (navigator.appVersion.indexOf('MSIE')>0) && this.update.style.position=='absolute') {
       new Insertion.After(this.update, 
        '<iframe id="' + this.update.id + '_iefix" '+
-       'style="display:none;filter:progid:DXImageTransform.Microsoft.Alpha(apacity=0);" ' +
-       'src="javascript:;" frameborder="0" scrolling="no"></iframe>');
+       'style="display:none;filter:progid:DXImageTransform.Microsoft.Alpha(opacity=0);" ' +
+       'src="javascript:false;" frameborder="0" scrolling="no"></iframe>');
       this.iefix = $(this.update.id+'_iefix');
     }
     if(this.iefix) {
@@ -111,51 +139,7 @@
   stopIndicator: function() {
     if(this.indicator) Element.hide(this.indicator);
   },
-  
-  onObserverEvent: function() {
-    this.changed = false;   
-    if(this.element.value.length>=this.options.min_chars) {
-      this.startIndicator();
-      this.options.parameters = this.options.callback ?
-        this.options.callback(this.element, Form.Element.getValue(this.element)) :
-          Form.Element.serialize(this.element);
-      new Ajax.Request(this.url, this.options);
-    } else {
-      this.active = false;
-      this.hide();
-    }
-  },
-  
-  addObservers: function(element) {
-    Event.observe(element, "mouseover", this.onHover.bindAsEventListener(this));
-    Event.observe(element, "click", this.onClick.bindAsEventListener(this));
-  },
-  
-  onComplete: function(request) {
-    if(!this.changed && this.has_focus) {
-      this.update.innerHTML = request.responseText;
-      Element.cleanWhitespace(this.update);
-      Element.cleanWhitespace(this.update.firstChild);
 
-      if(this.update.firstChild && this.update.firstChild.childNodes) {
-        this.entry_count = 
-          this.update.firstChild.childNodes.length;
-        for (var i = 0; i < this.entry_count; i++) {
-          var entry = this.get_entry(i);
-          entry.autocompleteIndex = i;
-          this.addObservers(entry);
-        }
-      } else { 
-        this.entry_count = 0;
-      }
-      
-      this.stopIndicator();
-      
-      this.index = 0;
-      this.render();
-    }
-  },
-  
   onKeyPress: function(event) {
     if(this.active)
       switch(event.keyCode) {
@@ -255,7 +239,208 @@
   select_entry: function() {
     this.active = false;
     value = Element.collectTextNodesIgnoreClass(this.get_current_entry(), 'informal').unescapeHTML();
-    this.element.value = value;
+    this.updateElement(value);
     this.element.focus();
+  },
+
+  updateElement: function(value) {
+    var last_token_pos = this.findLastToken();
+    if (last_token_pos != -1) {
+      var new_value = this.element.value.substr(0, last_token_pos + 1);
+      var whitespace = this.element.value.substr(last_token_pos + 1).match(/^\s+/);
+      if (whitespace)
+        new_value += whitespace[0];
+      this.element.value = new_value + value;
+    } else {
+      this.element.value = value;
+    } 
+  },
+  
+  updateChoices: function(choices) {
+    if(!this.changed && this.has_focus) {
+      this.update.innerHTML = choices;
+      Element.cleanWhitespace(this.update);
+      Element.cleanWhitespace(this.update.firstChild);
+
+      if(this.update.firstChild && this.update.firstChild.childNodes) {
+        this.entry_count = 
+          this.update.firstChild.childNodes.length;
+        for (var i = 0; i < this.entry_count; i++) {
+          entry = this.get_entry(i);
+          entry.autocompleteIndex = i;
+          this.addObservers(entry);
+        }
+      } else { 
+        this.entry_count = 0;
+      }
+      
+      this.stopIndicator();
+      
+      this.index = 0;
+      this.render();
+    }
+  },
+
+  addObservers: function(element) {
+    Event.observe(element, "mouseover", this.onHover.bindAsEventListener(this));
+    Event.observe(element, "click", this.onClick.bindAsEventListener(this));
+  },
+
+  onObserverEvent: function() {
+    this.changed = false;   
+    if(this.getEntry().length>=this.options.min_chars) {
+      this.startIndicator();
+      this.getUpdatedChoices();
+    } else {
+      this.active = false;
+      this.hide();
+    }
+  },
+
+  getEntry: function() {
+    var token_pos = this.findLastToken();
+    if (token_pos != -1)
+      var ret = this.element.value.substr(token_pos + 1).replace(/^\s+/,'').replace(/\s+$/,'');
+    else
+      var ret = this.element.value;
+    
+    return /\n/.test(ret) ? '' : ret;
+  },
+
+  findLastToken: function() {
+    var last_token_pos = -1;
+
+    for (var i=0; i<this.options.tokens.length; i++) {
+      var this_token_pos = this.element.value.lastIndexOf(this.options.tokens[i]);
+      if (this_token_pos > last_token_pos)
+        last_token_pos = this_token_pos;
+    }
+    return last_token_pos;
   }
-});
\ No newline at end of file
+}
+
+Ajax.Autocompleter = Class.create();
+Ajax.Autocompleter.prototype = Object.extend(new Autocompleter.Base(), 
+Object.extend(new Ajax.Base(), {
+  initialize: function(element, update, url, options) {
+	  this.base_initialize(element, update, options);
+    this.options.asynchronous  = true;
+    this.options.onComplete    = this.onComplete.bind(this)
+    this.options.method        = 'post';
+    this.options.defaultParams = this.options.parameters || null;
+    this.url                   = url;
+  },
+  
+  getUpdatedChoices: function() {
+    entry = encodeURIComponent(this.element.name) + '=' + 
+      encodeURIComponent(this.getEntry());
+      
+    this.options.parameters = this.options.callback ?
+      this.options.callback(this.element, entry) : entry;
+        
+    if(this.options.defaultParams) 
+      this.options.parameters += '&' + this.options.defaultParams;
+    
+    new Ajax.Request(this.url, this.options);
+  },
+  
+  onComplete: function(request) {
+    this.updateChoices(request.responseText);
+  }
+
+}));
+
+// The local array autocompleter. Used when you'd prefer to
+// inject an array of autocompletion options into the page, rather
+// than sending out Ajax queries, which can be quite slow sometimes.
+//
+// The constructor takes four parameters. The first two are, as usual,
+// the id of the monitored textbox, and id of the autocompletion menu.
+// The third is the array you want to autocomplete from, and the fourth
+// is the options block.
+//
+// Extra local autocompletion options:
+// - choices - How many autocompletion choices to offer
+//
+// - partial_search - If false, the autocompleter will match entered
+//                    text only at the beginning of strings in the 
+//                    autocomplete array. Defaults to true, which will
+//                    match text at the beginning of any *word* in the
+//                    strings in the autocomplete array. If you want to
+//                    search anywhere in the string, additionally set
+//                    the option full_search to true (default: off).
+//
+// - full_search - Search anywhere in autocomplete array strings.
+//
+// - partial_chars - How many characters to enter before triggering
+//                   a partial match (unlike min_chars, which defines
+//                   how many characters are required to do any match
+//                   at all). Defaults to 2.
+//
+// - ignore_case - Whether to ignore case when autocompleting.
+//                 Defaults to true.
+//
+// It's possible to pass in a custom function as the 'selector' 
+// option, if you prefer to write your own autocompletion logic.
+// In that case, the other options above will not apply unless
+// you support them.
+
+Autocompleter.Local = Class.create();
+Autocompleter.Local.prototype = Object.extend(new Autocompleter.Base(), {
+  initialize: function(element, update, array, options) {
+    this.base_initialize(element, update, options);
+    this.options.array = array;
+  },
+
+  getUpdatedChoices: function() {
+    this.updateChoices(this.options.selector(this));
+  },
+
+  setOptions: function(options) {
+    this.options = Object.extend({
+      choices: 10,
+      partial_search: true,
+      partial_chars: 2,
+      ignore_case: true,
+      full_search: false,
+      selector: function(instance) {
+        var ret       = new Array(); // Beginning matches
+        var partial   = new Array(); // Inside matches
+        var entry     = instance.getEntry();
+        var count     = 0;
+        
+        for (var i = 0; i < instance.options.array.length &&  
+            ret.length < instance.options.choices ; i++) { 
+          var elem = instance.options.array[i];
+          var found_pos = instance.options.ignore_case ? 
+            elem.toLowerCase().indexOf(entry.toLowerCase()) : 
+            elem.indexOf(entry);
+
+          while (found_pos != -1) {
+            if (found_pos == 0 && elem.length != entry.length) { 
+              ret.push("<li><strong>" + elem.substr(0, entry.length) + "</strong>" + 
+                elem.substr(entry.length) + "</li>");
+              break;
+            } else if (entry.length >= instance.options.partial_chars && 
+              instance.options.partial_search && found_pos != -1) {
+              if (instance.options.full_search || /\s/.test(elem.substr(found_pos-1,1))) {
+                partial.push("<li>" + elem.substr(0, found_pos) + "<strong>" +
+                  elem.substr(found_pos, entry.length) + "</strong>" + elem.substr(
+                  found_pos + entry.length) + "</li>");
+                break;
+              }
+            }
+
+            found_pos = instance.options.ignore_case ? 
+              elem.toLowerCase().indexOf(entry.toLowerCase(), found_pos + 1) : 
+              elem.indexOf(entry, found_pos + 1);
+
+          }
+        }
+        if (partial.length)
+          ret = ret.concat(partial.slice(0, instance.options.choices - ret.length))
+        return "<ul>" + ret.join('') + "</ul>";
+      }
+    }, options || {});
+  }
+});

Modified: trunk/third_party/scriptaculous/dragdrop.js
===================================================================
--- trunk/third_party/scriptaculous/dragdrop.js	2005-07-11 23:00:00 UTC (rev 229)
+++ trunk/third_party/scriptaculous/dragdrop.js	2005-07-12 17:13:16 UTC (rev 230)
@@ -112,12 +112,18 @@
 var Droppables = {
   drops: false,
   
+  remove: function(element) {
+    for(var i = 0; i < this.drops.length; i++)
+      if(this.drops[i].element == element)
+        this.drops.splice(i,1);
+  },
+  
   add: function(element) {
     var element = $(element);
     var options = Object.extend({
       greedy:     true,
       hoverclass: null  
-    },arguments[1] || {});
+    }, arguments[1] || {});
     
     // cache containers
     if(options.containment) {
@@ -134,43 +140,42 @@
         options._containers.length-1;
     }
     
-    if(element.style.position=='') //fix IE
-      element.style.position = 'relative'; 
+    Element.makePositioned(element); // fix IE
     
-    // activate the droppable
-    element.droppable = options;
+    options.element = element;
     
+    // activate the droppable    
     if(!this.drops) this.drops = [];
-    this.drops.push(element);
+    this.drops.push(options);
   },
   
   is_contained: function(element, drop) {
-    var containers = drop.droppable._containers;
+    var containers = drop._containers;
     var parentNode = element.parentNode;
-    var i = drop.droppable._containers_length;
+    var i = drop._containers_length;
     do { if(parentNode==containers[i]) return true; } while (i--);
     return false;
   },
   
   is_affected: function(pX, pY, element, drop) {
     return (
-      (drop!=element) &&
-      ((!drop.droppable._containers) ||
+      (drop.element!=element) &&
+      ((!drop._containers) ||
         this.is_contained(element, drop)) &&
-      ((!drop.droppable.accept) ||
-        (Element.Class.has_any(element, drop.droppable.accept))) &&
-      Position.within(drop, pX, pY) );
+      ((!drop.accept) ||
+        (Element.Class.has_any(element, drop.accept))) &&
+      Position.within(drop.element, pX, pY) );
   },
   
   deactivate: function(drop) {
-    Element.Class.remove(drop, drop.droppable.hoverclass);
+    Element.Class.remove(drop.element, drop.hoverclass);
     this.last_active = null;
   },
   
   activate: function(drop) {
     if(this.last_active) this.deactivate(this.last_active);
-    if(drop.droppable.hoverclass) {
-      Element.Class.add(drop, drop.droppable.hoverclass);
+    if(drop.hoverclass) {
+      Element.Class.add(drop.element, drop.hoverclass);
       this.last_active = drop;
     }
   },
@@ -184,10 +189,9 @@
     var i = this.drops.length-1; do {
       var drop = this.drops[i];
       if(this.is_affected(pX, pY, element, drop)) {
-        if(drop.droppable.onHover)
-           drop.droppable.onHover(
-            element, drop, Position.overlap(drop.droppable.overlap, drop));
-        if(drop.droppable.greedy) { 
+        if(drop.onHover)
+           drop.onHover(element, drop.element, Position.overlap(drop.overlap, drop.element));
+        if(drop.greedy) { 
           this.activate(drop);
           return;
         }
@@ -196,17 +200,13 @@
   },
   
   fire: function(event, element) {
-    if(!this.drops) return;
-    var pX = Event.pointerX(event);
-    var pY = Event.pointerY(event);
+    if(!this.last_active) return;
     Position.prepare();
     
-    var i = this.drops.length-1; do {
-      var drop = this.drops[i];
-      if(this.is_affected(pX, pY, element, drop))
-        if(drop.droppable.onDrop)
-           drop.droppable.onDrop(element);
-    } while (i--);
+    if (this.is_affected(Event.pointerX(event), Event.pointerY(event), element, this.last_active))
+      if (this.last_active.onDrop) 
+        this.last_active.onDrop(element, this.last_active);
+    
   },
   
   reset: function() {
@@ -220,6 +220,11 @@
   addObserver: function(observer) {
     this.observers.push(observer);    
   },
+  removeObserver: function(element) {  // element instead of obsever fixes mem leaks
+    for(var i = 0; i < this.observers.length; i++)
+      if(this.observers[i].element && (this.observers[i].element == element))
+        this.observers.splice(i,1);
+  },
   notify: function(eventName, draggable) {  // 'onStart', 'onEnd'
     for(var i = 0; i < this.observers.length; i++)
       this.observers[i][eventName](draggable);
@@ -244,15 +249,12 @@
       },
       zindex: 1000,
       revert: false
-    },arguments[1] || {});
+    }, arguments[1] || {});
     
     this.element      = $(element);
-    this.element.drag = this;
     this.handle       = options.handle ? $(options.handle) : this.element;
     
-    // fix IE
-    if(!this.element.style.position)
-      this.element.style.position = 'relative';
+    Element.makePositioned(this.element); // fix IE
     
     this.offsetX      = 0;
     this.offsetY      = 0;
@@ -267,10 +269,22 @@
     this.active       = false;
     this.dragging     = false;   
     
-    Event.observe(this.handle, "mousedown", this.startDrag.bindAsEventListener(this));
-    Event.observe(document, "mouseup", this.endDrag.bindAsEventListener(this));
-    Event.observe(document, "mousemove", this.update.bindAsEventListener(this));
+    this.eventMouseDown = this.startDrag.bindAsEventListener(this);
+    this.eventMouseUp   = this.endDrag.bindAsEventListener(this);
+    this.eventMouseMove = this.update.bindAsEventListener(this);
+    this.eventKeypress  = this.keyPress.bindAsEventListener(this);
+    
+    Event.observe(this.handle, "mousedown", this.eventMouseDown);
+    Event.observe(document, "mouseup", this.eventMouseUp);
+    Event.observe(document, "mousemove", this.eventMouseMove);
+    Event.observe(document, "keypress", this.eventKeypress);
   },
+  destroy: function() {
+    Event.stopObserving(this.handle, "mousedown", this.eventMouseDown);
+    Event.stopObserving(document, "mouseup", this.eventMouseUp);
+    Event.stopObserving(document, "mousemove", this.eventMouseMove);
+    Event.stopObserving(document, "keypress", this.eventKeypress);
+  },
   currentLeft: function() {
     return parseInt(this.element.style.left || '0');
   },
@@ -290,31 +304,43 @@
       Event.stop(event);
     }
   },
-  endDrag: function(event) {
-    if(this.active && this.dragging) {
-      this.active = false;
-      this.dragging = false;
+  finishDrag: function(event, success) {
+    this.active = false;
+    this.dragging = false;
+    
+    if(success) Droppables.fire(event, this.element);
+    Draggables.notify('onEnd', this);
+    
+    var revert = this.options.revert;
+    if(revert && typeof revert == 'function') revert = revert(this.element);
       
-      Droppables.fire(event, this.element);
-      Draggables.notify('onEnd', this);
+    if(revert && this.options.reverteffect) {
+      this.options.reverteffect(this.element, 
+      this.currentTop()-this.originalTop,
+      this.currentLeft()-this.originalLeft);
+    } else {
+      this.originalLeft = this.currentLeft();
+      this.originalTop  = this.currentTop();
+    }
+    
+    this.element.style.zIndex = this.originalZ;
       
-      var revert = this.options.revert;
-      if(revert && typeof revert == 'function') revert = revert(this.element);
+    if(this.options.endeffect) 
+      this.options.endeffect(this.element);
       
-      if(revert && this.options.reverteffect) {
-        this.options.reverteffect(this.element, 
-          this.currentTop()-this.originalTop,
-          this.currentLeft()-this.originalLeft);
-      } else {
-        this.originalLeft = this.currentLeft();
-        this.originalTop  = this.currentTop();
+    Droppables.reset();
+  },
+  keyPress: function(event) {
+    if(this.active) {
+      if(event.keyCode==Event.KEY_ESC) {
+        this.finishDrag(event, false);
+        Event.stop(event);
       }
-      this.element.style.zIndex = this.originalZ;
-     
-      if(this.options.endeffect) 
-        this.options.endeffect(this.element);
-      
-      Droppables.reset();
+    }
+  },
+  endDrag: function(event) {
+    if(this.active && this.dragging) {
+      this.finishDrag(event, true);
       Event.stop(event);
     }
     this.active = false;
@@ -372,9 +398,32 @@
 }
 
 Sortable = {
+  sortables: new Array(),
+  options: function(element){
+    var element = $(element);
+    for(var i=0;i<this.sortables.length;i++)
+      if(this.sortables[i].element == element)
+        return this.sortables[i];
+    return null;        
+  },
+  destroy: function(element){
+    var element = $(element);
+    for(var i=0;i<this.sortables.length;i++) {
+      if(this.sortables[i].element == element) {
+        var s = this.sortables[i];
+        Draggables.removeObserver(s.element);
+        for(var j=0;j<s.droppables.length;j++)
+          Droppables.remove(s.droppables[j]);
+        for(var j=0;j<s.draggables.length;j++)
+          s.draggables[j].destroy();
+        this.sortables.splice(i,1);
+      }
+    }
+  },
   create: function(element) {
     var element = $(element);
     var options = Object.extend({ 
+      element:     element,
       tag:         'li',       // assumes li children, override with tag: 'tagname'
       overlap:     'vertical', // one of 'vertical', 'horizontal'
       constraint:  'vertical', // one of 'vertical', 'horizontal', false
@@ -384,9 +433,11 @@
       hoverclass:  null,
       onChange:    function() {},
       onUpdate:    function() {}
-    },arguments[1] || {});
-    element.sortable = options;
+    }, arguments[1] || {});
     
+    // clear any old sortable with same element
+    this.destroy(element);
+    
     // build options for the draggables
     var options_for_draggable = {
       revert:      true,
@@ -435,8 +486,8 @@
     // fix for gecko engine
     Element.cleanWhitespace(element); 
     
-    // for onupdate
-    Draggables.addObserver(new SortableObserver(element, options.onUpdate));
+    options.draggables = [];
+    options.droppables = [];
     
     // make it so 
     var elements = element.childNodes;
@@ -448,18 +499,28 @@
         var handle = options.handle ? 
           Element.Class.childrenWith(elements[i], options.handle)[0] : elements[i];
         
-        new Draggable(elements[i], Object.extend(options_for_draggable,{ handle: handle }));
+        options.draggables.push(new Draggable(elements[i], Object.extend(options_for_draggable, { handle: handle })));
+        
         Droppables.add(elements[i], options_for_droppable);
+        options.droppables.push(elements[i]);
+        
       }
       
+    // keep reference
+    this.sortables.push(options);
+    
+    // for onupdate
+    Draggables.addObserver(new SortableObserver(element, options.onUpdate));
+
   },
   serialize: function(element) {
     var element = $(element);
+    var sortableOptions = this.options(element);
     var options = Object.extend({
-      tag:  element.sortable.tag,
-      only: element.sortable.only,
+      tag:  sortableOptions.tag,
+      only: sortableOptions.only,
       name: element.id
-    },arguments[1] || {});
+    }, arguments[1] || {});
     
     var items = $(element).childNodes;
     var queryComponents = new Array();

Modified: trunk/third_party/scriptaculous/effects.js
===================================================================
--- trunk/third_party/scriptaculous/effects.js	2005-07-11 23:00:00 UTC (rev 229)
+++ trunk/third_party/scriptaculous/effects.js	2005-07-12 17:13:16 UTC (rev 230)
@@ -46,17 +46,35 @@
   return (-Math.cos(pos*Math.PI*(9*pos))/2) + 0.5;
 }
 Effect.Transitions.pulse = function(pos) {
-   return (Math.floor(pos*10) % 2 == 0 ? 
+  return (Math.floor(pos*10) % 2 == 0 ? 
     (pos*10-Math.floor(pos*10)) : 1-(pos*10-Math.floor(pos*10)));
 }
-
 Effect.Transitions.none = function(pos) {
-    return 0;
+  return 0;
 }
 Effect.Transitions.full = function(pos) {
-    return 1;
+  return 1;
 }
 
+/* ------------- element ext -------------- */
+
+Element.makePositioned = function(element) {
+  element = $(element);
+  if(element.style.position == "")
+    element.style.position = "relative";
+}
+
+Element.makeClipping = function(element) {
+  element = $(element);
+  element._overflow = element.style.overflow || 'visible';
+  if(element._overflow!='hidden') element.style.overflow = 'hidden';
+}
+
+Element.undoClipping = function(element) {
+  element = $(element);
+  if(element._overflow!='hidden') element.style.overflow = element._overflow;
+}
+
 /* ------------- core effects ------------- */
 
 Effect.Base = function() {};
@@ -69,26 +87,26 @@
       sync:       false, // true for combining
       from:       0.0,
       to:         1.0
-    },options || {});
+    }, options || {});
   },
   start: function(options) {
     this.setOptions(options || {});
-    this.currentFrame    = 0;
-    this.startOn  = new Date().getTime();
-    this.finishOn = this.startOn + (this.options.duration*1000);
+    this.currentFrame = 0;
+    this.startOn      = new Date().getTime();
+    this.finishOn     = this.startOn + (this.options.duration*1000);
     if(this.options.beforeStart) this.options.beforeStart(this);
     if(!this.options.sync) this.loop();  
   },
   loop: function() {
-    timePos = new Date().getTime();
+    var timePos = new Date().getTime();
     if(timePos >= this.finishOn) {
       this.render(this.options.to);
       if(this.finish) this.finish(); 
       if(this.options.afterFinish) this.options.afterFinish(this);
       return;  
     }
-    pos   = (timePos - this.startOn) / (this.finishOn - this.startOn);
-    frame = Math.round(pos * this.options.fps * this.options.duration);
+    var pos   = (timePos - this.startOn) / (this.finishOn - this.startOn);
+    var frame = Math.round(pos * this.options.fps * this.options.duration);
     if(frame > this.currentFrame) {
       this.render(pos);
       this.currentFrame = frame;
@@ -97,7 +115,7 @@
   },
   render: function(pos) {
     if(this.options.transition) pos = this.options.transition(pos);
-    pos  = pos * (this.options.to-this.options.from);
+    pos *= (this.options.to-this.options.from);
     pos += this.options.from; 
     if(this.options.beforeUpdate) this.options.beforeUpdate(this);
     if(this.update) this.update(pos);
@@ -109,32 +127,32 @@
 }
 
 Effect.Parallel = Class.create();
-  Effect.Parallel.prototype = Object.extend(new Effect.Base(),{
-    initialize: function(effects) {
-      this.effects = effects || [];
-       this.start(arguments[1]);
-    },
-    update: function(position) {
-       for (var i = 0; i < this.effects.length; i++)
-        this.effects[i].render(position);  
-    },
-    finish: function(position) {
-       for (var i = 0; i < this.effects.length; i++)
-          if(this.effects[i].finish) this.effects[i].finish(position);
-    }
-  });
+Object.extend(Object.extend(Effect.Parallel.prototype, Effect.Base.prototype), {
+  initialize: function(effects) {
+    this.effects = effects || [];
+    this.start(arguments[1]);
+  },
+  update: function(position) {
+    for (var i = 0; i < this.effects.length; i++)
+      this.effects[i].render(position);  
+  },
+  finish: function(position) {
+    for (var i = 0; i < this.effects.length; i++)
+      if(this.effects[i].finish) this.effects[i].finish(position);
+  }
+});
 
 // Internet Explorer caveat: works only on elements the have
 // a 'layout', meaning having a given width or height. 
 // There is no way to safely set this automatically.
 Effect.Opacity = Class.create();
-Effect.Opacity.prototype = Object.extend(new Effect.Base(),{
+Object.extend(Object.extend(Effect.Opacity.prototype, Effect.Base.prototype), {
   initialize: function(element) {
     this.element = $(element);
     options = Object.extend({
       from: 0.0,
       to:   1.0
-    },arguments[1] || {});
+    }, arguments[1] || {});
     this.start(options);
   },
   update: function(position) {
@@ -148,30 +166,29 @@
 });
 
 Effect.MoveBy = Class.create();
- Effect.MoveBy.prototype = Object.extend(new Effect.Base(),{
-   initialize: function(element, toTop, toLeft) {
-     this.element      = $(element);
-     this.originalTop  = parseFloat(this.element.style.top || '0');
-     this.originalLeft = parseFloat(this.element.style.left || '0');
-     this.toTop        = toTop;
-     this.toLeft       = toLeft;
-     if(this.element.style.position == "")
-       this.element.style.position = "relative";
-     this.start(arguments[3]);
-   },
-   update: function(position) {
-     topd  = this.toTop  * position + this.originalTop;
-     leftd = this.toLeft * position + this.originalLeft;
-     this.setPosition(topd, leftd);
-   },
-   setPosition: function(topd, leftd) {
-     this.element.style.top  = topd  + "px";
-     this.element.style.left = leftd + "px";
-   }
+Object.extend(Object.extend(Effect.MoveBy.prototype, Effect.Base.prototype), {
+  initialize: function(element, toTop, toLeft) {
+    this.element      = $(element);
+    this.originalTop  = parseFloat(this.element.style.top || '0');
+    this.originalLeft = parseFloat(this.element.style.left || '0');
+    this.toTop        = toTop;
+    this.toLeft       = toLeft;
+    Element.makePositioned(this.element);
+    this.start(arguments[3]);
+  },
+  update: function(position) {
+    topd  = this.toTop  * position + this.originalTop;
+    leftd = this.toLeft * position + this.originalLeft;
+    this.setPosition(topd, leftd);
+  },
+  setPosition: function(topd, leftd) {
+    this.element.style.top  = topd  + "px";
+    this.element.style.left = leftd + "px";
+  }
 });
 
 Effect.Scale = Class.create();
-Effect.Scale.prototype = Object.extend(new Effect.Base(),{
+Object.extend(Object.extend(Effect.Scale.prototype, Effect.Base.prototype), {
   initialize: function(element, percent) {
     this.element = $(element)
     options = Object.extend({
@@ -181,12 +198,12 @@
       scaleFromCenter: false,
       scaleMode: 'box',        // 'box' or 'contents' or {} with provided values
       scaleFrom: 100.0
-    },arguments[2] || {});
+    }, arguments[2] || {});
     this.originalTop    = this.element.offsetTop;
     this.originalLeft   = this.element.offsetLeft;
-    if (this.element.style.fontSize=="") this.sizeEm = 1.0;
-    if (this.element.style.fontSize && this.element.style.fontSize.indexOf("em")>0)
-       this.sizeEm      = parseFloat(this.element.style.fontSize);
+    if(this.element.style.fontSize=="") this.sizeEm = 1.0;
+    if(this.element.style.fontSize && this.element.style.fontSize.indexOf("em")>0)
+      this.sizeEm      = parseFloat(this.element.style.fontSize);
     this.factor = (percent/100.0) - (options.scaleFrom/100.0);
     if(options.scaleMode=='box') {
       this.originalHeight = this.element.clientHeight;
@@ -207,8 +224,8 @@
     if(this.options.scaleContent && this.sizeEm) 
       this.element.style.fontSize = this.sizeEm*currentScale + "em";
     this.setDimensions(
-     this.originalWidth * currentScale, 
-     this.originalHeight * currentScale);
+      this.originalWidth * currentScale, 
+      this.originalHeight * currentScale);
   },
 
   setDimensions: function(width, height) {
@@ -229,7 +246,7 @@
 });
 
 Effect.Highlight = Class.create();
-Effect.Highlight.prototype = Object.extend(new Effect.Base(),{
+Object.extend(Object.extend(Effect.Highlight.prototype, Effect.Base.prototype), {
   initialize: function(element) {
     this.element = $(element);
     
@@ -243,9 +260,10 @@
       var i=0; do { endcolor += parseInt(cols[i]).toColorPart() } while (++i<3); }
       
     var options = Object.extend({
-      startcolor: "#ffff99",
-      endcolor:   endcolor
-    },arguments[1] || {});
+      startcolor:   "#ffff99",
+      endcolor:     endcolor,
+      restorecolor: current 
+    }, arguments[1] || {});
     
     // init color calculations
     this.colors_base = [
@@ -266,24 +284,48 @@
       Math.round(this.colors_base[2]+(this.colors_delta[2]*position)) ];
     this.element.style.backgroundColor = "#" +
       colors[0].toColorPart() + colors[1].toColorPart() + colors[2].toColorPart();
+  },
+  finish: function() {
+    this.element.style.backgroundColor = this.options.restorecolor;
   }
 });
 
+Effect.ScrollTo = Class.create();
+Object.extend(Object.extend(Effect.ScrollTo.prototype, Effect.Base.prototype), {
+  initialize: function(element) {
+    this.element = $(element);
+    Position.prepare();
+    var offsets = Position.cumulativeOffset(this.element);
+    var max = window.innerHeight ? 
+      window.height - window.innerHeight :
+      document.body.scrollHeight - 
+        (document.documentElement.clientHeight ? 
+          document.documentElement.clientHeight : document.body.clientHeight);
+    this.scrollStart = Position.deltaY;
+    this.delta  = (offsets[1] > max ? max : offsets[1]) - this.scrollStart;
+    this.start(arguments[1] || {});
+  },
+  update: function(position) {
+    Position.prepare();
+    window.scrollTo(Position.deltaX, 
+      this.scrollStart + (position*this.delta));
+  }
+});
 
 /* ------------- prepackaged effects ------------- */
 
-Effect.Fade =  function(element) {
+Effect.Fade = function(element) {
   options = Object.extend({
   from: 1.0,
   to:   0.0,
   afterFinish: function(effect) 
     { Element.hide(effect.element);
       effect.setOpacity(1); } 
-  },arguments[1] || {});
+  }, arguments[1] || {});
   new Effect.Opacity(element,options);
 }
 
-Effect.Appear =  function(element) {
+Effect.Appear = function(element) {
   options = Object.extend({
   from: 0.0,
   to:   1.0,
@@ -292,7 +334,7 @@
       Element.show(effect.element); },
   afterUpdate: function(effect)  
     { Element.show(effect.element); }
-  },arguments[1] || {});
+  }, arguments[1] || {});
   new Effect.Opacity(element,options);
 }
 
@@ -310,24 +352,22 @@
 }
 
 Effect.BlindUp = function(element) {
-  $(element)._overflow = $(element).style.overflow || 'visible';
-  $(element).style.overflow = 'hidden';
+  Element.makeClipping(element);
   new Effect.Scale(element, 0, 
     Object.extend({ scaleContent: false, 
       scaleX: false, 
       afterFinish: function(effect) 
         { 
           Element.hide(effect.element);
-          effect.element.style.overflow = effect.element._overflow;
+          Element.undoClipping(effect.element);
         } 
-    },arguments[1] || {})
+    }, arguments[1] || {})
   );
 }
 
 Effect.BlindDown = function(element) {
   $(element).style.height   = '0px';
-  $(element)._overflow = $(element).style.overflow || 'visible';
-  $(element).style.overflow = 'hidden';
+  Element.makeClipping(element);
   Element.show(element);
   new Effect.Scale(element, 100, 
     Object.extend({ scaleContent: false, 
@@ -335,9 +375,9 @@
       scaleMode: 'contents',
       scaleFrom: 0,
       afterFinish: function(effect) {
-        effect.element.style.overflow = effect.element._overflow;
+        Element.undoClipping(effect.element);
       }
-    },arguments[1] || {})
+    }, arguments[1] || {})
   );
 }
 
@@ -346,7 +386,7 @@
     { duration: 0.4,
      transition: Effect.Transitions.flicker,
      afterFinish: function(effect)
-      {  effect.element.style.overflow = 'hidden';
+      { effect.element.style.overflow = 'hidden';
         new Effect.Scale(effect.element, 1, 
          { duration: 0.3, scaleFromCenter: true,
           scaleX: false, scaleContent: false,
@@ -356,7 +396,7 @@
           afterFinish: function(effect) { Element.hide(effect.element); }
          } )
       }
-    } )
+    } );
 }
 
 Effect.DropOut = function(element) {
@@ -386,10 +426,11 @@
 }
 
 Effect.SlideDown = function(element) {
-  $(element)._overflow = $(element).style.overflow || 'visible';
-  $(element).style.height   = '0px';
-  $(element).style.overflow = 'hidden';
-  $(element).firstChild.style.position = 'relative';
+  element = $(element);
+  element.style.height   = '0px';
+  Element.makeClipping(element);
+  Element.cleanWhitespace(element);
+  Element.makePositioned(element.firstChild);
   Element.show(element);
   new Effect.Scale(element, 100, 
    Object.extend({ scaleContent: false, 
@@ -400,15 +441,16 @@
       { effect.element.firstChild.style.bottom = 
           (effect.originalHeight - effect.element.clientHeight) + 'px'; },
     afterFinish: function(effect) 
-      {  effect.element.style.overflow = effect.element._overflow; }
-    },arguments[1] || {})
+      {  Element.undoClipping(effect.element); }
+    }, arguments[1] || {})
   );
 }
   
 Effect.SlideUp = function(element) {
-  $(element)._overflow = $(element).style.overflow || 'visible';
-  $(element).style.overflow = 'hidden';
-  $(element).firstChild.style.position = 'relative';
+  element = $(element);
+  Element.makeClipping(element);
+  Element.cleanWhitespace(element);
+  Element.makePositioned(element.firstChild);
   Element.show(element);
   new Effect.Scale(element, 0, 
    Object.extend({ scaleContent: false, 
@@ -419,9 +461,9 @@
     afterFinish: function(effect)
       { 
         Element.hide(effect.element);
-        effect.element.style.overflow = effect.element._overflow; 
+        Element.undoClipping(effect.element);
       }
-   },arguments[1] || {})
+   }, arguments[1] || {})
   );
 }
 
@@ -542,7 +584,7 @@
   new Effect.Opacity(element, 
     Object.extend(Object.extend({  duration: 3.0,
        afterFinish: function(effect) { Element.show(effect.element); }
-    },options),{transition: reverser}));
+    }, options), {transition: reverser}));
 }
 
 Effect.Fold = function(element) {
@@ -557,7 +599,7 @@
      scaleTo: 0,
      scaleY: false,
      afterFinish: function(effect) { Element.hide(effect.element) } });
- }},arguments[1] || {}));
+ }}, arguments[1] || {}));
 }
 
 // old: new Effect.ContentZoom(element, percent)

Modified: trunk/third_party/scriptaculous/prototype.js
===================================================================
--- trunk/third_party/scriptaculous/prototype.js	2005-07-11 23:00:00 UTC (rev 229)
+++ trunk/third_party/scriptaculous/prototype.js	2005-07-12 17:13:16 UTC (rev 230)
@@ -30,13 +30,12 @@
     destination[property] = source[property];
   }
   return destination;
-  // test;
 }
-
-/*Object.prototype.extend = function(object) {
+/*
+Object.prototype.extend = function(object) {
   return Object.extend.apply(this, [this, object]);
-}*/
-
+}
+*/
 Function.prototype.bind = function(object) {
   var __method = this;
   return function() {
@@ -148,7 +147,7 @@
   }
 }
 
-Object.extend(String.prototype,{
+Object.extend(String.prototype, {
   stripTags: function() {
     return this.replace(/<\/?[^>]+>/gi, '');
   },
@@ -184,7 +183,7 @@
       method:       'post',
       asynchronous: true,
       parameters:   ''
-    },(options || {}));
+    }, options || {});
   },
 
   responseIsSuccess: function() {
@@ -202,7 +201,7 @@
 Ajax.Request.Events = 
   ['Uninitialized', 'Loading', 'Loaded', 'Interactive', 'Complete'];
 
-Ajax.Request.prototype = Object.extend(new Ajax.Base(),{
+Ajax.Request.prototype = Object.extend(new Ajax.Base(), {
   initialize: function(url, options) {
     this.transport = Ajax.getTransport();
     this.setOptions(options);
@@ -267,19 +266,23 @@
   respondToReadyState: function(readyState) {
     var event = Ajax.Request.Events[readyState];
 
-    if (event == 'Complete' && this.responseIsFailure())
+    if (event == 'Complete')
       (this.options['on' + this.transport.status]
-       || this.options.onFailure
-       || Prototype.emptyFunction)(this.transport);
+       || this.options['on' + this.responseIsSuccess ? 'Success' : 'Failure']
+       || Prototype.emptyFunction)(this.transport);       
 
-    (this.options['on' + event] || Prototype.emptyFunction)(this.transport);    
+    (this.options['on' + event] || Prototype.emptyFunction)(this.transport);
+
+    /* Avoid memory leak in MSIE: clean up the oncomplete event handler */
+    if (event == 'Complete')
+      this.transport.onreadystatechange = Prototype.emptyFunction;
   }
 });
 
 Ajax.Updater = Class.create();
 Ajax.Updater.ScriptFragment = '(?:<script.*?>)((\n|.)*?)(?:<\/script>)';
 
-Object.extend(Object.extend(Ajax.Updater.prototype,Ajax.Request.prototype),{
+Object.extend(Object.extend(Ajax.Updater.prototype, Ajax.Request.prototype), {
   initialize: function(container, url, options) {
     this.containers = {
       success: container.success ? $(container.success) : $(container),
@@ -293,7 +296,7 @@
     var onComplete = this.options.onComplete || Prototype.emptyFunction;
     this.options.onComplete = (function() {
       this.updateContent();
-      onComplete(this.transport);
+      onComplete(this.transport);      
     }).bind(this);
 
     this.request(url);
@@ -332,7 +335,7 @@
 });
 
 Ajax.PeriodicalUpdater = Class.create();
-Ajax.PeriodicalUpdater.prototype = Object.extend(new Ajax.Base(),{
+Ajax.PeriodicalUpdater.prototype = Object.extend(new Ajax.Base(), {
   initialize: function(container, url, options) {
     this.setOptions(options);
     this.onComplete = this.options.onComplete;
@@ -504,7 +507,7 @@
 var Insertion = new Object();
 
 Insertion.Before = Class.create();
-Insertion.Before.prototype = Object.extend(new Abstract.Insertion('beforeBegin'),{
+Insertion.Before.prototype = Object.extend(new Abstract.Insertion('beforeBegin'), {
   initializeRange: function() {
     this.range.setStartBefore(this.element);
   },
@@ -515,7 +518,7 @@
 });
 
 Insertion.Top = Class.create();
-Insertion.Top.prototype = Object.extend(new Abstract.Insertion('afterBegin'),{
+Insertion.Top.prototype = Object.extend(new Abstract.Insertion('afterBegin'), {
   initializeRange: function() {
     this.range.selectNodeContents(this.element);
     this.range.collapse(true);
@@ -527,7 +530,7 @@
 });
 
 Insertion.Bottom = Class.create();
-Insertion.Bottom.prototype = Object.extend(new Abstract.Insertion('beforeEnd'),{
+Insertion.Bottom.prototype = Object.extend(new Abstract.Insertion('beforeEnd'), {
   initializeRange: function() {
     this.range.selectNodeContents(this.element);
     this.range.collapse(this.element);
@@ -539,7 +542,7 @@
 });
 
 Insertion.After = Class.create();
-Insertion.After.prototype = Object.extend(new Abstract.Insertion('afterEnd'),{
+Insertion.After.prototype = Object.extend(new Abstract.Insertion('afterEnd'), {
   initializeRange: function() {
     this.range.setStartAfter(this.element);
   },
@@ -751,14 +754,14 @@
 }
 
 Form.Element.Observer = Class.create();
-Form.Element.Observer.prototype = Object.extend(new Abstract.TimedObserver(),{
+Form.Element.Observer.prototype = Object.extend(new Abstract.TimedObserver(), {
   getValue: function() {
     return Form.Element.getValue(this.element);
   }
 });
 
 Form.Observer = Class.create();
-Form.Observer.prototype = Object.extend(new Abstract.TimedObserver(),{
+Form.Observer.prototype = Object.extend(new Abstract.TimedObserver(), {
   getValue: function() {
     return Form.serialize(this.element);
   }
@@ -823,14 +826,14 @@
 }
 
 Form.Element.EventObserver = Class.create();
-Form.Element.EventObserver.prototype = Object.extend(new Abstract.EventObserver(),{
+Form.Element.EventObserver.prototype = Object.extend(new Abstract.EventObserver(), {
   getValue: function() {
     return Form.Element.getValue(this.element);
   }
 });
 
 Form.EventObserver = Class.create();
-Form.EventObserver.prototype = Object.extend(new Abstract.EventObserver(),{
+Form.EventObserver.prototype = Object.extend(new Abstract.EventObserver(), {
   getValue: function() {
     return Form.serialize(this.element);
   }
@@ -889,54 +892,59 @@
       element = element.parentNode;
     return element;
   },
+  
+  observers: false,
+  
+  _observeAndCache: function(element, name, observer, useCapture) {
+    if(!this.observers) this.observers = [];
+    if(element.addEventListener) {
+      this.observers.push([element,name,observer,useCapture]);
+      element.addEventListener(name, observer, useCapture);
+    } else if (element.attachEvent) {
+      this.observers.push([element,name,observer,useCapture]);
+      element.attachEvent('on'+name, observer);
+    }
+  },
+  
+  unloadCache: function() {
+    if(!Event.observers) return;
+    for(var i=0; i<Event.observers.length; i++) {
+      Event.stopObserving(Event.observers[i][0],Event.observers[i][1],Event.observers[i][2],Event.observers[i][3]);
+      Event.observers[i][0] = null;
+    }
+    Event.observers = false;
+  },
 
   observe: function(element, name, observer, useCapture) {
     var element = $(element);
     useCapture = useCapture || false;
     
-    if (name == 'keypress') {
-      if (navigator.appVersion.indexOf('AppleWebKit') > 0) {
-        element.addEventListener('keydown', observer, useCapture);
-        return;
-      }
-      if (element.addEventListener) {
-        element.addEventListener('keypress', observer, useCapture);
-      } else if (element.attachEvent) {
-        element.attachEvent('onkeydown', observer);
-      }
-    } else {
-      if (element.addEventListener) {
-        element.addEventListener(name, observer, useCapture);
-      } else if (element.attachEvent) {
-        element.attachEvent('on' + name, observer);
-      }
-    }
+    if(name == 'keypress' &&
+      ((navigator.appVersion.indexOf('AppleWebKit') > 0) || element.attachEvent))
+        name = 'keydown';
+    
+    this._observeAndCache(element, name, observer, useCapture);
   },
 
   stopObserving: function(element, name, observer, useCapture) {
     var element = $(element);
     useCapture = useCapture || false;
     
-    if (name == 'keypress') {
-      if (navigator.appVersion.indexOf('AppleWebKit') > 0) {
-        element.removeEventListener('keydown', observer, useCapture);
-        return;
-      }
-      if (element.removeEventListener) {
-        element.removeEventListener('keypress', observer, useCapture);
-      } else if (element.detachEvent) {
-        element.detachEvent('onkeydown', observer);
-      }
-    } else {
-      if (element.removeEventListener) {
-        element.removeEventListener(name, observer, useCapture);
-      } else if (element.detachEvent) {
-        element.detachEvent('on' + name, observer);
-      }
+    if(name == 'keypress' &&
+      ((navigator.appVersion.indexOf('AppleWebKit') > 0) || element.detachEvent))
+        name = 'keydown';
+    
+    if (element.removeEventListener) {
+      element.removeEventListener(name, observer, useCapture);
+    } else if (element.detachEvent) {
+      element.detachEvent('on' + name, observer);
     }
   }
 });
 
+// prevent memory leaks
+Event.observe(window,'unload', Event.unloadCache, false);
+
 var Position = {
 
   // set to true if needed, warning: firefox performance problems



From chaolam at berlios.de  Wed Jul 13 01:08:18 2005
From: chaolam at berlios.de (Chih-Chao Lam at BerliOS)
Date: Wed, 13 Jul 2005 01:08:18 +0200
Subject: [openrecord-svn] r231 - in trunk: repositories source source/view third_party/scriptaculous
Message-ID: <200507122308.j6CN8Ix5024952@sheep.berlios.de>

Author: chaolam
Date: 2005-07-13 01:08:16 +0200 (Wed, 13 Jul 2005)
New Revision: 231

Modified:
   trunk/repositories/dashboard.json
   trunk/source/TablePlugin.js
   trunk/source/base_style.css
   trunk/source/view/EntryView.js
   trunk/source/view/MultiEntriesView.js
   trunk/third_party/scriptaculous/dragdrop.js
Log:
Basic support for dropping lozenges (not quite right yet)

Modified: trunk/repositories/dashboard.json
===================================================================
--- trunk/repositories/dashboard.json	2005-07-12 17:13:16 UTC (rev 230)
+++ trunk/repositories/dashboard.json	2005-07-12 23:08:16 UTC (rev 231)
@@ -17,12 +17,12 @@
         "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
     },  
     // -----------------------------------------------------------------------
-    { "Entry": {                                              // "Dashboard"
+    { "Entry": {                                              // "Intro"
              "uuid": "8a3c6b5b-ce7f-11d9-8cd5-e24829d2f59b",
         "attribute": "00001002-ce7f-11d9-8cd5-0011113ae5d6",  // Short Name
              "item": "8a3c6b50-ce7f-11d9-8cd5-e24829d2f59b",  // (Page: Dashboard Demo Page)
              "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",  // TextValue
-            "value": "Dashboard" }
+            "value": "Intro" }
     },
     // -----------------------------------------------------------------------
     { "Entry": {                                              // "Dashboard Demo Page"

Modified: trunk/source/TablePlugin.js
===================================================================
--- trunk/source/TablePlugin.js	2005-07-12 17:13:16 UTC (rev 230)
+++ trunk/source/TablePlugin.js	2005-07-12 23:08:16 UTC (rev 231)
@@ -325,21 +325,21 @@
   for (var i=0; i<this._displayAttributes.length; ++i) {
     var attribute = this._displayAttributes[i];
     if (!this._sortAttribute) {this._sortAttribute = attribute;}
-    var headerElt = View.appendNewElement(headerRow,"th");
-    var aCell = View.appendNewElement(headerElt,"span",null,null,attribute.getDisplayString());
-    aCell.style.background = "rgb(90%, 90%, 90%)";
+    var aCell = View.appendNewElement(headerRow,"th",null,null,attribute.getDisplayString());
+    //var aCell = View.appendNewElement(headerElt,"span",null,null,attribute.getDisplayString());
+    //aCell.style.background = "rgb(90%, 90%, 90%)";
     if (this._sortAttribute == attribute) {
       aCell.appendChild(this.getSortIcon());
     }
     aCell.onclick = this.clickOnHeader.bindAsEventListener(this, attribute);
     if (this.isInEditMode()) {
-      new Draggable(aCell, {revert:true});
+      //new Draggable(aCell, {revert:true});
     }
     ++numCols;
   }
   this._numberOfColumns = numCols;
   var listener = this;
-  Droppables.add(headerRow, {onDrop: function(element) {listener._handleDrop(element);}});   
+  //Droppables.add(headerRow, {onDrop: function(element) {listener._handleDrop(element);}});   
 };
 
 

Modified: trunk/source/base_style.css
===================================================================
--- trunk/source/base_style.css	2005-07-12 17:13:16 UTC (rev 230)
+++ trunk/source/base_style.css	2005-07-12 23:08:16 UTC (rev 231)
@@ -683,11 +683,16 @@
   border: thin solid #A4BDEC;	
   -moz-border-radius: 6px; // WARNING: Mozilla only attribute. This just makes a rectangle have rounded corners
 }
-
+.ItemValue:hover, .ConnectionValue:hover {
+  background-color: #BBCEF1; // darker blue
+}
 .ItemValueSelected {
   background-color:#598bec;
   color: #FFFFFF;
+  border: thin solid #A4BDEC;	
+  -moz-border-radius: 6px; // WARNING: Mozilla only attribute. This just makes a rectangle have rounded corners
 }
+
 .DateValue {
   font-style: italic;
 }

Modified: trunk/source/view/EntryView.js
===================================================================
--- trunk/source/view/EntryView.js	2005-07-12 17:13:16 UTC (rev 230)
+++ trunk/source/view/EntryView.js	2005-07-12 23:08:16 UTC (rev 231)
@@ -245,8 +245,10 @@
       }
     }
     else if (this.isInEditMode() && (dataType == itemType || dataType == connectionType)) {
-      this._textSpan.setAttribute("id",this._entry._getUuid()); //pending, why is _getUuid a private method?
-      new Draggable(this._textSpan, {revert:true});
+      if (!this.draggable) {
+        this._textSpan.or_entryView = this; 
+        this.draggable = new Draggable(this._textSpan, {revert:true});
+      }
     }
   }
 };
@@ -260,7 +262,8 @@
 
 EntryView.prototype.unSelect = function() {
   Util.assert(this._isLozenge());
-  Util.css_removeClass(this._textSpan, EntryView.CSS_CLASS_SELECTED);
+  this._setClassName();
+  //Util.css_removeClass(this._textSpan, EntryView.CSS_CLASS_SELECTED);
 };
 
 /** Select this Entry
@@ -276,7 +279,7 @@
     else {
       rootView.setSelection(this);
     }
-    Util.css_addClass(this._textSpan, EntryView.CSS_CLASS_SELECTED); // must set this after setting rootView selection
+    this._textSpan.className = EntryView.CSS_CLASS_SELECTED; // must set this after setting rootView selection
   }
   else {
     rootView.setSelection(null);
@@ -307,6 +310,7 @@
       editField.onkeyup = this.onKeyUp.bindAsEventListener(this);
       editField.onfocus = this.onFocus.bindAsEventListener(this);
       editField.value = this._isProvisional ? '' : (initialStr) ? initialStr : this._textNode.data;
+      //alert(editField.value)
       if (this.getSuperview().getEntryWidth) {
         var recommendedWidth = this.getSuperview().getEntryWidth();
         if (recommendedWidth > 0) {
@@ -528,7 +532,7 @@
   }
   if (this.isInEditMode()) {
     this.selectView(eventObject);
-    return false;
+    return true;
   }
 };
 

Modified: trunk/source/view/MultiEntriesView.js
===================================================================
--- trunk/source/view/MultiEntriesView.js	2005-07-12 17:13:16 UTC (rev 230)
+++ trunk/source/view/MultiEntriesView.js	2005-07-12 23:08:16 UTC (rev 231)
@@ -180,7 +180,7 @@
  */
 MultiEntriesView.prototype.hasEntry = function(anEntry) {
   for (var i in this._entryViews) {
-    if (this._entryViews[i] == anEntry) {return true;}
+    if (this._entryViews[i]._entry == anEntry) {return true;}
   }
   return false;
 };
@@ -209,15 +209,21 @@
  *
  */
 MultiEntriesView.prototype._handleDrop = function(element) {
-  var uuid = element.getAttribute("id");
-  if (!uuid) {Util.assert(false);}
-  var droppedEntry = this.getWorld().getEntryFromUuid(uuid);
+  var draggedEntryView = element.or_entryView;
+  if (!draggedEntryView) {Util.assert(false);}
+  var droppedEntry = draggedEntryView._entry;
   if (!droppedEntry) {Util.assert(false);}
   if (!this.hasEntry(droppedEntry)) {
-/*    var entryItem = Util.isArray(droppedEntry._item) ? droppedEntry._item[0] : droppedEntry._item; //pending HACK
-    var newEntry = this.getWorld()._newEntry(this._item, null,
-      this._attribute, droppedEntry.getValue(entryItem), droppedEntry.getType());
-    this._addEntryView(newEntry);*/ //PENDING discussion with Brian on ConnectionEntries
+    var newEntry;
+    if (droppedEntry.getType() == this.getWorld().getTypeCalledConnection()) {
+      var otherItem = droppedEntry.getConnectedItem(draggedEntryView._item);
+      var otherAttribute = droppedEntry.getAttributeForItem(otherItem);
+      newEntry = this._item.addConnectionEntry(this._attribute,otherItem,otherAttribute);
+    }
+    else {
+      newEntry = this._item.addNewEntryForAttribute(this._attribute,droppedEntry.getValue(),droppedEntry.getType());
+    }
+    this._addEntryView(newEntry);
   }
 };
 
@@ -245,7 +251,6 @@
   }
   if (doCreateNewEntry) {
     entryView.stopEditing();
-    this._addSeparator();
     this._addEntryView(null).startEditing();
     return true;
   }
@@ -270,6 +275,7 @@
  *
  */
 MultiEntriesView.prototype._addEntryView = function(entry) {
+  if (this._entryViews.length > 0 && this._entryViews[0]._entry) {this._addSeparator();}
   var spanElement = document.createElement("span");
   spanElement.style.width = '100%';
   var anEntryView = new EntryView(this, spanElement, this._item, this._attribute, entry);
@@ -317,7 +323,6 @@
     for (var i=0; i<entries.length; ++i) {
       var anEntry = entries[i];
       this._addEntryView(anEntry);
-      if (i < (entries.length-1)) { this._addSeparator();}
     }
   }
   

Modified: trunk/third_party/scriptaculous/dragdrop.js
===================================================================
--- trunk/third_party/scriptaculous/dragdrop.js	2005-07-12 17:13:16 UTC (rev 230)
+++ trunk/third_party/scriptaculous/dragdrop.js	2005-07-12 23:08:16 UTC (rev 231)
@@ -301,7 +301,7 @@
       this.offsetY =  event.clientY - this.originalY - this.originalTop;
       this.offsetX =  event.clientX - this.originalX - this.originalLeft;
       
-      Event.stop(event);
+      //Event.stop(event);
     }
   },
   finishDrag: function(event, success) {



From chaolam at berlios.de  Wed Jul 13 02:17:09 2005
From: chaolam at berlios.de (Chih-Chao Lam at BerliOS)
Date: Wed, 13 Jul 2005 02:17:09 +0200
Subject: [openrecord-svn] r232 - trunk/source
Message-ID: <200507130017.j6D0H9Og018411@sheep.berlios.de>

Author: chaolam
Date: 2005-07-13 02:17:07 +0200 (Wed, 13 Jul 2005)
New Revision: 232

Modified:
   trunk/source/base_style.css
Log:
Mimi's css changes

Modified: trunk/source/base_style.css
===================================================================
--- trunk/source/base_style.css	2005-07-12 23:08:16 UTC (rev 231)
+++ trunk/source/base_style.css	2005-07-13 00:17:07 UTC (rev 232)
@@ -93,14 +93,13 @@
 }
 
 h1 {
-  color: rgb(0%, 0%, 50%);
-  font-size: 1.5em;
-  margin-top: 1.4em;
+  color: rgb(0%, 0%, 0%);
+  font-size: x-large;
 }
 
 h2 {
-  color: rgb(0%, 0%, 50%);
-  font-size: large;
+  color: rgb(0%, 0%, 0%);
+  font-size: medium;
 }
 
 h3 {
@@ -131,7 +130,7 @@
   text-decoration: none;
   border-bottom-style: solid;
   border-bottom-width: 1pt;
-  background: rgb(100%, 100%, 0%);
+  background: #99CCFF;
 }
 
 a.anchor {
@@ -154,7 +153,7 @@
   text-decoration: none;
   border-bottom-style: solid;
   border-bottom-width: 1pt;
-  background: rgb(100%, 100%, 0%);
+  background: #99CCFF;
 }
 
 a.more {
@@ -184,8 +183,8 @@
 
 .header {
   clear: both;
-  border-left: solid 1pt rgb(0%, 0%, 50%);
-  border-bottom: solid 1pt rgb(0%, 0%, 50%);
+  border-left: solid 5pt #CCCCCC;
+  border-bottom: solid 1pt #CCCCCC;
   padding: 0.3em;
   width: 100%;
 }
@@ -213,7 +212,7 @@
 }
 
 .logomiddle {
-  color: rgb(0%, 0%, 50%); 
+  color: #0066CC; 
 }
 
 .logoend {
@@ -255,7 +254,7 @@
 
 .menu {
   padding-left: 0;
-  padding-top: 8pt;
+  padding-top: 0pt;
   padding-bottom: 20pt;
   margin-left: 0;
   list-style-type: none;
@@ -272,28 +271,26 @@
   width: 100%;
   padding: 5pt 0pt 5pt 5pt;
   text-decoration: none; 
-  border-left: solid 5pt rgb(100%, 100%, 100%);
-  border-top: solid 1pt rgb(0%, 0%, 50%);
-  border-right: solid 1pt rgb(0%, 0%, 50%);
-  border-bottom-style: none;
-  color: rgb(0%, 0%, 50%); 
+  border-left: solid 1pt #CCCCCC;
+  border-top: solid 1pt #CCCCCC;
+  border-bottom: solid 1pt #CCCCCC;
+  color: rgb(0%, 0%, 0%); 
 }
 
 .menu_item a:link {
-  color: rgb(0%, 0%, 50%); 
+  color: #0066CC; 
   background-color: rgb(100%, 100%, 100%);
 }
 
 .menu_item a:visited {
-  color: rgb(0%, 0%, 50%); 
-  background-color: rgb(90%, 90%, 90%);
-  border-left: solid 5pt rgb(90%, 90%, 90%);
+  color: #6699CC; 
+
 }
 
 .menu_item a:hover {
-  background-color: rgb(100%, 100%, 0%);
+  background-color: #99CCFF;
   width: 100%;
-  border-left: solid 5pt rgb(0%, 0%, 50%);
+  border-left: solid 1pt #6699FF;
   border-bottom-style: none;
 }
 
@@ -342,13 +339,13 @@
 h1.EntryView .TextValue:hover {
   border-width: thin;
   border-style: solid;
-  border-color: rgb(70%, 70%, 70%);
+  border-color: rgb(100%, 100%, 100%);
 }
 
 h2.EntryView span:hover {
   border-width: thin;
   border-style: solid;
-  border-color: rgb(70%, 70%, 70%);
+  border-color: rgb(100%, 100%, 100%);
 }
 
 div.EntryView span:hover {
@@ -358,9 +355,9 @@
 }
 
 h1.EntryView input {
-  color: rgb(0%, 0%, 50%);
-  background: rgb(100%, 100%, 40%);
-  font-size: 1em;
+  color: rgb(0%, 0%, 0%);
+  background: #CCCCCC;
+  font-size: x-large;
   width: 100%;
   font-family: Arial, Verdana, sans-serif;
   font-weight: bold;
@@ -371,8 +368,8 @@
 }
 
 h2.EntryView input {
-  color: rgb(0%, 0%, 50%);
-  background: rgb(100%, 100%, 40%);
+  color: rgb(0%, 0%, 0%);
+  background: #CCCCCC;
   font-size: 1em;
   width: 100%;
   font-family: Arial, Verdana, sans-serif;
@@ -385,7 +382,7 @@
 
 div.EntryView textarea {
   //font-size: large;
-  background: rgb(100%, 100%, 40%);
+  background: #CCCCCC;
   width: 100%;
   font-family: Arial, Verdana, sans-serif;
   border-width: thin;
@@ -413,11 +410,11 @@
 
 .footer {
   clear: both;
-  border-left: solid 1pt rgb(0%, 0%, 50%);
-  border-top: solid 1pt rgb(0%, 0%, 50%);
+  border-right: solid 5pt #CCCCCC;
+  border-top: solid 1pt #CCCCCC;
   padding: 0.3em;
   width: 100%;
-  font-size: 0.6em;
+  font-size: 0.7em;
   margin-top: 3em;
 }
 
@@ -455,9 +452,10 @@
 
 .simple_table th {
   padding: 0.3em;
-  color: rgb(0%, 0%, 50%);
-  background: rgb(90%, 90%, 90%);
+  color: #000000;
+  background: #99CCFF;
   font-size: 0.8em;
+  text-align: left;
   border: 1pt solid rgb(70%, 70%, 70%);
 }
 
@@ -465,9 +463,9 @@
   background: rgb(100%, 100%, 100%);
 }
 
-.viewmode .simple_table {
-  background: rgb(100%, 100%, 0%);
-}
+/*.viewmode .simple_table tr:hover {
+  background: #99CCFF;
+}*/
 
 .simple_table td {
   padding: 0.1em 0.3em; 
@@ -476,7 +474,7 @@
 }
 
 tr.selected {
-  background: rgb(100%,100%,40%);
+  background: #6699FF;
 }
 
 td.MultiEntriesView {
@@ -507,7 +505,7 @@
 
 td.title {
   font-weight: bold;  
-  background: rgb(90%, 90%, 90%);
+  background: #000000;
 }
 
 td.label {
@@ -529,18 +527,18 @@
   font-family: Arial, Verdana, sans-serif;
   border: 0px;
   width: 100%;
-  background: rgb(100%, 100%, 40%);
+  background: #CCCCCC;
   padding: 0px;
 }
 
 .MultiEntriesView .EntryView input:hover {
   border-width: 0px;
   width: 100%;
-  background: rgb(100%, 100%, 40%);
+  background: #CCCCCC;
 }
 
 /*.editmode .simple_table td:hover {
-  background: rgb(100%, 100%, 70%);
+  background: #99CCFF;
 }*/
 
 td.newitem {
@@ -550,7 +548,7 @@
 
 .editmode .simple_table td.selected {
   /* padding: 0px 0px; */
-  background: rgb(100%, 100%, 40%);
+  background: #99CCFF;
 }
 
 
@@ -607,7 +605,7 @@
 /* LoginView styles                     */
 
 .LoginView {
-  font-size: x-small;
+  font-size: 0.7em;
   float: right;
 }
 
@@ -616,7 +614,7 @@
 /* SectionView styles                 */
 
 div.SectionView {
-  border-top: solid thin rgb(0%, 0%, 50%);
+  border-top: solid thin #CCCCCC;
   margin-top: 3em;
   padding-left: 0px;
 }
@@ -661,7 +659,7 @@
 }
 
 .SuggestionBox tr:hover {
-  background: rgb(100%, 100%, 70%);
+  background: #CCCCCC;
 }
 
 
@@ -694,7 +692,7 @@
 }
 
 .DateValue {
-  font-style: italic;
+  font-color: #808080;
 }
 
 .NumberValue {



From chaolam at berlios.de  Wed Jul 13 21:18:16 2005
From: chaolam at berlios.de (Chih-Chao Lam at BerliOS)
Date: Wed, 13 Jul 2005 21:18:16 +0200
Subject: [openrecord-svn] r233 - trunk/repositories
Message-ID: <200507131918.j6DJIGUs026566@sheep.berlios.de>

Author: chaolam
Date: 2005-07-13 21:18:15 +0200 (Wed, 13 Jul 2005)
New Revision: 233

Modified:
   trunk/repositories/dashboard.json
Log:
added "not lozenge" attribute support

Modified: trunk/repositories/dashboard.json
===================================================================
--- trunk/repositories/dashboard.json	2005-07-13 00:17:07 UTC (rev 232)
+++ trunk/repositories/dashboard.json	2005-07-13 19:18:15 UTC (rev 233)
@@ -1261,4 +1261,289 @@
       "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
            "item": "8a3c6b50-ce7f-11d9-8cd5-e24829d2f59b",
           "value": "Intro"  }
+  },
+  // -----------------------------------------------------------------------
+  // (???).(About) = "re: Accessibility (bring in guru guy)"
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "6a29db30-f3d2-11d9-8cf6-e24829d2f59b",
+  "previousEntry": "198744e0-e993-11d9-b345-e24829d2f59b",
+           "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "81b155c0-e992-11d9-9146-e24829d2f59b",
+           "item": "0ea096d0-e993-11d9-b345-e24829d2f59b",
+          "value": "re: Accessibility (bring in guru guy)"  }
+  },
+  // =======================================================================
+  { "Transaction": [
+    // -----------------------------------------------------------------------
+    // (Page: New Page)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Item": { "uuid": "78f08290-f3d2-11d9-8cf6-e24829d2f59b" } },
+    // -----------------------------------------------------------------------
+    // (Page: New Page).(Name) = "New Page"
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "78f11ed0-f3d2-11d9-8cf6-e24829d2f59b",
+             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": "78f08290-f3d2-11d9-8cf6-e24829d2f59b",
+            "value": "New Page"  }
+    },
+    // -----------------------------------------------------------------------
+    // (Page: New Page).(Category) = (Category: Page)
+    // (Category: Page).(Items in Category) = (Page: New Page)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "78f16cf0-f3d2-11d9-8cf6-e24829d2f59b",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["78f08290-f3d2-11d9-8cf6-e24829d2f59b", "00020000-ce7f-11d9-8cd5-0011113ae5d6"],
+        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    },
+    // -----------------------------------------------------------------------
+    // (Page: New Page).(Summary) = "This is a new page."
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "78f1e220-f3d2-11d9-8cf6-e24829d2f59b",
+             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "00001003-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": "78f08290-f3d2-11d9-8cf6-e24829d2f59b",
+            "value": "This is a new page."  }
+    },
+    // -----------------------------------------------------------------------
+    // (Section: New Section)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Item": { "uuid": "78f23040-f3d2-11d9-8cf6-e24829d2f59b" } },
+    // -----------------------------------------------------------------------
+    // (Section: New Section).(Name) = "New Section"
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "78f27e60-f3d2-11d9-8cf6-e24829d2f59b",
+             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": "78f23040-f3d2-11d9-8cf6-e24829d2f59b",
+            "value": "New Section"  }
+    },
+    // -----------------------------------------------------------------------
+    // (Section: New Section).(Category) = (Category: Section)
+    // (Category: Section).(Items in Category) = (Section: New Section)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "78f2cc80-f3d2-11d9-8cf6-e24829d2f59b",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["78f23040-f3d2-11d9-8cf6-e24829d2f59b", "00020100-ce7f-11d9-8cd5-0011113ae5d6"],
+        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    },
+    // -----------------------------------------------------------------------
+    // (Page: New Page).(Sections In Page) = (Section: New Section)
+    // (Section: New Section).(Page this section appears on) = (Page: New Page)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "78f31aa0-f3d2-11d9-8cf6-e24829d2f59b",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["78f08290-f3d2-11d9-8cf6-e24829d2f59b", "78f23040-f3d2-11d9-8cf6-e24829d2f59b"],
+        "attribute": ["00030000-ce7f-11d9-8cd5-0011113ae5d6", "00030001-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    },
+    // -----------------------------------------------------------------------
+    // (Section: New Section).(Plugin View) = (Plugin View: Table)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "78f38fd0-f3d2-11d9-8cf6-e24829d2f59b",
+             "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "00040101-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": "78f23040-f3d2-11d9-8cf6-e24829d2f59b",
+            "value": "00040301-ce7f-11d9-8cd5-0011113ae5d6"  }
+    },
+    // -----------------------------------------------------------------------
+    // (Query Spec: New Query)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Item": { "uuid": "78f3ddf0-f3d2-11d9-8cf6-e24829d2f59b" } },
+    // -----------------------------------------------------------------------
+    // (Query Spec: New Query).(Name) = "New Query"
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "78f42c10-f3d2-11d9-8cf6-e24829d2f59b",
+             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": "78f3ddf0-f3d2-11d9-8cf6-e24829d2f59b",
+            "value": "New Query"  }
+    },
+    // -----------------------------------------------------------------------
+    // (Query Spec: New Query).(Category) = (Category: Query Spec)
+    // (Category: Query Spec).(Items in Category) = (Query Spec: New Query)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "78f47a30-f3d2-11d9-8cf6-e24829d2f59b",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["78f3ddf0-f3d2-11d9-8cf6-e24829d2f59b", "00001212-ce7f-11d9-8cd5-0011113ae5d6"],
+        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    },
+    // -----------------------------------------------------------------------
+    // (Section: New Section).(Query Spec) = (Query Spec: New Query)
+    // (Query Spec: New Query).(Section this query spec belongs to) = (Section: New Section)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "78f4c850-f3d2-11d9-8cf6-e24829d2f59b",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["78f23040-f3d2-11d9-8cf6-e24829d2f59b", "78f3ddf0-f3d2-11d9-8cf6-e24829d2f59b"],
+        "attribute": ["00001006-ce7f-11d9-8cd5-0011113ae5d6", "00040105-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    }  ]
+  },
+  // =======================================================================
+  { "Transaction": [
+    // -----------------------------------------------------------------------
+    // (Layout Data: Layout data for Table of New Section)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Item": { "uuid": "79115100-f3d2-11d9-8cf6-e24829d2f59b" } },
+    // -----------------------------------------------------------------------
+    // (Layout Data: Layout data for Table of New Section).(Name) = "Layout data for Table of New Section"
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "79119f20-f3d2-11d9-8cf6-e24829d2f59b",
+             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": "79115100-f3d2-11d9-8cf6-e24829d2f59b",
+            "value": "Layout data for Table of New Section"  }
+    },
+    // -----------------------------------------------------------------------
+    // (Layout Data: Layout data for Table of New Section).(Category) = (Category: Layout Data)
+    // (Category: Layout Data).(Items in Category) = (Layout Data: Layout data for Table of New Section)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "79121450-f3d2-11d9-8cf6-e24829d2f59b",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["79115100-f3d2-11d9-8cf6-e24829d2f59b", "00040202-ce7f-11d9-8cd5-0011113ae5d6"],
+        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    },
+    // -----------------------------------------------------------------------
+    // (Layout Data: Layout data for Table of New Section).(Applies To Plugin) = (Plugin View: Table)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "79126270-f3d2-11d9-8cf6-e24829d2f59b",
+             "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "00040103-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": "79115100-f3d2-11d9-8cf6-e24829d2f59b",
+            "value": "00040301-ce7f-11d9-8cd5-0011113ae5d6"  }
+    },
+    // -----------------------------------------------------------------------
+    // (Section: New Section).(Layout Data) = (Layout Data: Layout data for Table of New Section)
+    // (Layout Data: Layout data for Table of New Section).(Section this layout data belongs to) = (Section: New Section)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "7912b090-f3d2-11d9-8cf6-e24829d2f59b",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["78f23040-f3d2-11d9-8cf6-e24829d2f59b", "79115100-f3d2-11d9-8cf6-e24829d2f59b"],
+        "attribute": ["00040102-ce7f-11d9-8cd5-0011113ae5d6", "00040104-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    }  ]
+  },
+  // -----------------------------------------------------------------------
+  // (Query Spec: New Query).(Matching Value) = (Category: Attribute)
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "7bd700b0-f3d2-11d9-8cf6-e24829d2f59b",
+           "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "00001007-ce7f-11d9-8cd5-0011113ae5d6",
+           "item": "78f3ddf0-f3d2-11d9-8cf6-e24829d2f59b",
+          "value": "00001210-ce7f-11d9-8cd5-0011113ae5d6"  }
+  },
+  // -----------------------------------------------------------------------
+  // (Layout Data: Layout data for Table of New Section).(Table Columns) = (Attribute: Expected Type)
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "819b4a60-f3d2-11d9-8cf6-e24829d2f59b",
+           "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "0004010a-ce7f-11d9-8cd5-0011113ae5d6",
+           "item": "79115100-f3d2-11d9-8cf6-e24829d2f59b",
+          "value": "0000100a-ce7f-11d9-8cd5-0011113ae5d6"  }
+  },
+  // -----------------------------------------------------------------------
+  // (Layout Data: Layout data for Table of New Section).(Table Columns) = (Attribute: Name)
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "8198d960-f3d2-11d9-8cf6-e24829d2f59b",
+           "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "0004010a-ce7f-11d9-8cd5-0011113ae5d6",
+           "item": "79115100-f3d2-11d9-8cf6-e24829d2f59b",
+          "value": "00001001-ce7f-11d9-8cd5-0011113ae5d6"  }
+  },
+  // -----------------------------------------------------------------------
+  // (Layout Data: Layout data for Table of New Section).(Table Columns) = (Attribute: Not Lozenge)
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "819f9020-f3d2-11d9-8cf6-e24829d2f59b",
+           "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "0004010a-ce7f-11d9-8cd5-0011113ae5d6",
+           "item": "79115100-f3d2-11d9-8cf6-e24829d2f59b",
+          "value": "00040106-ce7f-11d9-8cd5-0011113ae5d6"  }
+  },
+  // -----------------------------------------------------------------------
+  // (Layout Data: Layout data for Table of New Section).(Table Columns) = (Attribute: Inverse Attribute)
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "819d6d40-f3d2-11d9-8cf6-e24829d2f59b",
+           "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "0004010a-ce7f-11d9-8cd5-0011113ae5d6",
+           "item": "79115100-f3d2-11d9-8cf6-e24829d2f59b",
+          "value": "0000100b-ce7f-11d9-8cd5-0011113ae5d6"  }
+  },
+  // -----------------------------------------------------------------------
+  // (Attribute: Task).(Not Lozenge) = "yes"
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "8b859710-f3d2-11d9-8cf6-e24829d2f59b",
+           "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "00040106-ce7f-11d9-8cd5-0011113ae5d6",
+           "item": "580b3700-e991-11d9-9146-e24829d2f59b",
+          "value": "yes"  }
+  },
+  // -----------------------------------------------------------------------
+  // (Attribute: Mail).(Not Lozenge) = "yes"
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "8fbe37b0-f3d2-11d9-8cf6-e24829d2f59b",
+           "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "00040106-ce7f-11d9-8cd5-0011113ae5d6",
+           "item": "86e20770-e991-11d9-9146-e24829d2f59b",
+          "value": "yes"  }
+  },
+  // -----------------------------------------------------------------------
+  // (Attribute: Calendar).(Not Lozenge) = "yes"
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "987f6db0-f3d2-11d9-8cf6-e24829d2f59b",
+           "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "00040106-ce7f-11d9-8cd5-0011113ae5d6",
+           "item": "94845da0-e992-11d9-9146-e24829d2f59b",
+          "value": "yes"  }
+  },
+  // -----------------------------------------------------------------------
+  // (Attribute: Status).(Not Lozenge) = "yes"
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "9c12f4b0-f3d2-11d9-8cf6-e24829d2f59b",
+           "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "00040106-ce7f-11d9-8cd5-0011113ae5d6",
+           "item": "c1428740-e992-11d9-9146-e24829d2f59b",
+          "value": "yes"  }
+  },
+  // -----------------------------------------------------------------------
+  // (Page: Introspection).(Name) = "Introspection"
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "b555c880-f3d2-11d9-8cf6-e24829d2f59b",
+  "previousEntry": "78f11ed0-f3d2-11d9-8cf6-e24829d2f59b",
+           "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
+           "item": "78f08290-f3d2-11d9-8cf6-e24829d2f59b",
+          "value": "Introspection"  }
+  },
+  // -----------------------------------------------------------------------
+  // (Page: Introspection).(Summary) = "This page shows the meta data for the Dashboard and OpenRecord"
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "c50e9810-f3d2-11d9-8cf6-e24829d2f59b",
+  "previousEntry": "78f1e220-f3d2-11d9-8cf6-e24829d2f59b",
+           "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "00001003-ce7f-11d9-8cd5-0011113ae5d6",
+           "item": "78f08290-f3d2-11d9-8cf6-e24829d2f59b",
+          "value": "This page shows the meta data for the Dashboard and OpenRecord"  }
   }
\ No newline at end of file



From chaolam at berlios.de  Wed Jul 13 21:21:39 2005
From: chaolam at berlios.de (Chih-Chao Lam at BerliOS)
Date: Wed, 13 Jul 2005 21:21:39 +0200
Subject: [openrecord-svn] r234 - trunk/repositories
Message-ID: <200507131921.j6DJLdih026929@sheep.berlios.de>

Author: chaolam
Date: 2005-07-13 21:21:39 +0200 (Wed, 13 Jul 2005)
New Revision: 234

Modified:
   trunk/repositories/dashboard.json
Log:


Modified: trunk/repositories/dashboard.json
===================================================================
--- trunk/repositories/dashboard.json	2005-07-13 19:18:15 UTC (rev 233)
+++ trunk/repositories/dashboard.json	2005-07-13 19:21:39 UTC (rev 234)
@@ -1546,4 +1546,206 @@
       "attribute": "00001003-ce7f-11d9-8cd5-0011113ae5d6",
            "item": "78f08290-f3d2-11d9-8cf6-e24829d2f59b",
           "value": "This page shows the meta data for the Dashboard and OpenRecord"  }
+  },
+  // =======================================================================
+  { "Transaction": [
+    // -----------------------------------------------------------------------
+    // (TaskType: Review)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Item": { "uuid": "f5738290-f3d2-11d9-972b-e24829d2f59b" } },
+    // -----------------------------------------------------------------------
+    // (TaskType: Review).(Name) = "Review"
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "f573d0b0-f3d2-11d9-972b-e24829d2f59b",
+             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": "f5738290-f3d2-11d9-972b-e24829d2f59b",
+            "value": "Review"  }
+    },
+    // -----------------------------------------------------------------------
+    // (TaskType: Review).(Category) = (Category: TaskType)
+    // (Category: TaskType).(Items in Category) = (TaskType: Review)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "f5741ed0-f3d2-11d9-972b-e24829d2f59b",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["f5738290-f3d2-11d9-972b-e24829d2f59b", "b50873a0-e991-11d9-9146-e24829d2f59b"],
+        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    },
+    // -----------------------------------------------------------------------
+    // (???)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Item": { "uuid": "f225b720-f3d2-11d9-972b-e24829d2f59b" } },
+    // -----------------------------------------------------------------------
+    // (???).(Task) = (TaskType: Review)
+    // (TaskType: Review).(Items in Category) = (???)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "f5746cf0-f3d2-11d9-972b-e24829d2f59b",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["f225b720-f3d2-11d9-972b-e24829d2f59b", "f5738290-f3d2-11d9-972b-e24829d2f59b"],
+        "attribute": ["580b3700-e991-11d9-9146-e24829d2f59b", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    },
+    // -----------------------------------------------------------------------
+    // (???).(Status) = (Status: Now)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "f574e220-f3d2-11d9-972b-e24829d2f59b",
+             "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "c1428740-e992-11d9-9146-e24829d2f59b",
+             "item": "f225b720-f3d2-11d9-972b-e24829d2f59b",
+            "value": "e1813a60-e992-11d9-b345-e24829d2f59b"  }
+    }  ]
+  },
+  // =======================================================================
+  { "Transaction": [
+    // -----------------------------------------------------------------------
+    // (Mail Status: from:)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Item": { "uuid": "f76b0cd0-f3d2-11d9-972b-e24829d2f59b" } },
+    // -----------------------------------------------------------------------
+    // (Mail Status: from:).(Name) = "from:"
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "f76b5af0-f3d2-11d9-972b-e24829d2f59b",
+             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": "f76b0cd0-f3d2-11d9-972b-e24829d2f59b",
+            "value": "from:"  }
+    },
+    // -----------------------------------------------------------------------
+    // (Mail Status: from:).(Category) = (Category: Mail Status)
+    // (Category: Mail Status).(Items in Category) = (Mail Status: from:)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "f76bd020-f3d2-11d9-972b-e24829d2f59b",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["f76b0cd0-f3d2-11d9-972b-e24829d2f59b", "470c5d70-e992-11d9-9146-e24829d2f59b"],
+        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    },
+    // -----------------------------------------------------------------------
+    // (???).(Mail) = (Mail Status: from:)
+    // (Mail Status: from:).(Items in Category) = (???)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "f76c1e40-f3d2-11d9-972b-e24829d2f59b",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["f225b720-f3d2-11d9-972b-e24829d2f59b", "f76b0cd0-f3d2-11d9-972b-e24829d2f59b"],
+        "attribute": ["86e20770-e991-11d9-9146-e24829d2f59b", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    }  ]
+  },
+  // =======================================================================
+  { "Transaction": [
+    // -----------------------------------------------------------------------
+    // (Person: Philippe)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Item": { "uuid": "f9f9a6f0-f3d2-11d9-972b-e24829d2f59b" } },
+    // -----------------------------------------------------------------------
+    // (Person: Philippe).(Name) = "Philippe"
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "f9f9f510-f3d2-11d9-972b-e24829d2f59b",
+             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": "f9f9a6f0-f3d2-11d9-972b-e24829d2f59b",
+            "value": "Philippe"  }
+    },
+    // -----------------------------------------------------------------------
+    // (Person: Philippe).(Category) = (Category: Person)
+    // (Category: Person).(Items in Category) = (Person: Philippe)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "f9fa4330-f3d2-11d9-972b-e24829d2f59b",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["f9f9a6f0-f3d2-11d9-972b-e24829d2f59b", "00001201-ce7f-11d9-8cd5-0011113ae5d6"],
+        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    },
+    // -----------------------------------------------------------------------
+    // (???).(Who) = (Person: Philippe)
+    // (Person: Philippe).(Items in Category) = (???)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "f9fa9150-f3d2-11d9-972b-e24829d2f59b",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["f225b720-f3d2-11d9-972b-e24829d2f59b", "f9f9a6f0-f3d2-11d9-972b-e24829d2f59b"],
+        "attribute": ["41c86750-e992-11d9-9146-e24829d2f59b", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    }  ]
+  },
+  // -----------------------------------------------------------------------
+  // (???).(About) = "Re: Spec template"
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "fc724810-f3d2-11d9-972b-e24829d2f59b",
+           "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "81b155c0-e992-11d9-9146-e24829d2f59b",
+           "item": "f225b720-f3d2-11d9-972b-e24829d2f59b",
+          "value": "Re: Spec template"  }
+  },
+  // -----------------------------------------------------------------------
+  // (???).(When) = "Mon Apr 25 2005 00:00:00 GMT-0700 (PDT)"
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "320b9850-f3d3-11d9-972b-e24829d2f59b",
+           "type": "00001022-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "9e90ff60-e992-11d9-9146-e24829d2f59b",
+           "item": "f225b720-f3d2-11d9-972b-e24829d2f59b",
+          "value": "Mon Apr 25 2005 00:00:00 GMT-0700 (PDT)"  }
+  },
+  // -----------------------------------------------------------------------
+  // (???).(Project) = (Project: 0.6 planning)
+  // (Project: 0.6 planning).(Items in Category) = (???)
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "397a84c0-f3d3-11d9-972b-e24829d2f59b",
+           "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+           "item": ["f225b720-f3d2-11d9-972b-e24829d2f59b", "25b7b100-e993-11d9-b345-e24829d2f59b"],
+      "attribute": ["ba630990-e992-11d9-9146-e24829d2f59b", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+  },
+  // =======================================================================
+  { "Transaction": [
+    // -----------------------------------------------------------------------
+    // (Mail Status: to:)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Item": { "uuid": "4136cde0-f3d3-11d9-972b-e24829d2f59b" } },
+    // -----------------------------------------------------------------------
+    // (Mail Status: to:).(Name) = "to:"
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "4136f4f0-f3d3-11d9-972b-e24829d2f59b",
+             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": "4136cde0-f3d3-11d9-972b-e24829d2f59b",
+            "value": "to:"  }
+    },
+    // -----------------------------------------------------------------------
+    // (Mail Status: to:).(Category) = (Category: Mail Status)
+    // (Category: Mail Status).(Items in Category) = (Mail Status: to:)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "41376a20-f3d3-11d9-972b-e24829d2f59b",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["4136cde0-f3d3-11d9-972b-e24829d2f59b", "470c5d70-e992-11d9-9146-e24829d2f59b"],
+        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    },
+    // -----------------------------------------------------------------------
+    // (???).(Mail) = (Mail Status: to:)
+    // (Mail Status: to:).(Items in Category) = (???)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "4137b840-f3d3-11d9-972b-e24829d2f59b",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["0ea096d0-e993-11d9-b345-e24829d2f59b", "4136cde0-f3d3-11d9-972b-e24829d2f59b"],
+        "attribute": ["86e20770-e991-11d9-9146-e24829d2f59b", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    }  ]
+  },
+  // -----------------------------------------------------------------------
+  // (???).(Mail) = (Mail Status: from:)
+  // (Mail Status: from:).(Items in Category) = (???)
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "476460b0-f3d3-11d9-972b-e24829d2f59b",
+           "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+           "item": ["12afdd80-e993-11d9-b345-e24829d2f59b", "f76b0cd0-f3d2-11d9-972b-e24829d2f59b"],
+      "attribute": ["86e20770-e991-11d9-9146-e24829d2f59b", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
   }
\ No newline at end of file



From chaolam at berlios.de  Wed Jul 13 21:23:39 2005
From: chaolam at berlios.de (Chih-Chao Lam at BerliOS)
Date: Wed, 13 Jul 2005 21:23:39 +0200
Subject: [openrecord-svn] r235 - trunk/repositories
Message-ID: <200507131923.j6DJNdmE027079@sheep.berlios.de>

Author: chaolam
Date: 2005-07-13 21:23:39 +0200 (Wed, 13 Jul 2005)
New Revision: 235

Modified:
   trunk/repositories/dashboard.json
Log:



Modified: trunk/repositories/dashboard.json
===================================================================
--- trunk/repositories/dashboard.json	2005-07-13 19:21:39 UTC (rev 234)
+++ trunk/repositories/dashboard.json	2005-07-13 19:23:39 UTC (rev 235)
@@ -1748,4 +1748,344 @@
            "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
            "item": ["12afdd80-e993-11d9-b345-e24829d2f59b", "f76b0cd0-f3d2-11d9-972b-e24829d2f59b"],
       "attribute": ["86e20770-e991-11d9-9146-e24829d2f59b", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+  },
+  // =======================================================================
+  { "Transaction": [
+    // -----------------------------------------------------------------------
+    // (Person: Mitch)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Item": { "uuid": "5d01fa40-f3d3-11d9-972b-e24829d2f59b" } },
+    // -----------------------------------------------------------------------
+    // (Person: Mitch).(Name) = "Mitch"
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "5d024860-f3d3-11d9-972b-e24829d2f59b",
+             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": "5d01fa40-f3d3-11d9-972b-e24829d2f59b",
+            "value": "Mitch"  }
+    },
+    // -----------------------------------------------------------------------
+    // (Person: Mitch).(Category) = (Category: Person)
+    // (Category: Person).(Items in Category) = (Person: Mitch)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "5d029680-f3d3-11d9-972b-e24829d2f59b",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["5d01fa40-f3d3-11d9-972b-e24829d2f59b", "00001201-ce7f-11d9-8cd5-0011113ae5d6"],
+        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    },
+    // -----------------------------------------------------------------------
+    // (???)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Item": { "uuid": "f57ecd30-f3d2-11d9-972b-e24829d2f59b" } },
+    // -----------------------------------------------------------------------
+    // (???).(Who) = (Person: Mitch)
+    // (Person: Mitch).(Items in Category) = (???)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "5d02e4a0-f3d3-11d9-972b-e24829d2f59b",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["f57ecd30-f3d2-11d9-972b-e24829d2f59b", "5d01fa40-f3d3-11d9-972b-e24829d2f59b"],
+        "attribute": ["41c86750-e992-11d9-9146-e24829d2f59b", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    },
+    // -----------------------------------------------------------------------
+    // (???).(Status) = (Status: Now)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "5d0359d0-f3d3-11d9-972b-e24829d2f59b",
+             "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "c1428740-e992-11d9-9146-e24829d2f59b",
+             "item": "f57ecd30-f3d2-11d9-972b-e24829d2f59b",
+            "value": "e1813a60-e992-11d9-b345-e24829d2f59b"  }
+    }  ]
+  },
+  // -----------------------------------------------------------------------
+  // (???).(About) = "1:1 - (write up mtg notes)"
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "62d697a0-f3d3-11d9-972b-e24829d2f59b",
+           "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "81b155c0-e992-11d9-9146-e24829d2f59b",
+           "item": "f57ecd30-f3d2-11d9-972b-e24829d2f59b",
+          "value": "1:1 - (write up mtg notes)"  }
+  },
+  // -----------------------------------------------------------------------
+  // (???).(Calendar) = (Calendar Status: Confirmed)
+  // (Calendar Status: Confirmed).(Items in Category) = (???)
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "648ea7e0-f3d3-11d9-972b-e24829d2f59b",
+           "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+           "item": ["f57ecd30-f3d2-11d9-972b-e24829d2f59b", "1c3d6430-e993-11d9-b345-e24829d2f59b"],
+      "attribute": ["94845da0-e992-11d9-9146-e24829d2f59b", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+  },
+  // -----------------------------------------------------------------------
+  // (???).(When) = "Mon Apr 25 2005 00:00:00 GMT-0700 (PDT)"
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "6ae28760-f3d3-11d9-972b-e24829d2f59b",
+           "type": "00001022-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "9e90ff60-e992-11d9-9146-e24829d2f59b",
+           "item": "f57ecd30-f3d2-11d9-972b-e24829d2f59b",
+          "value": "Mon Apr 25 2005 00:00:00 GMT-0700 (PDT)"  }
+  },
+  // =======================================================================
+  { "Transaction": [
+    // -----------------------------------------------------------------------
+    // (???)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Item": { "uuid": "5d107930-f3d3-11d9-972b-e24829d2f59b" } },
+    // -----------------------------------------------------------------------
+    // (???).(Mail) = (Mail Status: from:)
+    // (Mail Status: from:).(Items in Category) = (???)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "70044f80-f3d3-11d9-972b-e24829d2f59b",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["5d107930-f3d3-11d9-972b-e24829d2f59b", "f76b0cd0-f3d2-11d9-972b-e24829d2f59b"],
+        "attribute": ["86e20770-e991-11d9-9146-e24829d2f59b", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    },
+    // -----------------------------------------------------------------------
+    // (???).(Status) = (Status: Now)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "7004c4b0-f3d3-11d9-972b-e24829d2f59b",
+             "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "c1428740-e992-11d9-9146-e24829d2f59b",
+             "item": "5d107930-f3d3-11d9-972b-e24829d2f59b",
+            "value": "e1813a60-e992-11d9-b345-e24829d2f59b"  }
+    }  ]
+  },
+  // =======================================================================
+  { "Transaction": [
+    // -----------------------------------------------------------------------
+    // (Person: Rob)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Item": { "uuid": "7291b120-f3d3-11d9-972b-e24829d2f59b" } },
+    // -----------------------------------------------------------------------
+    // (Person: Rob).(Name) = "Rob"
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "7291ff40-f3d3-11d9-972b-e24829d2f59b",
+             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": "7291b120-f3d3-11d9-972b-e24829d2f59b",
+            "value": "Rob"  }
+    },
+    // -----------------------------------------------------------------------
+    // (Person: Rob).(Category) = (Category: Person)
+    // (Category: Person).(Items in Category) = (Person: Rob)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "72924d60-f3d3-11d9-972b-e24829d2f59b",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["7291b120-f3d3-11d9-972b-e24829d2f59b", "00001201-ce7f-11d9-8cd5-0011113ae5d6"],
+        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    },
+    // -----------------------------------------------------------------------
+    // (???).(Who) = (Person: Rob)
+    // (Person: Rob).(Items in Category) = (???)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "7292c290-f3d3-11d9-972b-e24829d2f59b",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["5d107930-f3d3-11d9-972b-e24829d2f59b", "7291b120-f3d3-11d9-972b-e24829d2f59b"],
+        "attribute": ["41c86750-e992-11d9-9146-e24829d2f59b", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    }  ]
+  },
+  // -----------------------------------------------------------------------
+  // (???).(About) = "Dinner"
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "73deca90-f3d3-11d9-972b-e24829d2f59b",
+           "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "81b155c0-e992-11d9-9146-e24829d2f59b",
+           "item": "5d107930-f3d3-11d9-972b-e24829d2f59b",
+          "value": "Dinner"  }
+  },
+  // -----------------------------------------------------------------------
+  // (???).(Calendar) = (Calendar Status: Confirmed)
+  // (Calendar Status: Confirmed).(Items in Category) = (???)
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "74ed2d50-f3d3-11d9-972b-e24829d2f59b",
+           "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+           "item": ["5d107930-f3d3-11d9-972b-e24829d2f59b", "1c3d6430-e993-11d9-b345-e24829d2f59b"],
+      "attribute": ["94845da0-e992-11d9-9146-e24829d2f59b", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+  },
+  // -----------------------------------------------------------------------
+  // (???).(When) = "Wed Apr 27 2005 00:00:00 GMT-0700 (PDT)"
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "7b4e7a50-f3d3-11d9-972b-e24829d2f59b",
+           "type": "00001022-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "9e90ff60-e992-11d9-9146-e24829d2f59b",
+           "item": "5d107930-f3d3-11d9-972b-e24829d2f59b",
+          "value": "Wed Apr 27 2005 00:00:00 GMT-0700 (PDT)"  }
+  },
+  // =======================================================================
+  { "Transaction": [
+    // -----------------------------------------------------------------------
+    // (Project: Home)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Item": { "uuid": "7dc60a00-f3d3-11d9-972b-e24829d2f59b" } },
+    // -----------------------------------------------------------------------
+    // (Project: Home).(Name) = "Home"
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "7dc65820-f3d3-11d9-972b-e24829d2f59b",
+             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": "7dc60a00-f3d3-11d9-972b-e24829d2f59b",
+            "value": "Home"  }
+    },
+    // -----------------------------------------------------------------------
+    // (Project: Home).(Category) = (Category: Project)
+    // (Category: Project).(Items in Category) = (Project: Home)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "7dc6a640-f3d3-11d9-972b-e24829d2f59b",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["7dc60a00-f3d3-11d9-972b-e24829d2f59b", "c299b2d0-e992-11d9-9146-e24829d2f59b"],
+        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    },
+    // -----------------------------------------------------------------------
+    // (???).(Project) = (Project: Home)
+    // (Project: Home).(Items in Category) = (???)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "7dc6f460-f3d3-11d9-972b-e24829d2f59b",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["5d107930-f3d3-11d9-972b-e24829d2f59b", "7dc60a00-f3d3-11d9-972b-e24829d2f59b"],
+        "attribute": ["ba630990-e992-11d9-9146-e24829d2f59b", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    }  ]
+  },
+  // =======================================================================
+  { "Transaction": [
+    // -----------------------------------------------------------------------
+    // (TaskType: Write-up)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Item": { "uuid": "80b561c0-f3d3-11d9-972b-e24829d2f59b" } },
+    // -----------------------------------------------------------------------
+    // (TaskType: Write-up).(Name) = "Write-up"
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "80b5afe0-f3d3-11d9-972b-e24829d2f59b",
+             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": "80b561c0-f3d3-11d9-972b-e24829d2f59b",
+            "value": "Write-up"  }
+    },
+    // -----------------------------------------------------------------------
+    // (TaskType: Write-up).(Category) = (Category: TaskType)
+    // (Category: TaskType).(Items in Category) = (TaskType: Write-up)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "80b5fe00-f3d3-11d9-972b-e24829d2f59b",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["80b561c0-f3d3-11d9-972b-e24829d2f59b", "b50873a0-e991-11d9-9146-e24829d2f59b"],
+        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    },
+    // -----------------------------------------------------------------------
+    // (???)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Item": { "uuid": "700bf0a0-f3d3-11d9-972b-e24829d2f59b" } },
+    // -----------------------------------------------------------------------
+    // (???).(Task) = (TaskType: Write-up)
+    // (TaskType: Write-up).(Items in Category) = (???)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "80b64c20-f3d3-11d9-972b-e24829d2f59b",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["700bf0a0-f3d3-11d9-972b-e24829d2f59b", "80b561c0-f3d3-11d9-972b-e24829d2f59b"],
+        "attribute": ["580b3700-e991-11d9-9146-e24829d2f59b", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    },
+    // -----------------------------------------------------------------------
+    // (???).(Status) = (Status: Now)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "80b6c150-f3d3-11d9-972b-e24829d2f59b",
+             "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "c1428740-e992-11d9-9146-e24829d2f59b",
+             "item": "700bf0a0-f3d3-11d9-972b-e24829d2f59b",
+            "value": "e1813a60-e992-11d9-b345-e24829d2f59b"  }
+    }  ]
+  },
+  // -----------------------------------------------------------------------
+  // (???).(Who) = (Person: Philippe)
+  // (Person: Philippe).(Items in Category) = (???)
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "8358bc60-f3d3-11d9-972b-e24829d2f59b",
+           "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+           "item": ["700bf0a0-f3d3-11d9-972b-e24829d2f59b", "f9f9a6f0-f3d2-11d9-972b-e24829d2f59b"],
+      "attribute": ["41c86750-e992-11d9-9146-e24829d2f59b", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+  },
+  // -----------------------------------------------------------------------
+  // (???).(About) = "1:1 - preparing agenda"
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "875c4340-f3d3-11d9-972b-e24829d2f59b",
+           "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "81b155c0-e992-11d9-9146-e24829d2f59b",
+           "item": "700bf0a0-f3d3-11d9-972b-e24829d2f59b",
+          "value": "1:1 - preparing agenda"  }
+  },
+  // -----------------------------------------------------------------------
+  // (???).(Calendar) = (Calendar Status: Confirmed)
+  // (Calendar Status: Confirmed).(Items in Category) = (???)
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "882622f0-f3d3-11d9-972b-e24829d2f59b",
+           "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+           "item": ["700bf0a0-f3d3-11d9-972b-e24829d2f59b", "1c3d6430-e993-11d9-b345-e24829d2f59b"],
+      "attribute": ["94845da0-e992-11d9-9146-e24829d2f59b", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+  },
+  // -----------------------------------------------------------------------
+  // (???).(When) = "Thu Apr 28 2005 00:00:00 GMT-0700 (PDT)"
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "8a9c04f0-f3d3-11d9-972b-e24829d2f59b",
+           "type": "00001022-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "9e90ff60-e992-11d9-9146-e24829d2f59b",
+           "item": "700bf0a0-f3d3-11d9-972b-e24829d2f59b",
+          "value": "Thu Apr 28 2005 00:00:00 GMT-0700 (PDT)"  }
+  },
+  // =======================================================================
+  { "Transaction": [
+    // -----------------------------------------------------------------------
+    // (Project: mgr)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Item": { "uuid": "91531310-f3d3-11d9-972b-e24829d2f59b" } },
+    // -----------------------------------------------------------------------
+    // (Project: mgr).(Name) = "mgr"
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "91536130-f3d3-11d9-972b-e24829d2f59b",
+             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": "91531310-f3d3-11d9-972b-e24829d2f59b",
+            "value": "mgr"  }
+    },
+    // -----------------------------------------------------------------------
+    // (Project: mgr).(Category) = (Category: Project)
+    // (Category: Project).(Items in Category) = (Project: mgr)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "9153af50-f3d3-11d9-972b-e24829d2f59b",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["91531310-f3d3-11d9-972b-e24829d2f59b", "c299b2d0-e992-11d9-9146-e24829d2f59b"],
+        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    },
+    // -----------------------------------------------------------------------
+    // (???).(Project) = (Project: mgr)
+    // (Project: mgr).(Items in Category) = (???)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "9153fd70-f3d3-11d9-972b-e24829d2f59b",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["700bf0a0-f3d3-11d9-972b-e24829d2f59b", "91531310-f3d3-11d9-972b-e24829d2f59b"],
+        "attribute": ["ba630990-e992-11d9-9146-e24829d2f59b", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    }  ]
   }
\ No newline at end of file



From chaolam at berlios.de  Wed Jul 13 21:25:08 2005
From: chaolam at berlios.de (Chih-Chao Lam at BerliOS)
Date: Wed, 13 Jul 2005 21:25:08 +0200
Subject: [openrecord-svn] r236 - trunk/repositories
Message-ID: <200507131925.j6DJP8bZ027211@sheep.berlios.de>

Author: chaolam
Date: 2005-07-13 21:25:08 +0200 (Wed, 13 Jul 2005)
New Revision: 236

Modified:
   trunk/repositories/dashboard.json
Log:


Modified: trunk/repositories/dashboard.json
===================================================================
--- trunk/repositories/dashboard.json	2005-07-13 19:23:39 UTC (rev 235)
+++ trunk/repositories/dashboard.json	2005-07-13 19:25:08 UTC (rev 236)
@@ -2088,4 +2088,232 @@
              "item": ["700bf0a0-f3d3-11d9-972b-e24829d2f59b", "91531310-f3d3-11d9-972b-e24829d2f59b"],
         "attribute": ["ba630990-e992-11d9-9146-e24829d2f59b", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
     }  ]
+  },
+  // =======================================================================
+  { "Transaction": [
+    // -----------------------------------------------------------------------
+    // (Layout Data: Layout data for Table of New Section)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Item": { "uuid": "a210cf80-f3d3-11d9-972b-e24829d2f59b" } },
+    // -----------------------------------------------------------------------
+    // (Layout Data: Layout data for Table of New Section).(Name) = "Layout data for Table of New Section"
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "a2111da0-f3d3-11d9-972b-e24829d2f59b",
+             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": "a210cf80-f3d3-11d9-972b-e24829d2f59b",
+            "value": "Layout data for Table of New Section"  }
+    },
+    // -----------------------------------------------------------------------
+    // (Layout Data: Layout data for Table of New Section).(Category) = (Category: Layout Data)
+    // (Category: Layout Data).(Items in Category) = (Layout Data: Layout data for Table of New Section)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "a21192d0-f3d3-11d9-972b-e24829d2f59b",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["a210cf80-f3d3-11d9-972b-e24829d2f59b", "00040202-ce7f-11d9-8cd5-0011113ae5d6"],
+        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    },
+    // -----------------------------------------------------------------------
+    // (Layout Data: Layout data for Table of New Section).(Applies To Plugin) = (Plugin View: Table)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "a211e0f0-f3d3-11d9-972b-e24829d2f59b",
+             "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "00040103-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": "a210cf80-f3d3-11d9-972b-e24829d2f59b",
+            "value": "00040301-ce7f-11d9-8cd5-0011113ae5d6"  }
+    },
+    // -----------------------------------------------------------------------
+    // (Section: New Section).(Layout Data) = (Layout Data: Layout data for Table of New Section)
+    // (Layout Data: Layout data for Table of New Section).(Section this layout data belongs to) = (Section: New Section)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "a2122f10-f3d3-11d9-972b-e24829d2f59b",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["a1fbe7f0-f3d3-11d9-972b-e24829d2f59b", "a210cf80-f3d3-11d9-972b-e24829d2f59b"],
+        "attribute": ["00040102-ce7f-11d9-8cd5-0011113ae5d6", "00040104-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    }  ]
+  },
+  // =======================================================================
+  { "Transaction": [
+    // -----------------------------------------------------------------------
+    // (Section: New Section)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Item": { "uuid": "a1fbe7f0-f3d3-11d9-972b-e24829d2f59b" } },
+    // -----------------------------------------------------------------------
+    // (Section: New Section).(Name) = "New Section"
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "a1fc3610-f3d3-11d9-972b-e24829d2f59b",
+             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": "a1fbe7f0-f3d3-11d9-972b-e24829d2f59b",
+            "value": "New Section"  }
+    },
+    // -----------------------------------------------------------------------
+    // (Section: New Section).(Category) = (Category: Section)
+    // (Category: Section).(Items in Category) = (Section: New Section)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "a1fc8430-f3d3-11d9-972b-e24829d2f59b",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["a1fbe7f0-f3d3-11d9-972b-e24829d2f59b", "00020100-ce7f-11d9-8cd5-0011113ae5d6"],
+        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    },
+    // -----------------------------------------------------------------------
+    // (Page: Dashboard View).(Sections In Page) = (Section: New Section)
+    // (Section: New Section).(Page this section appears on) = (Page: Dashboard View)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "a1fcf960-f3d3-11d9-972b-e24829d2f59b",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["99e90d10-e990-11d9-b90a-e24829d2f59b", "a1fbe7f0-f3d3-11d9-972b-e24829d2f59b"],
+        "attribute": ["00030000-ce7f-11d9-8cd5-0011113ae5d6", "00030001-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    },
+    // -----------------------------------------------------------------------
+    // (Section: New Section).(Plugin View) = (Plugin View: Table)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "a1fd4780-f3d3-11d9-972b-e24829d2f59b",
+             "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "00040101-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": "a1fbe7f0-f3d3-11d9-972b-e24829d2f59b",
+            "value": "00040301-ce7f-11d9-8cd5-0011113ae5d6"  }
+    },
+    // -----------------------------------------------------------------------
+    // (Query Spec: New Query)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Item": { "uuid": "a1fd95a0-f3d3-11d9-972b-e24829d2f59b" } },
+    // -----------------------------------------------------------------------
+    // (Query Spec: New Query).(Name) = "New Query"
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "a1fde3c0-f3d3-11d9-972b-e24829d2f59b",
+             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": "a1fd95a0-f3d3-11d9-972b-e24829d2f59b",
+            "value": "New Query"  }
+    },
+    // -----------------------------------------------------------------------
+    // (Query Spec: New Query).(Category) = (Category: Query Spec)
+    // (Category: Query Spec).(Items in Category) = (Query Spec: New Query)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "a1fe31e0-f3d3-11d9-972b-e24829d2f59b",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["a1fd95a0-f3d3-11d9-972b-e24829d2f59b", "00001212-ce7f-11d9-8cd5-0011113ae5d6"],
+        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    },
+    // -----------------------------------------------------------------------
+    // (Section: New Section).(Query Spec) = (Query Spec: New Query)
+    // (Query Spec: New Query).(Section this query spec belongs to) = (Section: New Section)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "a1fe8000-f3d3-11d9-972b-e24829d2f59b",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["a1fbe7f0-f3d3-11d9-972b-e24829d2f59b", "a1fd95a0-f3d3-11d9-972b-e24829d2f59b"],
+        "attribute": ["00001006-ce7f-11d9-8cd5-0011113ae5d6", "00040105-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    }  ]
+  },
+  // -----------------------------------------------------------------------
+  // (Layout Data: Layout data for Table of New Section).(Table Columns) = (Attribute: Task)
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "a89cfd10-f3d3-11d9-972b-e24829d2f59b",
+           "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "0004010a-ce7f-11d9-8cd5-0011113ae5d6",
+           "item": "a210cf80-f3d3-11d9-972b-e24829d2f59b",
+          "value": "580b3700-e991-11d9-9146-e24829d2f59b"  }
+  },
+  // -----------------------------------------------------------------------
+  // (Layout Data: Layout data for Table of New Section).(Table Columns) = (Attribute: Mail)
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "ab42efc0-f3d3-11d9-972b-e24829d2f59b",
+           "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "0004010a-ce7f-11d9-8cd5-0011113ae5d6",
+           "item": "a210cf80-f3d3-11d9-972b-e24829d2f59b",
+          "value": "86e20770-e991-11d9-9146-e24829d2f59b"  }
+  },
+  // -----------------------------------------------------------------------
+  // (Layout Data: Layout data for Table of New Section).(Table Columns) = (Attribute: Who)
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "ad7a4220-f3d3-11d9-972b-e24829d2f59b",
+           "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "0004010a-ce7f-11d9-8cd5-0011113ae5d6",
+           "item": "a210cf80-f3d3-11d9-972b-e24829d2f59b",
+          "value": "41c86750-e992-11d9-9146-e24829d2f59b"  }
+  },
+  // -----------------------------------------------------------------------
+  // (Layout Data: Layout data for Table of New Section).(Table Columns) = (Attribute: About)
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "b003d330-f3d3-11d9-972b-e24829d2f59b",
+           "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "0004010a-ce7f-11d9-8cd5-0011113ae5d6",
+           "item": "a210cf80-f3d3-11d9-972b-e24829d2f59b",
+          "value": "81b155c0-e992-11d9-9146-e24829d2f59b"  }
+  },
+  // -----------------------------------------------------------------------
+  // (Layout Data: Layout data for Table of New Section).(Table Columns) = (Attribute: Calendar)
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "b24d9c20-f3d3-11d9-972b-e24829d2f59b",
+           "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "0004010a-ce7f-11d9-8cd5-0011113ae5d6",
+           "item": "a210cf80-f3d3-11d9-972b-e24829d2f59b",
+          "value": "94845da0-e992-11d9-9146-e24829d2f59b"  }
+  },
+  // -----------------------------------------------------------------------
+  // (Layout Data: Layout data for Table of New Section).(Table Columns) = (Attribute: When)
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "b5082840-f3d3-11d9-972b-e24829d2f59b",
+           "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "0004010a-ce7f-11d9-8cd5-0011113ae5d6",
+           "item": "a210cf80-f3d3-11d9-972b-e24829d2f59b",
+          "value": "9e90ff60-e992-11d9-9146-e24829d2f59b"  }
+  },
+  // -----------------------------------------------------------------------
+  // (Layout Data: Layout data for Table of New Section).(Table Columns) = (Attribute: Project)
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "b8022e60-f3d3-11d9-972b-e24829d2f59b",
+           "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "0004010a-ce7f-11d9-8cd5-0011113ae5d6",
+           "item": "a210cf80-f3d3-11d9-972b-e24829d2f59b",
+          "value": "ba630990-e992-11d9-9146-e24829d2f59b"  }
+  },
+  // -----------------------------------------------------------------------
+  // (Layout Data: Layout data for Table of New Section).(Table Columns) = (Attribute: Status)
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "ba7d4080-f3d3-11d9-972b-e24829d2f59b",
+           "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "0004010a-ce7f-11d9-8cd5-0011113ae5d6",
+           "item": "a210cf80-f3d3-11d9-972b-e24829d2f59b",
+          "value": "c1428740-e992-11d9-9146-e24829d2f59b"  }
+  },
+  // -----------------------------------------------------------------------
+  // (Query Spec: New Query).(Matching Attribute) = (Attribute: Status)
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "bdf32d60-f3d3-11d9-972b-e24829d2f59b",
+           "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "00001008-ce7f-11d9-8cd5-0011113ae5d6",
+           "item": "a1fd95a0-f3d3-11d9-972b-e24829d2f59b",
+          "value": "c1428740-e992-11d9-9146-e24829d2f59b"  }
+  },
+  // -----------------------------------------------------------------------
+  // (Query Spec: New Query).(Matching Value) = (Status: Later)
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "c17e7700-f3d3-11d9-972b-e24829d2f59b",
+           "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "00001007-ce7f-11d9-8cd5-0011113ae5d6",
+           "item": "a1fd95a0-f3d3-11d9-972b-e24829d2f59b",
+          "value": "e3a10d20-e992-11d9-b345-e24829d2f59b"  }
   }
\ No newline at end of file



From chaolam at berlios.de  Wed Jul 13 21:28:47 2005
From: chaolam at berlios.de (Chih-Chao Lam at BerliOS)
Date: Wed, 13 Jul 2005 21:28:47 +0200
Subject: [openrecord-svn] r237 - trunk/repositories
Message-ID: <200507131928.j6DJSl4s027658@sheep.berlios.de>

Author: chaolam
Date: 2005-07-13 21:28:47 +0200 (Wed, 13 Jul 2005)
New Revision: 237

Modified:
   trunk/repositories/dashboard.json
Log:


Modified: trunk/repositories/dashboard.json
===================================================================
--- trunk/repositories/dashboard.json	2005-07-13 19:25:08 UTC (rev 236)
+++ trunk/repositories/dashboard.json	2005-07-13 19:28:47 UTC (rev 237)
@@ -2316,4 +2316,568 @@
       "attribute": "00001007-ce7f-11d9-8cd5-0011113ae5d6",
            "item": "a1fd95a0-f3d3-11d9-972b-e24829d2f59b",
           "value": "e3a10d20-e992-11d9-b345-e24829d2f59b"  }
+  },
+  // =======================================================================
+  { "Transaction": [
+    // -----------------------------------------------------------------------
+    // (Mail Status: Draft)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Item": { "uuid": "d8b4d900-f3d3-11d9-972b-e24829d2f59b" } },
+    // -----------------------------------------------------------------------
+    // (Mail Status: Draft).(Name) = "Draft"
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "d8b52720-f3d3-11d9-972b-e24829d2f59b",
+             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": "d8b4d900-f3d3-11d9-972b-e24829d2f59b",
+            "value": "Draft"  }
+    },
+    // -----------------------------------------------------------------------
+    // (Mail Status: Draft).(Category) = (Category: Mail Status)
+    // (Category: Mail Status).(Items in Category) = (Mail Status: Draft)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "d8b59c50-f3d3-11d9-972b-e24829d2f59b",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["d8b4d900-f3d3-11d9-972b-e24829d2f59b", "470c5d70-e992-11d9-9146-e24829d2f59b"],
+        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    },
+    // -----------------------------------------------------------------------
+    // (???)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Item": { "uuid": "c1ad2820-f3d3-11d9-972b-e24829d2f59b" } },
+    // -----------------------------------------------------------------------
+    // (???).(Mail) = (Mail Status: Draft)
+    // (Mail Status: Draft).(Items in Category) = (???)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "d8b5ea70-f3d3-11d9-972b-e24829d2f59b",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["c1ad2820-f3d3-11d9-972b-e24829d2f59b", "d8b4d900-f3d3-11d9-972b-e24829d2f59b"],
+        "attribute": ["86e20770-e991-11d9-9146-e24829d2f59b", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    },
+    // -----------------------------------------------------------------------
+    // (???).(Status) = (Status: Later)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "d8b65fa0-f3d3-11d9-972b-e24829d2f59b",
+             "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "c1428740-e992-11d9-9146-e24829d2f59b",
+             "item": "c1ad2820-f3d3-11d9-972b-e24829d2f59b",
+            "value": "e3a10d20-e992-11d9-b345-e24829d2f59b"  }
+    }  ]
+  },
+  // -----------------------------------------------------------------------
+  // (???).(Who) = (Person: Mimi)
+  // (Person: Mimi).(Items in Category) = (???)
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "db76df30-f3d3-11d9-972b-e24829d2f59b",
+           "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+           "item": ["c1ad2820-f3d3-11d9-972b-e24829d2f59b", "9c3596e0-dde4-11d9-9c71-b6ac85cc6d5f"],
+      "attribute": ["41c86750-e992-11d9-9146-e24829d2f59b", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+  },
+  // -----------------------------------------------------------------------
+  // (???).(About) = "Re: recurrence"
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "dd97ea70-f3d3-11d9-972b-e24829d2f59b",
+           "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "81b155c0-e992-11d9-9146-e24829d2f59b",
+           "item": "c1ad2820-f3d3-11d9-972b-e24829d2f59b",
+          "value": "Re: recurrence"  }
+  },
+  // =======================================================================
+  { "Transaction": [
+    // -----------------------------------------------------------------------
+    // (Calendar Status: Tickled)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Item": { "uuid": "e1832e60-f3d3-11d9-972b-e24829d2f59b" } },
+    // -----------------------------------------------------------------------
+    // (Calendar Status: Tickled).(Name) = "Tickled"
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "e1837c80-f3d3-11d9-972b-e24829d2f59b",
+             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": "e1832e60-f3d3-11d9-972b-e24829d2f59b",
+            "value": "Tickled"  }
+    },
+    // -----------------------------------------------------------------------
+    // (Calendar Status: Tickled).(Category) = (Category: Calendar Status)
+    // (Category: Calendar Status).(Items in Category) = (Calendar Status: Tickled)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "e183f1b0-f3d3-11d9-972b-e24829d2f59b",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["e1832e60-f3d3-11d9-972b-e24829d2f59b", "a1a12590-e992-11d9-9146-e24829d2f59b"],
+        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    },
+    // -----------------------------------------------------------------------
+    // (???).(Calendar) = (Calendar Status: Tickled)
+    // (Calendar Status: Tickled).(Items in Category) = (???)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "e18466e0-f3d3-11d9-972b-e24829d2f59b",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["c1ad2820-f3d3-11d9-972b-e24829d2f59b", "e1832e60-f3d3-11d9-972b-e24829d2f59b"],
+        "attribute": ["94845da0-e992-11d9-9146-e24829d2f59b", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    }  ]
+  },
+  // -----------------------------------------------------------------------
+  // (???).(When) = "End-of-week"
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "e40b86f0-f3d3-11d9-972b-e24829d2f59b",
+           "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "9e90ff60-e992-11d9-9146-e24829d2f59b",
+           "item": "c1ad2820-f3d3-11d9-972b-e24829d2f59b",
+          "value": "End-of-week"  }
+  },
+  // =======================================================================
+  { "Transaction": [
+    // -----------------------------------------------------------------------
+    // (???)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Item": { "uuid": "d8c0e6f0-f3d3-11d9-972b-e24829d2f59b" } },
+    // -----------------------------------------------------------------------
+    // (???).(Mail) = (Mail Status: from:)
+    // (Mail Status: from:).(Items in Category) = (???)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "ea0119d0-f3d3-11d9-972b-e24829d2f59b",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["d8c0e6f0-f3d3-11d9-972b-e24829d2f59b", "f76b0cd0-f3d2-11d9-972b-e24829d2f59b"],
+        "attribute": ["86e20770-e991-11d9-9146-e24829d2f59b", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    },
+    // -----------------------------------------------------------------------
+    // (???).(Status) = (Status: Later)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "ea018f00-f3d3-11d9-972b-e24829d2f59b",
+             "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "c1428740-e992-11d9-9146-e24829d2f59b",
+             "item": "d8c0e6f0-f3d3-11d9-972b-e24829d2f59b",
+            "value": "e3a10d20-e992-11d9-b345-e24829d2f59b"  }
+    }  ]
+  },
+  // =======================================================================
+  { "Transaction": [
+    // -----------------------------------------------------------------------
+    // (Person: Lisa)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Item": { "uuid": "ec51c090-f3d3-11d9-972b-e24829d2f59b" } },
+    // -----------------------------------------------------------------------
+    // (Person: Lisa).(Name) = "Lisa"
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "ec520eb0-f3d3-11d9-972b-e24829d2f59b",
+             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": "ec51c090-f3d3-11d9-972b-e24829d2f59b",
+            "value": "Lisa"  }
+    },
+    // -----------------------------------------------------------------------
+    // (Person: Lisa).(Category) = (Category: Person)
+    // (Category: Person).(Items in Category) = (Person: Lisa)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "ec525cd0-f3d3-11d9-972b-e24829d2f59b",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["ec51c090-f3d3-11d9-972b-e24829d2f59b", "00001201-ce7f-11d9-8cd5-0011113ae5d6"],
+        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    },
+    // -----------------------------------------------------------------------
+    // (???).(Who) = (Person: Lisa)
+    // (Person: Lisa).(Items in Category) = (???)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "ec52d200-f3d3-11d9-972b-e24829d2f59b",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["d8c0e6f0-f3d3-11d9-972b-e24829d2f59b", "ec51c090-f3d3-11d9-972b-e24829d2f59b"],
+        "attribute": ["41c86750-e992-11d9-9146-e24829d2f59b", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    }  ]
+  },
+  // -----------------------------------------------------------------------
+  // (???).(About) = "[Dev] OSAF Status Overview, May 25"
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "f430d3f0-f3d3-11d9-972b-e24829d2f59b",
+           "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "81b155c0-e992-11d9-9146-e24829d2f59b",
+           "item": "d8c0e6f0-f3d3-11d9-972b-e24829d2f59b",
+          "value": "[Dev] OSAF Status Overview, May 25"  }
+  },
+  // -----------------------------------------------------------------------
+  // (???).(Calendar) = (Calendar Status: Tickled)
+  // (Calendar Status: Tickled).(Items in Category) = (???)
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "f5fc4520-f3d3-11d9-972b-e24829d2f59b",
+           "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+           "item": ["d8c0e6f0-f3d3-11d9-972b-e24829d2f59b", "e1832e60-f3d3-11d9-972b-e24829d2f59b"],
+      "attribute": ["94845da0-e992-11d9-9146-e24829d2f59b", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+  },
+  // -----------------------------------------------------------------------
+  // (???).(When) = "End-of-week"
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "f991c7f0-f3d3-11d9-972b-e24829d2f59b",
+           "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "9e90ff60-e992-11d9-9146-e24829d2f59b",
+           "item": "d8c0e6f0-f3d3-11d9-972b-e24829d2f59b",
+          "value": "End-of-week"  }
+  },
+  // =======================================================================
+  { "Transaction": [
+    // -----------------------------------------------------------------------
+    // (???)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Item": { "uuid": "ea0845c0-f3d3-11d9-972b-e24829d2f59b" } },
+    // -----------------------------------------------------------------------
+    // (???).(Who) = (Person: Mitch)
+    // (Person: Mitch).(Items in Category) = (???)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "ff2d05d0-f3d3-11d9-972b-e24829d2f59b",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["ea0845c0-f3d3-11d9-972b-e24829d2f59b", "5d01fa40-f3d3-11d9-972b-e24829d2f59b"],
+        "attribute": ["41c86750-e992-11d9-9146-e24829d2f59b", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    },
+    // -----------------------------------------------------------------------
+    // (???).(Status) = (Status: Later)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "ff2d7b00-f3d3-11d9-972b-e24829d2f59b",
+             "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "c1428740-e992-11d9-9146-e24829d2f59b",
+             "item": "ea0845c0-f3d3-11d9-972b-e24829d2f59b",
+            "value": "e3a10d20-e992-11d9-b345-e24829d2f59b"  }
+    }  ]
+  },
+  // -----------------------------------------------------------------------
+  // (???).(About) = "1:1 - (prepare agenda)"
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "03f87090-f3d4-11d9-972b-e24829d2f59b",
+           "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "81b155c0-e992-11d9-9146-e24829d2f59b",
+           "item": "ea0845c0-f3d3-11d9-972b-e24829d2f59b",
+          "value": "1:1 - (prepare agenda)"  }
+  },
+  // -----------------------------------------------------------------------
+  // (???).(Calendar) = (Calendar Status: Confirmed)
+  // (Calendar Status: Confirmed).(Items in Category) = (???)
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "04c9ca50-f3d4-11d9-972b-e24829d2f59b",
+           "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+           "item": ["ea0845c0-f3d3-11d9-972b-e24829d2f59b", "1c3d6430-e993-11d9-b345-e24829d2f59b"],
+      "attribute": ["94845da0-e992-11d9-9146-e24829d2f59b", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+  },
+  // -----------------------------------------------------------------------
+  // (???).(When) = "Mondays 3-4pm"
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "07e959d0-f3d4-11d9-972b-e24829d2f59b",
+           "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "9e90ff60-e992-11d9-9146-e24829d2f59b",
+           "item": "ea0845c0-f3d3-11d9-972b-e24829d2f59b",
+          "value": "Mondays 3-4pm"  }
+  },
+  // =======================================================================
+  { "Transaction": [
+    // -----------------------------------------------------------------------
+    // (???)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Item": { "uuid": "ff36f0e0-f3d3-11d9-972b-e24829d2f59b" } },
+    // -----------------------------------------------------------------------
+    // (???).(Mail) = (Mail Status: from:)
+    // (Mail Status: from:).(Items in Category) = (???)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "0c5dcaf0-f3d4-11d9-972b-e24829d2f59b",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["ff36f0e0-f3d3-11d9-972b-e24829d2f59b", "f76b0cd0-f3d2-11d9-972b-e24829d2f59b"],
+        "attribute": ["86e20770-e991-11d9-9146-e24829d2f59b", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    },
+    // -----------------------------------------------------------------------
+    // (???).(Status) = (Status: Later)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "0c5e1910-f3d4-11d9-972b-e24829d2f59b",
+             "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "c1428740-e992-11d9-9146-e24829d2f59b",
+             "item": "ff36f0e0-f3d3-11d9-972b-e24829d2f59b",
+            "value": "e3a10d20-e992-11d9-b345-e24829d2f59b"  }
+    }  ]
+  },
+  // -----------------------------------------------------------------------
+  // (???).(Who) = (Person: Rob)
+  // (Person: Rob).(Items in Category) = (???)
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "11a2f990-f3d4-11d9-972b-e24829d2f59b",
+           "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+           "item": ["ff36f0e0-f3d3-11d9-972b-e24829d2f59b", "7291b120-f3d3-11d9-972b-e24829d2f59b"],
+      "attribute": ["41c86750-e992-11d9-9146-e24829d2f59b", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+  },
+  // -----------------------------------------------------------------------
+  // (???).(About) = "Dinner"
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "13aef630-f3d4-11d9-972b-e24829d2f59b",
+           "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "81b155c0-e992-11d9-9146-e24829d2f59b",
+           "item": "ff36f0e0-f3d3-11d9-972b-e24829d2f59b",
+          "value": "Dinner"  }
+  },
+  // -----------------------------------------------------------------------
+  // (???).(Calendar) = (Calendar Status: Confirmed)
+  // (Calendar Status: Confirmed).(Items in Category) = (???)
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "145fcfa0-f3d4-11d9-972b-e24829d2f59b",
+           "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+           "item": ["ff36f0e0-f3d3-11d9-972b-e24829d2f59b", "1c3d6430-e993-11d9-b345-e24829d2f59b"],
+      "attribute": ["94845da0-e992-11d9-9146-e24829d2f59b", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+  },
+  // -----------------------------------------------------------------------
+  // (???).(When) = "Weds 7-9pm"
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "1aeb12d0-f3d4-11d9-972b-e24829d2f59b",
+           "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "9e90ff60-e992-11d9-9146-e24829d2f59b",
+           "item": "ff36f0e0-f3d3-11d9-972b-e24829d2f59b",
+          "value": "Weds 7-9pm"  }
+  },
+  // -----------------------------------------------------------------------
+  // (???).(Project) = (Project: Home)
+  // (Project: Home).(Items in Category) = (???)
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "1c219700-f3d4-11d9-972b-e24829d2f59b",
+           "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+           "item": ["ff36f0e0-f3d3-11d9-972b-e24829d2f59b", "7dc60a00-f3d3-11d9-972b-e24829d2f59b"],
+      "attribute": ["ba630990-e992-11d9-9146-e24829d2f59b", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+  },
+  // =======================================================================
+  { "Transaction": [
+    // -----------------------------------------------------------------------
+    // (TaskType: Action)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Item": { "uuid": "20722c70-f3d4-11d9-972b-e24829d2f59b" } },
+    // -----------------------------------------------------------------------
+    // (TaskType: Action).(Name) = "Action"
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "20727a90-f3d4-11d9-972b-e24829d2f59b",
+             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": "20722c70-f3d4-11d9-972b-e24829d2f59b",
+            "value": "Action"  }
+    },
+    // -----------------------------------------------------------------------
+    // (TaskType: Action).(Category) = (Category: TaskType)
+    // (Category: TaskType).(Items in Category) = (TaskType: Action)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "2072c8b0-f3d4-11d9-972b-e24829d2f59b",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["20722c70-f3d4-11d9-972b-e24829d2f59b", "b50873a0-e991-11d9-9146-e24829d2f59b"],
+        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    },
+    // -----------------------------------------------------------------------
+    // (???)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Item": { "uuid": "0c64f6e0-f3d4-11d9-972b-e24829d2f59b" } },
+    // -----------------------------------------------------------------------
+    // (???).(Task) = (TaskType: Action)
+    // (TaskType: Action).(Items in Category) = (???)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "20733de0-f3d4-11d9-972b-e24829d2f59b",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["0c64f6e0-f3d4-11d9-972b-e24829d2f59b", "20722c70-f3d4-11d9-972b-e24829d2f59b"],
+        "attribute": ["580b3700-e991-11d9-9146-e24829d2f59b", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    },
+    // -----------------------------------------------------------------------
+    // (???).(Status) = (Status: Later)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "20738c00-f3d4-11d9-972b-e24829d2f59b",
+             "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "c1428740-e992-11d9-9146-e24829d2f59b",
+             "item": "0c64f6e0-f3d4-11d9-972b-e24829d2f59b",
+            "value": "e3a10d20-e992-11d9-b345-e24829d2f59b"  }
+    }  ]
+  },
+  // -----------------------------------------------------------------------
+  // (???).(Mail) = (Mail Status: from:)
+  // (Mail Status: from:).(Items in Category) = (???)
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "21538bc0-f3d4-11d9-972b-e24829d2f59b",
+           "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+           "item": ["0c64f6e0-f3d4-11d9-972b-e24829d2f59b", "f76b0cd0-f3d2-11d9-972b-e24829d2f59b"],
+      "attribute": ["86e20770-e991-11d9-9146-e24829d2f59b", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+  },
+  // -----------------------------------------------------------------------
+  // (???).(Who) = (Person: Marty)
+  // (Person: Marty).(Items in Category) = (???)
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "22d549c0-f3d4-11d9-972b-e24829d2f59b",
+           "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+           "item": ["0c64f6e0-f3d4-11d9-972b-e24829d2f59b", "a00bf340-dde4-11d9-9c71-dae11c269bc7"],
+      "attribute": ["41c86750-e992-11d9-9146-e24829d2f59b", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+  },
+  // -----------------------------------------------------------------------
+  { "Vote": {                                              // vote to DELETE connection between "(no name)" and "Marty"
+           "uuid": "24a10910-f3d4-11d9-972b-e24829d2f59b",
+         "record": "22d549c0-f3d4-11d9-972b-e24829d2f59b",
+     "retainFlag": "false"  }
+  },
+  // -----------------------------------------------------------------------
+  // (???).(Who) = (Person: Mitch)
+  // (Person: Mitch).(Items in Category) = (???)
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "28527850-f3d4-11d9-972b-e24829d2f59b",
+           "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+           "item": ["0c64f6e0-f3d4-11d9-972b-e24829d2f59b", "5d01fa40-f3d3-11d9-972b-e24829d2f59b"],
+      "attribute": ["41c86750-e992-11d9-9146-e24829d2f59b", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+  },
+  // -----------------------------------------------------------------------
+  // (???).(About) = "Re: Sec 508 and accessibility issues"
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "3061ea80-f3d4-11d9-972b-e24829d2f59b",
+           "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "81b155c0-e992-11d9-9146-e24829d2f59b",
+           "item": "0c64f6e0-f3d4-11d9-972b-e24829d2f59b",
+          "value": "Re: Sec 508 and accessibility issues"  }
+  },
+  // -----------------------------------------------------------------------
+  // (???).(Calendar) = (Calendar Status: Tickled)
+  // (Calendar Status: Tickled).(Items in Category) = (???)
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "318ef8d0-f3d4-11d9-972b-e24829d2f59b",
+           "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+           "item": ["0c64f6e0-f3d4-11d9-972b-e24829d2f59b", "e1832e60-f3d3-11d9-972b-e24829d2f59b"],
+      "attribute": ["94845da0-e992-11d9-9146-e24829d2f59b", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+  },
+  // -----------------------------------------------------------------------
+  // (???).(When) = "Next month"
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "36912b00-f3d4-11d9-972b-e24829d2f59b",
+           "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "9e90ff60-e992-11d9-9146-e24829d2f59b",
+           "item": "0c64f6e0-f3d4-11d9-972b-e24829d2f59b",
+          "value": "Next month"  }
+  },
+  // -----------------------------------------------------------------------
+  // (???).(Project) = (Project: Accessibility)
+  // (Project: Accessibility).(Items in Category) = (???)
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "39513560-f3d4-11d9-972b-e24829d2f59b",
+           "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+           "item": ["0c64f6e0-f3d4-11d9-972b-e24829d2f59b", "2120ead0-e993-11d9-b345-e24829d2f59b"],
+      "attribute": ["ba630990-e992-11d9-9146-e24829d2f59b", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+  },
+  // =======================================================================
+  { "Transaction": [
+    // -----------------------------------------------------------------------
+    // (TaskType: Plan)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Item": { "uuid": "3d965920-f3d4-11d9-972b-e24829d2f59b" } },
+    // -----------------------------------------------------------------------
+    // (TaskType: Plan).(Name) = "Plan"
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "3d96a740-f3d4-11d9-972b-e24829d2f59b",
+             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": "3d965920-f3d4-11d9-972b-e24829d2f59b",
+            "value": "Plan"  }
+    },
+    // -----------------------------------------------------------------------
+    // (TaskType: Plan).(Category) = (Category: TaskType)
+    // (Category: TaskType).(Items in Category) = (TaskType: Plan)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "3d96f560-f3d4-11d9-972b-e24829d2f59b",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["3d965920-f3d4-11d9-972b-e24829d2f59b", "b50873a0-e991-11d9-9146-e24829d2f59b"],
+        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    },
+    // -----------------------------------------------------------------------
+    // (???)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Item": { "uuid": "2084f120-f3d4-11d9-972b-e24829d2f59b" } },
+    // -----------------------------------------------------------------------
+    // (???).(Task) = (TaskType: Plan)
+    // (TaskType: Plan).(Items in Category) = (???)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "3d974380-f3d4-11d9-972b-e24829d2f59b",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["2084f120-f3d4-11d9-972b-e24829d2f59b", "3d965920-f3d4-11d9-972b-e24829d2f59b"],
+        "attribute": ["580b3700-e991-11d9-9146-e24829d2f59b", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    },
+    // -----------------------------------------------------------------------
+    // (???).(Status) = (Status: Later)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "3d97b8b0-f3d4-11d9-972b-e24829d2f59b",
+             "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "c1428740-e992-11d9-9146-e24829d2f59b",
+             "item": "2084f120-f3d4-11d9-972b-e24829d2f59b",
+            "value": "e3a10d20-e992-11d9-b345-e24829d2f59b"  }
+    }  ]
+  },
+  // -----------------------------------------------------------------------
+  // (???).(About) = "Accessibility: get an owner"
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "43b78fe0-f3d4-11d9-972b-e24829d2f59b",
+           "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "81b155c0-e992-11d9-9146-e24829d2f59b",
+           "item": "2084f120-f3d4-11d9-972b-e24829d2f59b",
+          "value": "Accessibility: get an owner"  }
+  },
+  // -----------------------------------------------------------------------
+  // (???).(Calendar) = (Calendar Status: Tickled)
+  // (Calendar Status: Tickled).(Items in Category) = (???)
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "447f73c0-f3d4-11d9-972b-e24829d2f59b",
+           "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+           "item": ["2084f120-f3d4-11d9-972b-e24829d2f59b", "e1832e60-f3d3-11d9-972b-e24829d2f59b"],
+      "attribute": ["94845da0-e992-11d9-9146-e24829d2f59b", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+  },
+  // -----------------------------------------------------------------------
+  // (???).(When) = "Next month"
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "467eed40-f3d4-11d9-972b-e24829d2f59b",
+           "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "9e90ff60-e992-11d9-9146-e24829d2f59b",
+           "item": "2084f120-f3d4-11d9-972b-e24829d2f59b",
+          "value": "Next month"  }
+  },
+  // -----------------------------------------------------------------------
+  // (???).(Project) = (Project: Accessibility)
+  // (Project: Accessibility).(Items in Category) = (???)
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "47c4dac0-f3d4-11d9-972b-e24829d2f59b",
+           "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+           "item": ["2084f120-f3d4-11d9-972b-e24829d2f59b", "2120ead0-e993-11d9-b345-e24829d2f59b"],
+      "attribute": ["ba630990-e992-11d9-9146-e24829d2f59b", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
   }
\ No newline at end of file



From chaolam at berlios.de  Wed Jul 13 21:33:01 2005
From: chaolam at berlios.de (Chih-Chao Lam at BerliOS)
Date: Wed, 13 Jul 2005 21:33:01 +0200
Subject: [openrecord-svn] r238 - trunk/repositories
Message-ID: <200507131933.j6DJX1Ur028047@sheep.berlios.de>

Author: chaolam
Date: 2005-07-13 21:33:01 +0200 (Wed, 13 Jul 2005)
New Revision: 238

Modified:
   trunk/repositories/dashboard.json
Log:


Modified: trunk/repositories/dashboard.json
===================================================================
--- trunk/repositories/dashboard.json	2005-07-13 19:28:47 UTC (rev 237)
+++ trunk/repositories/dashboard.json	2005-07-13 19:33:01 UTC (rev 238)
@@ -2880,4 +2880,614 @@
            "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
            "item": ["2084f120-f3d4-11d9-972b-e24829d2f59b", "2120ead0-e993-11d9-b345-e24829d2f59b"],
       "attribute": ["ba630990-e992-11d9-9146-e24829d2f59b", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+  },
+  // =======================================================================
+  { "Transaction": [
+    // -----------------------------------------------------------------------
+    // (Layout Data: Layout data for Table of New Section)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Item": { "uuid": "589c60c0-f3d4-11d9-972b-e24829d2f59b" } },
+    // -----------------------------------------------------------------------
+    // (Layout Data: Layout data for Table of New Section).(Name) = "Layout data for Table of New Section"
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "589caee0-f3d4-11d9-972b-e24829d2f59b",
+             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": "589c60c0-f3d4-11d9-972b-e24829d2f59b",
+            "value": "Layout data for Table of New Section"  }
+    },
+    // -----------------------------------------------------------------------
+    // (Layout Data: Layout data for Table of New Section).(Category) = (Category: Layout Data)
+    // (Category: Layout Data).(Items in Category) = (Layout Data: Layout data for Table of New Section)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "589d2410-f3d4-11d9-972b-e24829d2f59b",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["589c60c0-f3d4-11d9-972b-e24829d2f59b", "00040202-ce7f-11d9-8cd5-0011113ae5d6"],
+        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    },
+    // -----------------------------------------------------------------------
+    // (Layout Data: Layout data for Table of New Section).(Applies To Plugin) = (Plugin View: Table)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "589d7230-f3d4-11d9-972b-e24829d2f59b",
+             "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "00040103-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": "589c60c0-f3d4-11d9-972b-e24829d2f59b",
+            "value": "00040301-ce7f-11d9-8cd5-0011113ae5d6"  }
+    },
+    // -----------------------------------------------------------------------
+    // (Section: New Section).(Layout Data) = (Layout Data: Layout data for Table of New Section)
+    // (Layout Data: Layout data for Table of New Section).(Section this layout data belongs to) = (Section: New Section)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "589dc050-f3d4-11d9-972b-e24829d2f59b",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["58855650-f3d4-11d9-972b-e24829d2f59b", "589c60c0-f3d4-11d9-972b-e24829d2f59b"],
+        "attribute": ["00040102-ce7f-11d9-8cd5-0011113ae5d6", "00040104-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    }  ]
+  },
+  // =======================================================================
+  { "Transaction": [
+    // -----------------------------------------------------------------------
+    // (Section: New Section)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Item": { "uuid": "58855650-f3d4-11d9-972b-e24829d2f59b" } },
+    // -----------------------------------------------------------------------
+    // (Section: New Section).(Name) = "New Section"
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "5885a470-f3d4-11d9-972b-e24829d2f59b",
+             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": "58855650-f3d4-11d9-972b-e24829d2f59b",
+            "value": "New Section"  }
+    },
+    // -----------------------------------------------------------------------
+    // (Section: New Section).(Category) = (Category: Section)
+    // (Category: Section).(Items in Category) = (Section: New Section)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "588619a0-f3d4-11d9-972b-e24829d2f59b",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["58855650-f3d4-11d9-972b-e24829d2f59b", "00020100-ce7f-11d9-8cd5-0011113ae5d6"],
+        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    },
+    // -----------------------------------------------------------------------
+    // (Page: Dashboard View).(Sections In Page) = (Section: New Section)
+    // (Section: New Section).(Page this section appears on) = (Page: Dashboard View)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "588667c0-f3d4-11d9-972b-e24829d2f59b",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["99e90d10-e990-11d9-b90a-e24829d2f59b", "58855650-f3d4-11d9-972b-e24829d2f59b"],
+        "attribute": ["00030000-ce7f-11d9-8cd5-0011113ae5d6", "00030001-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    },
+    // -----------------------------------------------------------------------
+    // (Section: New Section).(Plugin View) = (Plugin View: Table)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "5886b5e0-f3d4-11d9-972b-e24829d2f59b",
+             "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "00040101-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": "58855650-f3d4-11d9-972b-e24829d2f59b",
+            "value": "00040301-ce7f-11d9-8cd5-0011113ae5d6"  }
+    },
+    // -----------------------------------------------------------------------
+    // (Query Spec: New Query)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Item": { "uuid": "58888aa0-f3d4-11d9-972b-e24829d2f59b" } },
+    // -----------------------------------------------------------------------
+    // (Query Spec: New Query).(Name) = "New Query"
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "5889c320-f3d4-11d9-972b-e24829d2f59b",
+             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": "58888aa0-f3d4-11d9-972b-e24829d2f59b",
+            "value": "New Query"  }
+    },
+    // -----------------------------------------------------------------------
+    // (Query Spec: New Query).(Category) = (Category: Query Spec)
+    // (Category: Query Spec).(Items in Category) = (Query Spec: New Query)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "588a1140-f3d4-11d9-972b-e24829d2f59b",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["58888aa0-f3d4-11d9-972b-e24829d2f59b", "00001212-ce7f-11d9-8cd5-0011113ae5d6"],
+        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    },
+    // -----------------------------------------------------------------------
+    // (Section: New Section).(Query Spec) = (Query Spec: New Query)
+    // (Query Spec: New Query).(Section this query spec belongs to) = (Section: New Section)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "588a8670-f3d4-11d9-972b-e24829d2f59b",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["58855650-f3d4-11d9-972b-e24829d2f59b", "58888aa0-f3d4-11d9-972b-e24829d2f59b"],
+        "attribute": ["00001006-ce7f-11d9-8cd5-0011113ae5d6", "00040105-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    }  ]
+  },
+  // -----------------------------------------------------------------------
+  // (Query Spec: New Query).(Matching Attribute) = (Attribute: Status)
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "5ca7fdf0-f3d4-11d9-972b-e24829d2f59b",
+           "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "00001008-ce7f-11d9-8cd5-0011113ae5d6",
+           "item": "58888aa0-f3d4-11d9-972b-e24829d2f59b",
+          "value": "c1428740-e992-11d9-9146-e24829d2f59b"  }
+  },
+  // -----------------------------------------------------------------------
+  // (Query Spec: New Query).(Matching Value) = (Status: Done)
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "5f1a0f60-f3d4-11d9-972b-e24829d2f59b",
+           "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "00001007-ce7f-11d9-8cd5-0011113ae5d6",
+           "item": "58888aa0-f3d4-11d9-972b-e24829d2f59b",
+          "value": "e467df90-e992-11d9-b345-e24829d2f59b"  }
+  },
+  // -----------------------------------------------------------------------
+  // (Layout Data: Layout data for Table of New Section).(Table Columns) = (Attribute: Task)
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "6541aec0-f3d4-11d9-972b-e24829d2f59b",
+           "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "0004010a-ce7f-11d9-8cd5-0011113ae5d6",
+           "item": "589c60c0-f3d4-11d9-972b-e24829d2f59b",
+          "value": "580b3700-e991-11d9-9146-e24829d2f59b"  }
+  },
+  // -----------------------------------------------------------------------
+  // (Layout Data: Layout data for Table of New Section).(Table Columns) = (Attribute: Mail)
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "67a8eac0-f3d4-11d9-972b-e24829d2f59b",
+           "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "0004010a-ce7f-11d9-8cd5-0011113ae5d6",
+           "item": "589c60c0-f3d4-11d9-972b-e24829d2f59b",
+          "value": "86e20770-e991-11d9-9146-e24829d2f59b"  }
+  },
+  // -----------------------------------------------------------------------
+  // (Layout Data: Layout data for Table of New Section).(Table Columns) = (Attribute: Who)
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "6a300ad0-f3d4-11d9-972b-e24829d2f59b",
+           "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "0004010a-ce7f-11d9-8cd5-0011113ae5d6",
+           "item": "589c60c0-f3d4-11d9-972b-e24829d2f59b",
+          "value": "41c86750-e992-11d9-9146-e24829d2f59b"  }
+  },
+  // -----------------------------------------------------------------------
+  // (Layout Data: Layout data for Table of New Section).(Table Columns) = (Attribute: About)
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "6c6c8d50-f3d4-11d9-972b-e24829d2f59b",
+           "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "0004010a-ce7f-11d9-8cd5-0011113ae5d6",
+           "item": "589c60c0-f3d4-11d9-972b-e24829d2f59b",
+          "value": "81b155c0-e992-11d9-9146-e24829d2f59b"  }
+  },
+  // -----------------------------------------------------------------------
+  // (Layout Data: Layout data for Table of New Section).(Table Columns) = (Attribute: Calendar)
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "6efe82d0-f3d4-11d9-972b-e24829d2f59b",
+           "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "0004010a-ce7f-11d9-8cd5-0011113ae5d6",
+           "item": "589c60c0-f3d4-11d9-972b-e24829d2f59b",
+          "value": "94845da0-e992-11d9-9146-e24829d2f59b"  }
+  },
+  // -----------------------------------------------------------------------
+  // (Layout Data: Layout data for Table of New Section).(Table Columns) = (Attribute: When)
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "7127a460-f3d4-11d9-972b-e24829d2f59b",
+           "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "0004010a-ce7f-11d9-8cd5-0011113ae5d6",
+           "item": "589c60c0-f3d4-11d9-972b-e24829d2f59b",
+          "value": "9e90ff60-e992-11d9-9146-e24829d2f59b"  }
+  },
+  // -----------------------------------------------------------------------
+  // (Layout Data: Layout data for Table of New Section).(Table Columns) = (Attribute: Project)
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "734d91a0-f3d4-11d9-972b-e24829d2f59b",
+           "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "0004010a-ce7f-11d9-8cd5-0011113ae5d6",
+           "item": "589c60c0-f3d4-11d9-972b-e24829d2f59b",
+          "value": "ba630990-e992-11d9-9146-e24829d2f59b"  }
+  },
+  // -----------------------------------------------------------------------
+  // (Layout Data: Layout data for Table of New Section).(Table Columns) = (Attribute: Status)
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "7523d840-f3d4-11d9-972b-e24829d2f59b",
+           "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "0004010a-ce7f-11d9-8cd5-0011113ae5d6",
+           "item": "589c60c0-f3d4-11d9-972b-e24829d2f59b",
+          "value": "c1428740-e992-11d9-9146-e24829d2f59b"  }
+  },
+  // =======================================================================
+  { "Transaction": [
+    // -----------------------------------------------------------------------
+    // (???)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Item": { "uuid": "752ab610-f3d4-11d9-972b-e24829d2f59b" } },
+    // -----------------------------------------------------------------------
+    // (???).(Mail) = (Mail Status: from:)
+    // (Mail Status: from:).(Items in Category) = (???)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "811fc6e0-f3d4-11d9-972b-e24829d2f59b",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["752ab610-f3d4-11d9-972b-e24829d2f59b", "f76b0cd0-f3d2-11d9-972b-e24829d2f59b"],
+        "attribute": ["86e20770-e991-11d9-9146-e24829d2f59b", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    },
+    // -----------------------------------------------------------------------
+    // (???).(Status) = (Status: Done)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "81203c10-f3d4-11d9-972b-e24829d2f59b",
+             "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "c1428740-e992-11d9-9146-e24829d2f59b",
+             "item": "752ab610-f3d4-11d9-972b-e24829d2f59b",
+            "value": "e467df90-e992-11d9-b345-e24829d2f59b"  }
+    }  ]
+  },
+  // -----------------------------------------------------------------------
+  // (???).(Who) = (Person: Mitch)
+  // (Person: Mitch).(Items in Category) = (???)
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "834da360-f3d4-11d9-972b-e24829d2f59b",
+           "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+           "item": ["752ab610-f3d4-11d9-972b-e24829d2f59b", "5d01fa40-f3d3-11d9-972b-e24829d2f59b"],
+      "attribute": ["41c86750-e992-11d9-9146-e24829d2f59b", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+  },
+  // -----------------------------------------------------------------------
+  // (???).(About) = "Sec 508 and accessibility issues"
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "89096190-f3d4-11d9-972b-e24829d2f59b",
+           "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "81b155c0-e992-11d9-9146-e24829d2f59b",
+           "item": "752ab610-f3d4-11d9-972b-e24829d2f59b",
+          "value": "Sec 508 and accessibility issues"  }
+  },
+  // -----------------------------------------------------------------------
+  // (???).(When) = "Wed Apr 27 2005 00:00:00 GMT-0700 (PDT)"
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "8efb4af0-f3d4-11d9-972b-e24829d2f59b",
+           "type": "00001022-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "9e90ff60-e992-11d9-9146-e24829d2f59b",
+           "item": "752ab610-f3d4-11d9-972b-e24829d2f59b",
+          "value": "Wed Apr 27 2005 00:00:00 GMT-0700 (PDT)"  }
+  },
+  // -----------------------------------------------------------------------
+  // (???).(Project) = (Project: Accessibility)
+  // (Project: Accessibility).(Items in Category) = (???)
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "901371b0-f3d4-11d9-972b-e24829d2f59b",
+           "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+           "item": ["752ab610-f3d4-11d9-972b-e24829d2f59b", "2120ead0-e993-11d9-b345-e24829d2f59b"],
+      "attribute": ["ba630990-e992-11d9-9146-e24829d2f59b", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+  },
+  // =======================================================================
+  { "Transaction": [
+    // -----------------------------------------------------------------------
+    // (???)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Item": { "uuid": "812719e0-f3d4-11d9-972b-e24829d2f59b" } },
+    // -----------------------------------------------------------------------
+    // (???).(Mail) = (Mail Status: from:)
+    // (Mail Status: from:).(Items in Category) = (???)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "93274160-f3d4-11d9-972b-e24829d2f59b",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["812719e0-f3d4-11d9-972b-e24829d2f59b", "f76b0cd0-f3d2-11d9-972b-e24829d2f59b"],
+        "attribute": ["86e20770-e991-11d9-9146-e24829d2f59b", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    },
+    // -----------------------------------------------------------------------
+    // (???).(Status) = (Status: Done)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "9327b690-f3d4-11d9-972b-e24829d2f59b",
+             "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "c1428740-e992-11d9-9146-e24829d2f59b",
+             "item": "812719e0-f3d4-11d9-972b-e24829d2f59b",
+            "value": "e467df90-e992-11d9-b345-e24829d2f59b"  }
+    }  ]
+  },
+  // =======================================================================
+  { "Transaction": [
+    // -----------------------------------------------------------------------
+    // (Person: Pieter)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Item": { "uuid": "96585d10-f3d4-11d9-972b-e24829d2f59b" } },
+    // -----------------------------------------------------------------------
+    // (Person: Pieter).(Name) = "Pieter"
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "96588420-f3d4-11d9-972b-e24829d2f59b",
+             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": "96585d10-f3d4-11d9-972b-e24829d2f59b",
+            "value": "Pieter"  }
+    },
+    // -----------------------------------------------------------------------
+    // (Person: Pieter).(Category) = (Category: Person)
+    // (Category: Person).(Items in Category) = (Person: Pieter)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "9658f950-f3d4-11d9-972b-e24829d2f59b",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["96585d10-f3d4-11d9-972b-e24829d2f59b", "00001201-ce7f-11d9-8cd5-0011113ae5d6"],
+        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    },
+    // -----------------------------------------------------------------------
+    // (???).(Who) = (Person: Pieter)
+    // (Person: Pieter).(Items in Category) = (???)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "96594770-f3d4-11d9-972b-e24829d2f59b",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["812719e0-f3d4-11d9-972b-e24829d2f59b", "96585d10-f3d4-11d9-972b-e24829d2f59b"],
+        "attribute": ["41c86750-e992-11d9-9146-e24829d2f59b", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    }  ]
+  },
+  // -----------------------------------------------------------------------
+  // (???).(About) = "Re: text for session"
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "9aecd950-f3d4-11d9-972b-e24829d2f59b",
+           "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "81b155c0-e992-11d9-9146-e24829d2f59b",
+           "item": "812719e0-f3d4-11d9-972b-e24829d2f59b",
+          "value": "Re: text for session"  }
+  },
+  // -----------------------------------------------------------------------
+  // (???).(When) = "Mon Apr 04 2005 00:00:00 GMT-0700 (PDT)"
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "9d236860-f3d4-11d9-972b-e24829d2f59b",
+           "type": "00001022-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "9e90ff60-e992-11d9-9146-e24829d2f59b",
+           "item": "812719e0-f3d4-11d9-972b-e24829d2f59b",
+          "value": "Mon Apr 04 2005 00:00:00 GMT-0700 (PDT)"  }
+  },
+  // -----------------------------------------------------------------------
+  // (???).(Project) = (Project: PyCon)
+  // (Project: PyCon).(Items in Category) = (???)
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "9eed52f0-f3d4-11d9-972b-e24829d2f59b",
+           "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+           "item": ["812719e0-f3d4-11d9-972b-e24829d2f59b", "397b0c50-e993-11d9-b345-e24829d2f59b"],
+      "attribute": ["ba630990-e992-11d9-9146-e24829d2f59b", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+  },
+  // =======================================================================
+  { "Transaction": [
+    // -----------------------------------------------------------------------
+    // (???)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Item": { "uuid": "932e4640-f3d4-11d9-972b-e24829d2f59b" } },
+    // -----------------------------------------------------------------------
+    // (???).(Mail) = (Mail Status: from:)
+    // (Mail Status: from:).(Items in Category) = (???)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "a5903cd0-f3d4-11d9-972b-e24829d2f59b",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["932e4640-f3d4-11d9-972b-e24829d2f59b", "f76b0cd0-f3d2-11d9-972b-e24829d2f59b"],
+        "attribute": ["86e20770-e991-11d9-9146-e24829d2f59b", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    },
+    // -----------------------------------------------------------------------
+    // (???).(Status) = (Status: Done)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "a590b200-f3d4-11d9-972b-e24829d2f59b",
+             "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "c1428740-e992-11d9-9146-e24829d2f59b",
+             "item": "932e4640-f3d4-11d9-972b-e24829d2f59b",
+            "value": "e467df90-e992-11d9-b345-e24829d2f59b"  }
+    }  ]
+  },
+  // =======================================================================
+  { "Transaction": [
+    // -----------------------------------------------------------------------
+    // (Person: Andi)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Item": { "uuid": "a765e730-f3d4-11d9-972b-e24829d2f59b" } },
+    // -----------------------------------------------------------------------
+    // (Person: Andi).(Name) = "Andi"
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "a7665c60-f3d4-11d9-972b-e24829d2f59b",
+             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": "a765e730-f3d4-11d9-972b-e24829d2f59b",
+            "value": "Andi"  }
+    },
+    // -----------------------------------------------------------------------
+    // (Person: Andi).(Category) = (Category: Person)
+    // (Category: Person).(Items in Category) = (Person: Andi)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "a766aa80-f3d4-11d9-972b-e24829d2f59b",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["a765e730-f3d4-11d9-972b-e24829d2f59b", "00001201-ce7f-11d9-8cd5-0011113ae5d6"],
+        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    },
+    // -----------------------------------------------------------------------
+    // (???).(Who) = (Person: Andi)
+    // (Person: Andi).(Items in Category) = (???)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "a7671fb0-f3d4-11d9-972b-e24829d2f59b",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["932e4640-f3d4-11d9-972b-e24829d2f59b", "a765e730-f3d4-11d9-972b-e24829d2f59b"],
+        "attribute": ["41c86750-e992-11d9-9146-e24829d2f59b", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    }  ]
+  },
+  // -----------------------------------------------------------------------
+  // (???).(About) = "[Dev] PyCON musings"
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "abb9ff10-f3d4-11d9-972b-e24829d2f59b",
+           "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "81b155c0-e992-11d9-9146-e24829d2f59b",
+           "item": "932e4640-f3d4-11d9-972b-e24829d2f59b",
+          "value": "[Dev] PyCON musings"  }
+  },
+  // -----------------------------------------------------------------------
+  // (???).(When) = "Tue Mar 29 2005 00:00:00 GMT-0800 (PST)"
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "adb1b060-f3d4-11d9-972b-e24829d2f59b",
+           "type": "00001022-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "9e90ff60-e992-11d9-9146-e24829d2f59b",
+           "item": "932e4640-f3d4-11d9-972b-e24829d2f59b",
+          "value": "Tue Mar 29 2005 00:00:00 GMT-0800 (PST)"  }
+  },
+  // -----------------------------------------------------------------------
+  // (???).(Project) = (Project: PyCon)
+  // (Project: PyCon).(Items in Category) = (???)
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "af7e8120-f3d4-11d9-972b-e24829d2f59b",
+           "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+           "item": ["932e4640-f3d4-11d9-972b-e24829d2f59b", "397b0c50-e993-11d9-b345-e24829d2f59b"],
+      "attribute": ["ba630990-e992-11d9-9146-e24829d2f59b", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+  },
+  // -----------------------------------------------------------------------
+  // (???).(Task) = (TaskType: Action)
+  // (TaskType: Action).(Items in Category) = (???)
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "b719adb0-f3d4-11d9-972b-e24829d2f59b",
+           "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+           "item": ["932e4640-f3d4-11d9-972b-e24829d2f59b", "20722c70-f3d4-11d9-972b-e24829d2f59b"],
+      "attribute": ["580b3700-e991-11d9-9146-e24829d2f59b", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+  },
+  // =======================================================================
+  { "Transaction": [
+    // -----------------------------------------------------------------------
+    // (???)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Item": { "uuid": "a59741b0-f3d4-11d9-972b-e24829d2f59b" } },
+    // -----------------------------------------------------------------------
+    // (???).(Mail) = (Mail Status: from:)
+    // (Mail Status: from:).(Items in Category) = (???)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "c3397800-f3d4-11d9-972b-e24829d2f59b",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["a59741b0-f3d4-11d9-972b-e24829d2f59b", "f76b0cd0-f3d2-11d9-972b-e24829d2f59b"],
+        "attribute": ["86e20770-e991-11d9-9146-e24829d2f59b", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    },
+    // -----------------------------------------------------------------------
+    // (???).(Status) = (Status: Done)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "c339ed30-f3d4-11d9-972b-e24829d2f59b",
+             "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "c1428740-e992-11d9-9146-e24829d2f59b",
+             "item": "a59741b0-f3d4-11d9-972b-e24829d2f59b",
+            "value": "e467df90-e992-11d9-b345-e24829d2f59b"  }
+    }  ]
+  },
+  // =======================================================================
+  { "Transaction": [
+    // -----------------------------------------------------------------------
+    // (Person: Blue)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Item": { "uuid": "c4755360-f3d4-11d9-972b-e24829d2f59b" } },
+    // -----------------------------------------------------------------------
+    // (Person: Blue).(Name) = "Blue"
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "c475a180-f3d4-11d9-972b-e24829d2f59b",
+             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": "c4755360-f3d4-11d9-972b-e24829d2f59b",
+            "value": "Blue"  }
+    },
+    // -----------------------------------------------------------------------
+    // (Person: Blue).(Category) = (Category: Person)
+    // (Category: Person).(Items in Category) = (Person: Blue)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "c47616b0-f3d4-11d9-972b-e24829d2f59b",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["c4755360-f3d4-11d9-972b-e24829d2f59b", "00001201-ce7f-11d9-8cd5-0011113ae5d6"],
+        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    },
+    // -----------------------------------------------------------------------
+    // (???).(Who) = (Person: Blue)
+    // (Person: Blue).(Items in Category) = (???)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "c4768be0-f3d4-11d9-972b-e24829d2f59b",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["a59741b0-f3d4-11d9-972b-e24829d2f59b", "c4755360-f3d4-11d9-972b-e24829d2f59b"],
+        "attribute": ["41c86750-e992-11d9-9146-e24829d2f59b", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    }  ]
+  },
+  // -----------------------------------------------------------------------
+  // (???).(About) = "Lunch!"
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "c654e8d0-f3d4-11d9-972b-e24829d2f59b",
+           "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "81b155c0-e992-11d9-9146-e24829d2f59b",
+           "item": "a59741b0-f3d4-11d9-972b-e24829d2f59b",
+          "value": "Lunch!"  }
+  },
+  // -----------------------------------------------------------------------
+  // (???).(When) = "Wed Apr 27 2005 00:00:00 GMT-0700 (PDT)"
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "c89c8ee0-f3d4-11d9-972b-e24829d2f59b",
+           "type": "00001022-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "9e90ff60-e992-11d9-9146-e24829d2f59b",
+           "item": "a59741b0-f3d4-11d9-972b-e24829d2f59b",
+          "value": "Wed Apr 27 2005 00:00:00 GMT-0700 (PDT)"  }
+  },
+  // -----------------------------------------------------------------------
+  // (Section: Now Items).(Name) = "Now Items"
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "d96b1430-f3d4-11d9-972b-e24829d2f59b",
+  "previousEntry": "99eabac0-e990-11d9-b90a-e24829d2f59b",
+           "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
+           "item": "99ea6ca0-e990-11d9-b90a-e24829d2f59b",
+          "value": "Now Items"  }
+  },
+  // -----------------------------------------------------------------------
+  // (Section: Later).(Name) = "Later"
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "dc21f6d0-f3d4-11d9-972b-e24829d2f59b",
+  "previousEntry": "a1fc3610-f3d3-11d9-972b-e24829d2f59b",
+           "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
+           "item": "a1fbe7f0-f3d3-11d9-972b-e24829d2f59b",
+          "value": "Later"  }
+  },
+  // -----------------------------------------------------------------------
+  // (Section: Done).(Name) = "Done"
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "def70fd0-f3d4-11d9-972b-e24829d2f59b",
+  "previousEntry": "5885a470-f3d4-11d9-972b-e24829d2f59b",
+           "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
+           "item": "58855650-f3d4-11d9-972b-e24829d2f59b",
+          "value": "Done"  }
   }
\ No newline at end of file



From chaolam at berlios.de  Wed Jul 13 21:51:05 2005
From: chaolam at berlios.de (Chih-Chao Lam at BerliOS)
Date: Wed, 13 Jul 2005 21:51:05 +0200
Subject: [openrecord-svn] r239 - trunk/repositories
Message-ID: <200507131951.j6DJp5xq029215@sheep.berlios.de>

Author: chaolam
Date: 2005-07-13 21:51:04 +0200 (Wed, 13 Jul 2005)
New Revision: 239

Modified:
   trunk/repositories/dashboard.json
Log:


Modified: trunk/repositories/dashboard.json
===================================================================
--- trunk/repositories/dashboard.json	2005-07-13 19:33:01 UTC (rev 238)
+++ trunk/repositories/dashboard.json	2005-07-13 19:51:04 UTC (rev 239)
@@ -3490,4 +3490,677 @@
       "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
            "item": "58855650-f3d4-11d9-972b-e24829d2f59b",
           "value": "Done"  }
+  },
+  // =======================================================================
+  { "Transaction": [
+    // -----------------------------------------------------------------------
+    // (Section: New Section)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Item": { "uuid": "060e02c0-f3d7-11d9-a784-e24829d2f59b" } },
+    // -----------------------------------------------------------------------
+    // (Section: New Section).(Name) = "New Section"
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "060e50e0-f3d7-11d9-a784-e24829d2f59b",
+             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": "060e02c0-f3d7-11d9-a784-e24829d2f59b",
+            "value": "New Section"  }
+    },
+    // -----------------------------------------------------------------------
+    // (Section: New Section).(Category) = (Category: Section)
+    // (Category: Section).(Items in Category) = (Section: New Section)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "060e9f00-f3d7-11d9-a784-e24829d2f59b",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["060e02c0-f3d7-11d9-a784-e24829d2f59b", "00020100-ce7f-11d9-8cd5-0011113ae5d6"],
+        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    },
+    // -----------------------------------------------------------------------
+    // (Page: Introspection).(Sections In Page) = (Section: New Section)
+    // (Section: New Section).(Page this section appears on) = (Page: Introspection)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "060f1430-f3d7-11d9-a784-e24829d2f59b",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["78f08290-f3d2-11d9-8cf6-e24829d2f59b", "060e02c0-f3d7-11d9-a784-e24829d2f59b"],
+        "attribute": ["00030000-ce7f-11d9-8cd5-0011113ae5d6", "00030001-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    },
+    // -----------------------------------------------------------------------
+    // (Section: New Section).(Plugin View) = (Plugin View: Table)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "060f6250-f3d7-11d9-a784-e24829d2f59b",
+             "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "00040101-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": "060e02c0-f3d7-11d9-a784-e24829d2f59b",
+            "value": "00040301-ce7f-11d9-8cd5-0011113ae5d6"  }
+    },
+    // -----------------------------------------------------------------------
+    // (Query Spec: New Query)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Item": { "uuid": "060fb070-f3d7-11d9-a784-e24829d2f59b" } },
+    // -----------------------------------------------------------------------
+    // (Query Spec: New Query).(Name) = "New Query"
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "060ffe90-f3d7-11d9-a784-e24829d2f59b",
+             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": "060fb070-f3d7-11d9-a784-e24829d2f59b",
+            "value": "New Query"  }
+    },
+    // -----------------------------------------------------------------------
+    // (Query Spec: New Query).(Category) = (Category: Query Spec)
+    // (Category: Query Spec).(Items in Category) = (Query Spec: New Query)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "06104cb0-f3d7-11d9-a784-e24829d2f59b",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["060fb070-f3d7-11d9-a784-e24829d2f59b", "00001212-ce7f-11d9-8cd5-0011113ae5d6"],
+        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    },
+    // -----------------------------------------------------------------------
+    // (Section: New Section).(Query Spec) = (Query Spec: New Query)
+    // (Query Spec: New Query).(Section this query spec belongs to) = (Section: New Section)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "0610c1e0-f3d7-11d9-a784-e24829d2f59b",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["060e02c0-f3d7-11d9-a784-e24829d2f59b", "060fb070-f3d7-11d9-a784-e24829d2f59b"],
+        "attribute": ["00001006-ce7f-11d9-8cd5-0011113ae5d6", "00040105-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    }  ]
+  },
+  // =======================================================================
+  { "Transaction": [
+    // -----------------------------------------------------------------------
+    // (Layout Data: Layout data for Table of New Section)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Item": { "uuid": "0623ada0-f3d7-11d9-a784-e24829d2f59b" } },
+    // -----------------------------------------------------------------------
+    // (Layout Data: Layout data for Table of New Section).(Name) = "Layout data for Table of New Section"
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "0623fbc0-f3d7-11d9-a784-e24829d2f59b",
+             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": "0623ada0-f3d7-11d9-a784-e24829d2f59b",
+            "value": "Layout data for Table of New Section"  }
+    },
+    // -----------------------------------------------------------------------
+    // (Layout Data: Layout data for Table of New Section).(Category) = (Category: Layout Data)
+    // (Category: Layout Data).(Items in Category) = (Layout Data: Layout data for Table of New Section)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "062449e0-f3d7-11d9-a784-e24829d2f59b",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["0623ada0-f3d7-11d9-a784-e24829d2f59b", "00040202-ce7f-11d9-8cd5-0011113ae5d6"],
+        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    },
+    // -----------------------------------------------------------------------
+    // (Layout Data: Layout data for Table of New Section).(Applies To Plugin) = (Plugin View: Table)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "0624bf10-f3d7-11d9-a784-e24829d2f59b",
+             "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "00040103-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": "0623ada0-f3d7-11d9-a784-e24829d2f59b",
+            "value": "00040301-ce7f-11d9-8cd5-0011113ae5d6"  }
+    },
+    // -----------------------------------------------------------------------
+    // (Section: New Section).(Layout Data) = (Layout Data: Layout data for Table of New Section)
+    // (Layout Data: Layout data for Table of New Section).(Section this layout data belongs to) = (Section: New Section)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "06250d30-f3d7-11d9-a784-e24829d2f59b",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["060e02c0-f3d7-11d9-a784-e24829d2f59b", "0623ada0-f3d7-11d9-a784-e24829d2f59b"],
+        "attribute": ["00040102-ce7f-11d9-8cd5-0011113ae5d6", "00040104-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    }  ]
+  },
+  // -----------------------------------------------------------------------
+  // (Query Spec: New Query).(Matching Value) = (Category: Page)
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "0b1df090-f3d7-11d9-a784-e24829d2f59b",
+           "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "00001007-ce7f-11d9-8cd5-0011113ae5d6",
+           "item": "060fb070-f3d7-11d9-a784-e24829d2f59b",
+          "value": "00020000-ce7f-11d9-8cd5-0011113ae5d6"  }
+  },
+  // -----------------------------------------------------------------------
+  { "Vote": {                                              // vote to DELETE connection between "Introspection" and "New Section"
+           "uuid": "0d6325a0-f3d7-11d9-a784-e24829d2f59b",
+         "record": "78f31aa0-f3d2-11d9-8cf6-e24829d2f59b",
+     "retainFlag": "false"  }
+  },
+  // -----------------------------------------------------------------------
+  { "Vote": {                                              // vote to DELETE connection between "Introspection" and "New Section"
+           "uuid": "0e3b8440-f3d7-11d9-a784-e24829d2f59b",
+         "record": "060f1430-f3d7-11d9-a784-e24829d2f59b",
+     "retainFlag": "false"  }
+  },
+  // -----------------------------------------------------------------------
+  // (Page: 0.6 Planning).(Name) = "0.6 Planning"
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "17c5d6a0-f3d7-11d9-93f4-e24829d2f59b",
+  "previousEntry": "b555c880-f3d2-11d9-8cf6-e24829d2f59b",
+           "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
+           "item": "78f08290-f3d2-11d9-8cf6-e24829d2f59b",
+          "value": "0.6 Planning"  }
+  },
+  // =======================================================================
+  { "Transaction": [
+    // -----------------------------------------------------------------------
+    // (Section: New Section)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Item": { "uuid": "1de6e650-f3d7-11d9-93f4-e24829d2f59b" } },
+    // -----------------------------------------------------------------------
+    // (Section: New Section).(Name) = "New Section"
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "1de73470-f3d7-11d9-93f4-e24829d2f59b",
+             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": "1de6e650-f3d7-11d9-93f4-e24829d2f59b",
+            "value": "New Section"  }
+    },
+    // -----------------------------------------------------------------------
+    // (Section: New Section).(Category) = (Category: Section)
+    // (Category: Section).(Items in Category) = (Section: New Section)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "1de78290-f3d7-11d9-93f4-e24829d2f59b",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["1de6e650-f3d7-11d9-93f4-e24829d2f59b", "00020100-ce7f-11d9-8cd5-0011113ae5d6"],
+        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    },
+    // -----------------------------------------------------------------------
+    // (Page: 0.6 Planning).(Sections In Page) = (Section: New Section)
+    // (Section: New Section).(Page this section appears on) = (Page: 0.6 Planning)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "1de7d0b0-f3d7-11d9-93f4-e24829d2f59b",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["78f08290-f3d2-11d9-8cf6-e24829d2f59b", "1de6e650-f3d7-11d9-93f4-e24829d2f59b"],
+        "attribute": ["00030000-ce7f-11d9-8cd5-0011113ae5d6", "00030001-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    },
+    // -----------------------------------------------------------------------
+    // (Section: New Section).(Plugin View) = (Plugin View: Table)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "1de845e0-f3d7-11d9-93f4-e24829d2f59b",
+             "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "00040101-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": "1de6e650-f3d7-11d9-93f4-e24829d2f59b",
+            "value": "00040301-ce7f-11d9-8cd5-0011113ae5d6"  }
+    },
+    // -----------------------------------------------------------------------
+    // (Query Spec: New Query)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Item": { "uuid": "1de89400-f3d7-11d9-93f4-e24829d2f59b" } },
+    // -----------------------------------------------------------------------
+    // (Query Spec: New Query).(Name) = "New Query"
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "1de8bb10-f3d7-11d9-93f4-e24829d2f59b",
+             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": "1de89400-f3d7-11d9-93f4-e24829d2f59b",
+            "value": "New Query"  }
+    },
+    // -----------------------------------------------------------------------
+    // (Query Spec: New Query).(Category) = (Category: Query Spec)
+    // (Category: Query Spec).(Items in Category) = (Query Spec: New Query)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "1de93040-f3d7-11d9-93f4-e24829d2f59b",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["1de89400-f3d7-11d9-93f4-e24829d2f59b", "00001212-ce7f-11d9-8cd5-0011113ae5d6"],
+        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    },
+    // -----------------------------------------------------------------------
+    // (Section: New Section).(Query Spec) = (Query Spec: New Query)
+    // (Query Spec: New Query).(Section this query spec belongs to) = (Section: New Section)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "1de97e60-f3d7-11d9-93f4-e24829d2f59b",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["1de6e650-f3d7-11d9-93f4-e24829d2f59b", "1de89400-f3d7-11d9-93f4-e24829d2f59b"],
+        "attribute": ["00001006-ce7f-11d9-8cd5-0011113ae5d6", "00040105-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    }  ]
+  },
+  // -----------------------------------------------------------------------
+  // (Page: 0.6 Planning).(Summary) = "Items related to 0.6 planning"
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "1dd46fc0-f3d7-11d9-93f4-e24829d2f59b",
+  "previousEntry": "c50e9810-f3d2-11d9-8cf6-e24829d2f59b",
+           "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "00001003-ce7f-11d9-8cd5-0011113ae5d6",
+           "item": "78f08290-f3d2-11d9-8cf6-e24829d2f59b",
+          "value": "Items related to 0.6 planning"  }
+  },
+  // =======================================================================
+  { "Transaction": [
+    // -----------------------------------------------------------------------
+    // (Layout Data: Layout data for Table of New Section)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Item": { "uuid": "1dfcdf50-f3d7-11d9-93f4-e24829d2f59b" } },
+    // -----------------------------------------------------------------------
+    // (Layout Data: Layout data for Table of New Section).(Name) = "Layout data for Table of New Section"
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "1dfd2d70-f3d7-11d9-93f4-e24829d2f59b",
+             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": "1dfcdf50-f3d7-11d9-93f4-e24829d2f59b",
+            "value": "Layout data for Table of New Section"  }
+    },
+    // -----------------------------------------------------------------------
+    // (Layout Data: Layout data for Table of New Section).(Category) = (Category: Layout Data)
+    // (Category: Layout Data).(Items in Category) = (Layout Data: Layout data for Table of New Section)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "1dfda2a0-f3d7-11d9-93f4-e24829d2f59b",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["1dfcdf50-f3d7-11d9-93f4-e24829d2f59b", "00040202-ce7f-11d9-8cd5-0011113ae5d6"],
+        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    },
+    // -----------------------------------------------------------------------
+    // (Layout Data: Layout data for Table of New Section).(Applies To Plugin) = (Plugin View: Table)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "1dfdf0c0-f3d7-11d9-93f4-e24829d2f59b",
+             "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "00040103-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": "1dfcdf50-f3d7-11d9-93f4-e24829d2f59b",
+            "value": "00040301-ce7f-11d9-8cd5-0011113ae5d6"  }
+    },
+    // -----------------------------------------------------------------------
+    // (Section: New Section).(Layout Data) = (Layout Data: Layout data for Table of New Section)
+    // (Layout Data: Layout data for Table of New Section).(Section this layout data belongs to) = (Section: New Section)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "1dfe3ee0-f3d7-11d9-93f4-e24829d2f59b",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["1de6e650-f3d7-11d9-93f4-e24829d2f59b", "1dfcdf50-f3d7-11d9-93f4-e24829d2f59b"],
+        "attribute": ["00040102-ce7f-11d9-8cd5-0011113ae5d6", "00040104-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    }  ]
+  },
+  // -----------------------------------------------------------------------
+  // (Layout Data: Layout data for Table of New Section).(Table Columns) = (Attribute: Task)
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "2305c840-f3d7-11d9-93f4-e24829d2f59b",
+           "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "0004010a-ce7f-11d9-8cd5-0011113ae5d6",
+           "item": "1dfcdf50-f3d7-11d9-93f4-e24829d2f59b",
+          "value": "580b3700-e991-11d9-9146-e24829d2f59b"  }
+  },
+  // -----------------------------------------------------------------------
+  // (Layout Data: Layout data for Table of New Section).(Table Columns) = (Attribute: Mail)
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "25237820-f3d7-11d9-93f4-e24829d2f59b",
+           "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "0004010a-ce7f-11d9-8cd5-0011113ae5d6",
+           "item": "1dfcdf50-f3d7-11d9-93f4-e24829d2f59b",
+          "value": "86e20770-e991-11d9-9146-e24829d2f59b"  }
+  },
+  // -----------------------------------------------------------------------
+  // (Layout Data: Layout data for Table of New Section).(Table Columns) = (Attribute: Who)
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "27496560-f3d7-11d9-93f4-e24829d2f59b",
+           "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "0004010a-ce7f-11d9-8cd5-0011113ae5d6",
+           "item": "1dfcdf50-f3d7-11d9-93f4-e24829d2f59b",
+          "value": "41c86750-e992-11d9-9146-e24829d2f59b"  }
+  },
+  // -----------------------------------------------------------------------
+  // (Layout Data: Layout data for Table of New Section).(Table Columns) = (Attribute: About)
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "2c472ac0-f3d7-11d9-93f4-e24829d2f59b",
+           "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "0004010a-ce7f-11d9-8cd5-0011113ae5d6",
+           "item": "1dfcdf50-f3d7-11d9-93f4-e24829d2f59b",
+          "value": "81b155c0-e992-11d9-9146-e24829d2f59b"  }
+  },
+  // -----------------------------------------------------------------------
+  // (Layout Data: Layout data for Table of New Section).(Table Columns) = (Attribute: Calendar)
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "2f0b53d0-f3d7-11d9-93f4-e24829d2f59b",
+           "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "0004010a-ce7f-11d9-8cd5-0011113ae5d6",
+           "item": "1dfcdf50-f3d7-11d9-93f4-e24829d2f59b",
+          "value": "94845da0-e992-11d9-9146-e24829d2f59b"  }
+  },
+  // -----------------------------------------------------------------------
+  // (Layout Data: Layout data for Table of New Section).(Table Columns) = (Attribute: When)
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "315da840-f3d7-11d9-93f4-e24829d2f59b",
+           "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "0004010a-ce7f-11d9-8cd5-0011113ae5d6",
+           "item": "1dfcdf50-f3d7-11d9-93f4-e24829d2f59b",
+          "value": "9e90ff60-e992-11d9-9146-e24829d2f59b"  }
+  },
+  // -----------------------------------------------------------------------
+  // (Layout Data: Layout data for Table of New Section).(Table Columns) = (Attribute: Project)
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "338e43e0-f3d7-11d9-93f4-e24829d2f59b",
+           "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "0004010a-ce7f-11d9-8cd5-0011113ae5d6",
+           "item": "1dfcdf50-f3d7-11d9-93f4-e24829d2f59b",
+          "value": "ba630990-e992-11d9-9146-e24829d2f59b"  }
+  },
+  // -----------------------------------------------------------------------
+  // (Layout Data: Layout data for Table of New Section).(Table Columns) = (Attribute: Status)
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "36116c50-f3d7-11d9-93f4-e24829d2f59b",
+           "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "0004010a-ce7f-11d9-8cd5-0011113ae5d6",
+           "item": "1dfcdf50-f3d7-11d9-93f4-e24829d2f59b",
+          "value": "c1428740-e992-11d9-9146-e24829d2f59b"  }
+  },
+  // -----------------------------------------------------------------------
+  // (Query Spec: New Query).(Matching Attribute) = (Attribute: Project)
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "38fb6ce0-f3d7-11d9-93f4-e24829d2f59b",
+           "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "00001008-ce7f-11d9-8cd5-0011113ae5d6",
+           "item": "1de89400-f3d7-11d9-93f4-e24829d2f59b",
+          "value": "ba630990-e992-11d9-9146-e24829d2f59b"  }
+  },
+  // -----------------------------------------------------------------------
+  // (Query Spec: New Query).(Matching Value) = (Project: 0.6 planning)
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "3bb92d50-f3d7-11d9-93f4-e24829d2f59b",
+           "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "00001007-ce7f-11d9-8cd5-0011113ae5d6",
+           "item": "1de89400-f3d7-11d9-93f4-e24829d2f59b",
+          "value": "25b7b100-e993-11d9-b345-e24829d2f59b"  }
+  },
+  // =======================================================================
+  { "Transaction": [
+    // -----------------------------------------------------------------------
+    // (Page: New Page)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Item": { "uuid": "41887380-f3d7-11d9-93f4-e24829d2f59b" } },
+    // -----------------------------------------------------------------------
+    // (Page: New Page).(Name) = "New Page"
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "4188c1a0-f3d7-11d9-93f4-e24829d2f59b",
+             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": "41887380-f3d7-11d9-93f4-e24829d2f59b",
+            "value": "New Page"  }
+    },
+    // -----------------------------------------------------------------------
+    // (Page: New Page).(Category) = (Category: Page)
+    // (Category: Page).(Items in Category) = (Page: New Page)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "41895de0-f3d7-11d9-93f4-e24829d2f59b",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["41887380-f3d7-11d9-93f4-e24829d2f59b", "00020000-ce7f-11d9-8cd5-0011113ae5d6"],
+        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    },
+    // -----------------------------------------------------------------------
+    // (Page: New Page).(Summary) = "This is a new page."
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "4189ac00-f3d7-11d9-93f4-e24829d2f59b",
+             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "00001003-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": "41887380-f3d7-11d9-93f4-e24829d2f59b",
+            "value": "This is a new page."  }
+    },
+    // -----------------------------------------------------------------------
+    // (Section: New Section)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Item": { "uuid": "418a2130-f3d7-11d9-93f4-e24829d2f59b" } },
+    // -----------------------------------------------------------------------
+    // (Section: New Section).(Name) = "New Section"
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "418a6f50-f3d7-11d9-93f4-e24829d2f59b",
+             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": "418a2130-f3d7-11d9-93f4-e24829d2f59b",
+            "value": "New Section"  }
+    },
+    // -----------------------------------------------------------------------
+    // (Section: New Section).(Category) = (Category: Section)
+    // (Category: Section).(Items in Category) = (Section: New Section)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "418ae480-f3d7-11d9-93f4-e24829d2f59b",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["418a2130-f3d7-11d9-93f4-e24829d2f59b", "00020100-ce7f-11d9-8cd5-0011113ae5d6"],
+        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    },
+    // -----------------------------------------------------------------------
+    // (Page: New Page).(Sections In Page) = (Section: New Section)
+    // (Section: New Section).(Page this section appears on) = (Page: New Page)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "418b32a0-f3d7-11d9-93f4-e24829d2f59b",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["41887380-f3d7-11d9-93f4-e24829d2f59b", "418a2130-f3d7-11d9-93f4-e24829d2f59b"],
+        "attribute": ["00030000-ce7f-11d9-8cd5-0011113ae5d6", "00030001-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    },
+    // -----------------------------------------------------------------------
+    // (Section: New Section).(Plugin View) = (Plugin View: Table)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "418ba7d0-f3d7-11d9-93f4-e24829d2f59b",
+             "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "00040101-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": "418a2130-f3d7-11d9-93f4-e24829d2f59b",
+            "value": "00040301-ce7f-11d9-8cd5-0011113ae5d6"  }
+    },
+    // -----------------------------------------------------------------------
+    // (Query Spec: New Query)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Item": { "uuid": "418bf5f0-f3d7-11d9-93f4-e24829d2f59b" } },
+    // -----------------------------------------------------------------------
+    // (Query Spec: New Query).(Name) = "New Query"
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "418c4410-f3d7-11d9-93f4-e24829d2f59b",
+             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": "418bf5f0-f3d7-11d9-93f4-e24829d2f59b",
+            "value": "New Query"  }
+    },
+    // -----------------------------------------------------------------------
+    // (Query Spec: New Query).(Category) = (Category: Query Spec)
+    // (Category: Query Spec).(Items in Category) = (Query Spec: New Query)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "418cb940-f3d7-11d9-93f4-e24829d2f59b",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["418bf5f0-f3d7-11d9-93f4-e24829d2f59b", "00001212-ce7f-11d9-8cd5-0011113ae5d6"],
+        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    },
+    // -----------------------------------------------------------------------
+    // (Section: New Section).(Query Spec) = (Query Spec: New Query)
+    // (Query Spec: New Query).(Section this query spec belongs to) = (Section: New Section)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "418d0760-f3d7-11d9-93f4-e24829d2f59b",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["418a2130-f3d7-11d9-93f4-e24829d2f59b", "418bf5f0-f3d7-11d9-93f4-e24829d2f59b"],
+        "attribute": ["00001006-ce7f-11d9-8cd5-0011113ae5d6", "00040105-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    }  ]
+  },
+  // =======================================================================
+  { "Transaction": [
+    // -----------------------------------------------------------------------
+    // (Layout Data: Layout data for Table of New Section)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Item": { "uuid": "41aec030-f3d7-11d9-93f4-e24829d2f59b" } },
+    // -----------------------------------------------------------------------
+    // (Layout Data: Layout data for Table of New Section).(Name) = "Layout data for Table of New Section"
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "41af0e50-f3d7-11d9-93f4-e24829d2f59b",
+             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": "41aec030-f3d7-11d9-93f4-e24829d2f59b",
+            "value": "Layout data for Table of New Section"  }
+    },
+    // -----------------------------------------------------------------------
+    // (Layout Data: Layout data for Table of New Section).(Category) = (Category: Layout Data)
+    // (Category: Layout Data).(Items in Category) = (Layout Data: Layout data for Table of New Section)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "41af5c70-f3d7-11d9-93f4-e24829d2f59b",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["41aec030-f3d7-11d9-93f4-e24829d2f59b", "00040202-ce7f-11d9-8cd5-0011113ae5d6"],
+        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    },
+    // -----------------------------------------------------------------------
+    // (Layout Data: Layout data for Table of New Section).(Applies To Plugin) = (Plugin View: Table)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "41afd1a0-f3d7-11d9-93f4-e24829d2f59b",
+             "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "00040103-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": "41aec030-f3d7-11d9-93f4-e24829d2f59b",
+            "value": "00040301-ce7f-11d9-8cd5-0011113ae5d6"  }
+    },
+    // -----------------------------------------------------------------------
+    // (Section: New Section).(Layout Data) = (Layout Data: Layout data for Table of New Section)
+    // (Layout Data: Layout data for Table of New Section).(Section this layout data belongs to) = (Section: New Section)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "41b01fc0-f3d7-11d9-93f4-e24829d2f59b",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["418a2130-f3d7-11d9-93f4-e24829d2f59b", "41aec030-f3d7-11d9-93f4-e24829d2f59b"],
+        "attribute": ["00040102-ce7f-11d9-8cd5-0011113ae5d6", "00040104-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    }  ]
+  },
+  // -----------------------------------------------------------------------
+  // (Layout Data: Layout data for Table of New Section).(Table Columns) = (Attribute: Task)
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "485c5870-f3d7-11d9-93f4-e24829d2f59b",
+           "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "0004010a-ce7f-11d9-8cd5-0011113ae5d6",
+           "item": "41aec030-f3d7-11d9-93f4-e24829d2f59b",
+          "value": "580b3700-e991-11d9-9146-e24829d2f59b"  }
+  },
+  // -----------------------------------------------------------------------
+  // (Layout Data: Layout data for Table of New Section).(Table Columns) = (Attribute: Mail)
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "4a82bae0-f3d7-11d9-93f4-e24829d2f59b",
+           "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "0004010a-ce7f-11d9-8cd5-0011113ae5d6",
+           "item": "41aec030-f3d7-11d9-93f4-e24829d2f59b",
+          "value": "86e20770-e991-11d9-9146-e24829d2f59b"  }
+  },
+  // -----------------------------------------------------------------------
+  // (Layout Data: Layout data for Table of New Section).(Table Columns) = (Attribute: Who)
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "4ca59ae0-f3d7-11d9-93f4-e24829d2f59b",
+           "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "0004010a-ce7f-11d9-8cd5-0011113ae5d6",
+           "item": "41aec030-f3d7-11d9-93f4-e24829d2f59b",
+          "value": "41c86750-e992-11d9-9146-e24829d2f59b"  }
+  },
+  // -----------------------------------------------------------------------
+  // (Layout Data: Layout data for Table of New Section).(Table Columns) = (Attribute: About)
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "4f0bec80-f3d7-11d9-93f4-e24829d2f59b",
+           "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "0004010a-ce7f-11d9-8cd5-0011113ae5d6",
+           "item": "41aec030-f3d7-11d9-93f4-e24829d2f59b",
+          "value": "81b155c0-e992-11d9-9146-e24829d2f59b"  }
+  },
+  // -----------------------------------------------------------------------
+  // (Layout Data: Layout data for Table of New Section).(Table Columns) = (Attribute: Calendar)
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "51a4e6e0-f3d7-11d9-93f4-e24829d2f59b",
+           "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "0004010a-ce7f-11d9-8cd5-0011113ae5d6",
+           "item": "41aec030-f3d7-11d9-93f4-e24829d2f59b",
+          "value": "94845da0-e992-11d9-9146-e24829d2f59b"  }
+  },
+  // -----------------------------------------------------------------------
+  // (Layout Data: Layout data for Table of New Section).(Table Columns) = (Attribute: When)
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "538084b0-f3d7-11d9-93f4-e24829d2f59b",
+           "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "0004010a-ce7f-11d9-8cd5-0011113ae5d6",
+           "item": "41aec030-f3d7-11d9-93f4-e24829d2f59b",
+          "value": "9e90ff60-e992-11d9-9146-e24829d2f59b"  }
+  },
+  // -----------------------------------------------------------------------
+  // (Layout Data: Layout data for Table of New Section).(Table Columns) = (Attribute: Project)
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "5569b710-f3d7-11d9-93f4-e24829d2f59b",
+           "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "0004010a-ce7f-11d9-8cd5-0011113ae5d6",
+           "item": "41aec030-f3d7-11d9-93f4-e24829d2f59b",
+          "value": "ba630990-e992-11d9-9146-e24829d2f59b"  }
+  },
+  // -----------------------------------------------------------------------
+  // (Layout Data: Layout data for Table of New Section).(Table Columns) = (Attribute: Status)
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "57f59210-f3d7-11d9-93f4-e24829d2f59b",
+           "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "0004010a-ce7f-11d9-8cd5-0011113ae5d6",
+           "item": "41aec030-f3d7-11d9-93f4-e24829d2f59b",
+          "value": "c1428740-e992-11d9-9146-e24829d2f59b"  }
+  },
+  // -----------------------------------------------------------------------
+  // (Query Spec: New Query).(Matching Attribute) = (Attribute: Project)
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "5a87aea0-f3d7-11d9-93f4-e24829d2f59b",
+           "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "00001008-ce7f-11d9-8cd5-0011113ae5d6",
+           "item": "418bf5f0-f3d7-11d9-93f4-e24829d2f59b",
+          "value": "ba630990-e992-11d9-9146-e24829d2f59b"  }
+  },
+  // -----------------------------------------------------------------------
+  // (Query Spec: New Query).(Matching Value) = (Project: Accessibility)
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "5d85fa80-f3d7-11d9-93f4-e24829d2f59b",
+           "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "00001007-ce7f-11d9-8cd5-0011113ae5d6",
+           "item": "418bf5f0-f3d7-11d9-93f4-e24829d2f59b",
+          "value": "2120ead0-e993-11d9-b345-e24829d2f59b"  }
+  },
+  // -----------------------------------------------------------------------
+  // (Page: Accessibility).(Name) = "Accessibility"
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "642dc660-f3d7-11d9-93f4-e24829d2f59b",
+  "previousEntry": "4188c1a0-f3d7-11d9-93f4-e24829d2f59b",
+           "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
+           "item": "41887380-f3d7-11d9-93f4-e24829d2f59b",
+          "value": "Accessibility"  }
   }
\ No newline at end of file



From chaolam at berlios.de  Wed Jul 13 21:52:50 2005
From: chaolam at berlios.de (Chih-Chao Lam at BerliOS)
Date: Wed, 13 Jul 2005 21:52:50 +0200
Subject: [openrecord-svn] r240 - trunk/repositories
Message-ID: <200507131952.j6DJqoCQ029295@sheep.berlios.de>

Author: chaolam
Date: 2005-07-13 21:52:49 +0200 (Wed, 13 Jul 2005)
New Revision: 240

Modified:
   trunk/repositories/dashboard.json
Log:


Modified: trunk/repositories/dashboard.json
===================================================================
--- trunk/repositories/dashboard.json	2005-07-13 19:51:04 UTC (rev 239)
+++ trunk/repositories/dashboard.json	2005-07-13 19:52:49 UTC (rev 240)
@@ -4163,4 +4163,277 @@
       "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
            "item": "41887380-f3d7-11d9-93f4-e24829d2f59b",
           "value": "Accessibility"  }
+  },
+  // =======================================================================
+  { "Transaction": [
+    // -----------------------------------------------------------------------
+    // (Page: New Page)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Item": { "uuid": "75bb07d0-f3d7-11d9-93f4-e24829d2f59b" } },
+    // -----------------------------------------------------------------------
+    // (Page: New Page).(Name) = "New Page"
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "75bb7d00-f3d7-11d9-93f4-e24829d2f59b",
+             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": "75bb07d0-f3d7-11d9-93f4-e24829d2f59b",
+            "value": "New Page"  }
+    },
+    // -----------------------------------------------------------------------
+    // (Page: New Page).(Category) = (Category: Page)
+    // (Category: Page).(Items in Category) = (Page: New Page)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "75bbcb20-f3d7-11d9-93f4-e24829d2f59b",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["75bb07d0-f3d7-11d9-93f4-e24829d2f59b", "00020000-ce7f-11d9-8cd5-0011113ae5d6"],
+        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    },
+    // -----------------------------------------------------------------------
+    // (Page: New Page).(Summary) = "This is a new page."
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "75bc4050-f3d7-11d9-93f4-e24829d2f59b",
+             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "00001003-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": "75bb07d0-f3d7-11d9-93f4-e24829d2f59b",
+            "value": "This is a new page."  }
+    },
+    // -----------------------------------------------------------------------
+    // (Section: New Section)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Item": { "uuid": "75bcb580-f3d7-11d9-93f4-e24829d2f59b" } },
+    // -----------------------------------------------------------------------
+    // (Section: New Section).(Name) = "New Section"
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "75bd03a0-f3d7-11d9-93f4-e24829d2f59b",
+             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": "75bcb580-f3d7-11d9-93f4-e24829d2f59b",
+            "value": "New Section"  }
+    },
+    // -----------------------------------------------------------------------
+    // (Section: New Section).(Category) = (Category: Section)
+    // (Category: Section).(Items in Category) = (Section: New Section)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "75bd51c0-f3d7-11d9-93f4-e24829d2f59b",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["75bcb580-f3d7-11d9-93f4-e24829d2f59b", "00020100-ce7f-11d9-8cd5-0011113ae5d6"],
+        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    },
+    // -----------------------------------------------------------------------
+    // (Page: New Page).(Sections In Page) = (Section: New Section)
+    // (Section: New Section).(Page this section appears on) = (Page: New Page)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "75bdc6f0-f3d7-11d9-93f4-e24829d2f59b",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["75bb07d0-f3d7-11d9-93f4-e24829d2f59b", "75bcb580-f3d7-11d9-93f4-e24829d2f59b"],
+        "attribute": ["00030000-ce7f-11d9-8cd5-0011113ae5d6", "00030001-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    },
+    // -----------------------------------------------------------------------
+    // (Section: New Section).(Plugin View) = (Plugin View: Table)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "75be1510-f3d7-11d9-93f4-e24829d2f59b",
+             "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "00040101-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": "75bcb580-f3d7-11d9-93f4-e24829d2f59b",
+            "value": "00040301-ce7f-11d9-8cd5-0011113ae5d6"  }
+    },
+    // -----------------------------------------------------------------------
+    // (Query Spec: New Query)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Item": { "uuid": "75be6330-f3d7-11d9-93f4-e24829d2f59b" } },
+    // -----------------------------------------------------------------------
+    // (Query Spec: New Query).(Name) = "New Query"
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "75beb150-f3d7-11d9-93f4-e24829d2f59b",
+             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": "75be6330-f3d7-11d9-93f4-e24829d2f59b",
+            "value": "New Query"  }
+    },
+    // -----------------------------------------------------------------------
+    // (Query Spec: New Query).(Category) = (Category: Query Spec)
+    // (Category: Query Spec).(Items in Category) = (Query Spec: New Query)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "75beff70-f3d7-11d9-93f4-e24829d2f59b",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["75be6330-f3d7-11d9-93f4-e24829d2f59b", "00001212-ce7f-11d9-8cd5-0011113ae5d6"],
+        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    },
+    // -----------------------------------------------------------------------
+    // (Section: New Section).(Query Spec) = (Query Spec: New Query)
+    // (Query Spec: New Query).(Section this query spec belongs to) = (Section: New Section)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "75bf74a0-f3d7-11d9-93f4-e24829d2f59b",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["75bcb580-f3d7-11d9-93f4-e24829d2f59b", "75be6330-f3d7-11d9-93f4-e24829d2f59b"],
+        "attribute": ["00001006-ce7f-11d9-8cd5-0011113ae5d6", "00040105-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    }  ]
+  },
+  // =======================================================================
+  { "Transaction": [
+    // -----------------------------------------------------------------------
+    // (Layout Data: Layout data for Table of New Section)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Item": { "uuid": "75e30230-f3d7-11d9-93f4-e24829d2f59b" } },
+    // -----------------------------------------------------------------------
+    // (Layout Data: Layout data for Table of New Section).(Name) = "Layout data for Table of New Section"
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "75e35050-f3d7-11d9-93f4-e24829d2f59b",
+             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": "75e30230-f3d7-11d9-93f4-e24829d2f59b",
+            "value": "Layout data for Table of New Section"  }
+    },
+    // -----------------------------------------------------------------------
+    // (Layout Data: Layout data for Table of New Section).(Category) = (Category: Layout Data)
+    // (Category: Layout Data).(Items in Category) = (Layout Data: Layout data for Table of New Section)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "75e3c580-f3d7-11d9-93f4-e24829d2f59b",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["75e30230-f3d7-11d9-93f4-e24829d2f59b", "00040202-ce7f-11d9-8cd5-0011113ae5d6"],
+        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    },
+    // -----------------------------------------------------------------------
+    // (Layout Data: Layout data for Table of New Section).(Applies To Plugin) = (Plugin View: Table)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "75e413a0-f3d7-11d9-93f4-e24829d2f59b",
+             "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "00040103-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": "75e30230-f3d7-11d9-93f4-e24829d2f59b",
+            "value": "00040301-ce7f-11d9-8cd5-0011113ae5d6"  }
+    },
+    // -----------------------------------------------------------------------
+    // (Section: New Section).(Layout Data) = (Layout Data: Layout data for Table of New Section)
+    // (Layout Data: Layout data for Table of New Section).(Section this layout data belongs to) = (Section: New Section)
+    //           by (Chao) on (Jul 13, 2005)
+    { "Entry": {
+             "uuid": "75e461c0-f3d7-11d9-93f4-e24829d2f59b",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["75bcb580-f3d7-11d9-93f4-e24829d2f59b", "75e30230-f3d7-11d9-93f4-e24829d2f59b"],
+        "attribute": ["00040102-ce7f-11d9-8cd5-0011113ae5d6", "00040104-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    }  ]
+  },
+  // -----------------------------------------------------------------------
+  // (Page: PyCon).(Name) = "PyCon"
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "7a24a380-f3d7-11d9-93f4-e24829d2f59b",
+  "previousEntry": "75bb7d00-f3d7-11d9-93f4-e24829d2f59b",
+           "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
+           "item": "75bb07d0-f3d7-11d9-93f4-e24829d2f59b",
+          "value": "PyCon"  }
+  },
+  // -----------------------------------------------------------------------
+  // (Layout Data: Layout data for Table of New Section).(Table Columns) = (Attribute: Task)
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "7fc1dd30-f3d7-11d9-93f4-e24829d2f59b",
+           "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "0004010a-ce7f-11d9-8cd5-0011113ae5d6",
+           "item": "75e30230-f3d7-11d9-93f4-e24829d2f59b",
+          "value": "580b3700-e991-11d9-9146-e24829d2f59b"  }
+  },
+  // -----------------------------------------------------------------------
+  // (Layout Data: Layout data for Table of New Section).(Table Columns) = (Attribute: Mail)
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "81e902f0-f3d7-11d9-93f4-e24829d2f59b",
+           "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "0004010a-ce7f-11d9-8cd5-0011113ae5d6",
+           "item": "75e30230-f3d7-11d9-93f4-e24829d2f59b",
+          "value": "86e20770-e991-11d9-9146-e24829d2f59b"  }
+  },
+  // -----------------------------------------------------------------------
+  // (Layout Data: Layout data for Table of New Section).(Table Columns) = (Attribute: Who)
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "8652c5b0-f3d7-11d9-93f4-e24829d2f59b",
+           "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "0004010a-ce7f-11d9-8cd5-0011113ae5d6",
+           "item": "75e30230-f3d7-11d9-93f4-e24829d2f59b",
+          "value": "41c86750-e992-11d9-9146-e24829d2f59b"  }
+  },
+  // -----------------------------------------------------------------------
+  // (Layout Data: Layout data for Table of New Section).(Table Columns) = (Attribute: About)
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "8861a880-f3d7-11d9-93f4-e24829d2f59b",
+           "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "0004010a-ce7f-11d9-8cd5-0011113ae5d6",
+           "item": "75e30230-f3d7-11d9-93f4-e24829d2f59b",
+          "value": "81b155c0-e992-11d9-9146-e24829d2f59b"  }
+  },
+  // -----------------------------------------------------------------------
+  // (Layout Data: Layout data for Table of New Section).(Table Columns) = (Attribute: Calendar)
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "8d862fc0-f3d7-11d9-93f4-e24829d2f59b",
+           "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "0004010a-ce7f-11d9-8cd5-0011113ae5d6",
+           "item": "75e30230-f3d7-11d9-93f4-e24829d2f59b",
+          "value": "94845da0-e992-11d9-9146-e24829d2f59b"  }
+  },
+  // -----------------------------------------------------------------------
+  // (Layout Data: Layout data for Table of New Section).(Table Columns) = (Attribute: When)
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "90245a40-f3d7-11d9-93f4-e24829d2f59b",
+           "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "0004010a-ce7f-11d9-8cd5-0011113ae5d6",
+           "item": "75e30230-f3d7-11d9-93f4-e24829d2f59b",
+          "value": "9e90ff60-e992-11d9-9146-e24829d2f59b"  }
+  },
+  // -----------------------------------------------------------------------
+  // (Layout Data: Layout data for Table of New Section).(Table Columns) = (Attribute: Project)
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "921fb510-f3d7-11d9-93f4-e24829d2f59b",
+           "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "0004010a-ce7f-11d9-8cd5-0011113ae5d6",
+           "item": "75e30230-f3d7-11d9-93f4-e24829d2f59b",
+          "value": "ba630990-e992-11d9-9146-e24829d2f59b"  }
+  },
+  // -----------------------------------------------------------------------
+  // (Layout Data: Layout data for Table of New Section).(Table Columns) = (Attribute: Status)
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "951638c0-f3d7-11d9-93f4-e24829d2f59b",
+           "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "0004010a-ce7f-11d9-8cd5-0011113ae5d6",
+           "item": "75e30230-f3d7-11d9-93f4-e24829d2f59b",
+          "value": "c1428740-e992-11d9-9146-e24829d2f59b"  }
+  },
+  // -----------------------------------------------------------------------
+  // (Query Spec: New Query).(Matching Attribute) = (Attribute: Project)
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "9ac96b70-f3d7-11d9-93f4-e24829d2f59b",
+           "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "00001008-ce7f-11d9-8cd5-0011113ae5d6",
+           "item": "75be6330-f3d7-11d9-93f4-e24829d2f59b",
+          "value": "ba630990-e992-11d9-9146-e24829d2f59b"  }
+  },
+  // -----------------------------------------------------------------------
+  // (Query Spec: New Query).(Matching Value) = (Project: PyCon)
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "9da9cf10-f3d7-11d9-93f4-e24829d2f59b",
+           "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "00001007-ce7f-11d9-8cd5-0011113ae5d6",
+           "item": "75be6330-f3d7-11d9-93f4-e24829d2f59b",
+          "value": "397b0c50-e993-11d9-b345-e24829d2f59b"  }
   }
\ No newline at end of file



From chaolam at berlios.de  Wed Jul 13 22:48:27 2005
From: chaolam at berlios.de (Chih-Chao Lam at BerliOS)
Date: Wed, 13 Jul 2005 22:48:27 +0200
Subject: [openrecord-svn] r241 - in trunk/source: . model view
Message-ID: <200507132048.j6DKmRmv004304@sheep.berlios.de>

Author: chaolam
Date: 2005-07-13 22:48:26 +0200 (Wed, 13 Jul 2005)
New Revision: 241

Modified:
   trunk/source/TablePlugin.js
   trunk/source/base_style.css
   trunk/source/model/2005_june_axiomatic_items.json
   trunk/source/view/EntryView.js
   trunk/source/view/SuggestionBox.js
Log:
1) Added new "hacky" attribute "not lozenge", so that EntryView will not display Entries as Lozenges for such attributes
2) Minor css fixes

Modified: trunk/source/TablePlugin.js
===================================================================
--- trunk/source/TablePlugin.js	2005-07-13 19:52:49 UTC (rev 240)
+++ trunk/source/TablePlugin.js	2005-07-13 20:48:26 UTC (rev 241)
@@ -325,11 +325,11 @@
   for (var i=0; i<this._displayAttributes.length; ++i) {
     var attribute = this._displayAttributes[i];
     if (!this._sortAttribute) {this._sortAttribute = attribute;}
-    var aCell = View.appendNewElement(headerRow,"th",null,null,attribute.getDisplayString());
-    //var aCell = View.appendNewElement(headerElt,"span",null,null,attribute.getDisplayString());
+    var headerElt = View.appendNewElement(headerRow,"th");
+    var aCell = View.appendNewElement(headerElt,"span",null,null,attribute.getDisplayString());
     //aCell.style.background = "rgb(90%, 90%, 90%)";
     if (this._sortAttribute == attribute) {
-      aCell.appendChild(this.getSortIcon());
+      headerElt.appendChild(this.getSortIcon());
     }
     aCell.onclick = this.clickOnHeader.bindAsEventListener(this, attribute);
     if (this.isInEditMode()) {
@@ -399,7 +399,7 @@
 TablePlugin.prototype.getSortIcon = function() {
   var imageName = this._ascendingOrder ? TablePlugin.ASCENDING_GIF : TablePlugin.DESCENDING_GIF;
   var image =  Util.createImageElement(imageName);
-  image.align = "middle";
+  //image.align = "right";
   return image;
 };
 

Modified: trunk/source/base_style.css
===================================================================
--- trunk/source/base_style.css	2005-07-13 19:52:49 UTC (rev 240)
+++ trunk/source/base_style.css	2005-07-13 20:48:26 UTC (rev 241)
@@ -381,7 +381,7 @@
 }
 
 div.EntryView textarea {
-  //font-size: large;
+  /*font-size: large;*/
   background: #CCCCCC;
   width: 100%;
   font-family: Arial, Verdana, sans-serif;
@@ -450,6 +450,9 @@
   border-collapse: collapse; 
 }
 
+.simple_table img {
+  vertical-align: middle;
+}
 .simple_table th {
   padding: 0.3em;
   color: #000000;
@@ -676,19 +679,26 @@
 }
 
 .ItemValue, .ConnectionValue {
-  background-color: #DEE7F8; // light blue
-  padding: 1px;
+  background-color: #DEE7F8; /* light blue */
+  padding-top: 1px;
+  padding-bottom: 1px;
+  padding-left: 5px;
+  padding-right: 8px;
   border: thin solid #A4BDEC;	
-  -moz-border-radius: 6px; // WARNING: Mozilla only attribute. This just makes a rectangle have rounded corners
+  -moz-border-radius: 12px; /* WARNING: Mozilla only attribute. This just makes a rectangle have rounded corners */
 }
 .ItemValue:hover, .ConnectionValue:hover {
-  background-color: #BBCEF1; // darker blue
+  background-color: #BBCEF1; /* darker blue */
 }
 .ItemValueSelected {
   background-color:#598bec;
+  padding-top: 1px;
+  padding-bottom: 1px;
+  padding-left: 5px;
+  padding-right: 8px;
   color: #FFFFFF;
   border: thin solid #A4BDEC;	
-  -moz-border-radius: 6px; // WARNING: Mozilla only attribute. This just makes a rectangle have rounded corners
+  -moz-border-radius: 6px; /* WARNING: Mozilla only attribute. This just makes a rectangle have rounded corners */
 }
 
 .DateValue {

Modified: trunk/source/model/2005_june_axiomatic_items.json
===================================================================
--- trunk/source/model/2005_june_axiomatic_items.json	2005-07-13 19:52:49 UTC (rev 240)
+++ trunk/source/model/2005_june_axiomatic_items.json	2005-07-13 20:48:26 UTC (rev 241)
@@ -780,6 +780,10 @@
              "uuid": "00040105-ce7f-11d9-8cd5-0011113ae5d6" }
     },
     // -----------------------------------------------------------------------
+    { "Item": {                                               // Not Lozenge (Attribute)
+             "uuid": "00040106-ce7f-11d9-8cd5-0011113ae5d6" }
+    },
+    // -----------------------------------------------------------------------
     { "Item": {                                               // Table Columns (Attribute)
              "uuid": "0004010a-ce7f-11d9-8cd5-0011113ae5d6" }
     },
@@ -926,6 +930,23 @@
             "value": "00040201-ce7f-11d9-8cd5-0011113ae5d6" }
     },
     // -----------------------------------------------------------------------
+    { "Entry": {                                              // Not Lozenge
+             "uuid": "0040101d-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",  // Name
+             "item": "00040106-ce7f-11d9-8cd5-0011113ae5d6",  // Not Lozenge (Attribute)
+             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",  // TextValue
+            "value": "Not Lozenge" }
+    },
+    // -----------------------------------------------------------------------
+    { "Entry": {                                              
+             // in item (Attribute: Not Lozenge) assign (Attribute: Category) = (Category: Attribute)
+             // in item (Category: Attribute) assign (Attribute: Items in Category) = (Attribute: Plugin View)
+             "uuid": "0040101e-ce7f-11d9-8cd5-0011113ae5d6",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["00040106-ce7f-11d9-8cd5-0011113ae5d6", "00001210-ce7f-11d9-8cd5-0011113ae5d6"],
+        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    },  
+    // -----------------------------------------------------------------------
     { "Entry": {                                              // Layout Data
              "uuid": "0040102a-ce7f-11d9-8cd5-0011113ae5d6",
         "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",  // Name

Modified: trunk/source/view/EntryView.js
===================================================================
--- trunk/source/view/EntryView.js	2005-07-13 19:52:49 UTC (rev 240)
+++ trunk/source/view/EntryView.js	2005-07-13 20:48:26 UTC (rev 241)
@@ -57,6 +57,7 @@
 
 EntryView.CSS_CLASS_NEGATIVE_NUMBER  = "NegativeNumber";
 
+EntryView.UUID_FOR_ATTRIBUTE_NOT_LOZENGE = "00040106-ce7f-11d9-8cd5-0011113ae5d6";
 
 // -------------------------------------------------------------------
 // EntryView private class variables
@@ -97,6 +98,7 @@
   this._isEditing = false;
   this._proxyOnKeyFunction = null;
   this._alwaysUseEditField = null;
+  this._attributeCanBeLozenge = this._isLozengeAttribute();
   
   this._isProvisional = item.isProvisional();
   if (this._isProvisional) {
@@ -111,6 +113,18 @@
 /**
  *
  */
+EntryView.prototype._isLozengeAttribute = function() {
+  if (!EntryView.attributeCalledNotLozenge) {
+    EntryView.attributeCalledNotLozenge =
+      this.getWorld().getItemFromUuid(EntryView.UUID_FOR_ATTRIBUTE_NOT_LOZENGE);
+  }
+  var entries = this._attribute.getEntriesForAttribute(EntryView.attributeCalledNotLozenge);
+  return entries.length === 0; //PENDING need to actually check value of entries
+};
+
+/**
+ *
+ */
 EntryView.prototype._setupSuggestionBox = function() {
   var listOfSuggestions = this._suggestions || this.getWorld().getSuggestedItemsForAttribute(this._attribute);
   if (listOfSuggestions && listOfSuggestions.length > 0) {
@@ -190,7 +204,7 @@
  *
  */
 EntryView.prototype._isLozenge = function() {
-  return this._valueIsItem && !this._alwaysUseEditField;
+  return this._attributeCanBeLozenge && this._valueIsItem && !this._alwaysUseEditField;
 };
 
 
@@ -234,22 +248,27 @@
   if (this._entry) {
     var dataType = this._entry.getType();
     var className = this._getClassNameFromType(dataType);
+    var itemType  = this.getWorld().getItemFromUuid(World.UUID_FOR_TYPE_ITEM);
+    var connectionType  = this.getWorld().getItemFromUuid(World.UUID_FOR_TYPE_CONNECTION);
+    if (dataType == itemType || dataType == connectionType) {
+      if (this._isLozenge()) {
+        if (this.isInEditMode() && !this.draggable) {
+          this._textSpan.or_entryView = this; 
+          this.draggable = new Draggable(this._textSpan, {revert:true});
+        }
+      }
+      else {
+        className = EntryView.CSS_CLASS_TEXT_VALUE;
+      }
+    }
     this._textSpan.className = className;
     
     var typeNumber = this.getWorld().getItemFromUuid(World.UUID_FOR_TYPE_NUMBER);
-    var itemType  = this.getWorld().getItemFromUuid(World.UUID_FOR_TYPE_ITEM);
-    var connectionType  = this.getWorld().getItemFromUuid(World.UUID_FOR_TYPE_CONNECTION);
     if (dataType == typeNumber) {
       if (this._entry.getValue() < 0) {
         Util.css_addClass(this._textSpan,EntryView.CSS_CLASS_NEGATIVE_NUMBER);
       }
     }
-    else if (this.isInEditMode() && (dataType == itemType || dataType == connectionType)) {
-      if (!this.draggable) {
-        this._textSpan.or_entryView = this; 
-        this.draggable = new Draggable(this._textSpan, {revert:true});
-      }
-    }
   }
 };
 
@@ -700,22 +719,14 @@
  * @scope    private instance method
  */
 EntryView.prototype._buildTypeHashTable = function() {
-  var text      = this.getWorld().getItemFromUuid(World.UUID_FOR_TYPE_TEXT);
-  var number    = this.getWorld().getItemFromUuid(World.UUID_FOR_TYPE_NUMBER);
-  var dateType  = this.getWorld().getItemFromUuid(World.UUID_FOR_TYPE_DATE);
-  var checkMark = this.getWorld().getItemFromUuid(World.UUID_FOR_TYPE_CHECK_MARK);
-  var url       = this.getWorld().getItemFromUuid(World.UUID_FOR_TYPE_URL);
-  var itemType  = this.getWorld().getItemFromUuid(World.UUID_FOR_TYPE_ITEM);
-  var connectionType  = this.getWorld().getItemFromUuid(World.UUID_FOR_TYPE_CONNECTION);
-  
   EntryView._ourHashTableOfTypesKeyedByClassName = {};
-  EntryView._ourHashTableOfTypesKeyedByClassName[EntryView.CSS_CLASS_TEXT_VALUE] = text;
-  EntryView._ourHashTableOfTypesKeyedByClassName[EntryView.CSS_CLASS_NUMBER_VALUE] = number;
-  EntryView._ourHashTableOfTypesKeyedByClassName[EntryView.CSS_CLASS_DATE_VALUE] = dateType;
-  EntryView._ourHashTableOfTypesKeyedByClassName[EntryView.CSS_CLASS_CHECKMARK_VALUE] = checkMark;
-  EntryView._ourHashTableOfTypesKeyedByClassName[EntryView.CSS_CLASS_URL_VALUE] = url;
-  EntryView._ourHashTableOfTypesKeyedByClassName[EntryView.CSS_CLASS_ITEM_VALUE] = itemType;
-  EntryView._ourHashTableOfTypesKeyedByClassName[EntryView.CSS_CLASS_CONNECTION_VALUE] = connectionType;
+  EntryView._ourHashTableOfTypesKeyedByClassName[World.UUID_FOR_TYPE_TEXT] = EntryView.CSS_CLASS_TEXT_VALUE;
+  EntryView._ourHashTableOfTypesKeyedByClassName[World.UUID_FOR_TYPE_NUMBER] = EntryView.CSS_CLASS_NUMBER_VALUE;
+  EntryView._ourHashTableOfTypesKeyedByClassName[World.UUID_FOR_TYPE_DATE] = EntryView.CSS_CLASS_DATE_VALUE;
+  EntryView._ourHashTableOfTypesKeyedByClassName[World.UUID_FOR_TYPE_CHECK_MARK] = EntryView.CSS_CLASS_CHECKMARK_VALUE;
+  EntryView._ourHashTableOfTypesKeyedByClassName[World.UUID_FOR_TYPE_URL] = EntryView.CSS_CLASS_URL_VALUE;
+  EntryView._ourHashTableOfTypesKeyedByClassName[World.UUID_FOR_TYPE_ITEM] = EntryView.CSS_CLASS_ITEM_VALUE;
+  EntryView._ourHashTableOfTypesKeyedByClassName[World.UUID_FOR_TYPE_CONNECTION] = EntryView.CSS_CLASS_CONNECTION_VALUE;
 };
 
 
@@ -731,13 +742,14 @@
   if (!EntryView._ourHashTableOfTypesKeyedByClassName) {
     this._buildTypeHashTable();
   }
-  for (var className in EntryView._ourHashTableOfTypesKeyedByClassName) {
+  return EntryView._ourHashTableOfTypesKeyedByClassName[type.getUniqueKeyString()];
+/*  for (var className in EntryView._ourHashTableOfTypesKeyedByClassName) {
     typeItem = EntryView._ourHashTableOfTypesKeyedByClassName[className];
     if (type == typeItem) {
       return className;
     }
   }
-  Util.assert(false, "no such type: " + type.getDisplayString());
+  Util.assert(false, "no such type: " + type.getDisplayString());*/
 };
 
 
@@ -748,15 +760,15 @@
  * @scope    private instance method
  * @param    className    A string with the CSS className for a type.
  * @return   An item that represents a basic data type, like Text, Number, or URL. 
- */
+
 EntryView.prototype._getTypeFromTypeClassName = function(className) {
   if (!EntryView._ourHashTableOfTypesKeyedByClassName) {
     this._buildTypeHashTable();
   }
-  return EntryView._ourHashTableOfTypesKeyedByClassName[className];
+  return EntryView._ourHashTableOfTypesKeyedByClassName[className]; //NO LONGER VALID
 };
+ */
 
-
 // -------------------------------------------------------------------
 // End of file
 // -------------------------------------------------------------------
\ No newline at end of file

Modified: trunk/source/view/SuggestionBox.js
===================================================================
--- trunk/source/view/SuggestionBox.js	2005-07-13 19:52:49 UTC (rev 240)
+++ trunk/source/view/SuggestionBox.js	2005-07-13 20:48:26 UTC (rev 241)
@@ -250,7 +250,6 @@
       var row = table.insertRow(rowNumber);
       var cell = row.insertCell(columnNumber);
       row.className = (this._selectedItem == item) ? "selected":"";
-      //cell.style.background = (this._selectedItem == item) ? "rgb(0%,70%,100%)":""; //pending need to CSS-ify this
       cell.appendChild(textNode);
       cell.onmousedown = this._clickOnSelection.bindAsEventListener(this, item);
       rowNumber += 1;
@@ -261,9 +260,8 @@
     var suggestionBoxTop = Util.getOffsetTopFromElement(this._inputField) + this._inputField.offsetHeight;
     var suggestionBoxLeft = Util.getOffsetLeftFromElement(this._inputField);
     this._suggestionBoxDivElement.style.top = suggestionBoxTop + "px"; 
-    this._suggestionBoxDivElement.style.left = suggestionBoxLeft + "px";
-    // alert(this._inputField.offsetWidth);
-    this._suggestionBoxDivElement.style.width = (this._inputField.offsetWidth - 2)+ "px";
+    this._suggestionBoxDivElement.style.left = (suggestionBoxLeft-2) + "px";
+    this._suggestionBoxDivElement.style.width = (this._inputField.offsetWidth + 4)+ "px"; //HACK: Need to fix +4
 
     // this._suggestionBoxDivElement.className = "suggestion_box";
     this._suggestionBoxDivElement.style.visibility = "visible";



From chaolam at berlios.de  Thu Jul 14 00:56:29 2005
From: chaolam at berlios.de (Chih-Chao Lam at BerliOS)
Date: Thu, 14 Jul 2005 00:56:29 +0200
Subject: [openrecord-svn] r242 - in trunk/source: . view
Message-ID: <200507132256.j6DMuT4T013548@sheep.berlios.de>

Author: chaolam
Date: 2005-07-14 00:56:26 +0200 (Thu, 14 Jul 2005)
New Revision: 242

Modified:
   trunk/source/TablePlugin.js
   trunk/source/view/LoginView.js
Log:
minor cosmetic fix


Modified: trunk/source/TablePlugin.js
===================================================================
--- trunk/source/TablePlugin.js	2005-07-13 20:48:26 UTC (rev 241)
+++ trunk/source/TablePlugin.js	2005-07-13 22:56:26 UTC (rev 242)
@@ -52,8 +52,8 @@
 // TablePlugin public class constants
 // -------------------------------------------------------------------
 TablePlugin.UUID_FOR_ATTRIBUTE_TABLE_COLUMNS = "0004010a-ce7f-11d9-8cd5-0011113ae5d6";
-TablePlugin.ASCENDING_GIF = "ascending.gif";
-TablePlugin.DESCENDING_GIF = "descending.gif";
+TablePlugin.ASCENDING_GIF = "ascending.png";
+TablePlugin.DESCENDING_GIF = "descending.png";
 
 
 /**

Modified: trunk/source/view/LoginView.js
===================================================================
--- trunk/source/view/LoginView.js	2005-07-13 20:48:26 UTC (rev 241)
+++ trunk/source/view/LoginView.js	2005-07-13 22:56:26 UTC (rev 242)
@@ -144,7 +144,7 @@
     // Create a line that looks like this:
     //   Hello Jane Doe.  _Sign out_  [Edit]
     
-    View.appendNewTextNode(mySpan,"Hello " + currentUser.getDisplayName() + ". ");
+    View.appendNewTextNode(mySpan,"Hello " + currentUser.getDisplayString() + ". ");
     View.appendNewElement(mySpan,"a",null,null,"Sign out").onclick = this._clickOnSignoutLink.bindAsEventListener(this);
     View.appendNewTextNode(mySpan," ");
     View.appendNewElement(mySpan,"input",null,{type:"button",value:



From chaolam at berlios.de  Thu Jul 14 00:56:58 2005
From: chaolam at berlios.de (Chih-Chao Lam at BerliOS)
Date: Thu, 14 Jul 2005 00:56:58 +0200
Subject: [openrecord-svn] r243 - trunk/images
Message-ID: <200507132256.j6DMuwxC013744@sheep.berlios.de>

Author: chaolam
Date: 2005-07-14 00:56:55 +0200 (Thu, 14 Jul 2005)
New Revision: 243

Added:
   trunk/images/ascending.png
   trunk/images/descending.png
Log:
minor cosmetic fix


Added: trunk/images/ascending.png
===================================================================
(Binary files differ)


Property changes on: trunk/images/ascending.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/images/descending.png
===================================================================
(Binary files differ)


Property changes on: trunk/images/descending.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream



From chaolam at berlios.de  Thu Jul 14 00:57:34 2005
From: chaolam at berlios.de (Chih-Chao Lam at BerliOS)
Date: Thu, 14 Jul 2005 00:57:34 +0200
Subject: [openrecord-svn] r244 - trunk/images
Message-ID: <200507132257.j6DMvYtP014115@sheep.berlios.de>

Author: chaolam
Date: 2005-07-14 00:57:33 +0200 (Thu, 14 Jul 2005)
New Revision: 244

Removed:
   trunk/images/ascending.gif
   trunk/images/descending.gif
Log:
minor cosmetic fix


Deleted: trunk/images/ascending.gif
===================================================================
(Binary files differ)

Deleted: trunk/images/descending.gif
===================================================================
(Binary files differ)



From chaolam at berlios.de  Thu Jul 14 01:44:07 2005
From: chaolam at berlios.de (Chih-Chao Lam at BerliOS)
Date: Thu, 14 Jul 2005 01:44:07 +0200
Subject: [openrecord-svn] r245 - in trunk/source: model view
Message-ID: <200507132344.j6DNi7nY007387@sheep.berlios.de>

Author: chaolam
Date: 2005-07-14 01:43:59 +0200 (Thu, 14 Jul 2005)
New Revision: 245

Modified:
   trunk/source/model/Item.js
   trunk/source/view/MultiEntriesView.js
Log:
minor bug and cosmetic fix


Modified: trunk/source/model/Item.js
===================================================================
--- trunk/source/model/Item.js	2005-07-13 22:57:33 UTC (rev 244)
+++ trunk/source/model/Item.js	2005-07-13 23:43:59 UTC (rev 245)
@@ -234,7 +234,7 @@
   // If we've just been asked to replace the string "Foo" with the string "Foo",
   // then don't even bother creating a new entry. 
   if (previousEntry) {
-    var oldValue = previousEntry.getValue();
+    var oldValue = previousEntry.getValue(this);
     var oldPairOfAttributes = previousEntry.getAttribute();
     var oldPairOfItems = previousEntry.getItem();
     if (Util.isArray(oldPairOfAttributes)) {

Modified: trunk/source/view/MultiEntriesView.js
===================================================================
--- trunk/source/view/MultiEntriesView.js	2005-07-13 22:57:33 UTC (rev 244)
+++ trunk/source/view/MultiEntriesView.js	2005-07-13 23:43:59 UTC (rev 245)
@@ -117,7 +117,7 @@
   if (this._entryViews.length > 1) {
     return -1;
   }
-  return this.getHtmlElement().offsetWidth-8;
+  return this.getHtmlElement().offsetWidth-7;
 };
 
 /**
@@ -329,7 +329,7 @@
   if (this.isInEditMode()) {
     htmlElement.onclick = this._handleOwnClick.bindAsEventListener(this);
     var listener = this;
-    Droppables.add(htmlElement, {accept: [EntryView.CSS_CLASS_CONNECTION_VALUE,EntryView.CSS_ITEM_VALUE],
+    Droppables.add(htmlElement, {accept: [EntryView.CSS_CLASS_CONNECTION_VALUE,EntryView.CSS_ITEM_VALUE,EntryView.CSS_CLASS_SELECTED],
       hoverclass: "test",
       onDrop: function(element) {listener._handleDrop(element);}});
   } 



From chaolam at berlios.de  Thu Jul 14 01:47:43 2005
From: chaolam at berlios.de (Chih-Chao Lam at BerliOS)
Date: Thu, 14 Jul 2005 01:47:43 +0200
Subject: [openrecord-svn] r246 - trunk/repositories
Message-ID: <200507132347.j6DNlhww008642@sheep.berlios.de>

Author: chaolam
Date: 2005-07-14 01:47:36 +0200 (Thu, 14 Jul 2005)
New Revision: 246

Modified:
   trunk/repositories/dashboard.json
Log:
minor bug and cosmetic fix


Modified: trunk/repositories/dashboard.json
===================================================================
--- trunk/repositories/dashboard.json	2005-07-13 23:43:59 UTC (rev 245)
+++ trunk/repositories/dashboard.json	2005-07-13 23:47:36 UTC (rev 246)
@@ -4436,4 +4436,15 @@
       "attribute": "00001007-ce7f-11d9-8cd5-0011113ae5d6",
            "item": "75be6330-f3d7-11d9-93f4-e24829d2f59b",
           "value": "397b0c50-e993-11d9-b345-e24829d2f59b"  }
+  },
+  // -----------------------------------------------------------------------
+  // (Page: Dashboard View).(Summary) = "This page lists all your Items sectioned by Triage Status: Now, Later and Do...
+  //           by (Chao) on (Jul 13, 2005)
+  { "Entry": {
+           "uuid": "6a141400-f3f8-11d9-845f-e24829d2f59b",
+  "previousEntry": "99e9f770-e990-11d9-b90a-e24829d2f59b",
+           "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "00001003-ce7f-11d9-8cd5-0011113ae5d6",
+           "item": "99e90d10-e990-11d9-b90a-e24829d2f59b",
+          "value": "This page lists all your Items sectioned by Triage Status: Now, Later and Done."  }
   }
\ No newline at end of file



From chaolam at berlios.de  Thu Jul 14 02:31:06 2005
From: chaolam at berlios.de (Chih-Chao Lam at BerliOS)
Date: Thu, 14 Jul 2005 02:31:06 +0200
Subject: [openrecord-svn] r247 - trunk/source
Message-ID: <200507140031.j6E0V69F030035@sheep.berlios.de>

Author: chaolam
Date: 2005-07-14 02:31:04 +0200 (Thu, 14 Jul 2005)
New Revision: 247

Modified:
   trunk/source/base_style.css
Log:
css fix


Modified: trunk/source/base_style.css
===================================================================
--- trunk/source/base_style.css	2005-07-13 23:47:36 UTC (rev 246)
+++ trunk/source/base_style.css	2005-07-14 00:31:04 UTC (rev 247)
@@ -508,7 +508,7 @@
 
 td.title {
   font-weight: bold;  
-  background: #000000;
+  background: #FFFFFF;
 }
 
 td.label {
@@ -618,7 +618,7 @@
 
 div.SectionView {
   border-top: solid thin #CCCCCC;
-  margin-top: 3em;
+  margin-top: 0.5em;
   padding-left: 0px;
 }
 
@@ -698,7 +698,7 @@
   padding-right: 8px;
   color: #FFFFFF;
   border: thin solid #A4BDEC;	
-  -moz-border-radius: 6px; /* WARNING: Mozilla only attribute. This just makes a rectangle have rounded corners */
+  -moz-border-radius: 12px; /* WARNING: Mozilla only attribute. This just makes a rectangle have rounded corners */
 }
 
 .DateValue {



From chaolam at berlios.de  Thu Jul 14 19:58:34 2005
From: chaolam at berlios.de (Chih-Chao Lam at BerliOS)
Date: Thu, 14 Jul 2005 19:58:34 +0200
Subject: [openrecord-svn] r248 - in trunk/source: . view
Message-ID: <200507141758.j6EHwY9d013328@sheep.berlios.de>

Author: chaolam
Date: 2005-07-14 19:58:33 +0200 (Thu, 14 Jul 2005)
New Revision: 248

Modified:
   trunk/source/base_style.css
   trunk/source/view/SuggestionBox.js
Log:
css fixes from Mimi

Modified: trunk/source/base_style.css
===================================================================
--- trunk/source/base_style.css	2005-07-14 00:31:04 UTC (rev 247)
+++ trunk/source/base_style.css	2005-07-14 17:58:33 UTC (rev 248)
@@ -130,7 +130,7 @@
   text-decoration: none;
   border-bottom-style: solid;
   border-bottom-width: 1pt;
-  background: #99CCFF;
+  background: #A4BDEC;
 }
 
 a.anchor {
@@ -153,7 +153,7 @@
   text-decoration: none;
   border-bottom-style: solid;
   border-bottom-width: 1pt;
-  background: #99CCFF;
+  background: #DEE7F8;
 }
 
 a.more {
@@ -288,7 +288,7 @@
 }
 
 .menu_item a:hover {
-  background-color: #99CCFF;
+  background-color: #DEE7F8;
   width: 100%;
   border-left: solid 1pt #6699FF;
   border-bottom-style: none;
@@ -456,7 +456,7 @@
 .simple_table th {
   padding: 0.3em;
   color: #000000;
-  background: #99CCFF;
+  background: #BBCEF1;
   font-size: 0.8em;
   text-align: left;
   border: 1pt solid rgb(70%, 70%, 70%);
@@ -467,7 +467,7 @@
 }
 
 /*.viewmode .simple_table tr:hover {
-  background: #99CCFF;
+  background: #DEE7F8;
 }*/
 
 .simple_table td {
@@ -508,7 +508,8 @@
 
 td.title {
   font-weight: bold;  
-  background: #FFFFFF;
+  color: #000000;
+  background: #BBCEF1;
 }
 
 td.label {
@@ -541,7 +542,7 @@
 }
 
 /*.editmode .simple_table td:hover {
-  background: #99CCFF;
+  background: #DEE7F8;
 }*/
 
 td.newitem {
@@ -551,7 +552,7 @@
 
 .editmode .simple_table td.selected {
   /* padding: 0px 0px; */
-  background: #99CCFF;
+  background: #DEE7F8;
 }
 
 

Modified: trunk/source/view/SuggestionBox.js
===================================================================
--- trunk/source/view/SuggestionBox.js	2005-07-14 00:31:04 UTC (rev 247)
+++ trunk/source/view/SuggestionBox.js	2005-07-14 17:58:33 UTC (rev 248)
@@ -51,7 +51,7 @@
   this._inputField = htmlInputField;
   this._listOfSuggestedItems = listOfItems.sort(SuggestionBox._compareItemDisplayStrings);
   this._selectedItem = null;
-  this._shouldHide = htmlInputField.value.length === 0;
+  this._shouldHide = true; //htmlInputField.value.length === 0;
   
   this._suggestionBoxDivElement = View.appendNewElement(document.body, "div", "SuggestionBox");
   this._suggestionBoxDivElement.style.zIndex = 11;



From skinner at berlios.de  Mon Jul 18 03:11:47 2005
From: skinner at berlios.de (Brian Douglas Skinner at BerliOS)
Date: Mon, 18 Jul 2005 03:11:47 +0200
Subject: [openrecord-svn] r250 - trunk/documentation
Message-ID: <200507180111.j6I1BllI028033@sheep.berlios.de>

Author: skinner
Date: 2005-07-18 03:11:43 +0200 (Mon, 18 Jul 2005)
New Revision: 250

Modified:
   trunk/documentation/release_planning.txt
Log:
updates to the to-do list

Modified: trunk/documentation/release_planning.txt
===================================================================
--- trunk/documentation/release_planning.txt	2005-07-17 19:40:09 UTC (rev 249)
+++ trunk/documentation/release_planning.txt	2005-07-18 01:11:43 UTC (rev 250)
@@ -258,17 +258,22 @@
 chao   |          | done?   | 12. be able to delete a selected lozenge 
        |          |         | 13. be able to delete a selected table row 
 chao   | 0.5  IED |         | 14. improve keyboard navigation: tab, arrow, and return keys
-       |          |         | 15. Get data model to pass the ordinal unit tests again
-       |          |         | 16. drag-and-drop lozenges
-       |          |         | 17. drag-and-drop to re-order navbar menu items
+mignon |          |       >>| 15. Get data model to pass the ordinal unit tests again
+       |          |copy/move? 16. drag-and-drop lozenges
+       |          |       >>| 17. drag-and-drop to re-order navbar menu items
        |          |         | 18. drag-and-drop to re-order table rows
-       |          |         | 19. drag-and-drop to re-order table columns
+       |          |       >>| 19. drag-and-drop to re-order table columns
        |          |         | 20. improve UI for "add new attribute" in Table View 
 brian  | 1    IED |         | 21. Rationalize our CSS style sheet approach
        |          |         | 22. Reach consensus on (colors, padding, and borders) and then implement
        |          |         | 23. Make sure view code uses transactions
        |          |         | 24. Deal with \n in page name or summary fields
        |          |         | 25. BUG: need to encode reserved characters(<&>\n"') back at client-server layer
+       |          |       >>|     Be able to make html files with just one <script> element, not dozens
+       |          |       >>|     Be able to easily create new documents that are empty
+       |          |       >>|     Create a dozen demo documents (quotes, dictionary, movies, books, oil-change, etc.)
+       |          |       >>|     Have different documents use different style-sheets
+       |          |       >>|     Add a DateValue class that supports dates like "2005"
 -------+----------+---------+----------------------------------------------
        |          |         | 26. Set up an OpenRecord.org "dogfood" site & hand-copy info into it
        |          |         | 27. Write one unit test that tests GUI code
@@ -278,8 +283,8 @@
        |          |         | 31. Implement a good URL-to-content mapping, such that URLs won't go bad in future releases
        |          |         | 32. Convert UI code from DOM level 0 to DOM level 2
        |          |         | 33. Rationalize the View api and document public api
-       |          |         | 34. Document the Data model public api
-       |          |         | 35. Add support for saving content when used from a file:// URL
+       |          |       >>| 34. Improve and document the Data model public api
+       |          |       >>| 35. Add support for saving content when used from a file:// URL
        |          |         | 36. Do refactoring wherever needed (e.g. SuggestionBox and AttributeSuggestionBox)
        |          |         | 37. improve UI for setting the expected data type of an attribute
        |          |         | 38. improve UI for creating a new category
@@ -359,8 +364,6 @@
 ---------------------------------------------------
  + Figure out how to write unit tests for GUI code
 ---------------------------------------------------
- + Refactor the data model code so that categories cache their lists of items
----------------------------------------------------
  + BUG: Back button is broken
     The browser's back button doesn't work after you click from 
     page to page in the navbar.



From skinner at berlios.de  Mon Jul 18 04:26:36 2005
From: skinner at berlios.de (Brian Douglas Skinner at BerliOS)
Date: Mon, 18 Jul 2005 04:26:36 +0200
Subject: [openrecord-svn] r251 - in trunk: repositories source/model source/view
Message-ID: <200507180226.j6I2Qa13017627@sheep.berlios.de>

Author: skinner
Date: 2005-07-18 04:26:25 +0200 (Mon, 18 Jul 2005)
New Revision: 251

Modified:
   trunk/repositories/dashboard.json
   trunk/source/model/2005_june_axiomatic_items.json
   trunk/source/view/EntryView.js
   trunk/source/view/SectionView.js
Log:
minor UUID clean-up

Modified: trunk/repositories/dashboard.json
===================================================================
--- trunk/repositories/dashboard.json	2005-07-18 01:11:43 UTC (rev 250)
+++ trunk/repositories/dashboard.json	2005-07-18 02:26:25 UTC (rev 251)
@@ -1473,7 +1473,7 @@
            "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
       "attribute": "0004010a-ce7f-11d9-8cd5-0011113ae5d6",
            "item": "79115100-f3d2-11d9-8cf6-e24829d2f59b",
-          "value": "00040106-ce7f-11d9-8cd5-0011113ae5d6"  }
+          "value": "0004010f-ce7f-11d9-8cd5-0011113ae5d6"  }
   },
   // -----------------------------------------------------------------------
   // (Layout Data: Layout data for Table of New Section).(Table Columns) = (Attribute: Inverse Attribute)
@@ -1491,7 +1491,7 @@
   { "Entry": {
            "uuid": "8b859710-f3d2-11d9-8cf6-e24829d2f59b",
            "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
-      "attribute": "00040106-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "0004010f-ce7f-11d9-8cd5-0011113ae5d6",
            "item": "580b3700-e991-11d9-9146-e24829d2f59b",
           "value": "yes"  }
   },
@@ -1501,7 +1501,7 @@
   { "Entry": {
            "uuid": "8fbe37b0-f3d2-11d9-8cf6-e24829d2f59b",
            "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
-      "attribute": "00040106-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "0004010f-ce7f-11d9-8cd5-0011113ae5d6",
            "item": "86e20770-e991-11d9-9146-e24829d2f59b",
           "value": "yes"  }
   },
@@ -1511,7 +1511,7 @@
   { "Entry": {
            "uuid": "987f6db0-f3d2-11d9-8cf6-e24829d2f59b",
            "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
-      "attribute": "00040106-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "0004010f-ce7f-11d9-8cd5-0011113ae5d6",
            "item": "94845da0-e992-11d9-9146-e24829d2f59b",
           "value": "yes"  }
   },
@@ -1521,7 +1521,7 @@
   { "Entry": {
            "uuid": "9c12f4b0-f3d2-11d9-8cf6-e24829d2f59b",
            "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
-      "attribute": "00040106-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "0004010f-ce7f-11d9-8cd5-0011113ae5d6",
            "item": "c1428740-e992-11d9-9146-e24829d2f59b",
           "value": "yes"  }
   },

Modified: trunk/source/model/2005_june_axiomatic_items.json
===================================================================
--- trunk/source/model/2005_june_axiomatic_items.json	2005-07-18 01:11:43 UTC (rev 250)
+++ trunk/source/model/2005_june_axiomatic_items.json	2005-07-18 02:26:25 UTC (rev 251)
@@ -780,14 +780,14 @@
              "uuid": "00040105-ce7f-11d9-8cd5-0011113ae5d6" }
     },
     // -----------------------------------------------------------------------
-    { "Item": {                                               // Not Lozenge (Attribute)
-             "uuid": "00040106-ce7f-11d9-8cd5-0011113ae5d6" }
-    },
-    // -----------------------------------------------------------------------
     { "Item": {                                               // Table Columns (Attribute)
              "uuid": "0004010a-ce7f-11d9-8cd5-0011113ae5d6" }
     },
     // -----------------------------------------------------------------------
+    { "Item": {                                               // Not Lozenge (Attribute)
+             "uuid": "0004010f-ce7f-11d9-8cd5-0011113ae5d6" }
+    },
+    // -----------------------------------------------------------------------
     { "Item": {                                               // Plugin View (Category)
              "uuid": "00040201-ce7f-11d9-8cd5-0011113ae5d6" }
     },
@@ -930,23 +930,6 @@
             "value": "00040201-ce7f-11d9-8cd5-0011113ae5d6" }
     },
     // -----------------------------------------------------------------------
-    { "Entry": {                                              // Not Lozenge
-             "uuid": "0040101d-ce7f-11d9-8cd5-0011113ae5d6",
-        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",  // Name
-             "item": "00040106-ce7f-11d9-8cd5-0011113ae5d6",  // Not Lozenge (Attribute)
-             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",  // TextValue
-            "value": "Not Lozenge" }
-    },
-    // -----------------------------------------------------------------------
-    { "Entry": {                                              
-             // in item (Attribute: Not Lozenge) assign (Attribute: Category) = (Category: Attribute)
-             // in item (Category: Attribute) assign (Attribute: Items in Category) = (Attribute: Plugin View)
-             "uuid": "0040101e-ce7f-11d9-8cd5-0011113ae5d6",
-             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
-             "item": ["00040106-ce7f-11d9-8cd5-0011113ae5d6", "00001210-ce7f-11d9-8cd5-0011113ae5d6"],
-        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
-    },  
-    // -----------------------------------------------------------------------
     { "Entry": {                                              // Layout Data
              "uuid": "0040102a-ce7f-11d9-8cd5-0011113ae5d6",
         "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",  // Name
@@ -1090,6 +1073,23 @@
             "value": "00001210-ce7f-11d9-8cd5-0011113ae5d6" }
     },
     // -----------------------------------------------------------------------
+    { "Entry": {                                              // Not Lozenge
+             "uuid": "004010fa-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",  // Name
+             "item": "0004010f-ce7f-11d9-8cd5-0011113ae5d6",  // Not Lozenge (Attribute)
+             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",  // TextValue
+            "value": "Not Lozenge" }
+    },
+    // -----------------------------------------------------------------------
+    { "Entry": {                                              
+             // in item (Attribute: Not Lozenge) assign (Attribute: Category) = (Category: Attribute)
+             // in item (Category: Attribute) assign (Attribute: Items in Category) = (Attribute: Plugin View)
+             "uuid": "004010fb-ce7f-11d9-8cd5-0011113ae5d6",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["0004010f-ce7f-11d9-8cd5-0011113ae5d6", "00001210-ce7f-11d9-8cd5-0011113ae5d6"],
+        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    },  
+    // -----------------------------------------------------------------------
     { "Entry": {                                              // Plugin View
              "uuid": "0040201a-ce7f-11d9-8cd5-0011113ae5d6",
         "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",  // Name

Modified: trunk/source/view/EntryView.js
===================================================================
--- trunk/source/view/EntryView.js	2005-07-18 01:11:43 UTC (rev 250)
+++ trunk/source/view/EntryView.js	2005-07-18 02:26:25 UTC (rev 251)
@@ -57,7 +57,7 @@
 
 EntryView.CSS_CLASS_NEGATIVE_NUMBER  = "NegativeNumber";
 
-EntryView.UUID_FOR_ATTRIBUTE_NOT_LOZENGE = "00040106-ce7f-11d9-8cd5-0011113ae5d6";
+EntryView.UUID_FOR_ATTRIBUTE_NOT_LOZENGE = "0004010f-ce7f-11d9-8cd5-0011113ae5d6";
 
 // -------------------------------------------------------------------
 // EntryView private class variables

Modified: trunk/source/view/SectionView.js
===================================================================
--- trunk/source/view/SectionView.js	2005-07-18 01:11:43 UTC (rev 250)
+++ trunk/source/view/SectionView.js	2005-07-18 02:26:25 UTC (rev 251)
@@ -64,7 +64,8 @@
 
 SectionView.UUID_FOR_ATTRIBUTE_SECTION_THIS_LAYOUT_DATA_BELONGS_TO = "00040104-ce7f-11d9-8cd5-0011113ae5d6";
 SectionView.UUID_FOR_ATTRIBUTE_SECTION_THIS_QUERY_BELONGS_TO = "00040105-ce7f-11d9-8cd5-0011113ae5d6";
-// TablePlugin.UUID_FOR_ATTRIBUTE_TABLE_COLUMNS = "0004010a-ce7f-11d9-8cd5-0011113ae5d6";
+// TablePlugin.UUID_FOR_ATTRIBUTE_TABLE_COLUMNS  = "0004010a-ce7f-11d9-8cd5-0011113ae5d6";
+// EntryView.UUID_FOR_ATTRIBUTE_NOT_LOZENGE      = "0004010f-ce7f-11d9-8cd5-0011113ae5d6";
 
 SectionView.UUID_FOR_CATEGORY_PLUGIN_VIEW        = "00040201-ce7f-11d9-8cd5-0011113ae5d6";
 SectionView.UUID_FOR_CATEGORY_LAYOUT_DATA        = "00040202-ce7f-11d9-8cd5-0011113ae5d6";



From skinner at berlios.de  Mon Jul 18 20:39:38 2005
From: skinner at berlios.de (Brian Douglas Skinner at BerliOS)
Date: Mon, 18 Jul 2005 20:39:38 +0200
Subject: [openrecord-svn] r252 - in trunk: documentation source
Message-ID: <200507181839.j6IIdcno011114@sheep.berlios.de>

Author: skinner
Date: 2005-07-18 20:39:37 +0200 (Mon, 18 Jul 2005)
New Revision: 252

Modified:
   trunk/documentation/release_planning.txt
   trunk/source/CodingConventions.js
Log:
added tasks to the to-do list

Modified: trunk/documentation/release_planning.txt
===================================================================
--- trunk/documentation/release_planning.txt	2005-07-18 02:26:25 UTC (rev 251)
+++ trunk/documentation/release_planning.txt	2005-07-18 18:39:37 UTC (rev 252)
@@ -269,11 +269,14 @@
        |          |         | 23. Make sure view code uses transactions
        |          |         | 24. Deal with \n in page name or summary fields
        |          |         | 25. BUG: need to encode reserved characters(<&>\n"') back at client-server layer
-       |          |       >>|     Be able to make html files with just one <script> element, not dozens
+       |          |       >>|     Be able to make html files with just one <script> element, not dozens (see http://dojo.jot.com/WikiHome/DojoPackageSystem and http://openjsan.org/doc/c/cw/cwest/JSAN/0.06/lib/JSAN.html
        |          |       >>|     Be able to easily create new documents that are empty
        |          |       >>|     Create a dozen demo documents (quotes, dictionary, movies, books, oil-change, etc.)
        |          |       >>|     Have different documents use different style-sheets
        |          |       >>|     Add a DateValue class that supports dates like "2005"
+       |          |         |     Data model: boolean, URL, entries that apply to timespan (e.g. annual population)
+       |          |         |     improve UI for initial "out of the box" experience
+       |          |         |     UI and data model design to support collaboration
 -------+----------+---------+----------------------------------------------
        |          |         | 26. Set up an OpenRecord.org "dogfood" site & hand-copy info into it
        |          |         | 27. Write one unit test that tests GUI code

Modified: trunk/source/CodingConventions.js
===================================================================
--- trunk/source/CodingConventions.js	2005-07-18 02:26:25 UTC (rev 251)
+++ trunk/source/CodingConventions.js	2005-07-18 18:39:37 UTC (rev 252)
@@ -12,6 +12,8 @@
 //       + classes are initial caps (CamelCaps): "Rectangle", "FillPattern"
 //       + all variable names and methods names are mixedCaps: "fillPattern"
 //       + acronyms appear in initial caps: "htmlString", not "HTMLString"
+//         (see http://www.dojotoolkit.org/pipermail/dojo-interest/2005-July/000534.html
+//         (see http://www.dojotoolkit.org/pipermail/dojo-interest/2005-July/000535.html)
 //       + constants are all caps, with underscores: FILL_PATTERN_SOLID
 //    + file names
 //       + each file has just one public class



From skinner at berlios.de  Tue Jul 19 22:47:19 2005
From: skinner at berlios.de (Brian Douglas Skinner at BerliOS)
Date: Tue, 19 Jul 2005 22:47:19 +0200
Subject: [openrecord-svn] r253 - in trunk: documentation source
Message-ID: <200507192047.j6JKlJuf014477@sheep.berlios.de>

Author: skinner
Date: 2005-07-19 22:47:19 +0200 (Tue, 19 Jul 2005)
New Revision: 253

Modified:
   trunk/documentation/release_planning.txt
   trunk/source/CodingConventions.js
Log:
added tasks to the to-do list

Modified: trunk/documentation/release_planning.txt
===================================================================
--- trunk/documentation/release_planning.txt	2005-07-18 18:39:37 UTC (rev 252)
+++ trunk/documentation/release_planning.txt	2005-07-19 20:47:19 UTC (rev 253)
@@ -277,6 +277,9 @@
        |          |         |     Data model: boolean, URL, entries that apply to timespan (e.g. annual population)
        |          |         |     improve UI for initial "out of the box" experience
        |          |         |     UI and data model design to support collaboration
+       |          |         |     config option so that only logged-in users have read-access
+       |          |         |     have an "icon" attribute, and use icons in suggestion box and in EntryView
+       |          |         |     run in IE as well as Firefox
 -------+----------+---------+----------------------------------------------
        |          |         | 26. Set up an OpenRecord.org "dogfood" site & hand-copy info into it
        |          |         | 27. Write one unit test that tests GUI code

Modified: trunk/source/CodingConventions.js
===================================================================
--- trunk/source/CodingConventions.js	2005-07-18 18:39:37 UTC (rev 252)
+++ trunk/source/CodingConventions.js	2005-07-19 20:47:19 UTC (rev 253)
@@ -45,6 +45,9 @@
 // + compatiblity with other browsers and other JavaScript libraries 
 //    + use "get" and "set" accessors -- do *not* assign Mozilla "getter" and "setter" methods
 //    + [DEPRECATED: add methods in your own namespace -- do *not* extend built-in objects: String.prototype.toEsperanto = function ...]
+//    + do *not* extend Object.prototype
+//      (see http://erik.eae.net/archives/2005/06/06/22.13.54/)
+//      (see http://sourceforge.net/forum/forum.php?thread_id=1315559&forum_id=379297)
 //
 // + indenting, tabs, and line ending characters
 //    + 2-space indenting



From skinner at berlios.de  Wed Jul 20 19:46:44 2005
From: skinner at berlios.de (Brian Douglas Skinner at BerliOS)
Date: Wed, 20 Jul 2005 19:46:44 +0200
Subject: [openrecord-svn] r254 - trunk/documentation
Message-ID: <200507201746.j6KHkiEw025919@sheep.berlios.de>

Author: skinner
Date: 2005-07-20 19:46:40 +0200 (Wed, 20 Jul 2005)
New Revision: 254

Modified:
   trunk/documentation/release_planning.txt
Log:
signed up for the DateValue task

Modified: trunk/documentation/release_planning.txt
===================================================================
--- trunk/documentation/release_planning.txt	2005-07-19 20:47:19 UTC (rev 253)
+++ trunk/documentation/release_planning.txt	2005-07-20 17:46:40 UTC (rev 254)
@@ -273,7 +273,7 @@
        |          |       >>|     Be able to easily create new documents that are empty
        |          |       >>|     Create a dozen demo documents (quotes, dictionary, movies, books, oil-change, etc.)
        |          |       >>|     Have different documents use different style-sheets
-       |          |       >>|     Add a DateValue class that supports dates like "2005"
+brian  | 1    IED |       >>|     Add a DateValue class that supports dates like "2005"
        |          |         |     Data model: boolean, URL, entries that apply to timespan (e.g. annual population)
        |          |         |     improve UI for initial "out of the box" experience
        |          |         |     UI and data model design to support collaboration



From skinner at berlios.de  Wed Jul 20 22:14:13 2005
From: skinner at berlios.de (Brian Douglas Skinner at BerliOS)
Date: Wed, 20 Jul 2005 22:14:13 +0200
Subject: [openrecord-svn] r255 - in trunk: . documentation repositories source/model source/util source/view
Message-ID: <200507202014.j6KKEDIf029933@sheep.berlios.de>

Author: skinner
Date: 2005-07-20 22:14:10 +0200 (Wed, 20 Jul 2005)
New Revision: 255

Added:
   trunk/source/util/DateValue.js
   trunk/source/util/DateValueTest.html
   trunk/source/util/DateValueTest.js
Modified:
   trunk/dashboard.html
   trunk/demo_page.html
   trunk/documentation/release_planning.txt
   trunk/dogfood.html
   trunk/repositories/dogfood.json
   trunk/source/model/DeltaVirtualServer.js
   trunk/source/model/Entry.js
   trunk/source/model/ModelTest.html
   trunk/source/model/ModelTest.js
   trunk/source/model/StubVirtualServer.js
   trunk/source/util/LintTest.js
   trunk/source/util/TestSuite.html
   trunk/source/util/Util.js
   trunk/source/view/EntryView.js
Log:
Created a new DateValue class, that extends Date to support values like "1944".

Modified: trunk/dashboard.html
===================================================================
--- trunk/dashboard.html	2005-07-20 17:46:40 UTC (rev 254)
+++ trunk/dashboard.html	2005-07-20 20:14:10 UTC (rev 255)
@@ -21,6 +21,7 @@
     <script type="text/javascript" src="source/util/Uuid.js"></script>
     <script type="text/javascript" src="source/util/Util.js"></script>
     <script type="text/javascript" src="source/util/Cookie.js"></script>
+    <script type="text/javascript" src="source/util/DateValue.js"></script>
 
     <script type="text/javascript" src="source/view/View.js"></script>
     <script type="text/javascript" src="source/view/RootView.js"></script>

Modified: trunk/demo_page.html
===================================================================
--- trunk/demo_page.html	2005-07-20 17:46:40 UTC (rev 254)
+++ trunk/demo_page.html	2005-07-20 20:14:10 UTC (rev 255)
@@ -21,6 +21,7 @@
     <script type="text/javascript" src="source/util/Uuid.js"></script>
     <script type="text/javascript" src="source/util/Util.js"></script>
     <script type="text/javascript" src="source/util/Cookie.js"></script>
+    <script type="text/javascript" src="source/util/DateValue.js"></script>
 
     <script type="text/javascript" src="source/view/View.js"></script>
     <script type="text/javascript" src="source/view/RootView.js"></script>

Modified: trunk/documentation/release_planning.txt
===================================================================
--- trunk/documentation/release_planning.txt	2005-07-20 17:46:40 UTC (rev 254)
+++ trunk/documentation/release_planning.txt	2005-07-20 20:14:10 UTC (rev 255)
@@ -273,7 +273,7 @@
        |          |       >>|     Be able to easily create new documents that are empty
        |          |       >>|     Create a dozen demo documents (quotes, dictionary, movies, books, oil-change, etc.)
        |          |       >>|     Have different documents use different style-sheets
-brian  | 1    IED |       >>|     Add a DateValue class that supports dates like "2005"
+brian  | 1    IED | 0.75    |     Add a DateValue class that supports dates like "2005"
        |          |         |     Data model: boolean, URL, entries that apply to timespan (e.g. annual population)
        |          |         |     improve UI for initial "out of the box" experience
        |          |         |     UI and data model design to support collaboration

Modified: trunk/dogfood.html
===================================================================
--- trunk/dogfood.html	2005-07-20 17:46:40 UTC (rev 254)
+++ trunk/dogfood.html	2005-07-20 20:14:10 UTC (rev 255)
@@ -21,6 +21,7 @@
     <script type="text/javascript" src="source/util/Uuid.js"></script>
     <script type="text/javascript" src="source/util/Util.js"></script>
     <script type="text/javascript" src="source/util/Cookie.js"></script>
+    <script type="text/javascript" src="source/util/DateValue.js"></script>
 
     <script type="text/javascript" src="source/view/View.js"></script>
     <script type="text/javascript" src="source/view/RootView.js"></script>

Modified: trunk/repositories/dogfood.json
===================================================================
--- trunk/repositories/dogfood.json	2005-07-20 17:46:40 UTC (rev 254)
+++ trunk/repositories/dogfood.json	2005-07-20 20:14:10 UTC (rev 255)
@@ -1809,17 +1809,17 @@
           "value": "3af52130-e77a-11d9-93ea-000c414ce854"  }
   },
   // -----------------------------------------------------------------------
-  // (Iteration: Iteration 1).(Completion Date) = "Mon May 30 2005 00:00:00 GMT-0700 (Pacific Standard Time)"
+  // (Iteration: Iteration 1).(Completion Date) = "Mon May 30 2005"
   //           by (Brian) on (Jun 27, 2005)
   { "Entry": {
            "uuid": "6892d560-e77a-11d9-8196-000c414ce854",
            "type": "00001022-ce7f-11d9-8cd5-0011113ae5d6",
       "attribute": "3af52130-e77a-11d9-93ea-000c414ce854",
            "item": "ceb795d0-e778-11d9-a7da-000c414ce854",
-          "value": "Mon May 30 2005 00:00:00 GMT-0700 (Pacific Standard Time)"  }
+          "value": "Mon May 30 2005"  }
   },
   // -----------------------------------------------------------------------
-  // (Iteration: Iteration 1).(Completion Date) = "Mon Jun 06 2005 00:00:00 GMT-0700 (Pacific Standard Time)"
+  // (Iteration: Iteration 1).(Completion Date) = "Mon Jun 06 2005"
   //           by (Brian) on (Jun 27, 2005)
   { "Entry": {
            "uuid": "7c85cc30-e77a-11d9-8196-000c414ce854",
@@ -1827,17 +1827,17 @@
            "type": "00001022-ce7f-11d9-8cd5-0011113ae5d6",
       "attribute": "3af52130-e77a-11d9-93ea-000c414ce854",
            "item": "ceb795d0-e778-11d9-a7da-000c414ce854",
-          "value": "Mon Jun 06 2005 00:00:00 GMT-0700 (Pacific Standard Time)"  }
+          "value": "Mon Jun 06 2005"  }
   },
   // -----------------------------------------------------------------------
-  // (Iteration: Iteration 2).(Completion Date) = "Tue Jul 05 2005 00:00:00 GMT-0700 (Pacific Standard Time)"
+  // (Iteration: Iteration 2).(Completion Date) = "Tue Jul 05 2005"
   //           by (Brian) on (Jun 27, 2005)
   { "Entry": {
            "uuid": "84c88360-e77a-11d9-8196-000c414ce854",
            "type": "00001022-ce7f-11d9-8cd5-0011113ae5d6",
       "attribute": "3af52130-e77a-11d9-93ea-000c414ce854",
            "item": "e0dc0e30-e778-11d9-a7da-000c414ce854",
-          "value": "Tue Jul 05 2005 00:00:00 GMT-0700 (Pacific Standard Time)"  }
+          "value": "Tue Jul 05 2005"  }
   },
   // =======================================================================
   { "Transaction": [

Modified: trunk/source/model/DeltaVirtualServer.js
===================================================================
--- trunk/source/model/DeltaVirtualServer.js	2005-07-20 17:46:40 UTC (rev 254)
+++ trunk/source/model/DeltaVirtualServer.js	2005-07-20 20:14:10 UTC (rev 255)
@@ -34,7 +34,7 @@
 // 
 /*global window */
 /*global XMLHttpRequest, ActiveXObject  */
-/*global Util  */
+/*global Util, DateValue  */
 /*global World, Item, Entry, Ordinal, Vote  */
 // -------------------------------------------------------------------
 
@@ -217,7 +217,7 @@
       var item = record;
       listOfStrings.push(indent + '// ' + this._getTypedDisplayStringForItem(item) + '\n');
       listOfStrings.push(indent + '//           by (' + item.getUserstamp().getDisplayString() + ')');
-      listOfStrings.push(' on (' + Util.getStringMonthDayYear(item.getCreationDate()) + ')\n');
+      listOfStrings.push(' on (' + DateValue.getStringMonthDayYear(item.getCreationDate()) + ')\n');
       listOfStrings.push(indent + '{ "' + StubVirtualServer.JSON_MEMBER_ITEM_CLASS + '": ');
       listOfStrings.push('{ "' + StubVirtualServer.JSON_MEMBER_UUID + '": "' + item._getUuid() + '" }');
       listOfStrings.push(' }');
@@ -328,7 +328,7 @@
         commentString += " = " + valueComment + "\n";
       }
       commentString += indent + '//           by (' + entry.getUserstamp().getDisplayString() + ')';
-      commentString += ' on (' + Util.getStringMonthDayYear(entry.getCreationDate()) + ')\n';
+      commentString += ' on (' + DateValue.getStringMonthDayYear(entry.getCreationDate()) + ')\n';
       listOfStrings.push(commentString);
       listOfStrings.push(entryString);
       listOfStrings.push('  }\n');

Modified: trunk/source/model/Entry.js
===================================================================
--- trunk/source/model/Entry.js	2005-07-20 17:46:40 UTC (rev 254)
+++ trunk/source/model/Entry.js	2005-07-20 20:14:10 UTC (rev 255)
@@ -336,7 +336,8 @@
       break;
     case this.getWorld().getTypeCalledDate():
       var aDate = this._value;
-      returnString = Util.getStringMonthDayYear(aDate);
+      // returnString = Util.getStringMonthDayYear(aDate);
+      returnString = aDate.toShortLocaleDateString();
       break;
     case this.getWorld().getTypeCalledItem():
       returnString = this._value.getDisplayString();

Modified: trunk/source/model/ModelTest.html
===================================================================
--- trunk/source/model/ModelTest.html	2005-07-20 17:46:40 UTC (rev 254)
+++ trunk/source/model/ModelTest.html	2005-07-20 20:14:10 UTC (rev 255)
@@ -17,6 +17,7 @@
     <script type="text/javascript" src="../../third_party/md5/md5.js"></script>
     <script type="text/javascript" src="../util/Util.js"></script>
     <script type="text/javascript" src="../util/Uuid.js"></script>
+    <script type="text/javascript" src="../util/DateValue.js"></script>
     <script type="text/javascript" src="Record.js"></script>
     <script type="text/javascript" src="Ordinal.js"></script>
     <script type="text/javascript" src="Vote.js"></script>

Modified: trunk/source/model/ModelTest.js
===================================================================
--- trunk/source/model/ModelTest.js	2005-07-20 17:46:40 UTC (rev 254)
+++ trunk/source/model/ModelTest.js	2005-07-20 20:14:10 UTC (rev 255)
@@ -627,7 +627,7 @@
   var aPerson = world.newItem("John Doe");
   var subjectEntry = anEmail.addEntryForAttribute(subjectAttribute, "Money saved for you at Nigerian Bank");
   var fromEntry = anEmail.addEntryForAttribute(fromAttribute, aPerson);
-  var receivedEntry = anEmail.addEntryForAttribute(dateReceivedAttribute, new Date("6/8/05"));
+  var receivedEntry = anEmail.addEntryForAttribute(dateReceivedAttribute, new DateValue("6/8/05"));
   var numAttachmentsEntry = anEmail.addEntryForAttribute(noOfAttachments, 4);
 }
 

Modified: trunk/source/model/StubVirtualServer.js
===================================================================
--- trunk/source/model/StubVirtualServer.js	2005-07-20 17:46:40 UTC (rev 254)
+++ trunk/source/model/StubVirtualServer.js	2005-07-20 20:14:10 UTC (rev 255)
@@ -936,10 +936,11 @@
               finalData = rawData;
               break;
             case World.UUID_FOR_TYPE_NUMBER:
-              finalData = rawData;
+              finalData = parseFloat(rawData);
               break;
             case World.UUID_FOR_TYPE_DATE:
-              finalData = new Date(rawData);
+              finalData = new DateValue(rawData);
+              Util.assert(finalData.isValid());
               break;
             default:
               Util.assert(false, 'Unknown data type while _rehydrating()');

Added: trunk/source/util/DateValue.js
===================================================================
--- trunk/source/util/DateValue.js	2005-07-20 17:46:40 UTC (rev 254)
+++ trunk/source/util/DateValue.js	2005-07-20 20:14:10 UTC (rev 255)
@@ -0,0 +1,210 @@
+/*****************************************************************************
+ DateValue.js
+
+******************************************************************************
+ Written in 2005 by Brian Douglas Skinner <brian.skinner at gumption.org>
+  
+ Copyright rights relinquished under the Creative Commons  
+ Public Domain Dedication:
+    http://creativecommons.org/licenses/publicdomain/
+  
+ You can copy freely from this file.  This work may be freely reproduced, 
+ distributed, transmitted, used, modified, built upon, or otherwise exploited
+ by anyone for any purpose.
+  
+ This work is provided on an "AS IS" basis, without warranties or conditions 
+ of any kind, either express or implied, including, without limitation, any 
+ warranties or conditions of title, non-infringement, merchantability, or 
+ fitness for a particular purpose. You are solely responsible for determining 
+ the appropriateness of using or distributing the work and assume all risks 
+ associated with use of this work, including but not limited to the risks and 
+ costs of errors, compliance with applicable laws, damage to or loss of data 
+ or equipment, and unavailability or interruption of operations.
+
+ In no event shall the authors or contributors have any liability for any 
+ direct, indirect, incidental, special, exemplary, or consequential damages,
+ however caused and on any theory of liability, whether in contract, strict 
+ liability, or tort (including negligence), arising in any way out of or in 
+ connection with the use or distribution of the work.
+*****************************************************************************/
+
+
+// -------------------------------------------------------------------
+// Util public class constants
+// -------------------------------------------------------------------
+DateValue.MONTH_JAN = 0;
+DateValue.MONTH_FEB = 1;
+DateValue.MONTH_MAR = 2;
+DateValue.MONTH_APR = 3;
+DateValue.MONTH_MAY = 4;
+DateValue.MONTH_JUN = 5;
+DateValue.MONTH_JUL = 6;
+DateValue.MONTH_AUG = 7;
+DateValue.MONTH_SEP = 8;
+DateValue.MONTH_OCT = 9;
+DateValue.MONTH_NOV = 10;
+DateValue.MONTH_DEC = 11;
+
+DateValue.ARRAY_OF_MONTH_SHORT_NAMES = new Array("Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec");
+DateValue.ARRAY_OF_MONTH_NAMES = new Array("January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December");
+
+
+/**
+ * The DateValue class is similar to the JavaScript built-in Date class. 
+ * DateValue objects can be used to represent "fuzzy" dates, such as "1999"
+ * and "July 1965", as well as complete dates like "May 14, 1982".
+ *
+ * @scope    public instance constructor
+ * @param    foo    A parameter. 
+ */
+function DateValue(year, month, day, hours, minutes, seconds, ms) {
+  var date;
+
+  // Step 1: 
+  // Figure out what sort of arguments we've been given.
+  //
+  // If one string argument is passed, we parse the string.
+  // If one numeric argument is passed, it represents milliseconds since 1970.
+  // If two or more arguments are passed, they are year, month, day, hours, etc.
+  var STRING          = "STRING";
+  var MILLISECONDS    = "MILLISECONDS";
+  var SEPARATE_FIELDS = "SEPARATE_FIELDS";
+  var argumentType = null;
+  
+  if ((typeof year) == "string") {
+    argumentType = STRING;
+  }
+  if ((typeof year) == "number") {
+    if ((typeof month) == "number") {
+      argumentType = SEPARATE_FIELDS;
+    } else {
+      argumentType = MILLISECONDS;
+    }
+  }
+  
+  // Step 2: 
+  // Create a conventional JavaScript Date object.
+  switch (argumentType) {
+    case STRING:
+      date = new Date(year);
+      break;
+    case MILLISECONDS:
+      date = new Date(year);
+      break;
+    case SEPARATE_FIELDS:
+      if (!day) {
+        date = new Date(year, month);
+      } else {
+        hours = hours ? hours : null;
+        minutes = minutes ? minutes : null;
+        seconds = seconds ? seconds : null;
+        ms = ms ? ms : null;
+        date = new Date(year, month, day, hours, minutes, seconds, ms);
+      }
+      break;
+  }
+  
+  // Step 3: 
+  // Take note of whether this is just a year, a full timestamp, or something
+  // in between.
+  switch (argumentType) {
+    case MILLISECONDS:
+      date._hasTime = true;
+      break;
+    case SEPARATE_FIELDS:
+      if (hours || minutes || seconds || ms) {
+        date._hasTime = true;
+        // date._hasDay = true;
+        // date._hasMonth = true;
+      } else {
+        date._hasTime = false;
+        date._hasDay = day ? true : false;
+        date._hasMonth = true;
+      }
+      break;
+    case STRING:
+      date._hasTime = (year.indexOf(':') != -1) ? true : false;
+      // if (date._hasTime) {
+      //   date._hasDay = true;
+      //   date._hasMonth = true;
+      // }
+      if (!date._hasTime) {
+        if (!isNaN(date.valueOf())) {
+          date._hasDay = true;
+          date._hasMonth = true;
+       } else {
+          // If we get here, it means we may have been passed a string like 
+          // "1944" or "July 1944", which the Date class was not able to parse.
+          // We should try to parse the string ourselves and create a valid
+          // Date object.
+          //
+          // PENDING: 
+          // Right now we only have code to parse strings like "1944".
+          // We should expand this to deal with strings like "Feb 1944",
+          // "February 1944", "1944/02", etc.
+          var yearAsInt = parseInt(year);
+          if ((year.length == 4) && !isNaN(yearAsInt)) {
+            date = new Date(yearAsInt, DateValue.MONTH_JAN);
+            date._hasTime = false;
+            date._hasDay = false;
+            date._hasMonth = false;
+          }
+       }
+      }
+      break;
+  }
+  
+  // Step 4: 
+  // Add our own new DateValue methods to the conventional JavaScript Date object.
+  date.isValid = function() {
+    var valid = !isNaN(this.valueOf());
+    return valid;
+  };
+  if (!date._hasTime) {
+    date.toString = function() {
+      if (this._hasDay && this._hasMonth) {
+        return this.toLocaleDateString();
+      } else {
+        if (this._hasMonth) {
+          return DateValue.ARRAY_OF_MONTH_SHORT_NAMES[this.getUTCMonth()] + ' ' + this.getUTCFullYear();
+        } else {
+          return this.getUTCFullYear();
+        }
+      }
+    };
+  }
+  date.toShortLocaleDateString = function() {
+    if (this._hasTime || (this._hasDay && this._hasMonth)) {
+      return DateValue.ARRAY_OF_MONTH_SHORT_NAMES[date.getMonth()] + ' ' + date.getDate() + ', ' + date.getFullYear();
+    } else {
+      if (this._hasMonth) {
+        return DateValue.ARRAY_OF_MONTH_SHORT_NAMES[this.getUTCMonth()] + ' ' + this.getUTCFullYear();
+      } else {
+        return this.getUTCFullYear().toString();
+      }
+    }
+  };
+
+  return date;
+}
+
+
+// -------------------------------------------------------------------
+// Public class methods
+// -------------------------------------------------------------------
+
+/**
+ * Given a Date, returns a string like "Feb 14, 1944".
+ *
+ * @scope    public class method
+ * @param    date    Either a Date or DateValue object. 
+ * @return   A string like "Feb 14, 1944". 
+ */
+DateValue.getStringMonthDayYear = function(date) {
+  return DateValue.ARRAY_OF_MONTH_SHORT_NAMES[date.getMonth()] + ' ' + date.getDate() + ', ' + date.getFullYear();
+};
+
+
+// -------------------------------------------------------------------
+// End of file
+// -------------------------------------------------------------------

Added: trunk/source/util/DateValueTest.html
===================================================================
--- trunk/source/util/DateValueTest.html	2005-07-20 17:46:40 UTC (rev 254)
+++ trunk/source/util/DateValueTest.html	2005-07-20 20:14:10 UTC (rev 255)
@@ -0,0 +1,85 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
+<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" >
+
+<!-- 
+ Written in 2005 by Brian Douglas Skinner <brian.skinner at gumption.org>
+  
+ Copyright rights relinquished under the Creative Commons  
+ Public Domain Dedication:
+    http://creativecommons.org/licenses/publicdomain/
+-->
+
+  <head>
+    <title>Unit tests for DateValue.js</title>
+
+    <script type="text/javascript" src="../../third_party/jsunit/jsunit2_1/app/jsUnitCore.js"></script>
+    <script type="text/javascript" src="Util.js"></script>
+    <script type="text/javascript" src="DateValue.js"></script>
+    <script type="text/javascript" src="DateValueTest.js"></script>
+  </head>
+  
+  <body>
+    <h1>Unit tests for DateValue.js</h1>
+
+    <p>This page is used to run unit tests for the JavaScript code in the 
+    OpenRecord project.</p>
+    
+    <p>&nbsp;</p>
+    <hr/>
+    <p>To see the tests, open this .html file in a text editor. Or, within a  
+    web browser, you should be able see the source for this file by using 
+    some menu like <b>View</b> followed by <b>Page Source</b>. The tests 
+    may be in this file, or they may be in a separate file that has the
+    same name as this one, except with a .js extension instead of a .html
+    extension.</p>
+ 
+    <p>The unit tests are set up to run in the
+    <a href="http://www.edwardh.com/jsunit/" rel="external">JsUnit framework</a>
+    written by 
+    <a href="http://www.edwardh.com/" rel="external">Edward Hieatt</a>. </p>
+
+    <p>If you're looking at this page across an "http://" connection, rather
+    than having loaded it as a "file:///", then you may be able to run the
+    unit tests. The web server that served you this page may also have a
+    JsUnit testRunner available. If so, you should be able to run these unit
+    tests by going to
+    <a href="../../third_party/jsunit/jsunit2_1/testRunner.html?testpage=" 
+    onclick="href+=window.location.href;" rel="external">the local testRunner 
+    page</a>, and hitting the <b>Run</b> button.</p>
+
+    <p>You can also run these unit tests on your local computer. To do that you 
+    first need to download <a href="http://www.edwardh.com/jsunit/" 
+    rel="external">JsUnit</a>.</p>
+    
+    <p>&nbsp;</p>
+    <hr/>
+    <p class="copyright">You can copy freely from this work &mdash; copyright 
+    rights relinquished under the Creative Commons  
+    <a rel="license external" 
+    href="http://creativecommons.org/licenses/publicdomain/">Public Domain 
+    Dedication</a>.</p>
+
+<!-- Creative Commons metadata for Public Domain License 
+
+<rdf:RDF xmlns="http://web.resource.org/cc/"
+    xmlns:dc="http://purl.org/dc/elements/1.1/"
+    xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
+<Work rdf:about="">
+   <dc:title>openrecord.org</dc:title>
+   <dc:type rdf:resource="http://purl.org/dc/dcmitype/Text" />
+   <license rdf:resource="http://web.resource.org/cc/PublicDomain" />
+</Work>
+
+<License rdf:about="http://web.resource.org/cc/PublicDomain">
+   <permits rdf:resource="http://web.resource.org/cc/Reproduction" />
+   <permits rdf:resource="http://web.resource.org/cc/Distribution" />
+   <permits rdf:resource="http://web.resource.org/cc/DerivativeWorks" />
+</License>
+
+</rdf:RDF>
+
+-->
+  </body>
+</html>
+

Added: trunk/source/util/DateValueTest.js
===================================================================
--- trunk/source/util/DateValueTest.js	2005-07-20 17:46:40 UTC (rev 254)
+++ trunk/source/util/DateValueTest.js	2005-07-20 20:14:10 UTC (rev 255)
@@ -0,0 +1,73 @@
+/*****************************************************************************
+ DateValueTest.js
+ 
+******************************************************************************
+ Written in 2005 by Brian Douglas Skinner <brian.skinner at gumption.org>
+  
+ Copyright rights relinquished under the Creative Commons  
+ Public Domain Dedication:
+    http://creativecommons.org/licenses/publicdomain/
+  
+ You can copy freely from this file.  This work may be freely reproduced, 
+ distributed, transmitted, used, modified, built upon, or otherwise exploited
+ by anyone for any purpose.
+  
+ This work is provided on an "AS IS" basis, without warranties or conditions 
+ of any kind, either express or implied, including, without limitation, any 
+ warranties or conditions of title, non-infringement, merchantability, or 
+ fitness for a particular purpose. You are solely responsible for determining 
+ the appropriateness of using or distributing the work and assume all risks 
+ associated with use of this work, including but not limited to the risks and 
+ costs of errors, compliance with applicable laws, damage to or loss of data 
+ or equipment, and unavailability or interruption of operations.
+
+ In no event shall the authors or contributors have any liability for any 
+ direct, indirect, incidental, special, exemplary, or consequential damages,
+ however caused and on any theory of liability, whether in contract, strict 
+ liability, or tort (including negligence), arising in any way out of or in 
+ connection with the use or distribution of the work.
+*****************************************************************************/
+ 
+var TestVars = null;
+
+function setUp() {
+  // TestVars = {};
+  // TestVars.theHobbit = "The Hobbit";
+}
+
+function testDateValueConstructor() {
+  var year = 1944;
+  var month = DateValue.MONTH_FEB;
+  var day = 14;
+  var hours = 9;
+  var minutes = 30;
+  var seconds = 15;
+  var ms = 444;
+  var dates = new Array();
+  dates[0] = new DateValue("1944");
+  dates[1] = new DateValue("2/14/1944");
+  dates[2] = new DateValue("Feb 14 1944");
+  dates[3] = new DateValue(-816710400000);
+  dates[4] = new DateValue(year, month);
+  dates[5] = new DateValue(year, month, day);
+  dates[6] = new DateValue(year, month, day, hours);
+  dates[7] = new DateValue(year, month, day, hours, minutes);
+  dates[8] = new DateValue(year, month, day, hours, minutes, seconds);
+  dates[9] = new DateValue(year, month, day, hours, minutes, seconds, ms);
+  for (var i in dates) {
+    var dateValue = dates[i];
+    assertTrue('DateValue is valid', dateValue.isValid());
+    assertTrue('Util.isDate() returns true', Util.isDate(dateValue));
+  }
+  // var alertString = dates.join('\n');
+  // alert(alertString);
+}
+
+
+function tearDown() {
+  // TestVars = null;
+}
+
+// -------------------------------------------------------------------
+// End of file
+// -------------------------------------------------------------------

Modified: trunk/source/util/LintTest.js
===================================================================
--- trunk/source/util/LintTest.js	2005-07-20 17:46:40 UTC (rev 254)
+++ trunk/source/util/LintTest.js	2005-07-20 20:14:10 UTC (rev 255)
@@ -41,6 +41,8 @@
   var listOfSourceCodeFiles = [
     "Util.js",
     "UtilTest.js",
+    "DateValue.js",
+    "DateValueTest.js",
     "Uuid.js",
     "LintTool.js"];
   var prefix = "../../../source/util/";

Modified: trunk/source/util/TestSuite.html
===================================================================
--- trunk/source/util/TestSuite.html	2005-07-20 17:46:40 UTC (rev 254)
+++ trunk/source/util/TestSuite.html	2005-07-20 20:14:10 UTC (rev 255)
@@ -24,6 +24,7 @@
       function utilTestSuite() {
         var testSuite = new window.top.jsUnitTestSuite();
         testSuite.addTestPage("../../../source/util/UtilTest.html");
+        testSuite.addTestPage("../../../source/util/DateValueTest.html");
         testSuite.addTestPage("../../../source/util/LintTest.html");
         return testSuite;
       }

Modified: trunk/source/util/Util.js
===================================================================
--- trunk/source/util/Util.js	2005-07-20 17:46:40 UTC (rev 254)
+++ trunk/source/util/Util.js	2005-07-20 20:14:10 UTC (rev 255)
@@ -75,7 +75,7 @@
 Util.KEYCODE_FOR_DELETE = 46;
 
 
-Util.ABBREV_MONTHS_ARRAY = new Array("Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec");
+// Util.ABBREV_MONTHS_ARRAY = new Array("Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec");
 
 
 // -------------------------------------------------------------------
@@ -520,10 +520,10 @@
 // Methods that operate on Dates
 // -------------------------------------------------------------------
 
-Util.getStringMonthDayYear = function(date) {
-  var returnString = Util.ABBREV_MONTHS_ARRAY[date.getMonth()] + ' ' + date.getDate() + ', ' + (date.getYear()+1900);
-  return returnString;
-};
+// Util.getStringMonthDayYear = function(date) {
+//   var returnString = Util.ABBREV_MONTHS_ARRAY[date.getMonth()] + ' ' + date.getDate() + ', ' + date.getFullYear();
+//   return returnString;
+// };
 
 
 // -------------------------------------------------------------------

Modified: trunk/source/view/EntryView.js
===================================================================
--- trunk/source/view/EntryView.js	2005-07-20 17:46:40 UTC (rev 254)
+++ trunk/source/view/EntryView.js	2005-07-20 20:14:10 UTC (rev 255)
@@ -434,8 +434,10 @@
             if (!isNaN(floatVal)) {return floatVal;}
             break;
           case typeCalledDate:
-            var dateVal = Date.parse(value);
-            if (!isNaN(dateVal)) {return new Date(value);}
+            // var dateVal = Date.parse(value);
+            // if (!isNaN(dateVal)) {return new Date(value);}
+            var dateValue = new DateValue(value);
+            if (dateValue.isValid()) {return dateValue;}
             break;
           default:
             if (aType.isInCategory(categoryCalledCategory)) {



From skinner at berlios.de  Thu Jul 21 20:06:19 2005
From: skinner at berlios.de (Brian Douglas Skinner at BerliOS)
Date: Thu, 21 Jul 2005 20:06:19 +0200
Subject: [openrecord-svn] r256 - in trunk: . documentation source source/util
Message-ID: <200507211806.j6LI6JgM012968@sheep.berlios.de>

Author: skinner
Date: 2005-07-21 20:06:18 +0200 (Thu, 21 Jul 2005)
New Revision: 256

Added:
   trunk/source/OpenRecordLoader.js
Modified:
   trunk/dashboard.html
   trunk/demo_page.html
   trunk/documentation/release_planning.txt
   trunk/dogfood.html
   trunk/source/LintTest.js
   trunk/source/util/DateValue.js
Log:
Set up html files so they just have one script element, not dozens.  Also added some comments to the code in DateValue.

Modified: trunk/dashboard.html
===================================================================
--- trunk/dashboard.html	2005-07-20 20:14:10 UTC (rev 255)
+++ trunk/dashboard.html	2005-07-21 18:06:18 UTC (rev 256)
@@ -12,58 +12,15 @@
 
   <head>
     <title>Dashboard Demo Page</title>
-    <link rel="stylesheet" type="text/css" href="source/base_style.css" />
-    <script type="text/javascript" src="third_party/md5/md5.js"></script>
-    <script type="text/javascript" src="third_party/scriptaculous/prototype.js"></script>
-    <script type="text/javascript" src="third_party/scriptaculous/effects.js"></script>
-    <script type="text/javascript" src="third_party/scriptaculous/dragdrop.js"></script>
-    
-    <script type="text/javascript" src="source/util/Uuid.js"></script>
-    <script type="text/javascript" src="source/util/Util.js"></script>
-    <script type="text/javascript" src="source/util/Cookie.js"></script>
-    <script type="text/javascript" src="source/util/DateValue.js"></script>
-
-    <script type="text/javascript" src="source/view/View.js"></script>
-    <script type="text/javascript" src="source/view/RootView.js"></script>
-    <script type="text/javascript" src="source/view/ItemView.js"></script>
-    <script type="text/javascript" src="source/view/PageView.js"></script>
-    <script type="text/javascript" src="source/view/SectionView.js"></script>
-    <script type="text/javascript" src="source/view/LoginView.js"></script>
-    <script type="text/javascript" src="source/view/MultiEntriesView.js"></script>
-    <script type="text/javascript" src="source/view/NavbarView.js"></script>
-    <script type="text/javascript" src="source/view/SuggestionBox.js"></script>
-    <script type="text/javascript" src="source/view/EntryView.js"></script>
-    <script type="text/javascript" src="source/view/PluginView.js"></script>
-    
-    <script type="text/javascript" src="source/TablePlugin.js"></script>
-    <script type="text/javascript" src="source/OutlinePlugin.js"></script>
-    <script type="text/javascript" src="source/DetailPlugin.js"></script>
-    <script type="text/javascript" src="source/BarChartPlugin.js"></script>
-
-    <script type="text/javascript" src="source/model/Record.js"></script>
-    <script type="text/javascript" src="source/model/Ordinal.js"></script>
-    <script type="text/javascript" src="source/model/Vote.js"></script>
-    <script type="text/javascript" src="source/model/ContentRecord.js"></script>
-    <script type="text/javascript" src="source/model/Item.js"></script>
-    <script type="text/javascript" src="source/model/Entry.js"></script>
-    <script type="text/javascript" src="source/model/Transaction.js"></script>
-    <script type="text/javascript" src="source/model/QueryRunner.js"></script>
-    <script type="text/javascript" src="source/model/World.js"></script>
-    <script type="text/javascript" src="source/model/StubVirtualServer.js"></script>
-    <script type="text/javascript" src="source/model/DeltaVirtualServer.js"></script>
-    
-    <script type="text/javascript">
-      window.onload = function() {  
-        var world = new World();
-        new RootView(world);
-      };    
-    </script>
+    <script type="text/javascript" src="source/OpenRecordLoader.js"></script>
   </head>
   
   <body>
     <div id="OpenRecord">
-      <p>Sorry, the browser you're using doesn't support JavaScript. 
-      This page won't display correctly.</p>
+      <p>Sorry, for some reason OpenRecord was not able to launch.  
+      OpenRecord only runs in Firefox browsers, and JavaScript must be enabled. 
+      If you are seeing this message in Firefox, then you may have found a
+      bug in OpenRecord.</p>
     </div>
     
 <!-- Creative Commons metadata for Public Domain License 

Modified: trunk/demo_page.html
===================================================================
--- trunk/demo_page.html	2005-07-20 20:14:10 UTC (rev 255)
+++ trunk/demo_page.html	2005-07-21 18:06:18 UTC (rev 256)
@@ -12,58 +12,15 @@
 
   <head>
     <title>openrecord.org - Demo Page</title>
-    <link rel="stylesheet" type="text/css" href="source/base_style.css" />
-    <script type="text/javascript" src="third_party/md5/md5.js"></script>
-    <script type="text/javascript" src="third_party/scriptaculous/prototype.js"></script>
-    <script type="text/javascript" src="third_party/scriptaculous/effects.js"></script>
-    <script type="text/javascript" src="third_party/scriptaculous/dragdrop.js"></script>
-    
-    <script type="text/javascript" src="source/util/Uuid.js"></script>
-    <script type="text/javascript" src="source/util/Util.js"></script>
-    <script type="text/javascript" src="source/util/Cookie.js"></script>
-    <script type="text/javascript" src="source/util/DateValue.js"></script>
-
-    <script type="text/javascript" src="source/view/View.js"></script>
-    <script type="text/javascript" src="source/view/RootView.js"></script>
-    <script type="text/javascript" src="source/view/ItemView.js"></script>
-    <script type="text/javascript" src="source/view/PageView.js"></script>
-    <script type="text/javascript" src="source/view/SectionView.js"></script>
-    <script type="text/javascript" src="source/view/LoginView.js"></script>
-    <script type="text/javascript" src="source/view/MultiEntriesView.js"></script>
-    <script type="text/javascript" src="source/view/NavbarView.js"></script>
-    <script type="text/javascript" src="source/view/SuggestionBox.js"></script>
-    <script type="text/javascript" src="source/view/EntryView.js"></script>
-    <script type="text/javascript" src="source/view/PluginView.js"></script>
-    
-    <script type="text/javascript" src="source/TablePlugin.js"></script>
-    <script type="text/javascript" src="source/OutlinePlugin.js"></script>
-    <script type="text/javascript" src="source/DetailPlugin.js"></script>
-    <script type="text/javascript" src="source/BarChartPlugin.js"></script>
-
-    <script type="text/javascript" src="source/model/Record.js"></script>
-    <script type="text/javascript" src="source/model/Ordinal.js"></script>
-    <script type="text/javascript" src="source/model/Vote.js"></script>
-    <script type="text/javascript" src="source/model/ContentRecord.js"></script>
-    <script type="text/javascript" src="source/model/Item.js"></script>
-    <script type="text/javascript" src="source/model/Entry.js"></script>
-    <script type="text/javascript" src="source/model/Transaction.js"></script>
-    <script type="text/javascript" src="source/model/QueryRunner.js"></script>
-    <script type="text/javascript" src="source/model/World.js"></script>
-    <script type="text/javascript" src="source/model/StubVirtualServer.js"></script>
-    <script type="text/javascript" src="source/model/DeltaVirtualServer.js"></script>
-    
-    <script type="text/javascript">
-      window.onload = function() {  
-        var world = new World();
-        new RootView(world);
-      };    
-    </script>
+    <script type="text/javascript" src="source/OpenRecordLoader.js"></script>
   </head>
   
   <body>
     <div id="OpenRecord">
-      <p>Sorry, the browser you're using doesn't support JavaScript. 
-      This page won't display correctly.</p>
+      <p>Sorry, for some reason OpenRecord was not able to launch.  
+      OpenRecord only runs in Firefox browsers, and JavaScript must be enabled. 
+      If you are seeing this message in Firefox, then you may have found a
+      bug in OpenRecord.</p>
     </div>
     
 <!-- Creative Commons metadata for Public Domain License 

Modified: trunk/documentation/release_planning.txt
===================================================================
--- trunk/documentation/release_planning.txt	2005-07-20 20:14:10 UTC (rev 255)
+++ trunk/documentation/release_planning.txt	2005-07-21 18:06:18 UTC (rev 256)
@@ -269,7 +269,7 @@
        |          |         | 23. Make sure view code uses transactions
        |          |         | 24. Deal with \n in page name or summary fields
        |          |         | 25. BUG: need to encode reserved characters(<&>\n"') back at client-server layer
-       |          |       >>|     Be able to make html files with just one <script> element, not dozens (see http://dojo.jot.com/WikiHome/DojoPackageSystem and http://openjsan.org/doc/c/cw/cwest/JSAN/0.06/lib/JSAN.html
+brian  |          | 0.25    |     Be able to make html files with just one <script> element, not dozens 
        |          |       >>|     Be able to easily create new documents that are empty
        |          |       >>|     Create a dozen demo documents (quotes, dictionary, movies, books, oil-change, etc.)
        |          |       >>|     Have different documents use different style-sheets

Modified: trunk/dogfood.html
===================================================================
--- trunk/dogfood.html	2005-07-20 20:14:10 UTC (rev 255)
+++ trunk/dogfood.html	2005-07-21 18:06:18 UTC (rev 256)
@@ -12,58 +12,15 @@
 
   <head>
     <title>openrecord.org - Dogfood Page</title>
-    <link rel="stylesheet" type="text/css" href="source/base_style.css" />
-    <script type="text/javascript" src="third_party/md5/md5.js"></script>
-    <script type="text/javascript" src="third_party/scriptaculous/prototype.js"></script>
-    <script type="text/javascript" src="third_party/scriptaculous/effects.js"></script>
-    <script type="text/javascript" src="third_party/scriptaculous/dragdrop.js"></script>
-    
-    <script type="text/javascript" src="source/util/Uuid.js"></script>
-    <script type="text/javascript" src="source/util/Util.js"></script>
-    <script type="text/javascript" src="source/util/Cookie.js"></script>
-    <script type="text/javascript" src="source/util/DateValue.js"></script>
-
-    <script type="text/javascript" src="source/view/View.js"></script>
-    <script type="text/javascript" src="source/view/RootView.js"></script>
-    <script type="text/javascript" src="source/view/ItemView.js"></script>
-    <script type="text/javascript" src="source/view/PageView.js"></script>
-    <script type="text/javascript" src="source/view/SectionView.js"></script>
-    <script type="text/javascript" src="source/view/LoginView.js"></script>
-    <script type="text/javascript" src="source/view/MultiEntriesView.js"></script>
-    <script type="text/javascript" src="source/view/NavbarView.js"></script>
-    <script type="text/javascript" src="source/view/SuggestionBox.js"></script>
-    <script type="text/javascript" src="source/view/EntryView.js"></script>
-    <script type="text/javascript" src="source/view/PluginView.js"></script>
-    
-    <script type="text/javascript" src="source/TablePlugin.js"></script>
-    <script type="text/javascript" src="source/OutlinePlugin.js"></script>
-    <script type="text/javascript" src="source/DetailPlugin.js"></script>
-    <script type="text/javascript" src="source/BarChartPlugin.js"></script>
-
-    <script type="text/javascript" src="source/model/Record.js"></script>
-    <script type="text/javascript" src="source/model/Ordinal.js"></script>
-    <script type="text/javascript" src="source/model/Vote.js"></script>
-    <script type="text/javascript" src="source/model/ContentRecord.js"></script>
-    <script type="text/javascript" src="source/model/Item.js"></script>
-    <script type="text/javascript" src="source/model/Entry.js"></script>
-    <script type="text/javascript" src="source/model/Transaction.js"></script>
-    <script type="text/javascript" src="source/model/QueryRunner.js"></script>
-    <script type="text/javascript" src="source/model/World.js"></script>
-    <script type="text/javascript" src="source/model/StubVirtualServer.js"></script>
-    <script type="text/javascript" src="source/model/DeltaVirtualServer.js"></script>
-    
-    <script type="text/javascript">
-      window.onload = function() { 
-        var world = new World();
-        new RootView(world);
-      };    
-    </script>
+    <script type="text/javascript" src="source/OpenRecordLoader.js"></script>
   </head>
   
   <body>
     <div id="OpenRecord">
-      <p>Sorry, the browser you're using doesn't support JavaScript. 
-      This page won't display correctly.</p>
+      <p>Sorry, for some reason OpenRecord was not able to launch.  
+      OpenRecord only runs in Firefox browsers, and JavaScript must be enabled. 
+      If you are seeing this message in Firefox, then you may have found a
+      bug in OpenRecord.</p>
     </div>
     
 <!-- Creative Commons metadata for Public Domain License 

Modified: trunk/source/LintTest.js
===================================================================
--- trunk/source/LintTest.js	2005-07-20 20:14:10 UTC (rev 255)
+++ trunk/source/LintTest.js	2005-07-21 18:06:18 UTC (rev 256)
@@ -56,6 +56,7 @@
 
 function testJsLintOnOpenRecordCode() {
   var listOfSourceCodeFiles = [
+    "OpenRecordLoader.js",
     "TablePlugin.js",
     "OutlinePlugin.js",
     "DetailPlugin.js",

Added: trunk/source/OpenRecordLoader.js
===================================================================
--- trunk/source/OpenRecordLoader.js	2005-07-20 20:14:10 UTC (rev 255)
+++ trunk/source/OpenRecordLoader.js	2005-07-21 18:06:18 UTC (rev 256)
@@ -0,0 +1,148 @@
+/*****************************************************************************
+ OpenRecordLoader.js
+ 
+******************************************************************************
+ Written in 2005 by Brian Douglas Skinner <brian.skinner at gumption.org>
+  
+ Copyright rights relinquished under the Creative Commons  
+ Public Domain Dedication:
+    http://creativecommons.org/licenses/publicdomain/
+  
+ You can copy freely from this file.  This work may be freely reproduced, 
+ distributed, transmitted, used, modified, built upon, or otherwise exploited
+ by anyone for any purpose.
+  
+ This work is provided on an "AS IS" basis, without warranties or conditions 
+ of any kind, either express or implied, including, without limitation, any 
+ warranties or conditions of title, non-infringement, merchantability, or 
+ fitness for a particular purpose. You are solely responsible for determining 
+ the appropriateness of using or distributing the work and assume all risks 
+ associated with use of this work, including but not limited to the risks and 
+ costs of errors, compliance with applicable laws, damage to or loss of data 
+ or equipment, and unavailability or interruption of operations.
+
+ In no event shall the authors or contributors have any liability for any 
+ direct, indirect, incidental, special, exemplary, or consequential damages,
+ however caused and on any theory of liability, whether in contract, strict 
+ liability, or tort (including negligence), arising in any way out of or in 
+ connection with the use or distribution of the work.
+*****************************************************************************/
+
+
+/**
+ * The OpenRecordLoader class bootstraps the OpenRecord by loading all the
+ * other files in the OpenRecord app.
+ *
+ * There is no need to ever call this constructor.  All the OpenRecordLoader
+ * methods are class methods, not instance methods, and the only reason
+ * this constructor exists is to cause the name "OpenRecordLoader" to be a 
+ * globally-scoped class name, which the class methods can then be 
+ * attached to.
+ *
+ * @scope    public instance constructor
+ * @syntax   DO NOT CALL THIS CONSTRUCTOR
+ */
+function OpenRecordLoader() {
+  throw new Error("OpenRecord is a static class. You can't create instances of it.");
+}
+
+
+/**
+ * Given the URL of a stylesheet file, this method loads the stylesheet
+ * by creating a new link element that points to the stylesheet. 
+ *
+ * @scope    public class method
+ * @param    stylesheetUrl    A string with the URL of a file containing the stylesheet. 
+ */
+OpenRecordLoader.loadStylesheet = function(stylesheetUrl) {
+  var stylesheetElement = document.createElement('link');
+  stylesheetElement.setAttribute('rel', 'stylesheet');
+  stylesheetElement.type = 'text/css';
+  stylesheetElement.href = stylesheetUrl;
+  document.getElementsByTagName('head')[0].appendChild(stylesheetElement);  
+};
+
+
+/**
+ * Given the URL of a JavaScript file, this method loads the JavaScript file
+ * by creating a new script element that points to the file. 
+ *
+ * @scope    public class method
+ * @param    sourceUrl    A string with the URL of a file containing the JavaScript code. 
+ */
+OpenRecordLoader.loadSingleScript = function(sourceUrl) {
+  var scriptElement = document.createElement('script');
+  document.getElementsByTagName('head')[0].appendChild(scriptElement);
+  scriptElement.language = 'javascript';
+  scriptElement.type = 'text/javascript';
+  scriptElement.src = sourceUrl;
+};
+
+
+/**
+ * Given the path to the trunk directory of the OpenRecord code base,
+ * this method loads the OpenRecord stylesheet and all of the OpenRecord
+ * JavaScript files.
+ *
+ * @scope    public class method
+ * @param    path    A string with the path to the trunk directory of the OpenRecord code base. 
+ */
+OpenRecordLoader.loadEverything = function(path) {
+  path = path || "";
+  OpenRecordLoader.loadStylesheet(path + "source/base_style.css"); 
+  var listOfSourceCodeFiles = [
+    "third_party/md5/md5.js",
+    "third_party/scriptaculous/prototype.js",
+    "third_party/scriptaculous/effects.js",
+    "third_party/scriptaculous/dragdrop.js",
+    "source/util/Uuid.js",
+    "source/util/Util.js",
+    "source/util/Cookie.js",
+    "source/util/DateValue.js",
+    "source/view/View.js",
+    "source/view/RootView.js",
+    "source/view/ItemView.js",
+    "source/view/PageView.js",
+    "source/view/SectionView.js",
+    "source/view/LoginView.js",
+    "source/view/MultiEntriesView.js",
+    "source/view/NavbarView.js",
+    "source/view/SuggestionBox.js",
+    "source/view/EntryView.js",
+    "source/view/PluginView.js", 
+    "source/TablePlugin.js",
+    "source/OutlinePlugin.js",
+    "source/DetailPlugin.js",
+    "source/BarChartPlugin.js",
+    "source/model/Record.js",
+    "source/model/Ordinal.js",
+    "source/model/Vote.js",
+    "source/model/ContentRecord.js",
+    "source/model/Item.js",
+    "source/model/Entry.js",
+    "source/model/Transaction.js",
+    "source/model/QueryRunner.js",
+    "source/model/World.js",
+    "source/model/StubVirtualServer.js",
+    "source/model/DeltaVirtualServer.js"];
+  for (var i in listOfSourceCodeFiles) {
+    var fileName = listOfSourceCodeFiles[i];
+    var url = path + fileName;
+    OpenRecordLoader.loadSingleScript(url);
+  }
+};
+
+
+// -------------------------------------------------------------------
+// This code is immediately executed when this file is first loaded.
+// -------------------------------------------------------------------
+OpenRecordLoader.loadEverything();
+window.onload = function() { 
+  var world = new World();
+  new RootView(world);
+};    
+
+
+// -------------------------------------------------------------------
+// End of file
+// -------------------------------------------------------------------

Modified: trunk/source/util/DateValue.js
===================================================================
--- trunk/source/util/DateValue.js	2005-07-20 20:14:10 UTC (rev 255)
+++ trunk/source/util/DateValue.js	2005-07-21 18:06:18 UTC (rev 256)
@@ -55,7 +55,7 @@
  * and "July 1965", as well as complete dates like "May 14, 1982".
  *
  * @scope    public instance constructor
- * @param    foo    A parameter. 
+ * @param    year-etc    Any of the same values that the Date class accepts. 
  */
 function DateValue(year, month, day, hours, minutes, seconds, ms) {
   var date;
@@ -110,10 +110,14 @@
   switch (argumentType) {
     case MILLISECONDS:
       date._hasTime = true;
+      // (date._hasTime == true) implies _hasDay and _hasMonth, so we don't need to set them
+      // date._hasDay = true;
+      // date._hasMonth = true;
       break;
     case SEPARATE_FIELDS:
       if (hours || minutes || seconds || ms) {
         date._hasTime = true;
+        // (date._hasTime == true) implies _hasDay and _hasMonth, so we don't need to set them
         // date._hasDay = true;
         // date._hasMonth = true;
       } else {
@@ -123,7 +127,12 @@
       }
       break;
     case STRING:
+      // If we were given a string like "Tue Apr 30 2005 09:45:00", then
+      // we know not just the date, but also the time, and we set _hasTime 
+      // to true.  If we were given a string like "Apr 30 2005" then we
+      // set _hasTime to false.
       date._hasTime = (year.indexOf(':') != -1) ? true : false;
+      // (date._hasTime == true) implies _hasDay and _hasMonth, so we don't need to set them
       // if (date._hasTime) {
       //   date._hasDay = true;
       //   date._hasMonth = true;



From skinner at berlios.de  Fri Jul 22 04:44:20 2005
From: skinner at berlios.de (Brian Douglas Skinner at BerliOS)
Date: Fri, 22 Jul 2005 04:44:20 +0200
Subject: [openrecord-svn] r257 - in trunk: documentation source source/model third_party third_party/gtd_tiddlywiki
Message-ID: <200507220244.j6M2iKN9015139@sheep.berlios.de>

Author: skinner
Date: 2005-07-22 04:44:16 +0200 (Fri, 22 Jul 2005)
New Revision: 257

Added:
   trunk/source/model/HttpSaver.js
   trunk/third_party/gtd_tiddlywiki/
   trunk/third_party/gtd_tiddlywiki/FileSaver.js
Modified:
   trunk/documentation/release_planning.txt
   trunk/source/OpenRecordLoader.js
   trunk/source/model/DeltaVirtualServer.js
   trunk/source/model/LintTest.js
   trunk/source/model/StubVirtualServer.js
Log:
Added support for saving changes to the repository when a document is loaded from a "file:///" type URL.  Built our local-save implementation on top of code from the GTDTiddlyWiki project.

Modified: trunk/documentation/release_planning.txt
===================================================================
--- trunk/documentation/release_planning.txt	2005-07-21 18:06:18 UTC (rev 256)
+++ trunk/documentation/release_planning.txt	2005-07-22 02:44:16 UTC (rev 257)
@@ -270,7 +270,7 @@
        |          |         | 24. Deal with \n in page name or summary fields
        |          |         | 25. BUG: need to encode reserved characters(<&>\n"') back at client-server layer
 brian  |          | 0.25    |     Be able to make html files with just one <script> element, not dozens 
-       |          |       >>|     Be able to easily create new documents that are empty
+brian  |          |       >>|     Be able to easily create new documents that are empty
        |          |       >>|     Create a dozen demo documents (quotes, dictionary, movies, books, oil-change, etc.)
        |          |       >>|     Have different documents use different style-sheets
 brian  | 1    IED | 0.75    |     Add a DateValue class that supports dates like "2005"
@@ -290,7 +290,7 @@
        |          |         | 32. Convert UI code from DOM level 0 to DOM level 2
        |          |         | 33. Rationalize the View api and document public api
        |          |       >>| 34. Improve and document the Data model public api
-       |          |       >>| 35. Add support for saving content when used from a file:// URL
+brian  |          | 0.5     | 35. Add support for saving content when used from a file:// URL
        |          |         | 36. Do refactoring wherever needed (e.g. SuggestionBox and AttributeSuggestionBox)
        |          |         | 37. improve UI for setting the expected data type of an attribute
        |          |         | 38. improve UI for creating a new category

Modified: trunk/source/OpenRecordLoader.js
===================================================================
--- trunk/source/OpenRecordLoader.js	2005-07-21 18:06:18 UTC (rev 256)
+++ trunk/source/OpenRecordLoader.js	2005-07-22 02:44:16 UTC (rev 257)
@@ -95,6 +95,7 @@
     "third_party/scriptaculous/prototype.js",
     "third_party/scriptaculous/effects.js",
     "third_party/scriptaculous/dragdrop.js",
+    "third_party/gtd_tiddlywiki/FileSaver.js",
     "source/util/Uuid.js",
     "source/util/Util.js",
     "source/util/Cookie.js",
@@ -124,7 +125,8 @@
     "source/model/QueryRunner.js",
     "source/model/World.js",
     "source/model/StubVirtualServer.js",
-    "source/model/DeltaVirtualServer.js"];
+    "source/model/DeltaVirtualServer.js",
+    "source/model/HttpSaver.js"];
   for (var i in listOfSourceCodeFiles) {
     var fileName = listOfSourceCodeFiles[i];
     var url = path + fileName;

Modified: trunk/source/model/DeltaVirtualServer.js
===================================================================
--- trunk/source/model/DeltaVirtualServer.js	2005-07-21 18:06:18 UTC (rev 256)
+++ trunk/source/model/DeltaVirtualServer.js	2005-07-22 02:44:16 UTC (rev 257)
@@ -39,6 +39,12 @@
 // -------------------------------------------------------------------
 
 
+// -------------------------------------------------------------------
+// DeltaVirtualServer public class constants
+// -------------------------------------------------------------------
+DeltaVirtualServer.PATH_TO_REPOSITORY_DIRECTORY = "repositories";
+
+
 /**
  * The DeltaVirtualServer is a datastore that loads and saves
  * an entire World of items as a single monolithic JSON string.
@@ -75,15 +81,15 @@
   // this._buildTypeHashTable();
   this._loadAxiomaticItemsFromFileAtURL(this._dehydratedAxiomFileURL);
 
-  var pathToRepositoryDirectory = "repositories/";
   var repositoryFileName = this._repositoryName + ".json";
-  var repositoryUrl = this._pathToTrunkDirectory + pathToRepositoryDirectory + repositoryFileName;
+  var repositoryUrl = this._pathToTrunkDirectory + DeltaVirtualServer.PATH_TO_REPOSITORY_DIRECTORY + "/" + repositoryFileName;
   var repositoryContentString = Util.getStringContentsOfFileAtURL(repositoryUrl);
   repositoryContentString += " ] }";
 
   this._loadWorldFromJsonString(repositoryContentString);
 };
 
+
 // -------------------------------------------------------------------
 // Private Methods
 // -------------------------------------------------------------------
@@ -356,16 +362,15 @@
     return listOfChangesMade;
   }
   
-  var saveChanges = false;
-  if (window.location) {
-    if (window.location.protocol == "http:") {
-      saveChanges = true;
-    }
-    if (window.location.protocol == "file:") {
-      if (!this._hasEverFailedToSaveFlag) {
-        window.alert("I can't save changes to server, because this page was loaded from a \"file:///\" location, not a real \"http://\" location.  Sorry."); 
-        this._hasEverFailedToSaveFlag = true;
+  if (!this._saverObject) {
+    if (window.location) {
+      if (window.location.protocol == "http:") {
+        this._saverObject = new HttpSaver(this._pathToTrunkDirectory, this._repositoryName);
       }
+      if (window.location.protocol == "file:") {
+        // var fileName = this._repositoryName + ".json";
+        this._saverObject = new FileSaver(this._repositoryName);
+      }
     }
   }
   
@@ -376,22 +381,14 @@
     this._chronologicalListOfRecords.push(newRecord);
   }
 
-  if (saveChanges) {
-    var url = this._pathToTrunkDirectory + "source/model/append_to_repository_file.php?file=" + this._repositoryName;
+  if (this._saverObject) {
     var textToAppend = ",\n" + this._getJsonStringRepresentingTransaction(currentTransaction);
-    var asynchronous;
-    asynchronous = true;
-    
-    // PENDING: 
-    // It might be more efficient to re-use the XMLHttpRequestObject,
-    // rather than creating a new one for new request.  But re-using 
-    // them is complicated, because the requests are asynchronous, so
-    // we need to check to see if the last request is done before we 
-    // can start a new request.
-    var newXMLHttpRequestObject = this.__newXMLHttpRequestObject();
-    newXMLHttpRequestObject.open("POST", url, asynchronous);
-    newXMLHttpRequestObject.setRequestHeader("Content-Type", "text/plain");
-    newXMLHttpRequestObject.send(textToAppend);
+    this._saverObject.appendText(textToAppend);
+  } else {
+    if (!this._hasEverFailedToSaveFlag) {
+      window.alert("I can't save changes to server, because this page was loaded from a \"file:///\" location, not a real \"http://\" location.  Sorry."); 
+      this._hasEverFailedToSaveFlag = true;
+    }
   }
   
   this._currentTransaction = null;
@@ -399,37 +396,6 @@
 };
 
 
-/**
- * Returns a newly created XMLHttpRequest object.
- *
- * @scope    private instance method
- * @return   A newly created XMLHttpRequest object. 
- */
-DeltaVirtualServer.prototype.__newXMLHttpRequestObject = function() {
-  var newXMLHttpRequestObject = null;
-  if (window.XMLHttpRequest) {
-    newXMLHttpRequestObject = new XMLHttpRequest();
-  } else {
-    if (window.ActiveXObject) {
-      newXMLHttpRequestObject = new ActiveXObject("Microsoft.XMLHTTP");
-    }
-  }
-  if (newXMLHttpRequestObject) {
-    newXMLHttpRequestObject.onreadystatechange = function() {
-      var statusText = newXMLHttpRequestObject.statusText;
-      if (statusText != "OK") {
-        window.alert("onreadystatechange:\n" +
-          "readyState: " + newXMLHttpRequestObject.readyState + "\n" +
-          "status: " + newXMLHttpRequestObject.status + "\n" +
-          "statusText: " + newXMLHttpRequestObject.statusText + "\n" +
-          "responseText: " + newXMLHttpRequestObject.responseText + "\n");
-      }
-    };
-  }
-  return newXMLHttpRequestObject;
-};
-
-
 // -------------------------------------------------------------------
 // End of file
 // -------------------------------------------------------------------

Added: trunk/source/model/HttpSaver.js
===================================================================
--- trunk/source/model/HttpSaver.js	2005-07-21 18:06:18 UTC (rev 256)
+++ trunk/source/model/HttpSaver.js	2005-07-22 02:44:16 UTC (rev 257)
@@ -0,0 +1,102 @@
+/*****************************************************************************
+ HttpSaver.js
+  
+******************************************************************************
+ Written in 2005 by Brian Douglas Skinner <brian.skinner at gumption.org>
+  
+ Copyright rights relinquished under the Creative Commons  
+ Public Domain Dedication:
+    http://creativecommons.org/licenses/publicdomain/
+  
+ You can copy freely from this file.  This work may be freely reproduced, 
+ distributed, transmitted, used, modified, built upon, or otherwise exploited
+ by anyone for any purpose.
+  
+ This work is provided on an "AS IS" basis, without warranties or conditions 
+ of any kind, either express or implied, including, without limitation, any 
+ warranties or conditions of title, non-infringement, merchantability, or 
+ fitness for a particular purpose. You are solely responsible for determining 
+ the appropriateness of using or distributing the work and assume all risks 
+ associated with use of this work, including but not limited to the risks and 
+ costs of errors, compliance with applicable laws, damage to or loss of data 
+ or equipment, and unavailability or interruption of operations.
+
+ In no event shall the authors or contributors have any liability for any 
+ direct, indirect, incidental, special, exemplary, or consequential damages,
+ however caused and on any theory of liability, whether in contract, strict 
+ liability, or tort (including negligence), arising in any way out of or in 
+ connection with the use or distribution of the work.
+*****************************************************************************/
+
+
+/**
+ * The HttpSaver class knows how to save content to a server by using
+ * XMLHttpRequest to call a PHP script.
+ *
+ * @scope    public instance constructor
+ */
+function HttpSaver(pathToTrunkDirectory, repositoryName) {
+  this._pathToTrunkDirectory = pathToTrunkDirectory;
+  this._repositoryName = repositoryName;
+}
+
+
+/**
+ * Returns a newly created XMLHttpRequest object.
+ *
+ * @scope    public instance method
+ * @return   A newly created XMLHttpRequest object. 
+ */
+HttpSaver.prototype.appendText = function(textToAppend) {
+    var url = this._pathToTrunkDirectory + "source/model/append_to_repository_file.php?file=" + this._repositoryName;
+  
+  // PENDING: 
+  // It might be more efficient to re-use the XMLHttpRequestObject,
+  // rather than creating a new one for new request.  But re-using 
+  // them is complicated, because the requests are asynchronous, so
+  // we need to check to see if the last request is done before we 
+  // can start a new request.
+  var newXMLHttpRequestObject = this._newXMLHttpRequestObject();
+  var asynchronous = true;
+  newXMLHttpRequestObject.open("POST", url, asynchronous);
+  newXMLHttpRequestObject.setRequestHeader("Content-Type", "text/plain");
+  newXMLHttpRequestObject.send(textToAppend);
+};
+  
+  
+  
+/**
+ * Returns a newly created XMLHttpRequest object.
+ *
+ * @scope    private instance method
+ * @return   A newly created XMLHttpRequest object. 
+ */
+HttpSaver.prototype._newXMLHttpRequestObject = function() {
+  var newXMLHttpRequestObject = null;
+  if (window.XMLHttpRequest) {
+    newXMLHttpRequestObject = new XMLHttpRequest();
+  } else {
+    if (window.ActiveXObject) {
+      newXMLHttpRequestObject = new ActiveXObject("Microsoft.XMLHTTP");
+    }
+  }
+  if (newXMLHttpRequestObject) {
+    newXMLHttpRequestObject.onreadystatechange = function() {
+      var statusText = newXMLHttpRequestObject.statusText;
+      if (statusText != "OK") {
+        window.alert("onreadystatechange:\n" +
+          "readyState: " + newXMLHttpRequestObject.readyState + "\n" +
+          "status: " + newXMLHttpRequestObject.status + "\n" +
+          "statusText: " + newXMLHttpRequestObject.statusText + "\n" +
+          "responseText: " + newXMLHttpRequestObject.responseText + "\n");
+      }
+    };
+  }
+  return newXMLHttpRequestObject;
+};
+
+
+
+// -------------------------------------------------------------------
+// End of file
+// -------------------------------------------------------------------

Modified: trunk/source/model/LintTest.js
===================================================================
--- trunk/source/model/LintTest.js	2005-07-21 18:06:18 UTC (rev 256)
+++ trunk/source/model/LintTest.js	2005-07-22 02:44:16 UTC (rev 257)
@@ -49,7 +49,8 @@
     "QueryRunner.js",
     "World.js",
     "StubVirtualServer.js",
-    "DeltaVirtualServer.js"];
+    "DeltaVirtualServer.js",
+    "HttpSaver.js"];
   var prefix = "../../../source/model/";
   var errorReport = LintTool.getErrorReportFromListOfFilesnames(listOfSourceCodeFiles, prefix);
   var message = "Lint check \n" + errorReport;

Modified: trunk/source/model/StubVirtualServer.js
===================================================================
--- trunk/source/model/StubVirtualServer.js	2005-07-21 18:06:18 UTC (rev 256)
+++ trunk/source/model/StubVirtualServer.js	2005-07-22 02:44:16 UTC (rev 257)
@@ -38,7 +38,7 @@
 
 
 // -------------------------------------------------------------------
-// DeltaVirtualServer public class constants
+// StubVirtualServer public class constants
 // -------------------------------------------------------------------
 StubVirtualServer.JSON_MEMBER_FORMAT = "format";
 StubVirtualServer.JSON_MEMBER_RECORDS = "records";

Added: trunk/third_party/gtd_tiddlywiki/FileSaver.js
===================================================================
--- trunk/third_party/gtd_tiddlywiki/FileSaver.js	2005-07-21 18:06:18 UTC (rev 256)
+++ trunk/third_party/gtd_tiddlywiki/FileSaver.js	2005-07-22 02:44:16 UTC (rev 257)
@@ -0,0 +1,267 @@
+/*****************************************************************************
+ FileSaver.js
+ 
+******************************************************************************
+ The code in this file is a heavily modified version of code that was copied
+ from the TiddlyWiki and GTDTiddlyWiki code base.
+ 
+ The original code is Copyright (c) Osmosoft Limited.  The original copyright 
+ notice is included below, along with the license conditions and disclaimer.  
+ 
+ OpenRecord modifications by Brian Douglas Skinner <brian.skinner at gumption.org>
+
+ For the OpenRecord modifications, the Copyright rights are relinquished under  
+ the Creative Commons Public Domain Dedication:
+    http://creativecommons.org/licenses/publicdomain/
+
+******************************************************************************
+TiddlyWiki 1.2.6 by Jeremy Ruston, (jeremy [at] osmosoft [dot] com)
+Incorporating improvements by Isao Sonobe, http://www-gauge.scphys.kyoto-u.ac.jp/~sonobe/OgreKit/OgreKitWiki.html
+GTDTiddlyWiki modification by Nathan Bowers, (wiki [at] snapgrid [dot] com)
+Safari Compatability by Jonathan Paisley at http://www.dcs.gla.ac.uk/~jp/
+
+Copyright (c) Osmosoft Limited, 14 April 2005
+
+All rights reserved.
+
+Redistribution and use in source and binary forms, with or without modification,
+are permitted provided that the following conditions are met:
+
+Redistributions of source code must retain the above copyright notice, this
+list of conditions and the following disclaimer.
+
+Redistributions in binary form must reproduce the above copyright notice, this
+list of conditions and the following disclaimer in the documentation and/or other
+materials provided with the distribution.
+
+Neither the name of the Osmosoft Limited nor the names of its contributors may be
+used to endorse or promote products derived from this software without specific
+prior written permission.
+
+THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY
+EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT
+SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT,
+INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED
+TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR
+BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
+CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
+ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH
+DAMAGE.
+*****************************************************************************/
+
+
+/**
+ * The FileSaver class knows how to save text to local file.
+ *
+ * @scope    public instance constructor
+ */
+function FileSaver(repositoryName) {
+  this._repositoryName = repositoryName;
+}
+
+
+/**
+ * Appends text to a file.
+ *
+ * @scope    public instance method
+ */
+FileSaver.prototype.appendText = function(textToAppend) {
+  // Step 1: Build the fileUrl
+  // 
+  // Our saveTextToFile() method needs a fileUrl that looks like this:
+  //   fileUrl = "K:\\www\\htdocs\\openrecord\\demo\\current\\trunk\\repositories\\demo_page.json";
+  // 
+  // We start with a value in this._repositoryName that looks like this:
+  //   this._repositoryName == "demo_page"
+
+  // URLs like these don't work:
+  //   fileUrl = "repositories/demo_page.json";
+  //   fileUrl = "repositories\\demo_page.json";
+  //   fileUrl = "\\repositories\\demo_page.json";
+  //   fileUrl = "K:/www/htdocs/openrecord/demo/current/trunk/repositories/demo_page.json";
+
+  var listOfAdditions = [];
+  listOfAdditions.push(DeltaVirtualServer.PATH_TO_REPOSITORY_DIRECTORY);
+  listOfAdditions.push(this._repositoryName + ".json");
+  var fileUrl = this.getLocalPathFromWindowLocation(listOfAdditions);
+  
+  var append = true;
+  this.saveTextToFile(textToAppend, fileUrl, append);
+};
+  
+
+/**
+ * Save the text to the file at the given URL.
+ *
+ * @scope    public instance method
+ * @return   Returns true if the text was saved.
+ */
+FileSaver.prototype.saveTextToFile = function(text, fileUrl, append) {
+  // Make sure we were loaded from a "file:" URL
+  if (window.location.protocol != "file:") {
+    Util.assert(false, 'FileSaver.js can only be used for pages loaded from a "file:///" location');
+  }
+
+  var success = this.mozillaSaveToFile(text, fileUrl, append);
+  if (!success) {
+    success = this.ieSaveToFile(text, fileUrl, append);
+  }
+  return(success);
+};
+
+
+/**
+ * Save the text to the file at the given filePath.
+ *
+ * @scope    public instance method
+ * @return   Returns true if the text was saved, false if there was an error, or null if we couldn't even try.
+ */
+FileSaver.prototype.mozillaSaveToFile = function(text, filePath, append) {
+  if (window.Components) {
+    try {
+      netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect");
+      var file = Components.classes["@mozilla.org/file/local;1"].createInstance(Components.interfaces.nsILocalFile);
+      file.initWithPath(filePath);
+      if (!file.exists()) {
+        file.create(0, 0664);
+      }
+      var outputStream = Components.classes["@mozilla.org/network/file-output-stream;1"].createInstance(Components.interfaces.nsIFileOutputStream);
+      if (append) {
+        outputStream.init(file, 0x10 | 0x02, 00004, null);
+      } else {
+        outputStream.init(file, 0x20 | 0x02, 00004, null);
+      }
+      outputStream.write(text, text.length);
+      outputStream.flush();
+      outputStream.close();
+      return true;
+    }
+    catch(exception) {
+      alert("Exception while attempting to save\n\n" + exception);
+      return false;
+    }
+  } else {
+    alert("window.Components == null");
+  }
+  return null;
+};
+
+
+/**
+ * Save the text to the file at the given filePath.
+ *
+ * @scope    public instance method
+ * @return   Returns true if the text was saved, or false if there was an error.
+ */
+FileSaver.prototype.ieSaveToFile = function(text, filePath, append) {
+  try {
+    var fileSystemObject = new ActiveXObject("Scripting.FileSystemObject");
+  }
+  catch(exception) {
+    alert("Exception while attempting to save\n\n" + exception.toString());
+    return false;
+  }
+  if (append) {
+    Util.assert(false, "PENDING: still need to write code for this");
+  } else {
+    var file = fileSystemObject.OpenTextFile(filePath, 2, -1, 0);
+  }
+  file.Write(text);
+  file.Close();
+  return true;
+};
+
+
+/**
+ * This method looks at the URL value in the window.location property,
+ * strips the filename off the end, appends any given path elements,
+ * converts the whole thing to a format that is compatible with the 
+ * local file system, and returns the new local path.
+ *
+ * @scope    public instance method
+ * @return   Returns a full local pathname.
+ */
+FileSaver.prototype.getLocalPathFromWindowLocation = function(listOfAdditions) {
+  // Example location:
+  //   location.href     == file:///D:/amy/openrecord/foo.html#bar
+  //   location.protocol == file:
+  //   location.pathname ==        /D:/amy/openrecord/foo.html
+  //   location.hash     ==                                   #bar
+
+  // Get the URL of the document
+  var pathname = window.location.pathname;
+  
+  
+  // Step 1: Make the requested additions to the pathname
+  var arrayOfParts = pathname.split('/');
+  arrayOfParts.pop();  // get rid of the final "/foo.html" part
+  for (var i in listOfAdditions) {
+    var additionalPart = listOfAdditions[i];
+    arrayOfParts.push(additionalPart);
+  }
+  pathname = arrayOfParts.join('/');
+
+  
+  // Step 2: Figure out what type of URL we're working with
+  // Constants
+  var PATH_TYPE_LOCAL_PC        = "PATH_TYPE_LOCAL_PC";        // "file:///x:/path/path..." 
+  var PATH_TYPE_LOCAL_UNIX_MAC  = "PATH_TYPE_LOCAL_UNIX_MAC";  // "file:///path/path..."
+  var PATH_TYPE_NETWORK_PC      = "PATH_TYPE_NETWORK_PC";      // "file://server/share/path/path..."
+  var PATH_TYPE_NETWORK_FIREFOX = "PATH_TYPE_NETWORK_FIREFOX"; // "file://///server/share/path/path..."
+  // "file:///x:/path/path..."             == PATH_TYPE_LOCAL_PC        --> "x:\path\path..."
+  // "file:///path/path..."                == PATH_TYPE_LOCAL_UNIX_MAC  --> "/path/path..."
+  // "file://server/share/path/path..."    == PATH_TYPE_NETWORK_PC      --> "\\server\share\path\path..."
+  // "file://///server/share/path/path..." == PATH_TYPE_NETWORK_FIREFOX --> "\\server\share\path\path..."
+
+  var pathType = null;
+  if (pathname.charAt(2) == ":") {
+    pathType = PATH_TYPE_LOCAL_PC;
+  } else if (pathname.indexOf("///") === 0) {
+    pathType = PATH_TYPE_NETWORK_FIREFOX;
+  } else if (pathname.indexOf("/") === 0) {
+    pathType = PATH_TYPE_LOCAL_UNIX_MAC;
+  } else {
+    pathType = PATH_TYPE_NETWORK_PC;
+  }
+
+
+  // Step 3: Convert the URL to a file path
+  var localPath = pathname;
+  switch (pathType) {
+    case PATH_TYPE_LOCAL_PC:
+      // example: "/x:/path/path..."
+      localPath = localPath.substring(1);  // get rid of initial '/'
+      localPath = unescape(localPath);
+      localPath = localPath.replace(new RegExp("/","g"),"\\");
+      // result: "x:\path\path..."
+      break;
+    case PATH_TYPE_LOCAL_UNIX_MAC:         
+    // example: "/path/path..."
+      localPath = unescape(localPath);
+      // result: "/path/path..."
+      break;
+    case PATH_TYPE_NETWORK_FIREFOX:
+      // example: "///server/share/path/path..."
+      localPath = localPath.substring(3);  // get rid of initial '///'
+      localPath = unescape(localPath);
+      localPath = localPath.replace(new RegExp("/","g"),"\\");
+      localPath = "\\\\" + localPath;      
+      // result: "\\server\share\path\path..."
+      break;
+    case PATH_TYPE_NETWORK_PC:
+      // example: "server/share/path/path..."
+      localPath = unescape(localPath);
+      localPath = localPath.replace(new RegExp("/","g"),"\\");
+      localPath = "\\\\" + localPath;      
+      // result: "\\server\share\path\path..."
+      break;
+  }
+
+  return localPath;
+};
+
+
+// -------------------------------------------------------------------
+// End of file
+// -------------------------------------------------------------------



From skinner at berlios.de  Fri Jul 22 23:45:04 2005
From: skinner at berlios.de (Brian Douglas Skinner at BerliOS)
Date: Fri, 22 Jul 2005 23:45:04 +0200
Subject: [openrecord-svn] r258 - trunk/documentation
Message-ID: <200507222145.j6MLj41g015866@sheep.berlios.de>

Author: skinner
Date: 2005-07-22 23:45:03 +0200 (Fri, 22 Jul 2005)
New Revision: 258

Modified:
   trunk/documentation/release_planning.txt
Log:
signed up for the task to encode reserved characters

Modified: trunk/documentation/release_planning.txt
===================================================================
--- trunk/documentation/release_planning.txt	2005-07-22 02:44:16 UTC (rev 257)
+++ trunk/documentation/release_planning.txt	2005-07-22 21:45:03 UTC (rev 258)
@@ -268,7 +268,7 @@
        |          |         | 22. Reach consensus on (colors, padding, and borders) and then implement
        |          |         | 23. Make sure view code uses transactions
        |          |         | 24. Deal with \n in page name or summary fields
-       |          |         | 25. BUG: need to encode reserved characters(<&>\n"') back at client-server layer
+brian  |          |         | 25. BUG: need to encode reserved characters(<&>\n"') back at client-server layer
 brian  |          | 0.25    |     Be able to make html files with just one <script> element, not dozens 
 brian  |          |       >>|     Be able to easily create new documents that are empty
        |          |       >>|     Create a dozen demo documents (quotes, dictionary, movies, books, oil-change, etc.)



From skinner at berlios.de  Sat Jul 23 01:30:49 2005
From: skinner at berlios.de (Brian Douglas Skinner at BerliOS)
Date: Sat, 23 Jul 2005 01:30:49 +0200
Subject: [openrecord-svn] r259 - in trunk: documentation source/model source/util
Message-ID: <200507222330.j6MNUnTV031735@sheep.berlios.de>

Author: skinner
Date: 2005-07-23 01:30:45 +0200 (Sat, 23 Jul 2005)
New Revision: 259

Modified:
   trunk/documentation/release_planning.txt
   trunk/source/model/DeltaVirtualServer.js
   trunk/source/model/Entry.js
   trunk/source/model/StubVirtualServer.js
   trunk/source/util/Util.js
Log:
We now encode and decode reserved characters(<&>\n"') back at client-server layer.

Modified: trunk/documentation/release_planning.txt
===================================================================
--- trunk/documentation/release_planning.txt	2005-07-22 21:45:03 UTC (rev 258)
+++ trunk/documentation/release_planning.txt	2005-07-22 23:30:45 UTC (rev 259)
@@ -268,7 +268,7 @@
        |          |         | 22. Reach consensus on (colors, padding, and borders) and then implement
        |          |         | 23. Make sure view code uses transactions
        |          |         | 24. Deal with \n in page name or summary fields
-brian  |          |         | 25. BUG: need to encode reserved characters(<&>\n"') back at client-server layer
+brian  |          | 0.25    | 25. BUG: need to encode reserved characters(<&>\n"') back at client-server layer
 brian  |          | 0.25    |     Be able to make html files with just one <script> element, not dozens 
 brian  |          |       >>|     Be able to easily create new documents that are empty
        |          |       >>|     Create a dozen demo documents (quotes, dictionary, movies, books, oil-change, etc.)

Modified: trunk/source/model/DeltaVirtualServer.js
===================================================================
--- trunk/source/model/DeltaVirtualServer.js	2005-07-22 21:45:03 UTC (rev 258)
+++ trunk/source/model/DeltaVirtualServer.js	2005-07-22 23:30:45 UTC (rev 259)
@@ -132,11 +132,13 @@
 DeltaVirtualServer.prototype.truncateString = function(string) {
   var maxLength = 80;
   var ellipsis = "...";
+  var returnString = "";
   if (string.length > maxLength) {
-    return (string.substring(0, (maxLength - ellipsis.length)) + ellipsis);
+    returnString = (string.substring(0, (maxLength - ellipsis.length)) + ellipsis);
   } else {
-    return string;
+    returnString = string;
   }
+  return this.encodeText(returnString);
 };
 
 
@@ -222,7 +224,7 @@
     if (record instanceof Item) {
       var item = record;
       listOfStrings.push(indent + '// ' + this._getTypedDisplayStringForItem(item) + '\n');
-      listOfStrings.push(indent + '//           by (' + item.getUserstamp().getDisplayString() + ')');
+      listOfStrings.push(indent + '//           by (' + this.truncateString(item.getUserstamp().getDisplayString()) + ')');
       listOfStrings.push(' on (' + DateValue.getStringMonthDayYear(item.getCreationDate()) + ')\n');
       listOfStrings.push(indent + '{ "' + StubVirtualServer.JSON_MEMBER_ITEM_CLASS + '": ');
       listOfStrings.push('{ "' + StubVirtualServer.JSON_MEMBER_UUID + '": "' + item._getUuid() + '" }');
@@ -240,8 +242,8 @@
         }
         listOfStrings.push(',\n');
         listOfStrings.push(indent + '// -----------------------------------------------------------------------\n');
-        listOfStrings.push(indent + '{ "' + StubVirtualServer.JSON_MEMBER_USER_CLASS + '": ' + '{');
-        listOfStrings.push('                                               // ' + itemDisplayNameSubstring + '\n');
+        listOfStrings.push(indent + '// ' + this._getTypedDisplayStringForItem(user) + '\n');
+        listOfStrings.push(indent + '{ "' + StubVirtualServer.JSON_MEMBER_USER_CLASS + '": ' + '{\n');
         listOfStrings.push(indent + '         "' + StubVirtualServer.JSON_MEMBER_USER + '": "' + user._getUuid() + '",\n');
         listOfStrings.push(indent + '     "' + StubVirtualServer.JSON_MEMBER_PASSWORD + '": ' + passwordString + ' }\n');
         listOfStrings.push(indent + '}');
@@ -250,10 +252,10 @@
 
     if (record instanceof Vote) {
       var vote = record;
-      listOfStrings.push(indent + '{ "' + StubVirtualServer.JSON_MEMBER_VOTE_CLASS + '": ' + '{');
       entryDisplayNameSubstring = this.truncateString(vote.getContentRecord().getDisplayString());
       var deleteVsRetainString = vote.getRetainFlag() ? "RETAIN" : "DELETE";
-      listOfStrings.push('                                              // vote to ' + deleteVsRetainString + " " + entryDisplayNameSubstring + '\n');
+      listOfStrings.push(indent + '// vote to ' + deleteVsRetainString + " " + entryDisplayNameSubstring + '\n');
+      listOfStrings.push(indent + '{ "' + StubVirtualServer.JSON_MEMBER_VOTE_CLASS + '": ' + '{\n');
       listOfStrings.push(indent + '         "' + StubVirtualServer.JSON_MEMBER_UUID + '": "' + vote._getUuid() + '",\n');
       listOfStrings.push(indent + '       "' + StubVirtualServer.JSON_MEMBER_RECORD + '": "' + vote.getContentRecord()._getUuid() + '",\n');
       listOfStrings.push(indent + '   "' + StubVirtualServer.JSON_MEMBER_RETAIN_FLAG + '": "' + vote.getRetainFlag() + '"');
@@ -263,6 +265,8 @@
 
     if (record instanceof Ordinal) {
       var ordinal = record;
+      entryDisplayNameSubstring = this.truncateString(ordinal.getContentRecord().getDisplayString());
+      listOfStrings.push(indent + '// ordinal # ' + ordinal.getOrdinalNumber() + " for " + entryDisplayNameSubstring + '\n');
       listOfStrings.push(indent + '{ "' + StubVirtualServer.JSON_MEMBER_ORDINAL_CLASS + '": ' + '{' + '\n');
       listOfStrings.push(indent + '         "' + StubVirtualServer.JSON_MEMBER_UUID + '": "' + ordinal._getUuid() + '",\n');
       listOfStrings.push(indent + '    "' + StubVirtualServer.JSON_MEMBER_RECORD + '": "' + ordinal.getContentRecord()._getUuid() + '",\n');
@@ -274,7 +278,6 @@
     if (record instanceof Entry) {
       var entry = record;
       var entryType = entry.getType();
-      // var typeToken = this._getTypeTokenFromType(entryType);
       var typeUuid = entryType._getUuid();
       commentString = "";
       var entryString = "";
@@ -295,10 +298,10 @@
         var secondAttribute = pairOfAttributes[1];
         entryString += indent + '    "' + StubVirtualServer.JSON_MEMBER_ATTRIBUTE + '": ["' + firstAttribute._getUuid() + '", "' + secondAttribute._getUuid() + '"]';
         commentString += indent + '// ' + this._getTypedDisplayStringForItem(firstItem);
-        commentString += ".(" + firstAttribute.getDisplayString("???") + ")";
+        commentString += ".(" + this.truncateString(firstAttribute.getDisplayString("???")) + ")";
         commentString += " = " + this._getTypedDisplayStringForItem(secondItem) + "\n";
         commentString += indent + '// ' + this._getTypedDisplayStringForItem(secondItem);
-        commentString += ".(" + secondAttribute.getDisplayString("???") + ")";
+        commentString += ".(" + this.truncateString(secondAttribute.getDisplayString("???")) + ")";
         commentString += " = " + this._getTypedDisplayStringForItem(firstItem) + "\n";
       } else {
         var attribute = entry.getAttribute();
@@ -314,8 +317,8 @@
             valueComment = contentData;
             break;
           case World.UUID_FOR_TYPE_TEXT: 
-            valueString = '"' + contentData + '"';
-            valueComment = this.truncateString(valueString);
+            valueString = '"' + this.encodeText(contentData) + '"';
+            valueComment = '"' + this.truncateString(contentData) + '"';
             break;
           case World.UUID_FOR_TYPE_DATE: 
             valueString = '"' + contentData.toString() + '"';
@@ -330,10 +333,10 @@
         }
         entryString += indent + '        "' + StubVirtualServer.JSON_MEMBER_VALUE + '": ' + valueString;
         commentString += indent + '// ' + this._getTypedDisplayStringForItem(entry.getItem());
-        commentString += ".(" + attribute.getDisplayString("???") + ")";
+        commentString += ".(" + this.truncateString(attribute.getDisplayString("???")) + ")";
         commentString += " = " + valueComment + "\n";
       }
-      commentString += indent + '//           by (' + entry.getUserstamp().getDisplayString() + ')';
+      commentString += indent + '//           by (' + this.truncateString(entry.getUserstamp().getDisplayString()) + ')';
       commentString += ' on (' + DateValue.getStringMonthDayYear(entry.getCreationDate()) + ')\n';
       listOfStrings.push(commentString);
       listOfStrings.push(entryString);

Modified: trunk/source/model/Entry.js
===================================================================
--- trunk/source/model/Entry.js	2005-07-22 21:45:03 UTC (rev 258)
+++ trunk/source/model/Entry.js	2005-07-22 23:30:45 UTC (rev 259)
@@ -113,11 +113,7 @@
     }
     else {Util.assert(false, "unknown data type:" + (typeof value) + ' value: ' + value);}
   }
-  if (Util.isString(value)) {
-    this._value = Util.getCleanString(value);
-  } else {
-    this._value = value;
-  }
+  this._value = value;
 };
 
 

Modified: trunk/source/model/StubVirtualServer.js
===================================================================
--- trunk/source/model/StubVirtualServer.js	2005-07-22 21:45:03 UTC (rev 258)
+++ trunk/source/model/StubVirtualServer.js	2005-07-22 23:30:45 UTC (rev 259)
@@ -140,6 +140,74 @@
 };
 
 
+/**
+ * Given a text string, this method returns a copy of the text string, 
+ * with certain special characters replaced by escape sequences.
+ * 
+ * For example, given a string like this:
+ * <pre>
+ *    this.encodeText('The quick <brown> fox & the "lazy" hare.\n');
+ * </pre>
+ * The return value will be:
+ * <pre>
+ *    'The quick &lt;brown&gt; fox &amp; the &quot;lazy&quot; hare.&#10;'
+ * </pre>
+ * 
+ * @scope    public instance method
+ * @param    rawText    A text string to encode. 
+ * @return   A copy of the rawText string, with the special characters escaped. 
+ */
+StubVirtualServer.prototype.encodeText = function(rawText) {
+  Util.assert(Util.isString(rawText));
+
+  var returnString = rawText;
+  // Note: it's important that we do '&' first, otherwise we'll accidentally
+  // replace all the & characters that we add in the following lines.
+  returnString = returnString.replace(new RegExp('&','g'), "&amp;");
+  returnString = returnString.replace(new RegExp('<','g'), "&lt;");
+  returnString = returnString.replace(new RegExp('>','g'), "&gt;");
+  returnString = returnString.replace(new RegExp('"','g'), "&quot;");
+  returnString = returnString.replace(new RegExp('\n','g'), "&#10;");
+  returnString = returnString.replace(new RegExp('\r','g'), "&#13;");
+  return returnString;
+};
+
+
+/**
+ * Given a text string that was encoded using encodeText(), this method 
+ * returns a decoded copy of the text string, with the encoded escape 
+ * sequences now replaced by the original special characters.
+ *
+ * For example, given a string like this:
+ * <pre>
+ *    this.decodeText('The quick &lt;brown&gt; fox &amp; the &quot;lazy&quot; hare.&#10;');
+ * </pre>
+ * The return value will be:
+ * <pre>
+ *    'The quick <brown> fox & the "lazy" hare.\n'
+ * </pre>
+ *
+ * @scope    public instance method
+ * @param    encodedText    A text string to decode. 
+ * @return   A copy of the encodedText string, with the escaped characters replaced by the original special characters. 
+ */
+StubVirtualServer.prototype.decodeText = function(encodedText) {
+  Util.assert(Util.isString(encodedText));
+
+  var returnString = encodedText;
+  returnString = returnString.replace(new RegExp('&#13;','g'), "\r");
+  returnString = returnString.replace(new RegExp('&#10;','g'), "\n");
+  returnString = returnString.replace(new RegExp('&quot;','g'), '"');
+  returnString = returnString.replace(new RegExp('&gt;','g'), ">");
+  returnString = returnString.replace(new RegExp('&lt;','g'), "<");
+  returnString = returnString.replace(new RegExp('&amp;','g'), "&");
+  // Note: it's important that we do '&amp;' last, otherwise we won't correctly
+  // handle a case like this:
+  //   text = this.decodeText(this.encodeText('&lt;'));
+  return returnString;
+};
+
+
 // -------------------------------------------------------------------
 // Transaction Methods
 // -------------------------------------------------------------------
@@ -882,20 +950,9 @@
           previousEntry = this.__getEntryFromUuidOrBootstrapEntry(previousEntryUuid);
         }
  
-        var dataType;
         var dataTypeUuid = dehydratedEntry[StubVirtualServer.JSON_MEMBER_TYPE];
-        var PENDING_debug = false;
-        if (Util.isUuid(dataTypeUuid)) {
-          PENDING_debug = true;
-          dataType = this.__getItemFromUuidOrBootstrapItem(dataTypeUuid);
-        } else {
-          // code to deal with the old pre-July-2005 file format
-          /*
-          var dataTypeToken = dataTypeUuid;
-          dataType = this._getTypeFromTypeToken(dataTypeToken);
-          dataTypeUuid = dataType._getUuid();
-          */
-        }
+        Util.assert(Util.isUuid(dataTypeUuid));
+        var dataType = this.__getItemFromUuidOrBootstrapItem(dataTypeUuid);
         
         if (dataTypeUuid == World.UUID_FOR_TYPE_CONNECTION) {
           var listOfItemUuids = dehydratedEntry[StubVirtualServer.JSON_MEMBER_ITEM];
@@ -930,10 +987,7 @@
               finalData = this.__getItemFromUuidOrBootstrapItem(rawData);
               break;
             case World.UUID_FOR_TYPE_TEXT:
-              // if (PENDING_debug) {
-              //   alert(rawData + "\n" + dataType);
-              // }
-              finalData = rawData;
+              finalData = this.decodeText(rawData);
               break;
             case World.UUID_FOR_TYPE_NUMBER:
               finalData = parseFloat(rawData);

Modified: trunk/source/util/Util.js
===================================================================
--- trunk/source/util/Util.js	2005-07-22 21:45:03 UTC (rev 258)
+++ trunk/source/util/Util.js	2005-07-22 23:30:45 UTC (rev 259)
@@ -75,40 +75,8 @@
 Util.KEYCODE_FOR_DELETE = 46;
 
 
-// Util.ABBREV_MONTHS_ARRAY = new Array("Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec");
 
-
 // -------------------------------------------------------------------
-// String manipulation methods
-// -------------------------------------------------------------------
-
-/**
- * Returns a copy of the input string, cleaned up so that it can be 
- * included in a valid HTML page.
- *
- * Returns a copy of the string, but with the original characters 
- * '<', '>', and '&' all replaced by their HTML entities: "&lt;", 
- * "&gt;", and "&amp;".  Allows strings to displayed on HTML pages.
- *
- * @scope    public class method
- * @syntax   var cleanString = Util.getCleanString(dirtyString);
- * @param    string    A dirty string to be cleaned up.
- * @return   String
- */
-Util.getCleanString = function(string) {
-  Util.assert(Util.isString(string));
-  
-  var returnString = string;
-  returnString = returnString.replace(/&/g, "&amp;");
-  returnString = returnString.replace(/</g, "&lt;");
-  returnString = returnString.replace(/>/g, "&gt;");
-  returnString = returnString.replace(/"/g, "&quot;");
-  returnString = returnString.replace(/\n/g, " ");
-  return returnString;
-};
-
-
-// -------------------------------------------------------------------
 // Assertions and error handling methods
 // -------------------------------------------------------------------
 



From skinner at berlios.de  Tue Jul 26 01:42:48 2005
From: skinner at berlios.de (Brian Douglas Skinner at BerliOS)
Date: Tue, 26 Jul 2005 01:42:48 +0200
Subject: [openrecord-svn] r260 - trunk/source/util
Message-ID: <200507252342.j6PNgmdh009499@sheep.berlios.de>

Author: skinner
Date: 2005-07-26 01:42:46 +0200 (Tue, 26 Jul 2005)
New Revision: 260

Modified:
   trunk/source/util/Uuid.js
Log:
Added a few new Uuid instance methods.

Modified: trunk/source/util/Uuid.js
===================================================================
--- trunk/source/util/Uuid.js	2005-07-22 23:30:45 UTC (rev 259)
+++ trunk/source/util/Uuid.js	2005-07-25 23:42:46 UTC (rev 260)
@@ -51,10 +51,9 @@
  * @syntax   DO NOT CALL THIS CONSTRUCTOR
  */
 function Uuid() {
-  throw new Error("Uuid is a static class. You can't create instances of it.");
+  this._uuidString = Uuid.generateTimeBasedUuid();
 }
 
-
 // -------------------------------------------------------------------
 // Uuid public class constants
 // -------------------------------------------------------------------
@@ -72,6 +71,42 @@
 Uuid._ourNextIntraMillisecondIncrement = 0;
 
 
+/**
+ * Returns a 36-character string representing the UUID, such as 
+ * "3B12F1DF-5232-1804-897E-917BF397618A".
+ * 
+ * @scope    public instance method
+ * @return   Returns a 36-character UUID string.
+ */
+Uuid.prototype.toString = function() {
+  return this._uuidString;
+};
+
+
+/**
+ * Returns a 12-character string with the "node" or "pseudonode" portion of 
+ * the UUID, which is the rightmost 12 characters.
+ * 
+ * @scope    public instance method
+ * @return   Returns a 12-character string, which will look something like "917BF397618A".
+ */
+Uuid.prototype.getNode = function() {
+  return Uuid.getNodeFromUuid(this._uuidString);
+};
+
+
+/**
+ * Returns a JavaScript Date object with a value equal to the value in the
+ * time fields of the UUID.
+ * 
+ * @scope    public class method
+ * @return   Returns a JavaScript Date object.
+ */
+Uuid.prototype.getDate = function() {
+  return Uuid.getDateFromUuid(this._uuidString);
+};
+
+
 // -------------------------------------------------------------------
 // Public methods for working with UUIDs
 // -------------------------------------------------------------------



From skinner at berlios.de  Tue Jul 26 02:11:52 2005
From: skinner at berlios.de (Brian Douglas Skinner at BerliOS)
Date: Tue, 26 Jul 2005 02:11:52 +0200
Subject: [openrecord-svn] r261 - in trunk: . documentation repositories source/view
Message-ID: <200507260011.j6Q0BqlH019675@sheep.berlios.de>

Author: skinner
Date: 2005-07-26 02:11:47 +0200 (Tue, 26 Jul 2005)
New Revision: 261

Added:
   trunk/repositories/sandbox.json
   trunk/sandbox.html
Modified:
   trunk/documentation/release_planning.txt
   trunk/source/view/RootView.js
Log:
Made a few minor changes so that we can more easily create lots of new empty demo documents.

Modified: trunk/documentation/release_planning.txt
===================================================================
--- trunk/documentation/release_planning.txt	2005-07-25 23:42:46 UTC (rev 260)
+++ trunk/documentation/release_planning.txt	2005-07-26 00:11:47 UTC (rev 261)
@@ -270,7 +270,7 @@
        |          |         | 24. Deal with \n in page name or summary fields
 brian  |          | 0.25    | 25. BUG: need to encode reserved characters(<&>\n"') back at client-server layer
 brian  |          | 0.25    |     Be able to make html files with just one <script> element, not dozens 
-brian  |          |       >>|     Be able to easily create new documents that are empty
+brian  |          | 0.25    |     Be able to easily create new documents that are empty
        |          |       >>|     Create a dozen demo documents (quotes, dictionary, movies, books, oil-change, etc.)
        |          |       >>|     Have different documents use different style-sheets
 brian  | 1    IED | 0.75    |     Add a DateValue class that supports dates like "2005"

Added: trunk/repositories/sandbox.json
===================================================================
--- trunk/repositories/sandbox.json	2005-07-25 23:42:46 UTC (rev 260)
+++ trunk/repositories/sandbox.json	2005-07-26 00:11:47 UTC (rev 261)
@@ -0,0 +1,40 @@
+// Repository records, in JSON format
+{ "format": "2005_JUNE_CHRONOLOGICAL_LIST", 
+  "records": [ {},
+  // =======================================================================
+  { "Transaction": [
+    // -----------------------------------------------------------------------
+    // (Page: Welcome)
+    //           by (Brian) on (Jul 25, 2005)
+    { "Item": { "uuid": "82c7f970-fd68-11d9-be6a-000c414ce854" } },
+    // -----------------------------------------------------------------------
+    // (Page: Welcome).(Name) = "Welcome"
+    //           by (Brian) on (Jul 25, 2005)
+    { "Entry": {
+             "uuid": "82c7f971-fd68-11d9-be6a-000c414ce854",
+             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": "82c7f970-fd68-11d9-be6a-000c414ce854",
+            "value": "Welcome"  }
+    },
+    // -----------------------------------------------------------------------
+    // (Page: Welcome).(Category) = (Category: Page)
+    // (Category: Page).(Items in Category) = (Page: Welcome)
+    //           by (Brian) on (Jul 25, 2005)
+    { "Entry": {
+             "uuid": "82c7f972-fd68-11d9-be6a-000c414ce854",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["82c7f970-fd68-11d9-be6a-000c414ce854", "00020000-ce7f-11d9-8cd5-0011113ae5d6"],
+        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    },
+    // -----------------------------------------------------------------------
+    // (Page: Welcome).(Summary) = "Welcome to the Sandbox repository..."
+    //           by (Brian) on (Jul 25, 2005)
+    { "Entry": {
+             "uuid": "82c7f973-fd68-11d9-be6a-000c414ce854",
+             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "00001003-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": "82c7f970-fd68-11d9-be6a-000c414ce854",
+            "value": "Welcome to the Sandbox repository. Feel free to use this as a place to play around with OpenRecord. You can experiment with creating pages, setting up tables, and editing items."  }
+    }  ]
+  }
\ No newline at end of file

Added: trunk/sandbox.html
===================================================================
--- trunk/sandbox.html	2005-07-25 23:42:46 UTC (rev 260)
+++ trunk/sandbox.html	2005-07-26 00:11:47 UTC (rev 261)
@@ -0,0 +1,50 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
+<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" >
+
+<!-- 
+ Written in 2005 by Brian Douglas Skinner <brian.skinner at gumption.org>
+  
+ Copyright rights relinquished under the Creative Commons  
+ Public Domain Dedication:
+    http://creativecommons.org/licenses/publicdomain/
+-->
+
+  <head>
+    <title>openrecord.org - Sandbox Page</title>
+    <script type="text/javascript" src="source/OpenRecordLoader.js"></script>
+  </head>
+  
+  <body>
+    <div id="OpenRecord">
+      <p>Sorry, for some reason OpenRecord was not able to launch.  
+      OpenRecord only runs in Firefox browsers, and JavaScript must be enabled. 
+      If you are seeing this message in Firefox, then you may have found a
+      bug in OpenRecord.</p>
+    </div>
+    
+<!-- Creative Commons metadata for Public Domain License 
+
+<rdf:RDF xmlns="http://web.resource.org/cc/"
+    xmlns:dc="http://purl.org/dc/elements/1.1/"
+    xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
+<Work rdf:about="">
+   <dc:title>openrecord.org</dc:title>
+   <dc:type rdf:resource="http://purl.org/dc/dcmitype/Text" />
+   <license rdf:resource="http://web.resource.org/cc/PublicDomain" />
+</Work>
+
+<License rdf:about="http://web.resource.org/cc/PublicDomain">
+   <permits rdf:resource="http://web.resource.org/cc/Reproduction" />
+   <permits rdf:resource="http://web.resource.org/cc/Distribution" />
+   <permits rdf:resource="http://web.resource.org/cc/DerivativeWorks" />
+</License>
+
+</rdf:RDF>
+
+-->
+
+  </body>
+  
+</html>
+

Modified: trunk/source/view/RootView.js
===================================================================
--- trunk/source/view/RootView.js	2005-07-25 23:42:46 UTC (rev 260)
+++ trunk/source/view/RootView.js	2005-07-26 00:11:47 UTC (rev 261)
@@ -181,7 +181,7 @@
     if (listOfPages && listOfPages.length > 0) {
       this._homePage = listOfPages[0];
     } else {
-      Util.assert(false);
+      // We may get here if the document does not yet have any pages.
     }
   }
   return this._homePage;
@@ -331,12 +331,14 @@
   
   if (!contentViewToSwitchTo) {
     var page = this.getHomePage();
-    contentViewToSwitchTo = this._hashTableOfPageViewsKeyedByUuid[page._getUuid()];
-    if (!contentViewToSwitchTo) {
-      divElement = window.document.createElement("div"); 
-      this._contentViewDivElement.appendChild(divElement);
-      contentViewToSwitchTo = new PageView(this, divElement, page);
-      this._hashTableOfPageViewsKeyedByUuid[page._getUuid()] = contentViewToSwitchTo;
+    if (page) {
+      contentViewToSwitchTo = this._hashTableOfPageViewsKeyedByUuid[page._getUuid()];
+      if (!contentViewToSwitchTo) {
+        divElement = window.document.createElement("div"); 
+        this._contentViewDivElement.appendChild(divElement);
+        contentViewToSwitchTo = new PageView(this, divElement, page);
+        this._hashTableOfPageViewsKeyedByUuid[page._getUuid()] = contentViewToSwitchTo;
+      }
     }
   }
   if (this._currentContentView) {
@@ -354,14 +356,15 @@
  * @scope    public instance method
  */
 RootView.prototype.display = function() {
-  Util.assert(this._currentContentView instanceof Object);
-
-  document.title = this._currentContentView.getPageTitle() + " - openrecord.org";
   this._rootDiv.className = (this.isInShowToolsMode()) ? RootView.CSS_CLASS_EDIT_MODE : RootView.CSS_CLASS_VIEW_MODE;
   this._displayLoginSpan();
   this._displayNavbar();
   this._displayDebugArea();
-  this._currentContentView.includeOnScreen(true);
+  if (this._currentContentView) {
+    Util.assert(this._currentContentView instanceof Object);
+    document.title = this._currentContentView.getPageTitle() + " - openrecord.org";
+    this._currentContentView.includeOnScreen(true);
+  }
   window.focus();
 };
 
@@ -375,6 +378,7 @@
  * @return   The newly created page item.
  */
 RootView.prototype.newPage = function() {
+  var hasAtLeastOnePage = this.getHomePage() ? true : false;
   var repository = this.getWorld();
   repository.beginTransaction();
   var newPage = repository.newItem("New Page");
@@ -383,7 +387,13 @@
   newPage.assignToCategory(categoryCalledPage);
   newPage.addEntryForAttribute(attributeCalledSummary, "This is a new page.");
 
-  PageView.newSection(repository, newPage);
+  if (hasAtLeastOnePage) {
+    PageView.newSection(repository, newPage);
+  } else {
+    // If we get here it means we're creating the very first page in 
+    // this repository, so make it a "Welcome page" that just has a title
+    // and a summary, without any new sections.
+  }
 
   repository.endTransaction();
   



From mignon at berlios.de  Tue Jul 26 09:26:02 2005
From: mignon at berlios.de (Mignon Belongie at BerliOS)
Date: Tue, 26 Jul 2005 09:26:02 +0200
Subject: [openrecord-svn] r262 - in trunk/source: model util
Message-ID: <200507260726.j6Q7Q2TA019682@sheep.berlios.de>

Author: mignon
Date: 2005-07-26 09:25:51 +0200 (Tue, 26 Jul 2005)
New Revision: 262

Added:
   trunk/source/model/TestReorderingForSpecialCases.html
   trunk/source/model/TestReorderingForSpecialCases.js
   trunk/source/model/TestReorderingForTypicalOrdinals.html
   trunk/source/model/TestReorderingForTypicalOrdinals.js
Modified:
   trunk/source/model/ContentRecord.js
   trunk/source/model/DeltaVirtualServer.js
   trunk/source/model/ModelTest.js
   trunk/source/model/StubVirtualServer.js
   trunk/source/model/TestSuite.html
   trunk/source/model/World.js
   trunk/source/util/Uuid.js
Log:
Implemented reordering for UUID derived ordinals.

Modified: trunk/source/model/ContentRecord.js
===================================================================
--- trunk/source/model/ContentRecord.js	2005-07-26 00:11:47 UTC (rev 261)
+++ trunk/source/model/ContentRecord.js	2005-07-26 07:25:51 UTC (rev 262)
@@ -110,8 +110,7 @@
  * @return   A number.
  */
 ContentRecord.prototype.getOrdinalNumberAtCreation = function() {
-  // return (0 - this._creationTimestamp.valueOf());
-  return (0 - this.getTimestamp());
+  return Uuid.getOriginalOrdinalFromUuid(this._uuid);
 };
 
 
@@ -248,6 +247,7 @@
  * Moves this contentRecord to a new position in a list, by creating a new
  * ordinal for this contentRecord with an ordinal number that is set such
  * that this contentRecord appears between two other entries.
+ * The randomness is to avoid ever generating the same ordinal twice.
  *
  * @scope    public instance method
  * @param    contentRecordFirst    The contentRecord that should come before this one. 
@@ -257,7 +257,6 @@
   var firstOrdinalNumber = null;
   var secondOrdinalNumber = null;
   var thirdOrdinalNumber = null;
-  var arbitraryNumberToMoveUsUpOrDownSlightly = 0.01;
   
   if (contentRecordFirst) {
     firstOrdinalNumber = contentRecordFirst.getOrdinalNumber();
@@ -267,15 +266,42 @@
   }
   
   if (firstOrdinalNumber && thirdOrdinalNumber) {
-    secondOrdinalNumber = (firstOrdinalNumber + thirdOrdinalNumber) / 2;
+    if (firstOrdinalNumber == thirdOrdinalNumber) {
+      Util.assert(false, "Tried to reorder between two items with the same ordinal.");
+    }
+    else {
+      if (firstOrdinalNumber > thirdOrdinalNumber) {
+        temp = firstOrdinalNumber;
+        firstOrdinalNumber = thirdOrdinalNumber;
+        thirdOrdinalNumber = temp;
+      }
+      secondOrdinalNumber = firstOrdinalNumber + Uuid._getRandomEightCharacterHexString();
+      var zeroes = "";
+      while (secondOrdinalNumber >= thirdOrdinalNumber) {
+        zeroes += "0";
+        secondOrdinalNumber = firstOrdinalNumber + zeroes + Uuid._getRandomEightCharacterHexString();
+      }
+    }
   }
   if (firstOrdinalNumber && !thirdOrdinalNumber) {
-    secondOrdinalNumber = (firstOrdinalNumber - arbitraryNumberToMoveUsUpOrDownSlightly);
+    secondOrdinalNumber = firstOrdinalNumber + Uuid._getRandomEightCharacterHexString();
   }
   if (!firstOrdinalNumber && thirdOrdinalNumber) {
-    secondOrdinalNumber = (firstOrdinalNumber + arbitraryNumberToMoveUsUpOrDownSlightly);
+    secondOrdinalNumber = thirdOrdinalNumber;
+    i = secondOrdinalNumber.length - 1;
+    while (secondOrdinalNumber.charAt(i) == '0') {
+      i = i - 1;
+    }
+    var origLen = secondOrdinalNumber.length;
+    prefix = secondOrdinalNumber.substring(0, i);
+    firstNonZero = secondOrdinalNumber.charAt(i);
+    firstNonZero = firstNonZero - 1;
+    secondOrdinalNumber = prefix + firstNonZero;
+    while (secondOrdinalNumber.length < origLen) {
+      secondOrdinalNumber += "f";
+    }
+    secondOrdinalNumber += Uuid._getRandomEightCharacterHexString();
   }
-
   this.getWorld()._newOrdinal(this, secondOrdinalNumber);
 };
 
@@ -305,14 +331,20 @@
 // -------------------------------------------------------------------
 
 /**
- * Registers a vote to retain this contentRecord. 
+ * Uses lexicographic ordering.
  *
  * @scope    public class method
  */
 ContentRecord.compareOrdinals = function(contentRecordOne, contentRecordTwo) {
   var ordinalNumberOne = contentRecordOne.getOrdinalNumber();
   var ordinalNumberTwo = contentRecordTwo.getOrdinalNumber();
-  return (ordinalNumberTwo - ordinalNumberOne);
+  if (ordinalNumberOne < ordinalNumberTwo) {
+    return -1;
+  }
+  if (ordinalNumberOne > ordinalNumberTwo) {
+    return 1;
+  }
+  return 0;
 };
 
 

Modified: trunk/source/model/DeltaVirtualServer.js
===================================================================
--- trunk/source/model/DeltaVirtualServer.js	2005-07-26 00:11:47 UTC (rev 261)
+++ trunk/source/model/DeltaVirtualServer.js	2005-07-26 07:25:51 UTC (rev 262)
@@ -53,8 +53,8 @@
  * @param    inJsonRepositoryString    A JSON string literal representing the world of items. 
  */
 DeltaVirtualServer.prototype = new StubVirtualServer();  // makes DeltaVirtualServer be a subclass of StubVirtualServer
-function DeltaVirtualServer(repositoryName, pathToTrunkDirectory) {
-
+function DeltaVirtualServer(repositoryName, pathToTrunkDirectory, optionalDefaultOverrides) {
+  StubVirtualServer.call(this, pathToTrunkDirectory, optionalDefaultOverrides);
   this._pathToTrunkDirectory = "";
   if (pathToTrunkDirectory) {
     this._pathToTrunkDirectory = pathToTrunkDirectory;

Modified: trunk/source/model/ModelTest.js
===================================================================
--- trunk/source/model/ModelTest.js	2005-07-26 00:11:47 UTC (rev 261)
+++ trunk/source/model/ModelTest.js	2005-07-26 07:25:51 UTC (rev 262)
@@ -366,8 +366,6 @@
   assertTrue('Cupcake starts out second in the list"', foodItems[1] == cupcake);
   assertTrue('Brownie starts out second in the list"', foodItems[2] == brownie);
 
-/*
-PENDING: the ordinal implementation was broken by the new UUID code
   brownie.reorderBetween(apple, cupcake);
   foodItems = world.getItemsInCategory(categoryCalledFood);
   assertTrue('Apple is now first in the list"', foodItems[0] == apple);
@@ -385,7 +383,6 @@
   assertTrue('Apple is now first in the list"', foodItems[0] == apple);
   assertTrue('Brownie is now second in the list"', foodItems[1] == brownie);
   assertTrue('Cupcake is now third in the list"', foodItems[2] == cupcake);
-*/
   
   world.logout();
 }

Modified: trunk/source/model/StubVirtualServer.js
===================================================================
--- trunk/source/model/StubVirtualServer.js	2005-07-26 00:11:47 UTC (rev 261)
+++ trunk/source/model/StubVirtualServer.js	2005-07-26 07:25:51 UTC (rev 262)
@@ -74,14 +74,26 @@
 StubVirtualServer.JSON_MEMBER_RETAIN_FLAG = "retainFlag";
 StubVirtualServer.JSON_MEMBER_ORDINAL_NUMBER = "ordinalNumber";
 
+StubVirtualServer.prototype._generateUuid = function(arg1) {
+  return Uuid.generateTimeBasedUuid(arg1);
+};
 
+StubVirtualServer.prototype._processOptionalDefaultOverrides = function(optionalDefaultOverrides) {
+  for (key in optionalDefaultOverrides) {
+    // Should I check first that there is already a property called 'key'?
+    this[key] = optionalDefaultOverrides[key];
+//alert("key = " + key + "\noptionalDefaultOverrides[key] = " + optionalDefaultOverrides[key]);
+  }
+};
+
+
 /**
  * The StubVirtualServer is a dummy place-holder datastore that does
  * a bare-minimum job of providing data to a World.
  *
  * @scope    public instance constructor
  */
-function StubVirtualServer(pathToTrunkDirectory) {
+function StubVirtualServer(pathToTrunkDirectory, optionalDefaultOverrides) {
   var fileName = "2005_june_axiomatic_items.json";
   var urlForAxiomaticFile = "";
   if (pathToTrunkDirectory) {
@@ -90,9 +102,12 @@
   urlForAxiomaticFile += "source/model/" + fileName;
   
   this._dehydratedAxiomFileURL = urlForAxiomaticFile;
+//  this._generateUuid = Uuid.generateTimeBasedUuid;
+  if (optionalDefaultOverrides) {
+    this._processOptionalDefaultOverrides(optionalDefaultOverrides, "Stub");
+  }
 }
 
-
 /**
  * Initializes the instance variables for a newly created StubVirtualServer.
  *
@@ -762,10 +777,10 @@
     var uuidOfCurrentUser = this._currentUser._getUuid();
     var arrayOfParts = uuidOfCurrentUser.split("-");
     var pseudoNodeOfCurrentUser = arrayOfParts[4];//"0123456789AB";
-    newUuid = Uuid.generateTimeBasedUuid(pseudoNodeOfCurrentUser);
+    newUuid = this._generateUuid(pseudoNodeOfCurrentUser);
   }
   else {
-    newUuid = Uuid.generateTimeBasedUuid();
+    newUuid = this._generateUuid();
   }
   return newUuid;
 };

Added: trunk/source/model/TestReorderingForSpecialCases.html
===================================================================
--- trunk/source/model/TestReorderingForSpecialCases.html	2005-07-26 00:11:47 UTC (rev 261)
+++ trunk/source/model/TestReorderingForSpecialCases.html	2005-07-26 07:25:51 UTC (rev 262)
@@ -0,0 +1,97 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
+<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" >
+
+<!-- 
+ Copyright rights relinquished under the Creative Commons  
+ Public Domain Dedication:
+    http://creativecommons.org/licenses/publicdomain/
+-->
+
+  <head>
+    <title>Test reordering of items for special cases of the corresponding ordinals (via a mock)</title>
+
+    <script type="text/javascript" src="../../third_party/jsunit/jsunit2_1/app/jsUnitCore.js"></script>
+    <script type="text/javascript" src="../../third_party/md5/md5.js"></script>
+    <script type="text/javascript" src="../util/Util.js"></script>
+    <script type="text/javascript" src="../util/Uuid.js"></script>
+    <script type="text/javascript" src="../util/DateValue.js"></script>
+    <script type="text/javascript" src="HttpSaver.js"></script>
+    <script type="text/javascript" src="Record.js"></script>
+    <script type="text/javascript" src="Ordinal.js"></script>
+    <script type="text/javascript" src="Vote.js"></script>
+    <script type="text/javascript" src="ContentRecord.js"></script>
+    <script type="text/javascript" src="Item.js"></script>
+    <script type="text/javascript" src="Entry.js"></script>
+    <script type="text/javascript" src="Transaction.js"></script>
+    <script type="text/javascript" src="QueryRunner.js"></script>
+    <script type="text/javascript" src="World.js"></script>
+    <script type="text/javascript" src="StubVirtualServer.js"></script>
+    <script type="text/javascript" src="DeltaVirtualServer.js"></script>
+    <script type="text/javascript" src="TestReorderingForSpecialCases.js"></script>
+  </head>
+  
+  <body>
+    <h1>Test reordering of items for special cases of the corresponding ordinals (via a mock)</h1>
+
+    <p>This page is used to run unit tests for the JavaScript code in the 
+    OpenRecord project.</p>
+    
+    <p>&nbsp;</p>
+    <hr/>
+    <p>To see the tests, open this .html file in a text editor. Or, within a  
+    web browser, you should be able see the source for this file by using 
+    some menu like <b>View</b> followed by <b>Page Source</b>. The tests 
+    may be in this file, or they may be in a separate file that has the
+    same name as this one, except with a .js extension instead of a .html
+    extension.</p>
+ 
+    <p>The unit tests are set up to run in the
+    <a href="http://www.edwardh.com/jsunit/" rel="external">JsUnit framework</a>
+    written by 
+    <a href="http://www.edwardh.com/" rel="external">Edward Hieatt</a>. </p>
+
+    <p>If you're looking at this page across an "http://" connection, rather
+    than having loaded it as a "file:///", then you may be able to run the
+    unit tests. The web server that served you this page may also have a
+    JsUnit testRunner available. If so, you should be able to run these unit
+    tests by going to
+    <a href="../../third_party/jsunit/jsunit2_1/testRunner.html?testpage=" 
+    onclick="href+=window.location.href;" rel="external">the local testRunner 
+    page</a>, and hitting the <b>Run</b> button.</p>
+
+    <p>You can also run these unit tests on your local computer. To do that you 
+    first need to download <a href="http://www.edwardh.com/jsunit/" 
+    rel="external">JsUnit</a>.</p>
+    
+    <p>&nbsp;</p>
+    <hr/>
+    <p class="copyright">You can copy freely from this work &mdash; copyright 
+    rights relinquished under the Creative Commons  
+    <a rel="license external" 
+    href="http://creativecommons.org/licenses/publicdomain/">Public Domain 
+    Dedication</a>.</p>
+
+<!-- Creative Commons metadata for Public Domain License 
+
+<rdf:RDF xmlns="http://web.resource.org/cc/"
+    xmlns:dc="http://purl.org/dc/elements/1.1/"
+    xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
+<Work rdf:about="">
+   <dc:title>openrecord.org</dc:title>
+   <dc:type rdf:resource="http://purl.org/dc/dcmitype/Text" />
+   <license rdf:resource="http://web.resource.org/cc/PublicDomain" />
+</Work>
+
+<License rdf:about="http://web.resource.org/cc/PublicDomain">
+   <permits rdf:resource="http://web.resource.org/cc/Reproduction" />
+   <permits rdf:resource="http://web.resource.org/cc/Distribution" />
+   <permits rdf:resource="http://web.resource.org/cc/DerivativeWorks" />
+</License>
+
+</rdf:RDF>
+
+-->
+  </body>
+</html>
+

Added: trunk/source/model/TestReorderingForSpecialCases.js
===================================================================
--- trunk/source/model/TestReorderingForSpecialCases.js	2005-07-26 00:11:47 UTC (rev 261)
+++ trunk/source/model/TestReorderingForSpecialCases.js	2005-07-26 07:25:51 UTC (rev 262)
@@ -0,0 +1,148 @@
+/*****************************************************************************
+ TestReorderingForSpecialCases.js
+ 
+******************************************************************************
+ Copyright rights relinquished under the Creative Commons  
+ Public Domain Dedication:
+    http://creativecommons.org/licenses/publicdomain/
+  
+ You can copy freely from this file.  This work may be freely reproduced, 
+ distributed, transmitted, used, modified, built upon, or otherwise exploited
+ by anyone for any purpose.
+  
+ This work is provided on an "AS IS" basis, without warranties or conditions 
+ of any kind, either express or implied, including, without limitation, any 
+ warranties or conditions of title, non-infringement, merchantability, or 
+ fitness for a particular purpose. You are solely responsible for determining 
+ the appropriateness of using or distributing the work and assume all risks 
+ associated with use of this work, including but not limited to the risks and 
+ costs of errors, compliance with applicable laws, damage to or loss of data 
+ or equipment, and unavailability or interruption of operations.
+
+ In no event shall the authors or contributors have any liability for any 
+ direct, indirect, incidental, special, exemplary, or consequential damages,
+ however caused and on any theory of liability, whether in contract, strict 
+ liability, or tort (including negligence), arising in any way out of or in 
+ connection with the use or distribution of the work.
+*****************************************************************************/
+ 
+
+// -------------------------------------------------------------------
+// Dependencies, expressed in the syntax that JSLint understands:
+// 
+/*global Util */
+/*global World, Item, Entry */
+/*global StubVirtualServer */
+/*global assertTrue, assertFalse, setUp, tearDown */
+// -------------------------------------------------------------------
+
+var world;
+var categoryCalledFood = null;
+var utilAssertReportedError;
+
+errorReporter = function() {
+  utilAssertReportedError = true;
+}
+
+function setUp() {
+  utilAssertReportedError = false;
+  Util.setErrorReportCallback(errorReporter);
+  var pathToTrunkDirectory = "../../../";
+  var virtualServer = new StubVirtualServer(pathToTrunkDirectory, {"_generateUuid":mockUuidGenerator});
+  world = new World(virtualServer);
+
+  annUuid1 = "10000000-2222-3333-4444-555555555555";
+  annUuid2 = "10000001-2222-3333-4444-555555555555";
+  annUuid3 = "10000002-2222-3333-4444-555555555555";
+  mockUuidGenerator.queueOfUuids.push(annUuid1);
+  mockUuidGenerator.queueOfUuids.push(annUuid2);
+  mockUuidGenerator.queueOfUuids.push(annUuid3);
+
+  var annsPassword = "Ann's password";
+  var userAnn = world.newUser("Ann Doe", annsPassword);
+  assertTrue("Ann has the expected uuid", userAnn.getUniqueKeyString() == annUuid1);
+  world.login(userAnn, annsPassword);
+
+  foodUuid1    = "20000000-2222-3333-4444-555555555555";
+  foodUuid2    = "20000001-2222-3333-4444-555555555555";
+  foodUuid3    = "20000002-2222-3333-4444-555555555555";
+  mockUuidGenerator.queueOfUuids.push(foodUuid1);
+  mockUuidGenerator.queueOfUuids.push(foodUuid2);
+  mockUuidGenerator.queueOfUuids.push(foodUuid3);
+  categoryCalledFood = world.newCategory("Food");
+}
+
+function tearDown() {
+  assertFalse(utilAssertReportedError);
+  world.logout();
+}
+
+function testReorderBetweenTwoItemsWithTheSameOrdinal() {
+  sushiUuid     = "40000000-2222-3333-4444-555555555555";
+  sushiNameUuid = "40000001-2222-3333-4444-555555555555";
+  mockUuidGenerator.queueOfUuids.push(sushiUuid);
+  mockUuidGenerator.queueOfUuids.push(sushiNameUuid);
+  pestoUuid     = "40000000-2222-3333-9999-555555555555";
+  pestoNameUuid = "40000001-2222-3333-9999-555555555555";
+  mockUuidGenerator.queueOfUuids.push(pestoUuid);
+  mockUuidGenerator.queueOfUuids.push(pestoNameUuid);
+  guavaUuid     = "50000000-2222-3333-4444-555555555555";
+  guavaNameUuid = "50000001-2222-3333-4444-555555555555";
+  mockUuidGenerator.queueOfUuids.push(guavaUuid);
+  mockUuidGenerator.queueOfUuids.push(guavaNameUuid);
+  var sushi = world.newItem("Sushi");
+  var pesto = world.newItem("Pesto");
+  var guava = world.newItem("Guava");
+  assertTrue(sushi.getOrdinalNumber() == pesto.getOrdinalNumber());
+  guava.reorderBetween(sushi, pesto);
+  assertTrue(utilAssertReportedError);
+  utilAssertReportedError = false;
+}
+
+function testReorderBetweenTwoItemsWithTheSameTimestamp() {
+  sushiUuid     = "40000000-2222-3333-4444-555555555555";
+  sushiNameUuid = "40000001-2222-3333-4444-555555555555";
+  mockUuidGenerator.queueOfUuids.push(sushiUuid);
+  mockUuidGenerator.queueOfUuids.push(sushiNameUuid);
+  pestoUuid     = "40000002-2222-3333-4444-555555555555";
+  pestoNameUuid = "40000003-2222-3333-4444-555555555555";
+  mockUuidGenerator.queueOfUuids.push(pestoUuid);
+  mockUuidGenerator.queueOfUuids.push(pestoNameUuid);
+  guavaUuid     = "40000004-2222-3333-4444-555555555555";
+  guavaNameUuid = "40000005-2222-3333-4444-555555555555";
+  mockUuidGenerator.queueOfUuids.push(guavaUuid);
+  mockUuidGenerator.queueOfUuids.push(guavaNameUuid);
+  var sushi = world.newItem("Sushi");
+  var pesto = world.newItem("Pesto");
+  var guava = world.newItem("Guava");
+  assertTrue('Sushi and Pesto have same timestamp', sushi.getTimestamp() == pesto.getTimestamp());
+  assertTrue('Sushi and Guava have same timestamp', sushi.getTimestamp() == guava.getTimestamp());
+
+  guava.reorderBetween(sushi, pesto);
+
+  sushiLinkUuid    = "60000000-2222-3333-4444-555555555555";
+  mockUuidGenerator.queueOfUuids.push(sushiLinkUuid);
+  sushi.assignToCategory(categoryCalledFood);
+  pestoLinkUuid    = "60000001-2222-3333-4444-555555555555";
+  mockUuidGenerator.queueOfUuids.push(pestoLinkUuid);
+  pesto.assignToCategory(categoryCalledFood);
+  guavaLinkUuid    = "60000002-2222-3333-4444-555555555555";
+  mockUuidGenerator.queueOfUuids.push(guavaLinkUuid);
+  guava.assignToCategory(categoryCalledFood);
+
+  guava.reorderBetween(sushi, pesto);
+  foodItems = world.getItemsInCategory(categoryCalledFood);
+  assertTrue('After first reordering, Sushi is first in the list.', foodItems[0] == sushi);
+  assertTrue('After first reordering, Guava is second in the list.', foodItems[1] == guava);
+  assertTrue('After first reordering, Pesto is third in the list.', foodItems[2] == pesto);
+
+  pesto.reorderBetween(sushi, guava);
+  foodItems = world.getItemsInCategory(categoryCalledFood);
+  assertTrue('After 2nd reordering, Sushi is first in the list.', foodItems[0] == sushi);
+  assertTrue('After 2nd reordering, Pesto is second in the list.', foodItems[1] == pesto);
+  assertTrue('After 2nd reordering, Guava is third in the list.', foodItems[2] == guava);
+}
+
+// -------------------------------------------------------------------
+// End of file
+// -------------------------------------------------------------------

Added: trunk/source/model/TestReorderingForTypicalOrdinals.html
===================================================================
--- trunk/source/model/TestReorderingForTypicalOrdinals.html	2005-07-26 00:11:47 UTC (rev 261)
+++ trunk/source/model/TestReorderingForTypicalOrdinals.html	2005-07-26 07:25:51 UTC (rev 262)
@@ -0,0 +1,97 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
+<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" >
+
+<!-- 
+ Copyright rights relinquished under the Creative Commons  
+ Public Domain Dedication:
+    http://creativecommons.org/licenses/publicdomain/
+-->
+
+  <head>
+    <title>Test reordering items with typical ordinals (via a mock)</title>
+
+    <script type="text/javascript" src="../../third_party/jsunit/jsunit2_1/app/jsUnitCore.js"></script>
+    <script type="text/javascript" src="../../third_party/md5/md5.js"></script>
+    <script type="text/javascript" src="../util/Util.js"></script>
+    <script type="text/javascript" src="../util/Uuid.js"></script>
+    <script type="text/javascript" src="../util/DateValue.js"></script>
+    <script type="text/javascript" src="HttpSaver.js"></script>
+    <script type="text/javascript" src="Record.js"></script>
+    <script type="text/javascript" src="Ordinal.js"></script>
+    <script type="text/javascript" src="Vote.js"></script>
+    <script type="text/javascript" src="ContentRecord.js"></script>
+    <script type="text/javascript" src="Item.js"></script>
+    <script type="text/javascript" src="Entry.js"></script>
+    <script type="text/javascript" src="Transaction.js"></script>
+    <script type="text/javascript" src="QueryRunner.js"></script>
+    <script type="text/javascript" src="World.js"></script>
+    <script type="text/javascript" src="StubVirtualServer.js"></script>
+    <script type="text/javascript" src="DeltaVirtualServer.js"></script>
+    <script type="text/javascript" src="TestReorderingForTypicalOrdinals.js"></script>
+  </head>
+  
+  <body>
+    <h1>Test reordering items with typical ordinals (via a mock)</h1>
+
+    <p>This page is used to run unit tests for the JavaScript code in the 
+    OpenRecord project.</p>
+    
+    <p>&nbsp;</p>
+    <hr/>
+    <p>To see the tests, open this .html file in a text editor. Or, within a  
+    web browser, you should be able see the source for this file by using 
+    some menu like <b>View</b> followed by <b>Page Source</b>. The tests 
+    may be in this file, or they may be in a separate file that has the
+    same name as this one, except with a .js extension instead of a .html
+    extension.</p>
+ 
+    <p>The unit tests are set up to run in the
+    <a href="http://www.edwardh.com/jsunit/" rel="external">JsUnit framework</a>
+    written by 
+    <a href="http://www.edwardh.com/" rel="external">Edward Hieatt</a>. </p>
+
+    <p>If you're looking at this page across an "http://" connection, rather
+    than having loaded it as a "file:///", then you may be able to run the
+    unit tests. The web server that served you this page may also have a
+    JsUnit testRunner available. If so, you should be able to run these unit
+    tests by going to
+    <a href="../../third_party/jsunit/jsunit2_1/testRunner.html?testpage=" 
+    onclick="href+=window.location.href;" rel="external">the local testRunner 
+    page</a>, and hitting the <b>Run</b> button.</p>
+
+    <p>You can also run these unit tests on your local computer. To do that you 
+    first need to download <a href="http://www.edwardh.com/jsunit/" 
+    rel="external">JsUnit</a>.</p>
+    
+    <p>&nbsp;</p>
+    <hr/>
+    <p class="copyright">You can copy freely from this work &mdash; copyright 
+    rights relinquished under the Creative Commons  
+    <a rel="license external" 
+    href="http://creativecommons.org/licenses/publicdomain/">Public Domain 
+    Dedication</a>.</p>
+
+<!-- Creative Commons metadata for Public Domain License 
+
+<rdf:RDF xmlns="http://web.resource.org/cc/"
+    xmlns:dc="http://purl.org/dc/elements/1.1/"
+    xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
+<Work rdf:about="">
+   <dc:title>openrecord.org</dc:title>
+   <dc:type rdf:resource="http://purl.org/dc/dcmitype/Text" />
+   <license rdf:resource="http://web.resource.org/cc/PublicDomain" />
+</Work>
+
+<License rdf:about="http://web.resource.org/cc/PublicDomain">
+   <permits rdf:resource="http://web.resource.org/cc/Reproduction" />
+   <permits rdf:resource="http://web.resource.org/cc/Distribution" />
+   <permits rdf:resource="http://web.resource.org/cc/DerivativeWorks" />
+</License>
+
+</rdf:RDF>
+
+-->
+  </body>
+</html>
+

Added: trunk/source/model/TestReorderingForTypicalOrdinals.js
===================================================================
--- trunk/source/model/TestReorderingForTypicalOrdinals.js	2005-07-26 00:11:47 UTC (rev 261)
+++ trunk/source/model/TestReorderingForTypicalOrdinals.js	2005-07-26 07:25:51 UTC (rev 262)
@@ -0,0 +1,199 @@
+/*****************************************************************************
+ TestReorderingForTypicalOrdinals.js
+ 
+******************************************************************************
+ Copyright rights relinquished under the Creative Commons  
+ Public Domain Dedication:
+    http://creativecommons.org/licenses/publicdomain/
+  
+ You can copy freely from this file.  This work may be freely reproduced, 
+ distributed, transmitted, used, modified, built upon, or otherwise exploited
+ by anyone for any purpose.
+  
+ This work is provided on an "AS IS" basis, without warranties or conditions 
+ of any kind, either express or implied, including, without limitation, any 
+ warranties or conditions of title, non-infringement, merchantability, or 
+ fitness for a particular purpose. You are solely responsible for determining 
+ the appropriateness of using or distributing the work and assume all risks 
+ associated with use of this work, including but not limited to the risks and 
+ costs of errors, compliance with applicable laws, damage to or loss of data 
+ or equipment, and unavailability or interruption of operations.
+
+ In no event shall the authors or contributors have any liability for any 
+ direct, indirect, incidental, special, exemplary, or consequential damages,
+ however caused and on any theory of liability, whether in contract, strict 
+ liability, or tort (including negligence), arising in any way out of or in 
+ connection with the use or distribution of the work.
+*****************************************************************************/
+ 
+
+// -------------------------------------------------------------------
+// Dependencies, expressed in the syntax that JSLint understands:
+// 
+/*global Util */
+/*global World, Item, Entry */
+/*global StubVirtualServer */
+/*global assertTrue, assertFalse, setUp, tearDown */
+// -------------------------------------------------------------------
+
+var world;
+var categoryCalledFood;
+var sushi;
+var pesto;
+var guava;
+var taffy;
+var utilAssertReportedError;
+
+errorReporter = function() {
+  utilAssertReportedError = true;
+}
+
+function setUp() {
+  utilAssertReportedError = false;
+  Util.setErrorReportCallback(errorReporter);
+  var pathToTrunkDirectory = "../../../";
+  var virtualServer = new StubVirtualServer(pathToTrunkDirectory, {"_generateUuid":mockUuidGenerator});
+/*
+You can use DeltaVirtualServer instead if you want to append all transactions to a file for debugging purposes.
+Note that the tests will run a lot slower if you do.
+
+  var virtualServer = new DeltaVirtualServer("OrdinalsTest", pathToTrunkDirectory, {"_generateUuid":mockUuidGenerator});
+*/
+
+  world = new World(virtualServer);
+
+  annUuid1 = "10000000-2222-3333-4444-555555555555";
+  annUuid2 = "10000001-2222-3333-4444-555555555555";
+  annUuid3 = "10000002-2222-3333-4444-555555555555";
+  mockUuidGenerator.queueOfUuids.push(annUuid1);
+  mockUuidGenerator.queueOfUuids.push(annUuid2);
+  mockUuidGenerator.queueOfUuids.push(annUuid3);
+
+  var annsPassword = "Ann's password";
+  var userAnn = world.newUser("Ann Doe", annsPassword);
+  assertTrue("Ann has the expected uuid", userAnn.getUniqueKeyString() == annUuid1);
+  world.login(userAnn, annsPassword);
+
+  foodUuid1    = "20000000-2222-3333-4444-555555555555";
+  foodUuid2    = "20000001-2222-3333-4444-555555555555";
+  foodUuid3    = "20000002-2222-3333-4444-555555555555";
+  mockUuidGenerator.queueOfUuids.push(foodUuid1);
+  mockUuidGenerator.queueOfUuids.push(foodUuid2);
+  mockUuidGenerator.queueOfUuids.push(foodUuid3);
+  categoryCalledFood = world.newCategory("Food");
+
+  sushiUuid     = "40000000-2222-3333-4444-555555555555";
+  sushiNameUuid = "40000001-2222-3333-4444-555555555555";
+  mockUuidGenerator.queueOfUuids.push(sushiUuid);
+  mockUuidGenerator.queueOfUuids.push(sushiNameUuid);
+  pestoUuid     = "40000010-2222-3333-4444-555555555555";
+  pestoNameUuid = "40000011-2222-3333-4444-555555555555";
+  mockUuidGenerator.queueOfUuids.push(pestoUuid);
+  mockUuidGenerator.queueOfUuids.push(pestoNameUuid);
+  guavaUuid     = "40000020-2222-3333-4444-555555555555";
+  guavaNameUuid = "40000021-2222-3333-4444-555555555555";
+  mockUuidGenerator.queueOfUuids.push(guavaUuid);
+  mockUuidGenerator.queueOfUuids.push(guavaNameUuid);
+  taffyUuid     = "40000030-2222-3333-4444-555555555555";
+  taffyNameUuid = "40000031-2222-3333-4444-555555555555";
+  mockUuidGenerator.queueOfUuids.push(taffyUuid);
+  mockUuidGenerator.queueOfUuids.push(taffyNameUuid);
+  sushi = world.newItem("Sushi");
+  assertTrue("sushi has the expected uuid", sushi.getUniqueKeyString() == sushiUuid);
+  pesto = world.newItem("Pesto");
+  assertTrue("pesto has the expected uuid", pesto.getUniqueKeyString() == pestoUuid);
+  guava = world.newItem("Guava");
+  assertTrue("guava has the expected uuid", guava.getUniqueKeyString() == guavaUuid);
+  taffy = world.newItem("Taffy");
+  assertTrue("taffy has the expected uuid", taffy.getUniqueKeyString() == taffyUuid);
+
+  sushiLinkUuid    = "60000000-2222-3333-4444-555555555555";
+  mockUuidGenerator.queueOfUuids.push(sushiLinkUuid);
+  sushi.assignToCategory(categoryCalledFood);
+  pestoLinkUuid    = "60000001-2222-3333-4444-555555555555";
+  mockUuidGenerator.queueOfUuids.push(pestoLinkUuid);
+  pesto.assignToCategory(categoryCalledFood);
+  guavaLinkUuid    = "60000002-2222-3333-4444-555555555555";
+  mockUuidGenerator.queueOfUuids.push(guavaLinkUuid);
+  guava.assignToCategory(categoryCalledFood);
+  taffyLinkUuid    = "60000002-2222-3333-4444-555555555555";
+  mockUuidGenerator.queueOfUuids.push(taffyLinkUuid);
+  taffy.assignToCategory(categoryCalledFood);
+}
+
+function tearDown() {
+  assertFalse(utilAssertReportedError);
+  world.logout();
+}
+
+function testReorderBetweenTwoItems() {
+  guava.reorderBetween(sushi, pesto);
+  foodItems = world.getItemsInCategory(categoryCalledFood);
+  assertTrue('After first reordering, Sushi is first in the list.', foodItems[0] == sushi);
+  assertTrue('After first reordering, Guava is second in the list.', foodItems[1] == guava);
+  assertTrue('After first reordering, Pesto is third in the list.', foodItems[2] == pesto);
+}
+
+function testReorderAfterAnItem() {
+  assertTrue(ContentRecord.compareOrdinals(sushi, guava) < 0);
+  sushi.reorderBetween(guava, null);
+  assertTrue(ContentRecord.compareOrdinals(sushi, guava) > 0);
+}
+
+function testReorderBeforeAnItem() {
+  assertTrue(ContentRecord.compareOrdinals(pesto, guava) < 0);
+  guava.reorderBetween(null, pesto);
+  assertTrue(ContentRecord.compareOrdinals(pesto, guava) > 0);
+}
+
+function testReorderTwice() {
+  guava.reorderBetween(sushi, pesto);
+  foodItems = world.getItemsInCategory(categoryCalledFood);
+  assertTrue('After first reordering, Sushi is first in the list.', foodItems[0] == sushi);
+  assertTrue('After first reordering, Guava is second in the list.', foodItems[1] == guava);
+  assertTrue('After first reordering, Pesto is third in the list.', foodItems[2] == pesto);
+
+  pesto.reorderBetween(sushi, guava);
+  foodItems = world.getItemsInCategory(categoryCalledFood);
+  assertTrue('After 2nd reordering, Sushi is first in the list.', foodItems[0] == sushi);
+  assertTrue('After 2nd reordering, Pesto is second in the list.', foodItems[1] == pesto);
+  assertTrue('After 2nd reordering, Guava is third in the list.', foodItems[2] == guava);
+}
+
+function testReorderManyTimes() {
+  for (i = 0; i < 10; i++) {
+    guava.reorderBetween(sushi, pesto);
+    assertTrue(ContentRecord.compareOrdinals(sushi, guava) < 0);
+    assertTrue(ContentRecord.compareOrdinals(guava, pesto) < 0);
+    pesto.reorderBetween(sushi, guava);
+    assertTrue(ContentRecord.compareOrdinals(sushi, pesto) < 0);
+    assertTrue(ContentRecord.compareOrdinals(pesto, guava) < 0);
+  }
+}
+
+function testReorderBetweenTwoItemsWhichAreTheSame() {
+  pesto.reorderBetween(sushi, sushi);
+  assertTrue(utilAssertReportedError);
+  utilAssertReportedError = false;
+}
+
+function testReorderBetweenTwoItemsNotInOrder() {
+  assertTrue(ContentRecord.compareOrdinals(sushi, pesto) < 0);
+  guava.reorderBetween(pesto, sushi);
+  assertTrue(ContentRecord.compareOrdinals(pesto, guava) > 0);
+  assertTrue(ContentRecord.compareOrdinals(guava, sushi) > 0);
+}
+
+function testReorderTwoItemsBetweenTheSameTwoItems() {
+  guava.reorderBetween(sushi, pesto);
+  taffy.reorderBetween(sushi, pesto);
+  assertTrue(ContentRecord.compareOrdinals(sushi, guava) < 0);
+  assertTrue(ContentRecord.compareOrdinals(guava, pesto) < 0);
+  assertTrue(ContentRecord.compareOrdinals(sushi, taffy) < 0);
+  assertTrue(ContentRecord.compareOrdinals(taffy, pesto) < 0);
+  assertTrue(ContentRecord.compareOrdinals(taffy, guava) != 0);
+}
+
+// -------------------------------------------------------------------
+// End of file
+// -------------------------------------------------------------------

Modified: trunk/source/model/TestSuite.html
===================================================================
--- trunk/source/model/TestSuite.html	2005-07-26 00:11:47 UTC (rev 261)
+++ trunk/source/model/TestSuite.html	2005-07-26 07:25:51 UTC (rev 262)
@@ -24,6 +24,8 @@
       function dataModelTestSuite() {
         var testSuite = new window.top.jsUnitTestSuite();
         testSuite.addTestPage("../../../source/model/ModelTest.html");
+        testSuite.addTestPage("../../../source/model/TestReorderingForTypicalOrdinals.html");
+        testSuite.addTestPage("../../../source/model/TestReorderingForSpecialCases.html");
         testSuite.addTestPage("../../../source/model/LintTest.html");
         return testSuite;
       }

Modified: trunk/source/model/World.js
===================================================================
--- trunk/source/model/World.js	2005-07-26 00:11:47 UTC (rev 261)
+++ trunk/source/model/World.js	2005-07-26 07:25:51 UTC (rev 262)
@@ -924,7 +924,7 @@
 
 
 /**
- * Returns an list of all the items that represent categories.
+ * Returns a list of all the items that represent categories.
  *
  * @scope    public instance method
  * @return   A list of items that represent categories.
@@ -935,7 +935,7 @@
 };
 
 /**
- * Returns an list of all the items that represent attributes.
+ * Returns a list of all the items that represent attributes.
  *
  * @scope    public instance method
  * @return   A list of items that represent attributes.

Modified: trunk/source/util/Uuid.js
===================================================================
--- trunk/source/util/Uuid.js	2005-07-26 00:11:47 UTC (rev 261)
+++ trunk/source/util/Uuid.js	2005-07-26 07:25:51 UTC (rev 262)
@@ -111,6 +111,16 @@
 // Public methods for working with UUIDs
 // -------------------------------------------------------------------
 
+mockUuidGenerator.queueOfUuids = new Array();
+
+function mockUuidGenerator() {
+  if (mockUuidGenerator.queueOfUuids.length == 0) {
+// This should probably throw an exception instead.    
+      return "00000000-0000-0000-0000-000000000000";
+  }
+  return mockUuidGenerator.queueOfUuids.shift();
+}
+
 /**
  * Generates a time-based UUID, meaning a "version 1" UUID.  JavaScript
  * code running in a browser doesn't have access to the IEEE 802.3 address
@@ -171,7 +181,7 @@
     Uuid._ourNextIntraMillisecondIncrement += 1;
     if (Uuid._ourNextIntraMillisecondIncrement == 10000) {
       // If we've gotten to here, it means we've already generated 10,000
-      // UUIDs in this single milliseconds, which is the most that the UUID
+      // UUIDs in this single millisecond, which is the most that the UUID
       // timestamp field allows for.  So now we'll just sit here and wait
       // for a fraction of a millisecond, so as to ensure that the next 
       // time this method is called there will be a different millisecond 
@@ -280,6 +290,13 @@
 };
 
 
+Uuid.getOriginalOrdinalFromUuid = function(uuid) {
+  var hexTimeLow = uuid.split('-')[0];
+  var hexTimeMid = uuid.split('-')[1];
+  var hexTimeHigh = uuid.split('-')[2];
+  return hexTimeHigh + hexTimeMid + hexTimeLow;
+};
+
 // -------------------------------------------------------------------
 // Private methods
 // -------------------------------------------------------------------



From skinner at berlios.de  Tue Jul 26 21:26:12 2005
From: skinner at berlios.de (Brian Douglas Skinner at BerliOS)
Date: Tue, 26 Jul 2005 21:26:12 +0200
Subject: [openrecord-svn] r263 - in trunk: documentation repositories source source/model source/util source/view
Message-ID: <200507261926.j6QJQCHL027869@sheep.berlios.de>

Author: skinner
Date: 2005-07-26 21:26:09 +0200 (Tue, 26 Jul 2005)
New Revision: 263

Added:
   trunk/source/util/CsvParser.js
   trunk/source/util/CsvParserTest.html
   trunk/source/util/CsvParserTest.js
Modified:
   trunk/documentation/release_planning.txt
   trunk/repositories/sandbox.json
   trunk/source/OpenRecordLoader.js
   trunk/source/TablePlugin.js
   trunk/source/base_style.css
   trunk/source/model/Item.js
   trunk/source/util/Uuid.js
   trunk/source/view/EntryView.js
   trunk/source/view/SectionView.js
   trunk/source/view/SuggestionBox.js
Log:
TablePlugin can now import data from CSV data files.  Caveats: This only works for simple CSV files, not for tricky corner cases.  We don't do much error checking, so if the CSV file doesn't match the table then you're in trouble.  This only works when you load the page from a file:/// URL.  

Modified: trunk/documentation/release_planning.txt
===================================================================
--- trunk/documentation/release_planning.txt	2005-07-26 07:25:51 UTC (rev 262)
+++ trunk/documentation/release_planning.txt	2005-07-26 19:26:09 UTC (rev 263)
@@ -258,7 +258,7 @@
 chao   |          | done?   | 12. be able to delete a selected lozenge 
        |          |         | 13. be able to delete a selected table row 
 chao   | 0.5  IED |         | 14. improve keyboard navigation: tab, arrow, and return keys
-mignon |          |       >>| 15. Get data model to pass the ordinal unit tests again
+mignon |          | done?   | 15. Get data model to pass the ordinal unit tests again
        |          |copy/move? 16. drag-and-drop lozenges
        |          |       >>| 17. drag-and-drop to re-order navbar menu items
        |          |         | 18. drag-and-drop to re-order table rows
@@ -271,6 +271,7 @@
 brian  |          | 0.25    | 25. BUG: need to encode reserved characters(<&>\n"') back at client-server layer
 brian  |          | 0.25    |     Be able to make html files with just one <script> element, not dozens 
 brian  |          | 0.25    |     Be able to easily create new documents that are empty
+brian  |          | 0.5     |     Import CSV data files when running from a file:/// page
        |          |       >>|     Create a dozen demo documents (quotes, dictionary, movies, books, oil-change, etc.)
        |          |       >>|     Have different documents use different style-sheets
 brian  | 1    IED | 0.75    |     Add a DateValue class that supports dates like "2005"

Modified: trunk/repositories/sandbox.json
===================================================================
--- trunk/repositories/sandbox.json	2005-07-26 07:25:51 UTC (rev 262)
+++ trunk/repositories/sandbox.json	2005-07-26 19:26:09 UTC (rev 263)
@@ -37,4 +37,1526 @@
              "item": "82c7f970-fd68-11d9-be6a-000c414ce854",
             "value": "Welcome to the Sandbox repository. Feel free to use this as a place to play around with OpenRecord. You can experiment with creating pages, setting up tables, and editing items."  }
     }  ]
+  },
+  // =======================================================================
+  { "Transaction": [
+    // -----------------------------------------------------------------------
+    // (Page: New Page)
+    //           by (Brian) on (Jul 25, 2005)
+    { "Item": { "uuid": "d5e68550-fd6c-11d9-9654-000c414ce854" } },
+    // -----------------------------------------------------------------------
+    // (Page: New Page).(Name) = "New Page"
+    //           by (Brian) on (Jul 25, 2005)
+    { "Entry": {
+             "uuid": "d5e68551-fd6c-11d9-9654-000c414ce854",
+             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": "d5e68550-fd6c-11d9-9654-000c414ce854",
+            "value": "New Page"  }
+    },
+    // -----------------------------------------------------------------------
+    // (Page: New Page).(Category) = (Category: Page)
+    // (Category: Page).(Items in Category) = (Page: New Page)
+    //           by (Brian) on (Jul 25, 2005)
+    { "Entry": {
+             "uuid": "d5e68552-fd6c-11d9-9654-000c414ce854",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["d5e68550-fd6c-11d9-9654-000c414ce854", "00020000-ce7f-11d9-8cd5-0011113ae5d6"],
+        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    },
+    // -----------------------------------------------------------------------
+    // (Page: New Page).(Summary) = "This is a new page."
+    //           by (Brian) on (Jul 25, 2005)
+    { "Entry": {
+             "uuid": "d5e68553-fd6c-11d9-9654-000c414ce854",
+             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "00001003-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": "d5e68550-fd6c-11d9-9654-000c414ce854",
+            "value": "This is a new page."  }
+    },
+    // -----------------------------------------------------------------------
+    // (Section: New Section)
+    //           by (Brian) on (Jul 25, 2005)
+    { "Item": { "uuid": "d5e68554-fd6c-11d9-9654-000c414ce854" } },
+    // -----------------------------------------------------------------------
+    // (Section: New Section).(Name) = "New Section"
+    //           by (Brian) on (Jul 25, 2005)
+    { "Entry": {
+             "uuid": "d5e68555-fd6c-11d9-9654-000c414ce854",
+             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": "d5e68554-fd6c-11d9-9654-000c414ce854",
+            "value": "New Section"  }
+    },
+    // -----------------------------------------------------------------------
+    // (Section: New Section).(Category) = (Category: Section)
+    // (Category: Section).(Items in Category) = (Section: New Section)
+    //           by (Brian) on (Jul 25, 2005)
+    { "Entry": {
+             "uuid": "d5e68556-fd6c-11d9-9654-000c414ce854",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["d5e68554-fd6c-11d9-9654-000c414ce854", "00020100-ce7f-11d9-8cd5-0011113ae5d6"],
+        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    },
+    // -----------------------------------------------------------------------
+    // (Page: New Page).(Sections In Page) = (Section: New Section)
+    // (Section: New Section).(Page this section appears on) = (Page: New Page)
+    //           by (Brian) on (Jul 25, 2005)
+    { "Entry": {
+             "uuid": "d5e68557-fd6c-11d9-9654-000c414ce854",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["d5e68550-fd6c-11d9-9654-000c414ce854", "d5e68554-fd6c-11d9-9654-000c414ce854"],
+        "attribute": ["00030000-ce7f-11d9-8cd5-0011113ae5d6", "00030001-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    },
+    // -----------------------------------------------------------------------
+    // (Section: New Section).(Plugin View) = (Plugin View: Table)
+    //           by (Brian) on (Jul 25, 2005)
+    { "Entry": {
+             "uuid": "d5e68558-fd6c-11d9-9654-000c414ce854",
+             "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "00040101-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": "d5e68554-fd6c-11d9-9654-000c414ce854",
+            "value": "00040301-ce7f-11d9-8cd5-0011113ae5d6"  }
+    },
+    // -----------------------------------------------------------------------
+    // (Query Spec: New Query)
+    //           by (Brian) on (Jul 25, 2005)
+    { "Item": { "uuid": "d5e68559-fd6c-11d9-9654-000c414ce854" } },
+    // -----------------------------------------------------------------------
+    // (Query Spec: New Query).(Name) = "New Query"
+    //           by (Brian) on (Jul 25, 2005)
+    { "Entry": {
+             "uuid": "d5e6855a-fd6c-11d9-9654-000c414ce854",
+             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": "d5e68559-fd6c-11d9-9654-000c414ce854",
+            "value": "New Query"  }
+    },
+    // -----------------------------------------------------------------------
+    // (Query Spec: New Query).(Category) = (Category: Query Spec)
+    // (Category: Query Spec).(Items in Category) = (Query Spec: New Query)
+    //           by (Brian) on (Jul 25, 2005)
+    { "Entry": {
+             "uuid": "d5e8f650-fd6c-11d9-9654-000c414ce854",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["d5e68559-fd6c-11d9-9654-000c414ce854", "00001212-ce7f-11d9-8cd5-0011113ae5d6"],
+        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    },
+    // -----------------------------------------------------------------------
+    // (Section: New Section).(Query Spec) = (Query Spec: New Query)
+    // (Query Spec: New Query).(Section this query spec belongs to) = (Section: New Section)
+    //           by (Brian) on (Jul 25, 2005)
+    { "Entry": {
+             "uuid": "d5e8f651-fd6c-11d9-9654-000c414ce854",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["d5e68554-fd6c-11d9-9654-000c414ce854", "d5e68559-fd6c-11d9-9654-000c414ce854"],
+        "attribute": ["00001006-ce7f-11d9-8cd5-0011113ae5d6", "00040105-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    }  ]
+  },
+  // =======================================================================
+  { "Transaction": [
+    // -----------------------------------------------------------------------
+    // (Layout Data: Layout data for Table of New Section)
+    //           by (Brian) on (Jul 25, 2005)
+    { "Item": { "uuid": "d5f26c30-fd6c-11d9-9654-000c414ce854" } },
+    // -----------------------------------------------------------------------
+    // (Layout Data: Layout data for Table of New Section).(Name) = "Layout data for Table of New Section"
+    //           by (Brian) on (Jul 25, 2005)
+    { "Entry": {
+             "uuid": "d5f26c31-fd6c-11d9-9654-000c414ce854",
+             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": "d5f26c30-fd6c-11d9-9654-000c414ce854",
+            "value": "Layout data for Table of New Section"  }
+    },
+    // -----------------------------------------------------------------------
+    // (Layout Data: Layout data for Table of New Section).(Category) = (Category: Layout Data)
+    // (Category: Layout Data).(Items in Category) = (Layout Data: Layout data for Table of New Section)
+    //           by (Brian) on (Jul 25, 2005)
+    { "Entry": {
+             "uuid": "d5f26c32-fd6c-11d9-9654-000c414ce854",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["d5f26c30-fd6c-11d9-9654-000c414ce854", "00040202-ce7f-11d9-8cd5-0011113ae5d6"],
+        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    },
+    // -----------------------------------------------------------------------
+    // (Layout Data: Layout data for Table of New Section).(Applies To Plugin) = (Plugin View: Table)
+    //           by (Brian) on (Jul 25, 2005)
+    { "Entry": {
+             "uuid": "d5f26c33-fd6c-11d9-9654-000c414ce854",
+             "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "00040103-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": "d5f26c30-fd6c-11d9-9654-000c414ce854",
+            "value": "00040301-ce7f-11d9-8cd5-0011113ae5d6"  }
+    },
+    // -----------------------------------------------------------------------
+    // (Section: New Section).(Layout Data) = (Layout Data: Layout data for Table of New Section)
+    // (Layout Data: Layout data for Table of New Section).(Section this layout data belongs to) = (Section: New Section)
+    //           by (Brian) on (Jul 25, 2005)
+    { "Entry": {
+             "uuid": "d5f26c34-fd6c-11d9-9654-000c414ce854",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["d5e68554-fd6c-11d9-9654-000c414ce854", "d5f26c30-fd6c-11d9-9654-000c414ce854"],
+        "attribute": ["00040102-ce7f-11d9-8cd5-0011113ae5d6", "00040104-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    }  ]
+  },
+  // =======================================================================
+  { "Transaction": [
+    // -----------------------------------------------------------------------
+    // (Section: New Section)
+    //           by (Brian) on (Jul 25, 2005)
+    { "Item": { "uuid": "d8525530-fd6c-11d9-9654-000c414ce854" } },
+    // -----------------------------------------------------------------------
+    // (Section: New Section).(Name) = "New Section"
+    //           by (Brian) on (Jul 25, 2005)
+    { "Entry": {
+             "uuid": "d8525531-fd6c-11d9-9654-000c414ce854",
+             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": "d8525530-fd6c-11d9-9654-000c414ce854",
+            "value": "New Section"  }
+    },
+    // -----------------------------------------------------------------------
+    // (Section: New Section).(Category) = (Category: Section)
+    // (Category: Section).(Items in Category) = (Section: New Section)
+    //           by (Brian) on (Jul 25, 2005)
+    { "Entry": {
+             "uuid": "d8525532-fd6c-11d9-9654-000c414ce854",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["d8525530-fd6c-11d9-9654-000c414ce854", "00020100-ce7f-11d9-8cd5-0011113ae5d6"],
+        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    },
+    // -----------------------------------------------------------------------
+    // (Page: New Page).(Sections In Page) = (Section: New Section)
+    // (Section: New Section).(Page this section appears on) = (Page: New Page)
+    //           by (Brian) on (Jul 25, 2005)
+    { "Entry": {
+             "uuid": "d8525533-fd6c-11d9-9654-000c414ce854",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["d5e68550-fd6c-11d9-9654-000c414ce854", "d8525530-fd6c-11d9-9654-000c414ce854"],
+        "attribute": ["00030000-ce7f-11d9-8cd5-0011113ae5d6", "00030001-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    },
+    // -----------------------------------------------------------------------
+    // (Section: New Section).(Plugin View) = (Plugin View: Table)
+    //           by (Brian) on (Jul 25, 2005)
+    { "Entry": {
+             "uuid": "d8525534-fd6c-11d9-9654-000c414ce854",
+             "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "00040101-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": "d8525530-fd6c-11d9-9654-000c414ce854",
+            "value": "00040301-ce7f-11d9-8cd5-0011113ae5d6"  }
+    },
+    // -----------------------------------------------------------------------
+    // (Query Spec: New Query)
+    //           by (Brian) on (Jul 25, 2005)
+    { "Item": { "uuid": "d8525535-fd6c-11d9-9654-000c414ce854" } },
+    // -----------------------------------------------------------------------
+    // (Query Spec: New Query).(Name) = "New Query"
+    //           by (Brian) on (Jul 25, 2005)
+    { "Entry": {
+             "uuid": "d8525536-fd6c-11d9-9654-000c414ce854",
+             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": "d8525535-fd6c-11d9-9654-000c414ce854",
+            "value": "New Query"  }
+    },
+    // -----------------------------------------------------------------------
+    // (Query Spec: New Query).(Category) = (Category: Query Spec)
+    // (Category: Query Spec).(Items in Category) = (Query Spec: New Query)
+    //           by (Brian) on (Jul 25, 2005)
+    { "Entry": {
+             "uuid": "d8525537-fd6c-11d9-9654-000c414ce854",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["d8525535-fd6c-11d9-9654-000c414ce854", "00001212-ce7f-11d9-8cd5-0011113ae5d6"],
+        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    },
+    // -----------------------------------------------------------------------
+    // (Section: New Section).(Query Spec) = (Query Spec: New Query)
+    // (Query Spec: New Query).(Section this query spec belongs to) = (Section: New Section)
+    //           by (Brian) on (Jul 25, 2005)
+    { "Entry": {
+             "uuid": "d8525538-fd6c-11d9-9654-000c414ce854",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["d8525530-fd6c-11d9-9654-000c414ce854", "d8525535-fd6c-11d9-9654-000c414ce854"],
+        "attribute": ["00001006-ce7f-11d9-8cd5-0011113ae5d6", "00040105-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    }  ]
+  },
+  // =======================================================================
+  { "Transaction": [
+    // -----------------------------------------------------------------------
+    // (Layout Data: Layout data for Table of New Section)
+    //           by (Brian) on (Jul 25, 2005)
+    { "Item": { "uuid": "d8598120-fd6c-11d9-9654-000c414ce854" } },
+    // -----------------------------------------------------------------------
+    // (Layout Data: Layout data for Table of New Section).(Name) = "Layout data for Table of New Section"
+    //           by (Brian) on (Jul 25, 2005)
+    { "Entry": {
+             "uuid": "d8598121-fd6c-11d9-9654-000c414ce854",
+             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": "d8598120-fd6c-11d9-9654-000c414ce854",
+            "value": "Layout data for Table of New Section"  }
+    },
+    // -----------------------------------------------------------------------
+    // (Layout Data: Layout data for Table of New Section).(Category) = (Category: Layout Data)
+    // (Category: Layout Data).(Items in Category) = (Layout Data: Layout data for Table of New Section)
+    //           by (Brian) on (Jul 25, 2005)
+    { "Entry": {
+             "uuid": "d8598122-fd6c-11d9-9654-000c414ce854",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["d8598120-fd6c-11d9-9654-000c414ce854", "00040202-ce7f-11d9-8cd5-0011113ae5d6"],
+        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    },
+    // -----------------------------------------------------------------------
+    // (Layout Data: Layout data for Table of New Section).(Applies To Plugin) = (Plugin View: Table)
+    //           by (Brian) on (Jul 25, 2005)
+    { "Entry": {
+             "uuid": "d8598123-fd6c-11d9-9654-000c414ce854",
+             "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "00040103-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": "d8598120-fd6c-11d9-9654-000c414ce854",
+            "value": "00040301-ce7f-11d9-8cd5-0011113ae5d6"  }
+    },
+    // -----------------------------------------------------------------------
+    // (Section: New Section).(Layout Data) = (Layout Data: Layout data for Table of New Section)
+    // (Layout Data: Layout data for Table of New Section).(Section this layout data belongs to) = (Section: New Section)
+    //           by (Brian) on (Jul 25, 2005)
+    { "Entry": {
+             "uuid": "d8598124-fd6c-11d9-9654-000c414ce854",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["d8525530-fd6c-11d9-9654-000c414ce854", "d8598120-fd6c-11d9-9654-000c414ce854"],
+        "attribute": ["00040102-ce7f-11d9-8cd5-0011113ae5d6", "00040104-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    }  ]
+  },
+  // =======================================================================
+  { "Transaction": [
+    // -----------------------------------------------------------------------
+    // (Category: Book)
+    //           by (Brian) on (Jul 25, 2005)
+    { "Item": { "uuid": "db036b70-fd6c-11d9-9654-000c414ce854" } },
+    // -----------------------------------------------------------------------
+    // (Category: Book).(Name) = "Book"
+    //           by (Brian) on (Jul 25, 2005)
+    { "Entry": {
+             "uuid": "db036b71-fd6c-11d9-9654-000c414ce854",
+             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": "db036b70-fd6c-11d9-9654-000c414ce854",
+            "value": "Book"  }
+    },
+    // -----------------------------------------------------------------------
+    // (Category: Book).(Category) = (Category: Category)
+    // (Category: Category).(Items in Category) = (Category: Book)
+    //           by (Brian) on (Jul 25, 2005)
+    { "Entry": {
+             "uuid": "db036b72-fd6c-11d9-9654-000c414ce854",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["db036b70-fd6c-11d9-9654-000c414ce854", "00001211-ce7f-11d9-8cd5-0011113ae5d6"],
+        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    },
+    // -----------------------------------------------------------------------
+    // (Query Spec: New Query).(Matching Value) = (Category: Book)
+    //           by (Brian) on (Jul 25, 2005)
+    { "Entry": {
+             "uuid": "db036b73-fd6c-11d9-9654-000c414ce854",
+             "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "00001007-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": "d5e68559-fd6c-11d9-9654-000c414ce854",
+            "value": "db036b70-fd6c-11d9-9654-000c414ce854"  }
+    }  ]
+  },
+  // =======================================================================
+  { "Transaction": [
+    // -----------------------------------------------------------------------
+    // (Category: Movie)
+    //           by (Brian) on (Jul 25, 2005)
+    { "Item": { "uuid": "dce9deb0-fd6c-11d9-9654-000c414ce854" } },
+    // -----------------------------------------------------------------------
+    // (Category: Movie).(Name) = "Movie"
+    //           by (Brian) on (Jul 25, 2005)
+    { "Entry": {
+             "uuid": "dce9deb1-fd6c-11d9-9654-000c414ce854",
+             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": "dce9deb0-fd6c-11d9-9654-000c414ce854",
+            "value": "Movie"  }
+    },
+    // -----------------------------------------------------------------------
+    // (Category: Movie).(Category) = (Category: Category)
+    // (Category: Category).(Items in Category) = (Category: Movie)
+    //           by (Brian) on (Jul 25, 2005)
+    { "Entry": {
+             "uuid": "dce9deb2-fd6c-11d9-9654-000c414ce854",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["dce9deb0-fd6c-11d9-9654-000c414ce854", "00001211-ce7f-11d9-8cd5-0011113ae5d6"],
+        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    },
+    // -----------------------------------------------------------------------
+    // (Query Spec: New Query).(Matching Value) = (Category: Movie)
+    //           by (Brian) on (Jul 25, 2005)
+    { "Entry": {
+             "uuid": "dce9deb3-fd6c-11d9-9654-000c414ce854",
+             "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "00001007-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": "d8525535-fd6c-11d9-9654-000c414ce854",
+            "value": "dce9deb0-fd6c-11d9-9654-000c414ce854"  }
+    }  ]
+  },
+  // =======================================================================
+  { "Transaction": [
+    // -----------------------------------------------------------------------
+    // (Book: Foo Book)
+    //           by (Brian) on (Jul 25, 2005)
+    { "Item": { "uuid": "db0f5250-fd6c-11d9-9654-000c414ce854" } },
+    // -----------------------------------------------------------------------
+    // (Book: Foo Book).(Name) = "Foo Book"
+    //           by (Brian) on (Jul 25, 2005)
+    { "Entry": {
+             "uuid": "dfee4510-fd6c-11d9-9654-000c414ce854",
+             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": "db0f5250-fd6c-11d9-9654-000c414ce854",
+            "value": "Foo Book"  }
+    },
+    // -----------------------------------------------------------------------
+    // (Book: Foo Book).(Category) = (Category: Book)
+    // (Category: Book).(Items in Category) = (Book: Foo Book)
+    //           by (Brian) on (Jul 25, 2005)
+    { "Entry": {
+             "uuid": "dfee4511-fd6c-11d9-9654-000c414ce854",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["db0f5250-fd6c-11d9-9654-000c414ce854", "db036b70-fd6c-11d9-9654-000c414ce854"],
+        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    }  ]
+  },
+  // =======================================================================
+  { "Transaction": [
+    // -----------------------------------------------------------------------
+    // (Book: Bar Book)
+    //           by (Brian) on (Jul 25, 2005)
+    { "Item": { "uuid": "dff0b610-fd6c-11d9-9654-000c414ce854" } },
+    // -----------------------------------------------------------------------
+    // (Book: Bar Book).(Name) = "Bar Book"
+    //           by (Brian) on (Jul 25, 2005)
+    { "Entry": {
+             "uuid": "e18d2800-fd6c-11d9-9654-000c414ce854",
+             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": "dff0b610-fd6c-11d9-9654-000c414ce854",
+            "value": "Bar Book"  }
+    },
+    // -----------------------------------------------------------------------
+    // (Book: Bar Book).(Category) = (Category: Book)
+    // (Category: Book).(Items in Category) = (Book: Bar Book)
+    //           by (Brian) on (Jul 25, 2005)
+    { "Entry": {
+             "uuid": "e18d2801-fd6c-11d9-9654-000c414ce854",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["dff0b610-fd6c-11d9-9654-000c414ce854", "db036b70-fd6c-11d9-9654-000c414ce854"],
+        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    }  ]
+  },
+  // =======================================================================
+  { "Transaction": [
+    // -----------------------------------------------------------------------
+    // (Movie: Iggy Movie)
+    //           by (Brian) on (Jul 25, 2005)
+    { "Item": { "uuid": "dcf5c590-fd6c-11d9-9654-000c414ce854" } },
+    // -----------------------------------------------------------------------
+    // (Movie: Iggy Movie).(Name) = "Iggy Movie"
+    //           by (Brian) on (Jul 25, 2005)
+    { "Entry": {
+             "uuid": "e40023d0-fd6c-11d9-9654-000c414ce854",
+             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": "dcf5c590-fd6c-11d9-9654-000c414ce854",
+            "value": "Iggy Movie"  }
+    },
+    // -----------------------------------------------------------------------
+    // (Movie: Iggy Movie).(Category) = (Category: Movie)
+    // (Category: Movie).(Items in Category) = (Movie: Iggy Movie)
+    //           by (Brian) on (Jul 25, 2005)
+    { "Entry": {
+             "uuid": "e40023d1-fd6c-11d9-9654-000c414ce854",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["dcf5c590-fd6c-11d9-9654-000c414ce854", "dce9deb0-fd6c-11d9-9654-000c414ce854"],
+        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    }  ]
+  },
+  // =======================================================================
+  { "Transaction": [
+    // -----------------------------------------------------------------------
+    // (Movie: Pop Movie)
+    //           by (Brian) on (Jul 25, 2005)
+    { "Item": { "uuid": "e40294d0-fd6c-11d9-9654-000c414ce854" } },
+    // -----------------------------------------------------------------------
+    // (Movie: Pop Movie).(Name) = "Pop Movie"
+    //           by (Brian) on (Jul 25, 2005)
+    { "Entry": {
+             "uuid": "e5be0070-fd6c-11d9-9654-000c414ce854",
+             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": "e40294d0-fd6c-11d9-9654-000c414ce854",
+            "value": "Pop Movie"  }
+    },
+    // -----------------------------------------------------------------------
+    // (Movie: Pop Movie).(Category) = (Category: Movie)
+    // (Category: Movie).(Items in Category) = (Movie: Pop Movie)
+    //           by (Brian) on (Jul 25, 2005)
+    { "Entry": {
+             "uuid": "e5be0071-fd6c-11d9-9654-000c414ce854",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["e40294d0-fd6c-11d9-9654-000c414ce854", "dce9deb0-fd6c-11d9-9654-000c414ce854"],
+        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    }  ]
+  },
+  // =======================================================================
+  { "Transaction": [
+    // -----------------------------------------------------------------------
+    // (Layout Data: Layout data for Outline of New Section)
+    //           by (Brian) on (Jul 25, 2005)
+    { "Item": { "uuid": "e77bdd10-fd6c-11d9-9654-000c414ce854" } },
+    // -----------------------------------------------------------------------
+    // (Layout Data: Layout data for Outline of New Section).(Name) = "Layout data for Outline of New Section"
+    //           by (Brian) on (Jul 25, 2005)
+    { "Entry": {
+             "uuid": "e77bdd11-fd6c-11d9-9654-000c414ce854",
+             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": "e77bdd10-fd6c-11d9-9654-000c414ce854",
+            "value": "Layout data for Outline of New Section"  }
+    },
+    // -----------------------------------------------------------------------
+    // (Layout Data: Layout data for Outline of New Section).(Category) = (Category: Layout Data)
+    // (Category: Layout Data).(Items in Category) = (Layout Data: Layout data for Outline of New Section)
+    //           by (Brian) on (Jul 25, 2005)
+    { "Entry": {
+             "uuid": "e77bdd12-fd6c-11d9-9654-000c414ce854",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["e77bdd10-fd6c-11d9-9654-000c414ce854", "00040202-ce7f-11d9-8cd5-0011113ae5d6"],
+        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    },
+    // -----------------------------------------------------------------------
+    // (Layout Data: Layout data for Outline of New Section).(Applies To Plugin) = (Plugin View: Outline)
+    //           by (Brian) on (Jul 25, 2005)
+    { "Entry": {
+             "uuid": "e77bdd13-fd6c-11d9-9654-000c414ce854",
+             "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "00040103-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": "e77bdd10-fd6c-11d9-9654-000c414ce854",
+            "value": "00040302-ce7f-11d9-8cd5-0011113ae5d6"  }
+    },
+    // -----------------------------------------------------------------------
+    // (Section: New Section).(Layout Data) = (Layout Data: Layout data for Outline of New Section)
+    // (Layout Data: Layout data for Outline of New Section).(Section this layout data belongs to) = (Section: New Section)
+    //           by (Brian) on (Jul 25, 2005)
+    { "Entry": {
+             "uuid": "e77bdd14-fd6c-11d9-9654-000c414ce854",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["d5e68554-fd6c-11d9-9654-000c414ce854", "e77bdd10-fd6c-11d9-9654-000c414ce854"],
+        "attribute": ["00040102-ce7f-11d9-8cd5-0011113ae5d6", "00040104-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    }  ]
+  },
+  // -----------------------------------------------------------------------
+  // (Section: New Section).(Plugin View) = (Plugin View: Outline)
+  //           by (Brian) on (Jul 25, 2005)
+  { "Entry": {
+           "uuid": "e7809800-fd6c-11d9-9654-000c414ce854",
+  "previousEntry": "d5e68558-fd6c-11d9-9654-000c414ce854",
+           "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "00040101-ce7f-11d9-8cd5-0011113ae5d6",
+           "item": "d5e68554-fd6c-11d9-9654-000c414ce854",
+          "value": "00040302-ce7f-11d9-8cd5-0011113ae5d6"  }
+  },
+  // -----------------------------------------------------------------------
+  // (Section: New Section).(Plugin View) = (Plugin View: Table)
+  //           by (Brian) on (Jul 25, 2005)
+  { "Entry": {
+           "uuid": "06e0f910-fd6d-11d9-9654-000c414ce854",
+  "previousEntry": "e7809800-fd6c-11d9-9654-000c414ce854",
+           "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "00040101-ce7f-11d9-8cd5-0011113ae5d6",
+           "item": "d5e68554-fd6c-11d9-9654-000c414ce854",
+          "value": "00040301-ce7f-11d9-8cd5-0011113ae5d6"  }
+  },
+  // =======================================================================
+  { "Transaction": [
+    // -----------------------------------------------------------------------
+    // (Layout Data: Layout data for Outline of New Section)
+    //           by (Brian) on (Jul 25, 2005)
+    { "Item": { "uuid": "150b3960-fd6d-11d9-9654-000c414ce854" } },
+    // -----------------------------------------------------------------------
+    // (Layout Data: Layout data for Outline of New Section).(Name) = "Layout data for Outline of New Section"
+    //           by (Brian) on (Jul 25, 2005)
+    { "Entry": {
+             "uuid": "150b3961-fd6d-11d9-9654-000c414ce854",
+             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": "150b3960-fd6d-11d9-9654-000c414ce854",
+            "value": "Layout data for Outline of New Section"  }
+    },
+    // -----------------------------------------------------------------------
+    // (Layout Data: Layout data for Outline of New Section).(Category) = (Category: Layout Data)
+    // (Category: Layout Data).(Items in Category) = (Layout Data: Layout data for Outline of New Section)
+    //           by (Brian) on (Jul 25, 2005)
+    { "Entry": {
+             "uuid": "150b3962-fd6d-11d9-9654-000c414ce854",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["150b3960-fd6d-11d9-9654-000c414ce854", "00040202-ce7f-11d9-8cd5-0011113ae5d6"],
+        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    },
+    // -----------------------------------------------------------------------
+    // (Layout Data: Layout data for Outline of New Section).(Applies To Plugin) = (Plugin View: Outline)
+    //           by (Brian) on (Jul 25, 2005)
+    { "Entry": {
+             "uuid": "150b3963-fd6d-11d9-9654-000c414ce854",
+             "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "00040103-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": "150b3960-fd6d-11d9-9654-000c414ce854",
+            "value": "00040302-ce7f-11d9-8cd5-0011113ae5d6"  }
+    },
+    // -----------------------------------------------------------------------
+    // (Section: New Section).(Layout Data) = (Layout Data: Layout data for Outline of New Section)
+    // (Layout Data: Layout data for Outline of New Section).(Section this layout data belongs to) = (Section: New Section)
+    //           by (Brian) on (Jul 25, 2005)
+    { "Entry": {
+             "uuid": "150b3964-fd6d-11d9-9654-000c414ce854",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["d8525530-fd6c-11d9-9654-000c414ce854", "150b3960-fd6d-11d9-9654-000c414ce854"],
+        "attribute": ["00040102-ce7f-11d9-8cd5-0011113ae5d6", "00040104-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    }  ]
+  },
+  // -----------------------------------------------------------------------
+  // (Section: New Section).(Plugin View) = (Plugin View: Outline)
+  //           by (Brian) on (Jul 25, 2005)
+  { "Entry": {
+           "uuid": "15101b60-fd6d-11d9-9654-000c414ce854",
+  "previousEntry": "d8525534-fd6c-11d9-9654-000c414ce854",
+           "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "00040101-ce7f-11d9-8cd5-0011113ae5d6",
+           "item": "d8525530-fd6c-11d9-9654-000c414ce854",
+          "value": "00040302-ce7f-11d9-8cd5-0011113ae5d6"  }
+  },
+  // -----------------------------------------------------------------------
+  // (Query Spec: New Query).(Matching Value) = (Category: Movie)
+  //           by (Brian) on (Jul 25, 2005)
+  { "Entry": {
+           "uuid": "07562b40-fd7c-11d9-b837-000c414ce854",
+  "previousEntry": "db036b73-fd6c-11d9-9654-000c414ce854",
+           "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "00001007-ce7f-11d9-8cd5-0011113ae5d6",
+           "item": "d5e68559-fd6c-11d9-9654-000c414ce854",
+          "value": "dce9deb0-fd6c-11d9-9654-000c414ce854"  }
+  },
+  // -----------------------------------------------------------------------
+  // (Query Spec: New Query).(Matching Value) = (Category: Attribute)
+  //           by (Brian) on (Jul 25, 2005)
+  { "Entry": {
+           "uuid": "0aff0f00-fd7c-11d9-b837-000c414ce854",
+  "previousEntry": "dce9deb3-fd6c-11d9-9654-000c414ce854",
+           "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "00001007-ce7f-11d9-8cd5-0011113ae5d6",
+           "item": "d8525535-fd6c-11d9-9654-000c414ce854",
+          "value": "00001210-ce7f-11d9-8cd5-0011113ae5d6"  }
+  },
+  // -----------------------------------------------------------------------
+  // (Section: New Section).(Plugin View) = (Plugin View: Table)
+  //           by (Brian) on (Jul 25, 2005)
+  { "Entry": {
+           "uuid": "0e0d1250-fd7c-11d9-b837-000c414ce854",
+  "previousEntry": "15101b60-fd6d-11d9-9654-000c414ce854",
+           "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "00040101-ce7f-11d9-8cd5-0011113ae5d6",
+           "item": "d8525530-fd6c-11d9-9654-000c414ce854",
+          "value": "00040301-ce7f-11d9-8cd5-0011113ae5d6"  }
+  },
+  // =======================================================================
+  { "Transaction": [
+    // -----------------------------------------------------------------------
+    // (Attribute: Year)
+    //           by (Brian) on (Jul 25, 2005)
+    { "Item": { "uuid": "0e6ee160-fd7c-11d9-b837-000c414ce854" } },
+    // -----------------------------------------------------------------------
+    // (Attribute: Year).(Name) = "Year"
+    //           by (Brian) on (Jul 25, 2005)
+    { "Entry": {
+             "uuid": "14d4c240-fd7c-11d9-b837-000c414ce854",
+             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": "0e6ee160-fd7c-11d9-b837-000c414ce854",
+            "value": "Year"  }
+    },
+    // -----------------------------------------------------------------------
+    // (Attribute: Year).(Category) = (Category: Attribute)
+    // (Category: Attribute).(Items in Category) = (Attribute: Year)
+    //           by (Brian) on (Jul 25, 2005)
+    { "Entry": {
+             "uuid": "14d4c241-fd7c-11d9-b837-000c414ce854",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["0e6ee160-fd7c-11d9-b837-000c414ce854", "00001210-ce7f-11d9-8cd5-0011113ae5d6"],
+        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    }  ]
+  },
+  // -----------------------------------------------------------------------
+  // (Attribute: Year).(Expected Type) = (Type: Date)
+  //           by (Brian) on (Jul 25, 2005)
+  { "Entry": {
+           "uuid": "16c71c60-fd7c-11d9-b837-000c414ce854",
+           "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "0000100a-ce7f-11d9-8cd5-0011113ae5d6",
+           "item": "0e6ee160-fd7c-11d9-b837-000c414ce854",
+          "value": "00001022-ce7f-11d9-8cd5-0011113ae5d6"  }
+  },
+  // =======================================================================
+  { "Transaction": [
+    // -----------------------------------------------------------------------
+    // (Attribute: Producer)
+    //           by (Brian) on (Jul 25, 2005)
+    { "Item": { "uuid": "14d73340-fd7c-11d9-b837-000c414ce854" } },
+    // -----------------------------------------------------------------------
+    // (Attribute: Producer).(Name) = "Producer"
+    //           by (Brian) on (Jul 25, 2005)
+    { "Entry": {
+             "uuid": "1a42d5a0-fd7c-11d9-b837-000c414ce854",
+             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": "14d73340-fd7c-11d9-b837-000c414ce854",
+            "value": "Producer"  }
+    },
+    // -----------------------------------------------------------------------
+    // (Attribute: Producer).(Category) = (Category: Attribute)
+    // (Category: Attribute).(Items in Category) = (Attribute: Producer)
+    //           by (Brian) on (Jul 25, 2005)
+    { "Entry": {
+             "uuid": "1a42d5a1-fd7c-11d9-b837-000c414ce854",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["14d73340-fd7c-11d9-b837-000c414ce854", "00001210-ce7f-11d9-8cd5-0011113ae5d6"],
+        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    }  ]
+  },
+  // -----------------------------------------------------------------------
+  // (Attribute: Producer).(Expected Type) = (Type: Text)
+  //           by (Brian) on (Jul 25, 2005)
+  { "Entry": {
+           "uuid": "1c921cd0-fd7c-11d9-b837-000c414ce854",
+           "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "0000100a-ce7f-11d9-8cd5-0011113ae5d6",
+           "item": "14d73340-fd7c-11d9-b837-000c414ce854",
+          "value": "00001020-ce7f-11d9-8cd5-0011113ae5d6"  }
+  },
+  // -----------------------------------------------------------------------
+  // (Layout Data: Layout data for Table of New Section).(Table Columns) = (Attribute: Name)
+  //           by (Brian) on (Jul 25, 2005)
+  { "Entry": {
+           "uuid": "2a5f7010-fd7c-11d9-b837-000c414ce854",
+           "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "0004010a-ce7f-11d9-8cd5-0011113ae5d6",
+           "item": "d5f26c30-fd6c-11d9-9654-000c414ce854",
+          "value": "00001001-ce7f-11d9-8cd5-0011113ae5d6"  }
+  },
+  // -----------------------------------------------------------------------
+  // (Layout Data: Layout data for Table of New Section).(Table Columns) = (Attribute: Year)
+  //           by (Brian) on (Jul 25, 2005)
+  { "Entry": {
+           "uuid": "2a61ba00-fd7c-11d9-b837-000c414ce854",
+           "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "0004010a-ce7f-11d9-8cd5-0011113ae5d6",
+           "item": "d5f26c30-fd6c-11d9-9654-000c414ce854",
+          "value": "0e6ee160-fd7c-11d9-b837-000c414ce854"  }
+  },
+  // -----------------------------------------------------------------------
+  // (Layout Data: Layout data for Table of New Section).(Table Columns) = (Attribute: Producer)
+  //           by (Brian) on (Jul 25, 2005)
+  { "Entry": {
+           "uuid": "2c96e980-fd7c-11d9-b837-000c414ce854",
+           "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "0004010a-ce7f-11d9-8cd5-0011113ae5d6",
+           "item": "d5f26c30-fd6c-11d9-9654-000c414ce854",
+          "value": "14d73340-fd7c-11d9-b837-000c414ce854"  }
+  },
+  // -----------------------------------------------------------------------
+  // (Movie: Iggy Movie).(Year) = "1904"
+  //           by (Brian) on (Jul 25, 2005)
+  { "Entry": {
+           "uuid": "319e4bd0-fd7c-11d9-b837-000c414ce854",
+           "type": "00001022-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "0e6ee160-fd7c-11d9-b837-000c414ce854",
+           "item": "dcf5c590-fd6c-11d9-9654-000c414ce854",
+          "value": "1904"  }
+  },
+  // -----------------------------------------------------------------------
+  // (Movie: Iggy Movie).(Producer) = "Iggy"
+  //           by (Brian) on (Jul 25, 2005)
+  { "Entry": {
+           "uuid": "32e9b790-fd7c-11d9-b837-000c414ce854",
+           "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "14d73340-fd7c-11d9-b837-000c414ce854",
+           "item": "dcf5c590-fd6c-11d9-9654-000c414ce854",
+          "value": "Iggy"  }
+  },
+  // -----------------------------------------------------------------------
+  // (Page: Movies).(Name) = "Movies"
+  //           by (Brian) on (Jul 26, 2005)
+  { "Entry": {
+           "uuid": "0c493970-fe04-11d9-8800-000c414ce854",
+  "previousEntry": "d5e68551-fd6c-11d9-9654-000c414ce854",
+           "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
+           "item": "d5e68550-fd6c-11d9-9654-000c414ce854",
+          "value": "Movies"  }
+  },
+  // =======================================================================
+  { "Transaction": [
+    // -----------------------------------------------------------------------
+    // (Page: New Page)
+    //           by (Brian) on (Jul 26, 2005)
+    { "Item": { "uuid": "0fb69ad0-fe04-11d9-8800-000c414ce854" } },
+    // -----------------------------------------------------------------------
+    // (Page: New Page).(Name) = "New Page"
+    //           by (Brian) on (Jul 26, 2005)
+    { "Entry": {
+             "uuid": "0fb69ad1-fe04-11d9-8800-000c414ce854",
+             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": "0fb69ad0-fe04-11d9-8800-000c414ce854",
+            "value": "New Page"  }
+    },
+    // -----------------------------------------------------------------------
+    // (Page: New Page).(Category) = (Category: Page)
+    // (Category: Page).(Items in Category) = (Page: New Page)
+    //           by (Brian) on (Jul 26, 2005)
+    { "Entry": {
+             "uuid": "0fb69ad2-fe04-11d9-8800-000c414ce854",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["0fb69ad0-fe04-11d9-8800-000c414ce854", "00020000-ce7f-11d9-8cd5-0011113ae5d6"],
+        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    },
+    // -----------------------------------------------------------------------
+    // (Page: New Page).(Summary) = "This is a new page."
+    //           by (Brian) on (Jul 26, 2005)
+    { "Entry": {
+             "uuid": "0fb69ad3-fe04-11d9-8800-000c414ce854",
+             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "00001003-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": "0fb69ad0-fe04-11d9-8800-000c414ce854",
+            "value": "This is a new page."  }
+    },
+    // -----------------------------------------------------------------------
+    // (Section: New Section)
+    //           by (Brian) on (Jul 26, 2005)
+    { "Item": { "uuid": "0fb69ad4-fe04-11d9-8800-000c414ce854" } },
+    // -----------------------------------------------------------------------
+    // (Section: New Section).(Name) = "New Section"
+    //           by (Brian) on (Jul 26, 2005)
+    { "Entry": {
+             "uuid": "0fb69ad5-fe04-11d9-8800-000c414ce854",
+             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": "0fb69ad4-fe04-11d9-8800-000c414ce854",
+            "value": "New Section"  }
+    },
+    // -----------------------------------------------------------------------
+    // (Section: New Section).(Category) = (Category: Section)
+    // (Category: Section).(Items in Category) = (Section: New Section)
+    //           by (Brian) on (Jul 26, 2005)
+    { "Entry": {
+             "uuid": "0fb69ad6-fe04-11d9-8800-000c414ce854",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["0fb69ad4-fe04-11d9-8800-000c414ce854", "00020100-ce7f-11d9-8cd5-0011113ae5d6"],
+        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    },
+    // -----------------------------------------------------------------------
+    // (Page: New Page).(Sections In Page) = (Section: New Section)
+    // (Section: New Section).(Page this section appears on) = (Page: New Page)
+    //           by (Brian) on (Jul 26, 2005)
+    { "Entry": {
+             "uuid": "0fb90bd0-fe04-11d9-8800-000c414ce854",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["0fb69ad0-fe04-11d9-8800-000c414ce854", "0fb69ad4-fe04-11d9-8800-000c414ce854"],
+        "attribute": ["00030000-ce7f-11d9-8cd5-0011113ae5d6", "00030001-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    },
+    // -----------------------------------------------------------------------
+    // (Section: New Section).(Plugin View) = (Plugin View: Table)
+    //           by (Brian) on (Jul 26, 2005)
+    { "Entry": {
+             "uuid": "0fb90bd1-fe04-11d9-8800-000c414ce854",
+             "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "00040101-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": "0fb69ad4-fe04-11d9-8800-000c414ce854",
+            "value": "00040301-ce7f-11d9-8cd5-0011113ae5d6"  }
+    },
+    // -----------------------------------------------------------------------
+    // (Query Spec: New Query)
+    //           by (Brian) on (Jul 26, 2005)
+    { "Item": { "uuid": "0fb90bd2-fe04-11d9-8800-000c414ce854" } },
+    // -----------------------------------------------------------------------
+    // (Query Spec: New Query).(Name) = "New Query"
+    //           by (Brian) on (Jul 26, 2005)
+    { "Entry": {
+             "uuid": "0fb90bd3-fe04-11d9-8800-000c414ce854",
+             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": "0fb90bd2-fe04-11d9-8800-000c414ce854",
+            "value": "New Query"  }
+    },
+    // -----------------------------------------------------------------------
+    // (Query Spec: New Query).(Category) = (Category: Query Spec)
+    // (Category: Query Spec).(Items in Category) = (Query Spec: New Query)
+    //           by (Brian) on (Jul 26, 2005)
+    { "Entry": {
+             "uuid": "0fb90bd4-fe04-11d9-8800-000c414ce854",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["0fb90bd2-fe04-11d9-8800-000c414ce854", "00001212-ce7f-11d9-8cd5-0011113ae5d6"],
+        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    },
+    // -----------------------------------------------------------------------
+    // (Section: New Section).(Query Spec) = (Query Spec: New Query)
+    // (Query Spec: New Query).(Section this query spec belongs to) = (Section: New Section)
+    //           by (Brian) on (Jul 26, 2005)
+    { "Entry": {
+             "uuid": "0fb90bd5-fe04-11d9-8800-000c414ce854",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["0fb69ad4-fe04-11d9-8800-000c414ce854", "0fb90bd2-fe04-11d9-8800-000c414ce854"],
+        "attribute": ["00001006-ce7f-11d9-8cd5-0011113ae5d6", "00040105-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    }  ]
+  },
+  // =======================================================================
+  { "Transaction": [
+    // -----------------------------------------------------------------------
+    // (Layout Data: Layout data for Table of New Section)
+    //           by (Brian) on (Jul 26, 2005)
+    { "Item": { "uuid": "0fc73ca0-fe04-11d9-8800-000c414ce854" } },
+    // -----------------------------------------------------------------------
+    // (Layout Data: Layout data for Table of New Section).(Name) = "Layout data for Table of New Section"
+    //           by (Brian) on (Jul 26, 2005)
+    { "Entry": {
+             "uuid": "0fc73ca1-fe04-11d9-8800-000c414ce854",
+             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": "0fc73ca0-fe04-11d9-8800-000c414ce854",
+            "value": "Layout data for Table of New Section"  }
+    },
+    // -----------------------------------------------------------------------
+    // (Layout Data: Layout data for Table of New Section).(Category) = (Category: Layout Data)
+    // (Category: Layout Data).(Items in Category) = (Layout Data: Layout data for Table of New Section)
+    //           by (Brian) on (Jul 26, 2005)
+    { "Entry": {
+             "uuid": "0fc73ca2-fe04-11d9-8800-000c414ce854",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["0fc73ca0-fe04-11d9-8800-000c414ce854", "00040202-ce7f-11d9-8cd5-0011113ae5d6"],
+        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    },
+    // -----------------------------------------------------------------------
+    // (Layout Data: Layout data for Table of New Section).(Applies To Plugin) = (Plugin View: Table)
+    //           by (Brian) on (Jul 26, 2005)
+    { "Entry": {
+             "uuid": "0fc73ca3-fe04-11d9-8800-000c414ce854",
+             "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "00040103-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": "0fc73ca0-fe04-11d9-8800-000c414ce854",
+            "value": "00040301-ce7f-11d9-8cd5-0011113ae5d6"  }
+    },
+    // -----------------------------------------------------------------------
+    // (Section: New Section).(Layout Data) = (Layout Data: Layout data for Table of New Section)
+    // (Layout Data: Layout data for Table of New Section).(Section this layout data belongs to) = (Section: New Section)
+    //           by (Brian) on (Jul 26, 2005)
+    { "Entry": {
+             "uuid": "0fc73ca4-fe04-11d9-8800-000c414ce854",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["0fb69ad4-fe04-11d9-8800-000c414ce854", "0fc73ca0-fe04-11d9-8800-000c414ce854"],
+        "attribute": ["00040102-ce7f-11d9-8cd5-0011113ae5d6", "00040104-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    }  ]
+  },
+  // -----------------------------------------------------------------------
+  // (Page: Attributes).(Name) = "Attributes"
+  //           by (Brian) on (Jul 26, 2005)
+  { "Entry": {
+           "uuid": "15f8c710-fe04-11d9-8800-000c414ce854",
+  "previousEntry": "0fb69ad1-fe04-11d9-8800-000c414ce854",
+           "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
+           "item": "0fb69ad0-fe04-11d9-8800-000c414ce854",
+          "value": "Attributes"  }
+  },
+  // -----------------------------------------------------------------------
+  // (Query Spec: New Query).(Matching Value) = (Category: Attribute)
+  //           by (Brian) on (Jul 26, 2005)
+  { "Entry": {
+           "uuid": "18435350-fe04-11d9-8800-000c414ce854",
+           "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "00001007-ce7f-11d9-8cd5-0011113ae5d6",
+           "item": "0fb90bd2-fe04-11d9-8800-000c414ce854",
+          "value": "00001210-ce7f-11d9-8cd5-0011113ae5d6"  }
+  },
+  // =======================================================================
+  { "Transaction": [
+    // -----------------------------------------------------------------------
+    // (Category: Producer)
+    //           by (Brian) on (Jul 26, 2005)
+    { "Item": { "uuid": "258185f0-fe04-11d9-8800-000c414ce854" } },
+    // -----------------------------------------------------------------------
+    // (Category: Producer).(Name) = "Producer"
+    //           by (Brian) on (Jul 26, 2005)
+    { "Entry": {
+             "uuid": "258185f1-fe04-11d9-8800-000c414ce854",
+             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": "258185f0-fe04-11d9-8800-000c414ce854",
+            "value": "Producer"  }
+    },
+    // -----------------------------------------------------------------------
+    // (Category: Producer).(Category) = (Category: Category)
+    // (Category: Category).(Items in Category) = (Category: Producer)
+    //           by (Brian) on (Jul 26, 2005)
+    { "Entry": {
+             "uuid": "258185f2-fe04-11d9-8800-000c414ce854",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["258185f0-fe04-11d9-8800-000c414ce854", "00001211-ce7f-11d9-8cd5-0011113ae5d6"],
+        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    },
+    // -----------------------------------------------------------------------
+    // (Query Spec: New Query).(Matching Value) = (Category: Producer)
+    //           by (Brian) on (Jul 26, 2005)
+    { "Entry": {
+             "uuid": "258185f3-fe04-11d9-8800-000c414ce854",
+    "previousEntry": "0aff0f00-fd7c-11d9-b837-000c414ce854",
+             "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "00001007-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": "d8525535-fd6c-11d9-9654-000c414ce854",
+            "value": "258185f0-fe04-11d9-8800-000c414ce854"  }
+    }  ]
+  },
+  // -----------------------------------------------------------------------
+  // (Section: Producers).(Name) = "Producers"
+  //           by (Brian) on (Jul 26, 2005)
+  { "Entry": {
+           "uuid": "2dbac740-fe04-11d9-8800-000c414ce854",
+  "previousEntry": "d8525531-fd6c-11d9-9654-000c414ce854",
+           "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
+           "item": "d8525530-fd6c-11d9-9654-000c414ce854",
+          "value": "Producers"  }
+  },
+  // -----------------------------------------------------------------------
+  // (Section: Movies).(Name) = "Movies"
+  //           by (Brian) on (Jul 26, 2005)
+  { "Entry": {
+           "uuid": "3366ce00-fe04-11d9-8800-000c414ce854",
+  "previousEntry": "d5e68555-fd6c-11d9-9654-000c414ce854",
+           "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
+           "item": "d5e68554-fd6c-11d9-9654-000c414ce854",
+          "value": "Movies"  }
+  },
+  // -----------------------------------------------------------------------
+  // vote to DELETE Text
+  { "Vote": {
+           "uuid": "3cf2a700-fe04-11d9-8800-000c414ce854",
+         "record": "1c921cd0-fd7c-11d9-b837-000c414ce854",
+     "retainFlag": "false"  }
+  },
+  // -----------------------------------------------------------------------
+  // (Attribute: Producer).(Expected Type) = (Category: Producer)
+  //           by (Brian) on (Jul 26, 2005)
+  { "Entry": {
+           "uuid": "3f9a2050-fe04-11d9-8800-000c414ce854",
+           "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "0000100a-ce7f-11d9-8cd5-0011113ae5d6",
+           "item": "14d73340-fd7c-11d9-b837-000c414ce854",
+          "value": "258185f0-fe04-11d9-8800-000c414ce854"  }
+  },
+  // -----------------------------------------------------------------------
+  // (Movie: Dead Poets Society, The).(Name) = "Dead Poets Society, The"
+  //           by (Brian) on (Jul 26, 2005)
+  { "Entry": {
+           "uuid": "5a381750-fe04-11d9-8800-000c414ce854",
+  "previousEntry": "e40023d0-fd6c-11d9-9654-000c414ce854",
+           "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
+           "item": "dcf5c590-fd6c-11d9-9654-000c414ce854",
+          "value": "Dead Poets Society, The"  }
+  },
+  // -----------------------------------------------------------------------
+  // (Movie: Dead Poets Society, The).(Year) = "1989"
+  //           by (Brian) on (Jul 26, 2005)
+  { "Entry": {
+           "uuid": "64980930-fe04-11d9-8800-000c414ce854",
+  "previousEntry": "319e4bd0-fd7c-11d9-b837-000c414ce854",
+           "type": "00001022-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "0e6ee160-fd7c-11d9-b837-000c414ce854",
+           "item": "dcf5c590-fd6c-11d9-9654-000c414ce854",
+          "value": "1989"  }
+  },
+  // =======================================================================
+  { "Transaction": [
+    // -----------------------------------------------------------------------
+    // (Producer: Peter Weir)
+    //           by (Brian) on (Jul 26, 2005)
+    { "Item": { "uuid": "6741f380-fe04-11d9-8800-000c414ce854" } },
+    // -----------------------------------------------------------------------
+    // (Producer: Peter Weir).(Name) = "Peter Weir"
+    //           by (Brian) on (Jul 26, 2005)
+    { "Entry": {
+             "uuid": "6741f381-fe04-11d9-8800-000c414ce854",
+             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": "6741f380-fe04-11d9-8800-000c414ce854",
+            "value": "Peter Weir"  }
+    },
+    // -----------------------------------------------------------------------
+    // (Producer: Peter Weir).(Category) = (Category: Producer)
+    // (Category: Producer).(Items in Category) = (Producer: Peter Weir)
+    //           by (Brian) on (Jul 26, 2005)
+    { "Entry": {
+             "uuid": "6741f382-fe04-11d9-8800-000c414ce854",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["6741f380-fe04-11d9-8800-000c414ce854", "258185f0-fe04-11d9-8800-000c414ce854"],
+        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    },
+    // -----------------------------------------------------------------------
+    // (Movie: Dead Poets Society, The).(Producer) = (Producer: Peter Weir)
+    //           by (Brian) on (Jul 26, 2005)
+    { "Entry": {
+             "uuid": "6741f383-fe04-11d9-8800-000c414ce854",
+    "previousEntry": "32e9b790-fd7c-11d9-b837-000c414ce854",
+             "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "14d73340-fd7c-11d9-b837-000c414ce854",
+             "item": "dcf5c590-fd6c-11d9-9654-000c414ce854",
+            "value": "6741f380-fe04-11d9-8800-000c414ce854"  }
+    }  ]
+  },
+  // -----------------------------------------------------------------------
+  // (Movie: Fahrenheit 911).(Name) = "Fahrenheit 911"
+  //           by (Brian) on (Jul 26, 2005)
+  { "Entry": {
+           "uuid": "8a5e4b20-fe04-11d9-8800-000c414ce854",
+  "previousEntry": "e5be0070-fd6c-11d9-9654-000c414ce854",
+           "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
+           "item": "e40294d0-fd6c-11d9-9654-000c414ce854",
+          "value": "Fahrenheit 911"  }
+  },
+  // =======================================================================
+  { "Transaction": [
+    // -----------------------------------------------------------------------
+    // (Attribute: Produced)
+    //           by (Brian) on (Jul 26, 2005)
+    { "Item": { "uuid": "c9c589a0-fe08-11d9-9734-000c414ce854" } },
+    // -----------------------------------------------------------------------
+    // (Attribute: Produced).(Name) = "Produced"
+    //           by (Brian) on (Jul 26, 2005)
+    { "Entry": {
+             "uuid": "cfc4e080-fe08-11d9-9734-000c414ce854",
+             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": "c9c589a0-fe08-11d9-9734-000c414ce854",
+            "value": "Produced"  }
+    },
+    // -----------------------------------------------------------------------
+    // (Attribute: Produced).(Category) = (Category: Attribute)
+    // (Category: Attribute).(Items in Category) = (Attribute: Produced)
+    //           by (Brian) on (Jul 26, 2005)
+    { "Entry": {
+             "uuid": "cfc4e081-fe08-11d9-9734-000c414ce854",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["c9c589a0-fe08-11d9-9734-000c414ce854", "00001210-ce7f-11d9-8cd5-0011113ae5d6"],
+        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    }  ]
+  },
+  // -----------------------------------------------------------------------
+  // (Attribute: Produced).(Expected Type) = (Category: Movie)
+  //           by (Brian) on (Jul 26, 2005)
+  { "Entry": {
+           "uuid": "d163c370-fe08-11d9-9734-000c414ce854",
+           "type": "00001030-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "0000100a-ce7f-11d9-8cd5-0011113ae5d6",
+           "item": "c9c589a0-fe08-11d9-9734-000c414ce854",
+          "value": "dce9deb0-fd6c-11d9-9654-000c414ce854"  }
+  },
+  // -----------------------------------------------------------------------
+  // (Attribute: Producer).(Inverse Attribute) = (Attribute: Produced)
+  // (Attribute: Produced).(Inverse Attribute) = (Attribute: Producer)
+  //           by (Brian) on (Jul 26, 2005)
+  { "Entry": {
+           "uuid": "d8302e50-fe08-11d9-9734-000c414ce854",
+           "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+           "item": ["14d73340-fd7c-11d9-b837-000c414ce854", "c9c589a0-fe08-11d9-9734-000c414ce854"],
+      "attribute": ["0000100b-ce7f-11d9-8cd5-0011113ae5d6", "0000100b-ce7f-11d9-8cd5-0011113ae5d6"]  }
+  },
+  // =======================================================================
+  { "Transaction": [
+    // -----------------------------------------------------------------------
+    // (Movie: 2001: A Space Odyssey)
+    //           by (Brian) on (Jul 26, 2005)
+    { "Item": { "uuid": "ddbaca60-fe08-11d9-9734-000c414ce854" } },
+    // -----------------------------------------------------------------------
+    // (Movie: 2001: A Space Odyssey).(Category) = (Category: Movie)
+    // (Category: Movie).(Items in Category) = (Movie: 2001: A Space Odyssey)
+    //           by (Brian) on (Jul 26, 2005)
+    { "Entry": {
+             "uuid": "ddbaca61-fe08-11d9-9734-000c414ce854",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["ddbaca60-fe08-11d9-9734-000c414ce854", "dce9deb0-fd6c-11d9-9654-000c414ce854"],
+        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    },
+    // -----------------------------------------------------------------------
+    // (Movie: 2001: A Space Odyssey).(Name) = "2001: A Space Odyssey"
+    //           by (Brian) on (Jul 26, 2005)
+    { "Entry": {
+             "uuid": "ddbaca62-fe08-11d9-9734-000c414ce854",
+             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": "ddbaca60-fe08-11d9-9734-000c414ce854",
+            "value": "2001: A Space Odyssey"  }
+    },
+    // -----------------------------------------------------------------------
+    // (Movie: 2001: A Space Odyssey).(Year) = "1968"
+    //           by (Brian) on (Jul 26, 2005)
+    { "Entry": {
+             "uuid": "ddbaca63-fe08-11d9-9734-000c414ce854",
+             "type": "00001022-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "0e6ee160-fd7c-11d9-b837-000c414ce854",
+             "item": "ddbaca60-fe08-11d9-9734-000c414ce854",
+            "value": "1968"  }
+    },
+    // -----------------------------------------------------------------------
+    // (Producer: Stanley Kubrick)
+    //           by (Brian) on (Jul 26, 2005)
+    { "Item": { "uuid": "ddbaca64-fe08-11d9-9734-000c414ce854" } },
+    // -----------------------------------------------------------------------
+    // (Producer: Stanley Kubrick).(Name) = "Stanley Kubrick"
+    //           by (Brian) on (Jul 26, 2005)
+    { "Entry": {
+             "uuid": "ddbaca65-fe08-11d9-9734-000c414ce854",
+             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": "ddbaca64-fe08-11d9-9734-000c414ce854",
+            "value": "Stanley Kubrick"  }
+    },
+    // -----------------------------------------------------------------------
+    // (Producer: Stanley Kubrick).(Category) = (Category: Producer)
+    // (Category: Producer).(Items in Category) = (Producer: Stanley Kubrick)
+    //           by (Brian) on (Jul 26, 2005)
+    { "Entry": {
+             "uuid": "ddbaca66-fe08-11d9-9734-000c414ce854",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["ddbaca64-fe08-11d9-9734-000c414ce854", "258185f0-fe04-11d9-8800-000c414ce854"],
+        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    },
+    // -----------------------------------------------------------------------
+    // (Movie: 2001: A Space Odyssey).(Producer) = (Producer: Stanley Kubrick)
+    // (Producer: Stanley Kubrick).(Produced) = (Movie: 2001: A Space Odyssey)
+    //           by (Brian) on (Jul 26, 2005)
+    { "Entry": {
+             "uuid": "ddbaca67-fe08-11d9-9734-000c414ce854",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["ddbaca60-fe08-11d9-9734-000c414ce854", "ddbaca64-fe08-11d9-9734-000c414ce854"],
+        "attribute": ["14d73340-fd7c-11d9-b837-000c414ce854", "c9c589a0-fe08-11d9-9734-000c414ce854"]  }
+    },
+    // -----------------------------------------------------------------------
+    // (Movie: 12 Angry Men)
+    //           by (Brian) on (Jul 26, 2005)
+    { "Item": { "uuid": "ddbaca68-fe08-11d9-9734-000c414ce854" } },
+    // -----------------------------------------------------------------------
+    // (Movie: 12 Angry Men).(Category) = (Category: Movie)
+    // (Category: Movie).(Items in Category) = (Movie: 12 Angry Men)
+    //           by (Brian) on (Jul 26, 2005)
+    { "Entry": {
+             "uuid": "ddbaca69-fe08-11d9-9734-000c414ce854",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["ddbaca68-fe08-11d9-9734-000c414ce854", "dce9deb0-fd6c-11d9-9654-000c414ce854"],
+        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    },
+    // -----------------------------------------------------------------------
+    // (Movie: 12 Angry Men).(Name) = "12 Angry Men"
+    //           by (Brian) on (Jul 26, 2005)
+    { "Entry": {
+             "uuid": "ddbaca6a-fe08-11d9-9734-000c414ce854",
+             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": "ddbaca68-fe08-11d9-9734-000c414ce854",
+            "value": "12 Angry Men"  }
+    },
+    // -----------------------------------------------------------------------
+    // (Movie: 12 Angry Men).(Year) = "1957"
+    //           by (Brian) on (Jul 26, 2005)
+    { "Entry": {
+             "uuid": "ddbaca6b-fe08-11d9-9734-000c414ce854",
+             "type": "00001022-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "0e6ee160-fd7c-11d9-b837-000c414ce854",
+             "item": "ddbaca68-fe08-11d9-9734-000c414ce854",
+            "value": "1957"  }
+    },
+    // -----------------------------------------------------------------------
+    // (Producer: Sidney Lumet)
+    //           by (Brian) on (Jul 26, 2005)
+    { "Item": { "uuid": "ddbaca6c-fe08-11d9-9734-000c414ce854" } },
+    // -----------------------------------------------------------------------
+    // (Producer: Sidney Lumet).(Name) = "Sidney Lumet"
+    //           by (Brian) on (Jul 26, 2005)
+    { "Entry": {
+             "uuid": "ddbaca6d-fe08-11d9-9734-000c414ce854",
+             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": "ddbaca6c-fe08-11d9-9734-000c414ce854",
+            "value": "Sidney Lumet"  }
+    },
+    // -----------------------------------------------------------------------
+    // (Producer: Sidney Lumet).(Category) = (Category: Producer)
+    // (Category: Producer).(Items in Category) = (Producer: Sidney Lumet)
+    //           by (Brian) on (Jul 26, 2005)
+    { "Entry": {
+             "uuid": "ddbaca6e-fe08-11d9-9734-000c414ce854",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["ddbaca6c-fe08-11d9-9734-000c414ce854", "258185f0-fe04-11d9-8800-000c414ce854"],
+        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    },
+    // -----------------------------------------------------------------------
+    // (Movie: 12 Angry Men).(Producer) = (Producer: Sidney Lumet)
+    // (Producer: Sidney Lumet).(Produced) = (Movie: 12 Angry Men)
+    //           by (Brian) on (Jul 26, 2005)
+    { "Entry": {
+             "uuid": "ddbaca6f-fe08-11d9-9734-000c414ce854",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["ddbaca68-fe08-11d9-9734-000c414ce854", "ddbaca6c-fe08-11d9-9734-000c414ce854"],
+        "attribute": ["14d73340-fd7c-11d9-b837-000c414ce854", "c9c589a0-fe08-11d9-9734-000c414ce854"]  }
+    },
+    // -----------------------------------------------------------------------
+    // (Movie: Alien)
+    //           by (Brian) on (Jul 26, 2005)
+    { "Item": { "uuid": "ddbd3b60-fe08-11d9-9734-000c414ce854" } },
+    // -----------------------------------------------------------------------
+    // (Movie: Alien).(Category) = (Category: Movie)
+    // (Category: Movie).(Items in Category) = (Movie: Alien)
+    //           by (Brian) on (Jul 26, 2005)
+    { "Entry": {
+             "uuid": "ddbd3b61-fe08-11d9-9734-000c414ce854",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["ddbd3b60-fe08-11d9-9734-000c414ce854", "dce9deb0-fd6c-11d9-9654-000c414ce854"],
+        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    },
+    // -----------------------------------------------------------------------
+    // (Movie: Alien).(Name) = "Alien"
+    //           by (Brian) on (Jul 26, 2005)
+    { "Entry": {
+             "uuid": "ddbd3b62-fe08-11d9-9734-000c414ce854",
+             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": "ddbd3b60-fe08-11d9-9734-000c414ce854",
+            "value": "Alien"  }
+    },
+    // -----------------------------------------------------------------------
+    // (Movie: Alien).(Year) = "1979"
+    //           by (Brian) on (Jul 26, 2005)
+    { "Entry": {
+             "uuid": "ddbd3b63-fe08-11d9-9734-000c414ce854",
+             "type": "00001022-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "0e6ee160-fd7c-11d9-b837-000c414ce854",
+             "item": "ddbd3b60-fe08-11d9-9734-000c414ce854",
+            "value": "1979"  }
+    },
+    // -----------------------------------------------------------------------
+    // (Producer: Ridley Scott)
+    //           by (Brian) on (Jul 26, 2005)
+    { "Item": { "uuid": "ddbd3b64-fe08-11d9-9734-000c414ce854" } },
+    // -----------------------------------------------------------------------
+    // (Producer: Ridley Scott).(Name) = "Ridley Scott"
+    //           by (Brian) on (Jul 26, 2005)
+    { "Entry": {
+             "uuid": "ddbd3b65-fe08-11d9-9734-000c414ce854",
+             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": "ddbd3b64-fe08-11d9-9734-000c414ce854",
+            "value": "Ridley Scott"  }
+    },
+    // -----------------------------------------------------------------------
+    // (Producer: Ridley Scott).(Category) = (Category: Producer)
+    // (Category: Producer).(Items in Category) = (Producer: Ridley Scott)
+    //           by (Brian) on (Jul 26, 2005)
+    { "Entry": {
+             "uuid": "ddbd3b66-fe08-11d9-9734-000c414ce854",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["ddbd3b64-fe08-11d9-9734-000c414ce854", "258185f0-fe04-11d9-8800-000c414ce854"],
+        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    },
+    // -----------------------------------------------------------------------
+    // (Movie: Alien).(Producer) = (Producer: Ridley Scott)
+    // (Producer: Ridley Scott).(Produced) = (Movie: Alien)
+    //           by (Brian) on (Jul 26, 2005)
+    { "Entry": {
+             "uuid": "ddbd3b67-fe08-11d9-9734-000c414ce854",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["ddbd3b60-fe08-11d9-9734-000c414ce854", "ddbd3b64-fe08-11d9-9734-000c414ce854"],
+        "attribute": ["14d73340-fd7c-11d9-b837-000c414ce854", "c9c589a0-fe08-11d9-9734-000c414ce854"]  }
+    },
+    // -----------------------------------------------------------------------
+    // (Movie: Blade Runner)
+    //           by (Brian) on (Jul 26, 2005)
+    { "Item": { "uuid": "ddbd3b68-fe08-11d9-9734-000c414ce854" } },
+    // -----------------------------------------------------------------------
+    // (Movie: Blade Runner).(Category) = (Category: Movie)
+    // (Category: Movie).(Items in Category) = (Movie: Blade Runner)
+    //           by (Brian) on (Jul 26, 2005)
+    { "Entry": {
+             "uuid": "ddbd3b69-fe08-11d9-9734-000c414ce854",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["ddbd3b68-fe08-11d9-9734-000c414ce854", "dce9deb0-fd6c-11d9-9654-000c414ce854"],
+        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    },
+    // -----------------------------------------------------------------------
+    // (Movie: Blade Runner).(Name) = "Blade Runner"
+    //           by (Brian) on (Jul 26, 2005)
+    { "Entry": {
+             "uuid": "ddbd3b6a-fe08-11d9-9734-000c414ce854",
+             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": "ddbd3b68-fe08-11d9-9734-000c414ce854",
+            "value": "Blade Runner"  }
+    },
+    // -----------------------------------------------------------------------
+    // (Movie: Blade Runner).(Year) = "1982"
+    //           by (Brian) on (Jul 26, 2005)
+    { "Entry": {
+             "uuid": "ddbd3b6b-fe08-11d9-9734-000c414ce854",
+             "type": "00001022-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "0e6ee160-fd7c-11d9-b837-000c414ce854",
+             "item": "ddbd3b68-fe08-11d9-9734-000c414ce854",
+            "value": "1982"  }
+    },
+    // -----------------------------------------------------------------------
+    // (Movie: Blade Runner).(Producer) = (Producer: Ridley Scott)
+    // (Producer: Ridley Scott).(Produced) = (Movie: Blade Runner)
+    //           by (Brian) on (Jul 26, 2005)
+    { "Entry": {
+             "uuid": "ddbd3b6c-fe08-11d9-9734-000c414ce854",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["ddbd3b68-fe08-11d9-9734-000c414ce854", "ddbd3b64-fe08-11d9-9734-000c414ce854"],
+        "attribute": ["14d73340-fd7c-11d9-b837-000c414ce854", "c9c589a0-fe08-11d9-9734-000c414ce854"]  }
+    },
+    // -----------------------------------------------------------------------
+    // (Movie: Caine Mutiny, The)
+    //           by (Brian) on (Jul 26, 2005)
+    { "Item": { "uuid": "ddbd3b6d-fe08-11d9-9734-000c414ce854" } },
+    // -----------------------------------------------------------------------
+    // (Movie: Caine Mutiny, The).(Category) = (Category: Movie)
+    // (Category: Movie).(Items in Category) = (Movie: Caine Mutiny, The)
+    //           by (Brian) on (Jul 26, 2005)
+    { "Entry": {
+             "uuid": "ddbd3b6e-fe08-11d9-9734-000c414ce854",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["ddbd3b6d-fe08-11d9-9734-000c414ce854", "dce9deb0-fd6c-11d9-9654-000c414ce854"],
+        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    },
+    // -----------------------------------------------------------------------
+    // (Movie: Caine Mutiny, The).(Name) = "Caine Mutiny, The"
+    //           by (Brian) on (Jul 26, 2005)
+    { "Entry": {
+             "uuid": "ddbf8550-fe08-11d9-9734-000c414ce854",
+             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": "ddbd3b6d-fe08-11d9-9734-000c414ce854",
+            "value": "Caine Mutiny, The"  }
+    },
+    // -----------------------------------------------------------------------
+    // (Movie: Caine Mutiny, The).(Year) = "1954"
+    //           by (Brian) on (Jul 26, 2005)
+    { "Entry": {
+             "uuid": "ddbf8551-fe08-11d9-9734-000c414ce854",
+             "type": "00001022-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "0e6ee160-fd7c-11d9-b837-000c414ce854",
+             "item": "ddbd3b6d-fe08-11d9-9734-000c414ce854",
+            "value": "1954"  }
+    },
+    // -----------------------------------------------------------------------
+    // (Producer: Edward Dymtryk)
+    //           by (Brian) on (Jul 26, 2005)
+    { "Item": { "uuid": "ddbf8552-fe08-11d9-9734-000c414ce854" } },
+    // -----------------------------------------------------------------------
+    // (Producer: Edward Dymtryk).(Name) = "Edward Dymtryk"
+    //           by (Brian) on (Jul 26, 2005)
+    { "Entry": {
+             "uuid": "ddbf8553-fe08-11d9-9734-000c414ce854",
+             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": "ddbf8552-fe08-11d9-9734-000c414ce854",
+            "value": "Edward Dymtryk"  }
+    },
+    // -----------------------------------------------------------------------
+    // (Producer: Edward Dymtryk).(Category) = (Category: Producer)
+    // (Category: Producer).(Items in Category) = (Producer: Edward Dymtryk)
+    //           by (Brian) on (Jul 26, 2005)
+    { "Entry": {
+             "uuid": "ddbf8554-fe08-11d9-9734-000c414ce854",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["ddbf8552-fe08-11d9-9734-000c414ce854", "258185f0-fe04-11d9-8800-000c414ce854"],
+        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    },
+    // -----------------------------------------------------------------------
+    // (Movie: Caine Mutiny, The).(Producer) = (Producer: Edward Dymtryk)
+    // (Producer: Edward Dymtryk).(Produced) = (Movie: Caine Mutiny, The)
+    //           by (Brian) on (Jul 26, 2005)
+    { "Entry": {
+             "uuid": "ddbf8555-fe08-11d9-9734-000c414ce854",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["ddbd3b6d-fe08-11d9-9734-000c414ce854", "ddbf8552-fe08-11d9-9734-000c414ce854"],
+        "attribute": ["14d73340-fd7c-11d9-b837-000c414ce854", "c9c589a0-fe08-11d9-9734-000c414ce854"]  }
+    }  ]
+  },
+  // -----------------------------------------------------------------------
+  // (Movie: Fahrenheit 911).(Year) = "2004?"
+  //           by (Brian) on (Jul 26, 2005)
+  { "Entry": {
+           "uuid": "297064a0-fe0a-11d9-bcef-000c414ce854",
+           "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "0e6ee160-fd7c-11d9-b837-000c414ce854",
+           "item": "e40294d0-fd6c-11d9-9654-000c414ce854",
+          "value": "2004?"  }
+  },
+  // =======================================================================
+  { "Transaction": [
+    // -----------------------------------------------------------------------
+    // (Producer: Michael Moore)
+    //           by (Brian) on (Jul 26, 2005)
+    { "Item": { "uuid": "2d1e0350-fe0a-11d9-bcef-000c414ce854" } },
+    // -----------------------------------------------------------------------
+    // (Producer: Michael Moore).(Name) = "Michael Moore"
+    //           by (Brian) on (Jul 26, 2005)
+    { "Entry": {
+             "uuid": "2d1e0351-fe0a-11d9-bcef-000c414ce854",
+             "type": "00001020-ce7f-11d9-8cd5-0011113ae5d6",
+        "attribute": "00001001-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": "2d1e0350-fe0a-11d9-bcef-000c414ce854",
+            "value": "Michael Moore"  }
+    },
+    // -----------------------------------------------------------------------
+    // (Producer: Michael Moore).(Category) = (Category: Producer)
+    // (Category: Producer).(Items in Category) = (Producer: Michael Moore)
+    //           by (Brian) on (Jul 26, 2005)
+    { "Entry": {
+             "uuid": "2d1e0352-fe0a-11d9-bcef-000c414ce854",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["2d1e0350-fe0a-11d9-bcef-000c414ce854", "258185f0-fe04-11d9-8800-000c414ce854"],
+        "attribute": ["00001005-ce7f-11d9-8cd5-0011113ae5d6", "0000100c-ce7f-11d9-8cd5-0011113ae5d6"]  }
+    },
+    // -----------------------------------------------------------------------
+    // (Movie: Fahrenheit 911).(Producer) = (Producer: Michael Moore)
+    // (Producer: Michael Moore).(Produced) = (Movie: Fahrenheit 911)
+    //           by (Brian) on (Jul 26, 2005)
+    { "Entry": {
+             "uuid": "2d1e0353-fe0a-11d9-bcef-000c414ce854",
+             "type": "00001050-ce7f-11d9-8cd5-0011113ae5d6",
+             "item": ["e40294d0-fd6c-11d9-9654-000c414ce854", "2d1e0350-fe0a-11d9-bcef-000c414ce854"],
+        "attribute": ["14d73340-fd7c-11d9-b837-000c414ce854", "c9c589a0-fe08-11d9-9734-000c414ce854"]  }
+    }  ]
+  },
+  // -----------------------------------------------------------------------
+  // (Movie: Fahrenheit 911).(Year) = "2004"
+  //           by (Brian) on (Jul 26, 2005)
+  { "Entry": {
+           "uuid": "32c09430-fe0a-11d9-bcef-000c414ce854",
+  "previousEntry": "297064a0-fe0a-11d9-bcef-000c414ce854",
+           "type": "00001022-ce7f-11d9-8cd5-0011113ae5d6",
+      "attribute": "0e6ee160-fd7c-11d9-b837-000c414ce854",
+           "item": "e40294d0-fd6c-11d9-9654-000c414ce854",
+          "value": "2004"  }
   }
\ No newline at end of file

Modified: trunk/source/OpenRecordLoader.js
===================================================================
--- trunk/source/OpenRecordLoader.js	2005-07-26 07:25:51 UTC (rev 262)
+++ trunk/source/OpenRecordLoader.js	2005-07-26 19:26:09 UTC (rev 263)
@@ -91,15 +91,19 @@
   path = path || "";
   OpenRecordLoader.loadStylesheet(path + "source/base_style.css"); 
   var listOfSourceCodeFiles = [
+    // third_party
     "third_party/md5/md5.js",
     "third_party/scriptaculous/prototype.js",
     "third_party/scriptaculous/effects.js",
     "third_party/scriptaculous/dragdrop.js",
     "third_party/gtd_tiddlywiki/FileSaver.js",
+    // util
     "source/util/Uuid.js",
     "source/util/Util.js",
     "source/util/Cookie.js",
     "source/util/DateValue.js",
+    "source/util/CsvParser.js",
+    // view
     "source/view/View.js",
     "source/view/RootView.js",
     "source/view/ItemView.js",
@@ -111,10 +115,12 @@
     "source/view/SuggestionBox.js",
     "source/view/EntryView.js",
     "source/view/PluginView.js", 
+    // plugin
     "source/TablePlugin.js",
     "source/OutlinePlugin.js",
     "source/DetailPlugin.js",
     "source/BarChartPlugin.js",
+    // model
     "source/model/Record.js",
     "source/model/Ordinal.js",
     "source/model/Vote.js",

Modified: trunk/source/TablePlugin.js
===================================================================
--- trunk/source/TablePlugin.js	2005-07-26 07:25:51 UTC (rev 262)
+++ trunk/source/TablePlugin.js	2005-07-26 19:26:09 UTC (rev 263)
@@ -192,7 +192,6 @@
  */
 TablePlugin.prototype._buildAttributeEditor = function() {
   var htmlElement = this.getHtmlElement();
-  View.appendNewElement(htmlElement, "br");
   var selectElt = View.appendNewElement(htmlElement, "select", RootView.CSS_CLASS_EDIT_TOOL);
   var listOfAttributes = this.getWorld().getAttributes();
   var optionElt = View.appendNewElement(selectElt, "option");
@@ -208,10 +207,14 @@
     optionElt.onclick = this._attributeEditorChanged.bindAsEventListener(this);
   }
   this._selectElement = selectElt;
-  /*View.appendNewTextNode(htmlElement, " Import Data:");
-  var importButton = View.appendNewElement(htmlElement,"input");
-  importButton.type = "file";
-  importButton.onchange = this._importData.bindAsEventListener(this, importButton);*/
+  
+  if (window.location.protocol == "file:") {
+    var importDiv = View.appendNewElement(htmlElement, "div", RootView.CSS_CLASS_EDIT_TOOL);
+    View.appendNewTextNode(importDiv, " Import Data:");
+    var importButton = View.appendNewElement(importDiv, "input");
+    importButton.type = "file";
+    importButton.onchange = this._importData.bindAsEventListener(this, importButton);
+  }
 };
 
 
@@ -356,10 +359,11 @@
     this.fetchItems();
     this._buildAttributes();
   }
-  
+ 
   //create new table, remove old table if already exists
   var viewDivElement = this.getHtmlElement();
   View.removeChildrenOfElement(viewDivElement);
+  this._buildAttributeEditor();
   this._table = View.appendNewElement(viewDivElement, "table", this._cssClassForTable);
   
   this._buildHeader();
@@ -370,10 +374,6 @@
   this._listOfItems.sort(function(a,b) {return staticThis.compareItemByAttribute(a,b);}); // need to sort after header row added because default sort attribute is set there
 
   this._buildTableBody();
-  
-  
-  // if (this.isInEditMode()) {this._buildAttributeEditor();}
-  this._buildAttributeEditor();
 };
 
 
@@ -409,7 +409,7 @@
  * attribute. Each table cell is displayed with a EntryView object.  The HTML 
  * table cell links to the EntryView object with the attribute "or_entryView"
  *
- * @scope    public instance method
+ * @scope    private instance method
  * @return   An HTML image element
  */
 TablePlugin.prototype._insertCell = function(row, col, item, attribute) {
@@ -429,7 +429,7 @@
 /**
  * Called when the user clicks on table header. Resorts table accordingly.
  * 
- * @scope    public class method
+ * @scope    public instance method
  */
 TablePlugin.prototype.clickOnHeader = function(event, clickAttribute) {
   if (clickAttribute == this._sortAttribute) {
@@ -445,7 +445,7 @@
 /**
  * Called when the user clicks on table header. Resorts table accordingly.
  * 
- * @scope    public class method
+ * @scope    public instance method
  */
 TablePlugin.prototype.selectRow = function(rowElement) {
   Util.assert(rowElement instanceof HTMLTableRowElement);
@@ -464,44 +464,61 @@
  
 
 /**
+ * Reads from a CSV format data file and creates items and entries that
+ * correspond to the rows and fields in the CSV file.
  * 
+ * @scope    private instance method
  */
 TablePlugin.prototype._importData = function(eventObject, fileButton) {
-  // Returns null if it can't do it, false if there's an error, or a string of the content if successful
-/*  function mozillaLoadFile(filePath)
-  {
-      if(window.Components)
-          try 
-              {
-              netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect");
-              var file = Components.classes["@mozilla.org/file/local;1"].createInstance(Components.interfaces.nsILocalFile);
-              file.initWithPath(filePath);
-              if (!file.exists())
-                  return(null);
-              var inputStream = Components.classes["@mozilla.org/network/file-input-stream;1"].createInstance(Components.interfaces.nsIFileInputStream);
-              inputStream.init(file, 0x01, 00004, null);
-              var sInputStream = Components.classes["@mozilla.org/scriptableinputstream;1"].createInstance(Components.interfaces.nsIScriptableInputStream);
-              sInputStream.init(inputStream);
-              return(sInputStream.read(sInputStream.available()));
-              }
-          catch(e)
-              {
-              alert("Exception while attempting to load\n\n" + e);
-              return(false);
-              }
-      return(null);
+  var fileContents = Util.getStringContentsOfFileAtURL('file://' + fileButton.value);
+
+  var csvParser = new CsvParser();
+  var listOfRecords = csvParser.getStringValuesFromCsvData(fileContents);
+  
+  var listOfAttributes = this._displayAttributes;
+  var world = this.getWorld();
+  var attributeCalledExpectedType = world.getAttributeCalledExpectedType();
+  var attributeCalledInverseAttribute = world.getAttributeCalledInverseAttribute();
+
+  var hashTableOfTypesKeyedByAttribute = {};
+  for (var i in listOfAttributes) {
+    var attribute = listOfAttributes[i];
+    var listOfExpectedTypeEntries = attribute.getEntriesForAttribute(attributeCalledExpectedType);
+    var listOfTypes = [];
+    for (var j in listOfExpectedTypeEntries) {
+      var entry = listOfExpectedTypeEntries[j];
+      listOfTypes.push(entry.getValue());
+    }
+    var attributeKeyString = attribute.getUniqueKeyString();
+    hashTableOfTypesKeyedByAttribute[attributeKeyString] = listOfTypes;
   }
-  
-  function readFile (fileName) {
-      netscape.security.PrivilegeManager.enablePrivilege('UniversalFileRead');
-      var bfr = new java.io.BufferedReader(new java.io.FileReader(fileName));
-      var line;
-      var content = '';
-      while ((line = bfr.readLine()) != null)
-        content += line + java.lang.System.getProperty('line.separator');
-      return content;
-    }*/
-  window.open('file://'+fileButton.value,'preview');   
+  world.beginTransaction();
+  for (i in listOfRecords) {
+    var listOfFields = listOfRecords[i];
+    if (listOfFields.length == listOfAttributes.length) {
+      var newItem = world.newItem();
+      world.setItemToBeIncludedInQueryResultList(newItem, this.getQuerySpec());
+      for (j in listOfAttributes) {
+        attribute = listOfAttributes[j];
+        var value = listOfFields[j];
+        listOfTypes = hashTableOfTypesKeyedByAttribute[attribute.getUniqueKeyString()];
+        value = EntryView._transformValueToExpectedType(world, value, listOfTypes);
+        var inverseAttributeEntry = attribute.getSingleEntryFromAttribute(attributeCalledInverseAttribute);
+        if (inverseAttributeEntry) {
+          var inverseAttribute = inverseAttributeEntry.getValue(attribute);
+          newItem.addConnectionEntry(attribute, value, inverseAttribute);
+        } else {
+          newItem.addEntryForAttribute(attribute, value);
+        }
+      }
+    } else {
+      alert("CSV record does not have the right number of fields: " + listOfFields[0]);
+    }
+  }
+  world.endTransaction();
+  this.refresh();
+  // fileContents = listOfStrings.join('');
+  // alert(fileContents);
 };
 
 

Modified: trunk/source/base_style.css
===================================================================
--- trunk/source/base_style.css	2005-07-26 07:25:51 UTC (rev 262)
+++ trunk/source/base_style.css	2005-07-26 19:26:09 UTC (rev 263)
@@ -190,7 +190,7 @@
 }
 
 div.editmode .header {
-  background-color: rgb(100%, 100%, 40%);
+  background-color: rgb(100%, 100%, 100%);
 }
 
 div.viewmode .header {
@@ -348,12 +348,18 @@
   border-color: rgb(100%, 100%, 100%);
 }
 
-div.EntryView span:hover {
+div.EntryView {
   border-width: thin;
   border-style: solid;
-  border-color: rgb(70%, 70%, 70%);
+  border-color: rgb(100%, 100%, 100%);
 }
 
+div.EntryView:hover {
+  border-width: thin;
+  border-style: solid;
+  border-color: rgb(100%, 100%, 100%);
+}
+
 h1.EntryView input {
   color: rgb(0%, 0%, 0%);
   background: #CCCCCC;
@@ -703,7 +709,7 @@
 }
 
 .DateValue {
-  font-color: #808080;
+  color: #808080;
 }
 
 .NumberValue {

Modified: trunk/source/model/Item.js
===================================================================
--- trunk/source/model/Item.js	2005-07-26 07:25:51 UTC (rev 262)
+++ trunk/source/model/Item.js	2005-07-26 19:26:09 UTC (rev 263)
@@ -556,6 +556,7 @@
   return false;
 };
 
+
 /**
  * Given a category, returns "true" if the item has been assigned to 
  * that category.
@@ -571,6 +572,24 @@
 };
  
 
+/**
+ * Given a string, returns "true" if the string is the same as the name
+ * or the short name of the item.  The comparison is case insensitive.
+ *
+ * @scope    public instance method
+ * @return   A boolean.  True if the string matches the item's name.
+ */
+Item.prototype.doesStringMatchName = function(string) {
+  if (string.toLowerCase() == this.getDisplayName().toLowerCase()) {
+    return true;
+  }
+  if (string.toLowerCase() == this.getDisplayString().toLowerCase()) {
+    return true;
+  }
+  return false;
+};
+
+
 // -------------------------------------------------------------------
 // Observer/Observable Methods
 // -------------------------------------------------------------------

Added: trunk/source/util/CsvParser.js
===================================================================
--- trunk/source/util/CsvParser.js	2005-07-26 07:25:51 UTC (rev 262)
+++ trunk/source/util/CsvParser.js	2005-07-26 19:26:09 UTC (rev 263)
@@ -0,0 +1,113 @@
+/*****************************************************************************
+ CsvParser.js
+ 
+******************************************************************************
+ Written in 2005 by Brian Douglas Skinner <brian.skinner at gumption.org>
+  
+ Copyright rights relinquished under the Creative Commons  
+ Public Domain Dedication:
+    http://creativecommons.org/licenses/publicdomain/
+  
+ You can copy freely from this file.  This work may be freely reproduced, 
+ distributed, transmitted, used, modified, built upon, or otherwise exploited
+ by anyone for any purpose.
+  
+ This work is provided on an "AS IS" basis, without warranties or conditions 
+ of any kind, either express or implied, including, without limitation, any 
+ warranties or conditions of title, non-infringement, merchantability, or 
+ fitness for a particular purpose. You are solely responsible for determining 
+ the appropriateness of using or distributing the work and assume all risks 
+ associated with use of this work, including but not limited to the risks and 
+ costs of errors, compliance with applicable laws, damage to or loss of data 
+ or equipment, and unavailability or interruption of operations.
+
+ In no event shall the authors or contributors have any liability for any 
+ direct, indirect, incidental, special, exemplary, or consequential damages,
+ however caused and on any theory of liability, whether in contract, strict 
+ liability, or tort (including negligence), arising in any way out of or in 
+ connection with the use or distribution of the work.
+*****************************************************************************/
+
+
+// -------------------------------------------------------------------
+// Dependencies, expressed in the syntax that JSLint understands:
+/*global Util  */
+// -------------------------------------------------------------------
+
+
+/**
+ * The CsvParser class knows how to read CSV input and parse it into
+ * its component lines and fields.  "CSV" stands for Comma Separated 
+ * Value.  For a quick overview of the CSV file format, see:
+ *   http://www.creativyst.com/Doc/Articles/CSV/CSV01.htm
+ *
+ * @scope    public instance constructor
+ */
+function CsvParser() {
+}
+
+
+/**
+ * Given a string containing CSV records, this method parses
+ * the string and returns a data structure containing the parsed
+ * content.  The data structure we return is an array of length
+ * R, where R is the number of rows (lines) in the CSV data.  The 
+ * return array contains one sub-array for each CSV line, and each 
+ * sub-array contains C string values, where C is the number of 
+ * columns in the CSV data.
+ * 
+ * For example, given this CSV string as input:
+ * <pre>
+ *   "Alien, 1979, Ridley Scott \n Blade Runner, 1982, Ridley Scott"
+ * </pre>
+ * We will return this data structure:
+ * <pre>
+ *   [["Alien", "1979", "Ridley Scott"],  ["Blade Runner", "1982", "Ridley Scott"]]
+ * </pre>
+ *
+ * @scope    public instance method
+ * @param    csvData    A string containing CSV records. 
+ * @return   Returns an array containing sub-arrays containing strings.
+ */
+CsvParser.prototype.getStringValuesFromCsvData = function(csvData) {
+  Util.assert(Util.isString(csvData));
+  
+  var lineEndingCharacters = new RegExp("\r\n|\n|\r");
+  var leadingWhiteSpaceCharacters = new RegExp("^\\s+",'g');
+  var trailingWhiteSpaceCharacters = new RegExp("\\s+$",'g');
+  var listOfOutputRecords = [];
+  
+  var listOfInputLines = csvData.split(lineEndingCharacters);
+  for (var i in listOfInputLines) {
+    var singleLine = listOfInputLines[i];
+    if (singleLine.length > 0) {
+      var listOfFields = singleLine.split(',');
+      var j = 0;
+      while (j < listOfFields.length) {
+        var space_field_space = listOfFields[j];
+        var field_space = space_field_space.replace(leadingWhiteSpaceCharacters, ''); // trim leading whitespace
+        var field = field_space.replace(trailingWhiteSpaceCharacters, ''); // trim trailing whitespace
+        var firstCharacter = field.charAt(0);
+        var lastCharacter = field.charAt(field.length - 1);
+        if ((firstCharacter == '"') && (lastCharacter != '"')) {
+          var nextField = listOfFields[j+1];
+          listOfFields[j] = field_space + ',' + nextField;
+          listOfFields.splice(j+1, 1); // delete element [j+1] from the list
+        } else {
+          if ((firstCharacter == '"') && (lastCharacter == '"')) {
+            field = field.slice(1, (field.length - 1)); // trim the " characters off
+          }
+          listOfFields[j] = field;
+          j += 1;
+        }
+      }
+      listOfOutputRecords.push(listOfFields);
+    }
+  }
+  return listOfOutputRecords;
+};
+
+
+// -------------------------------------------------------------------
+// End of file
+// -------------------------------------------------------------------

Added: trunk/source/util/CsvParserTest.html
===================================================================
--- trunk/source/util/CsvParserTest.html	2005-07-26 07:25:51 UTC (rev 262)
+++ trunk/source/util/CsvParserTest.html	2005-07-26 19:26:09 UTC (rev 263)
@@ -0,0 +1,85 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
+<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" >
+
+<!-- 
+ Written in 2005 by Brian Douglas Skinner <brian.skinner at gumption.org>
+  
+ Copyright rights relinquished under the Creative Commons  
+ Public Domain Dedication:
+    http://creativecommons.org/licenses/publicdomain/
+-->
+
+  <head>
+    <title>Unit tests for CsvParser.js</title>
+
+    <script type="text/javascript" src="../../third_party/jsunit/jsunit2_1/app/jsUnitCore.js"></script>
+    <script type="text/javascript" src="Util.js"></script>
+    <script type="text/javascript" src="CsvParser.js"></script>
+    <script type="text/javascript" src="CsvParserTest.js"></script>
+  </head>
+  
+  <body>
+    <h1>Unit tests for CsvParser.js</h1>
+
+    <p>This page is used to run unit tests for the JavaScript code in the 
+    OpenRecord project.</p>
+    
+    <p>&nbsp;</p>
+    <hr/>
+    <p>To see the tests, open this .html file in a text editor. Or, within a  
+    web browser, you should be able see the source for this file by using 
+    some menu like <b>View</b> followed by <b>Page Source</b>. The tests 
+    may be in this file, or they may be in a separate file that has the
+    same name as this one, except with a .js extension instead of a .html
+    extension.</p>
+ 
+    <p>The unit tests are set up to run in the
+    <a href="http://www.edwardh.com/jsunit/" rel="external">JsUnit framework</a>
+    written by 
+    <a href="http://www.edwardh.com/" rel="external">Edward Hieatt</a>. </p>
+
+    <p>If you're looking at this page across an "http://" connection, rather
+    than having loaded it as a "file:///", then you may be able to run the
+    unit tests. The web server that served you this page may also have a
+    JsUnit testRunner available. If so, you should be able to run these unit
+    tests by going to
+    <a href="../../third_party/jsunit/jsunit2_1/testRunner.html?testpage=" 
+    onclick="href+=window.location.href;" rel="external">the local testRunner 
+    page</a>, and hitting the <b>Run</b> button.</p>
+
+    <p>You can also run these unit tests on your local computer. To do that you 
+    first need to download <a href="http://www.edwardh.com/jsunit/" 
+    rel="external">JsUnit</a>.</p>
+    
+    <p>&nbsp;</p>
+    <hr/>
+    <p class="copyright">You can copy freely from this work &mdash; copyright 
+    rights relinquished under the Creative Commons  
+    <a rel="license external" 
+    href="http://creativecommons.org/licenses/publicdomain/">Public Domain 
+    Dedication</a>.</p>
+
+<!-- Creative Commons metadata for Public Domain License 
+
+<rdf:RDF xmlns="http://web.resource.org/cc/"
+    xmlns:dc="http://purl.org/dc/elements/1.1/"
+    xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
+<Work rdf:about="">
+   <dc:title>openrecord.org</dc:title>
+   <dc:type rdf:resource="http://purl.org/dc/dcmitype/Text" />
+   <license rdf:resource="http://web.resource.org/cc/PublicDomain" />
+</Work>
+
+<License rdf:about="http://web.resource.org/cc/PublicDomain">
+   <permits rdf:resource="http://web.resource.org/cc/Reproduction" />
+   <permits rdf:resource="http://web.resource.org/cc/Distribution" />
+   <permits rdf:resource="http://web.resource.org/cc/DerivativeWorks" />
+</License>
+
+</rdf:RDF>
+
+-->
+  </body>
+</html>
+

Added: trunk/source/util/CsvParserTest.js
===================================================================
--- trunk/source/util/CsvParserTest.js	2005-07-26 07:25:51 UTC (rev 262)
+++ trunk/source/util/CsvParserTest.js	2005-07-26 19:26:09 UTC (rev 263)
@@ -0,0 +1,71 @@
+/*****************************************************************************
+ CsvParserTest.js
+ 
+******************************************************************************
+ Written in 2005 by Brian Douglas Skinner <brian.skinner at gumption.org>
+  
+ Copyright rights relinquished under the Creative Commons  
+ Public Domain Dedication:
+    http://creativecommons.org/licenses/publicdomain/
+  
+ You can copy freely from this file.  This work may be freely reproduced, 
+ distributed, transmitted, used, modified, built upon, or otherwise exploited
+ by anyone for any purpose.
+  
+ This work is provided on an "AS IS" basis, without warranties or conditions 
+ of any kind, either express or implied, including, without limitation, any 
+ warranties or conditions of title, non-infringement, merchantability, or 
+ fitness for a particular purpose. You are solely responsible for determining 
+ the appropriateness of using or distributing the work and assume all risks 
+ associated with use of this work, including but not limited to the risks and 
+ costs of errors, compliance with applicable laws, damage to or loss of data 
+ or equipment, and unavailability or interruption of operations.
+
+ In no event shall the authors or contributors have any liability for any 
+ direct, indirect, incidental, special, exemplary, or consequential damages,
+ however caused and on any theory of liability, whether in contract, strict 
+ liability, or tort (including negligence), arising in any way out of or in 
+ connection with the use or distribution of the work.
+*****************************************************************************/
+ 
+var CsvData = null;
+
+function setUp() {
+  var CsvRecords = ['2001: A Space Odyssey, 1968, Stanley Kubrick',
+                    '12 Angry Men, 1957, Sidney Lumet',
+                    'Alien, 1979, Ridley Scott  ',
+                    'Blade Runner, 1982, Ridley Scott',
+                    '"Caine Mutiny, The", 1954, Edward Dymtryk',
+                    '',
+                    ''];
+  CsvData = CsvRecords.join('\n');
+}
+
+function testCsvParser() {
+  var csvParser = new CsvParser();
+  var listOfRecords = csvParser.getStringValuesFromCsvData(CsvData);
+  var whiteSpaceCharacters = " \t\n\r";
+  
+  assertTrue('CsvData has 5 lines', listOfRecords.length == 5);
+  for (var i in listOfRecords) {
+    var row = listOfRecords[i];
+    assertTrue('Each row has 3 fields', row.length == 3);
+    for (var j in row) {
+      var field = row[j];
+      assertTrue('Each field is a string', Util.isString(field));
+      var firstChar = field.charAt(0);
+      var lastChar = field.charAt(field.length - 1);
+      assertTrue('The first character is not white space', whiteSpaceCharacters.indexOf(firstChar) == -1);
+      assertTrue('The last character is not white space', whiteSpaceCharacters.indexOf(lastChar) == -1);
+    };
+  }
+}
+
+
+function tearDown() {
+  CsvData = null;
+}
+
+// -------------------------------------------------------------------
+// End of file
+// -------------------------------------------------------------------

Modified: trunk/source/util/Uuid.js
===================================================================
--- trunk/source/util/Uuid.js	2005-07-26 07:25:51 UTC (rev 262)
+++ trunk/source/util/Uuid.js	2005-07-26 19:26:09 UTC (rev 263)
@@ -114,9 +114,9 @@
 mockUuidGenerator.queueOfUuids = new Array();
 
 function mockUuidGenerator() {
-  if (mockUuidGenerator.queueOfUuids.length == 0) {
-// This should probably throw an exception instead.    
-      return "00000000-0000-0000-0000-000000000000";
+  if (mockUuidGenerator.queueOfUuids.length === 0) {
+    // This should probably throw an exception instead.    
+    return "00000000-0000-0000-0000-000000000000";
   }
   return mockUuidGenerator.queueOfUuids.shift();
 }

Modified: trunk/source/view/EntryView.js
===================================================================
--- trunk/source/view/EntryView.js	2005-07-26 07:25:51 UTC (rev 262)
+++ trunk/source/view/EntryView.js	2005-07-26 19:26:09 UTC (rev 263)
@@ -410,43 +410,69 @@
  */
 EntryView.prototype._transformToExpectedType = function(value) {
   if (value && Util.isString(value)) {
-    var repository = this.getWorld();
+    var world = this.getWorld();
     var listOfExpectedTypeEntries;
     if (this._expectedTypeEntries) {
       listOfExpectedTypeEntries = this._expectedTypeEntries;
     }
     else {
-      var attributeCalledExpectedType = repository.getAttributeCalledExpectedType();
+      var attributeCalledExpectedType = world.getAttributeCalledExpectedType();
       listOfExpectedTypeEntries = this._attribute.getEntriesForAttribute(attributeCalledExpectedType);
     }
-    var categoryCalledCategory = repository.getCategoryCalledCategory();
-    var typeCalledText = repository.getTypeCalledText();
-    var typeCalledDate = repository.getTypeCalledDate();
-    var typeCalledNumber = repository.getTypeCalledNumber();
-    if (listOfExpectedTypeEntries) {
-      for (var i=0; i<listOfExpectedTypeEntries.length; ++i) {
-        var aType = listOfExpectedTypeEntries[i].getValue();
-        switch (aType) {
-          case typeCalledText:
-            return value;
-          case typeCalledNumber:
-            var floatVal = parseFloat(value);
-            if (!isNaN(floatVal)) {return floatVal;}
-            break;
-          case typeCalledDate:
-            // var dateVal = Date.parse(value);
-            // if (!isNaN(dateVal)) {return new Date(value);}
-            var dateValue = new DateValue(value);
-            if (dateValue.isValid()) {return dateValue;}
-            break;
-          default:
-            if (aType.isInCategory(categoryCalledCategory)) {
-              value = repository.newItem(value);
-              value.assignToCategory(aType);
-              return value;
+    var listOfTypes = [];
+    for (var i in listOfExpectedTypeEntries) {
+      var entry = listOfExpectedTypeEntries[i];
+      listOfTypes.push(entry.getValue());
+    }
+    return EntryView._transformValueToExpectedType(world, value, listOfTypes);
+  }
+  return value;
+};
+
+
+/**
+ * Given a string value and a list of types, this method tries to
+ * transform the value to one of the types. 
+ *
+ * @scope    private instance method
+ * @param    world    The new value to be saved. 
+ * @param    value    The new value to be saved. 
+ * @param    listOfTypes    The new value to be saved. 
+ */
+EntryView._transformValueToExpectedType = function(world, value, listOfTypes) {
+  if (value && Util.isString(value) && listOfTypes && Util.isArray(listOfTypes)) {
+    var categoryCalledCategory = world.getCategoryCalledCategory();
+    var typeCalledText = world.getTypeCalledText();
+    var typeCalledDate = world.getTypeCalledDate();
+    var typeCalledNumber = world.getTypeCalledNumber();
+    for (var i in listOfTypes) {
+      var aType = listOfTypes[i];
+      switch (aType) {
+        case typeCalledText:
+          return value;
+        case typeCalledNumber:
+          var floatVal = parseFloat(value);
+          if (!isNaN(floatVal)) {return floatVal;}
+          break;
+        case typeCalledDate:
+          var dateValue = new DateValue(value);
+          if (dateValue.isValid()) {return dateValue;}
+          break;
+        default:
+          if (aType.isInCategory(categoryCalledCategory)) {
+            var listOfItems = world.getItemsInCategory(aType);
+            var item;
+            for (var j in listOfItems) {
+              item = listOfItems[j];
+              if (item.doesStringMatchName(value)) {
+                return item;
+              }
             }
-            break;
-        }
+            item = world.newItem(value);
+            item.assignToCategory(aType);
+            return item;
+          }
+          break;
       }
     }
   }
@@ -469,14 +495,11 @@
     if (this._entry) {oldValue = this._entry.getValue(this._item);}
     if (oldValue != value) {
       var attributeCalledInverseAttribute = this.getWorld().getAttributeCalledInverseAttribute();
-      var listOfInverseAttributeEntries = this._attribute.getEntriesForAttribute(attributeCalledInverseAttribute);
-      if (listOfInverseAttributeEntries.length > 0) {
-        // alert(this._attribute.getDisplayString());
-        // alert(listOfInverseAttributeEntries[0].getDisplayString());
-        var inverseAttr = listOfInverseAttributeEntries[0].getValue(this._attribute);
+      var inverseAttributeEntry = this._attribute.getSingleEntryFromAttribute(attributeCalledInverseAttribute);
+      if (inverseAttributeEntry) {
+        var inverseAttr = inverseAttributeEntry.getValue(this._attribute);
         this._entry = this._item.replaceEntryWithConnection(this._entry, this._attribute, value, inverseAttr);
-      }
-      else {
+      } else {
         this._entry = this._item.replaceEntryWithEntryForAttribute(this._entry, this._attribute, value);
       }
       var superview = this.getSuperview();

Modified: trunk/source/view/SectionView.js
===================================================================
--- trunk/source/view/SectionView.js	2005-07-26 07:25:51 UTC (rev 262)
+++ trunk/source/view/SectionView.js	2005-07-26 19:26:09 UTC (rev 263)
@@ -99,7 +99,7 @@
 
   this._pluginView = null;
   this._pluginDiv = null;
-  this._sectionSummaryView = null;
+  // this._sectionSummaryView = null;
   this._headerView = null;
   this._queryEditSpan = null;
   
@@ -189,7 +189,7 @@
   } else {
     // refresh the <h2> element with the value: this._section.getDisplayName();  
     this._refreshQueryEditSpan();
-    this._sectionSummaryView.refresh();
+    // this._sectionSummaryView.refresh();
     this._pluginView.refresh();
     this._headerView.refresh();
   }
@@ -220,28 +220,21 @@
   var sectionDiv = this.getHtmlElement();
   var headerH2 = View.appendNewElement(sectionDiv, "h2");
   var attributeCalledName = this.getWorld().getAttributeCalledName();
-  var attributeCalledSummary = this.getWorld().getAttributeCalledSummary();
+  // var attributeCalledSummary = this.getWorld().getAttributeCalledSummary();
   this._headerView = new EntryView(this, headerH2, this._section, attributeCalledName,
     this._section.getSingleEntryFromAttribute(attributeCalledName));
-  var summaryDiv = View.appendNewElement(sectionDiv, "div");
-  this._sectionSummaryView = new EntryView(this, summaryDiv, this._section, attributeCalledSummary,
-    this._section.getSingleEntryFromAttribute(attributeCalledSummary), true);
-  View.appendNewElement(sectionDiv, "p");
+  // var summaryDiv = View.appendNewElement(sectionDiv, "div");
+  // this._sectionSummaryView = new EntryView(this, summaryDiv, this._section, attributeCalledSummary,
+  //   this._section.getSingleEntryFromAttribute(attributeCalledSummary), true);
+  // View.appendNewElement(sectionDiv, "p");
 
   // create the editing controls, if we're in edit mode
   var controlArea = View.appendNewElement(sectionDiv, "p", RootView.CSS_CLASS_EDIT_TOOL, null, "Show me a ");
-  // var textShowMeA = document.createTextNode("Show me a ");
-  // controlArea.appendChild(textShowMeA);
-
-  // PENDING: We shouldn't call the private method _getUuid()
-  // var selectMenuId = SectionView.ELEMENT_ID_SELECT_MENU_PREFIX + this._section._getUuid();
   var selectElement = View.appendNewElement(controlArea, "select");
-  var optionElement;
   var listener;
-  // selectElement.setAttribute("name", selectMenuId);
   for (var key in SectionView._ourHashTableOfPluginClassesKeyedByPluginItemUuid) {
     var pluginClass = SectionView._ourHashTableOfPluginClassesKeyedByPluginItemUuid[key];
-    optionElement = View.appendNewElement(selectElement, "option");
+    var optionElement = View.appendNewElement(selectElement, "option");
     optionElement.selected = (selectedPluginClass == pluginClass);
     optionElement.value = pluginClass.getPluginItemUuid();
     var pluginItem = this.getWorld().getItemFromUuid(pluginClass.getPluginItemUuid());
@@ -249,12 +242,8 @@
     listener = this; 
     Util.addEventListener(optionElement, "click", function(event) {listener.clickOnPluginSelectionMenu(event);});
   }
-  
   View.appendNewTextNode(controlArea," of items whose ");
-
   this._queryEditSpan = View.appendNewElement(controlArea, "span");
-  // this._refreshQueryEditSpan();
-
   View.appendNewTextNode(controlArea,".");
 
   // create a div element for the plugin class to use

Modified: trunk/source/view/SuggestionBox.js
===================================================================
--- trunk/source/view/SuggestionBox.js	2005-07-26 07:25:51 UTC (rev 262)
+++ trunk/source/view/SuggestionBox.js	2005-07-26 19:26:09 UTC (rev 263)
@@ -71,16 +71,11 @@
   if (!this._selectedItem) {
     // check if typed item is identical to suggested item
     var editValue = this._inputField.value;
-    // for (var i = 0; i < this._listOfSuggestedItems.length; ++i) {
-    //   var item = this._listOfSuggestedItems[i];
-    for (var key in this._listOfSuggestedItems) {
-      var item = this._listOfSuggestedItems[key];
-      if (editValue.toLowerCase() == item.getDisplayName().toLowerCase()) {
+    for (var i in this._listOfSuggestedItems) {
+      var item = this._listOfSuggestedItems[i];
+      if (item.doesStringMatchName(editValue)) {
         return item;
       }
-      if (editValue.toLowerCase() == item.getDisplayString().toLowerCase()) {
-        return item;
-      }
     }
   }
   return this._selectedItem;



From chaolam at berlios.de  Wed Jul 27 01:36:31 2005
From: chaolam at berlios.de (Chih-Chao Lam at BerliOS)
Date: Wed, 27 Jul 2005 01:36:31 +0200
Subject: [openrecord-svn] r264 - trunk/documentation
Message-ID: <200507262336.j6QNaVgC021436@sheep.berlios.de>

Author: chaolam
Date: 2005-07-27 01:36:26 +0200 (Wed, 27 Jul 2005)
New Revision: 264

Modified:
   trunk/documentation/release_planning.txt
Log:
added new task requests from Mimi


Modified: trunk/documentation/release_planning.txt
===================================================================
--- trunk/documentation/release_planning.txt	2005-07-26 19:26:09 UTC (rev 263)
+++ trunk/documentation/release_planning.txt	2005-07-26 23:36:26 UTC (rev 264)
@@ -251,13 +251,13 @@
        |          |         |  5. Attempt to embed an OpenRecord view in a MediaWiki page
        |          |         |  6. Refactor our observer notification API (and implementation)
 chao   | 0.5  IED |         |  7. Wire up observers & keep views in sync
-chao   |          | done?   |  8. be able to select a lozenge 
+chao   |          | done    |  8. be able to select a lozenge 
        |          |         |  9. be able to select a table row 
        |          |         | 10. be able to select a non-lozenge literal entry
        |          |         | 11. be able to select the text within an entry
-chao   |          | done?   | 12. be able to delete a selected lozenge 
+chao   |          | done    | 12. be able to delete a selected lozenge 
        |          |         | 13. be able to delete a selected table row 
-chao   | 0.5  IED |         | 14. improve keyboard navigation: tab, arrow, and return keys
+chao   | 0.5  IED | done    | 14. improve keyboard navigation: tab, arrow, and return keys
 mignon |          | done?   | 15. Get data model to pass the ordinal unit tests again
        |          |copy/move? 16. drag-and-drop lozenges
        |          |       >>| 17. drag-and-drop to re-order navbar menu items
@@ -281,6 +281,13 @@
        |          |         |     config option so that only logged-in users have read-access
        |          |         |     have an "icon" attribute, and use icons in suggestion box and in EntryView
        |          |         |     run in IE as well as Firefox
+chao   |0.25 IED  |         |     Show start time for DateValues if time was entered
+chao   |0.25 IED  |         |     Suppport for relative date entry e.g. "today", "end of day/week", "tomorrow"
+chao   |0.25 IED  |         |     Display relative dates for entries e.g. "today"
+chao   |0.25 IED  |         |     Support for Year/Month entry for DateValue, e.g. 2005/07, July 2005
+chao   |0.25 IED  |         |     Support anchor links to each section on a PageView
+chao   |0.25 IED  |         |     Make currently sorted column to have a special CSS class so that it can look different
+chao   |0.25 IED  |         |     Resolve: How should table cells deal with <enter>, move down a cell or to the right?
 -------+----------+---------+----------------------------------------------
        |          |         | 26. Set up an OpenRecord.org "dogfood" site & hand-copy info into it
        |          |         | 27. Write one unit test that tests GUI code



From skinner at berlios.de  Wed Jul 27 20:52:46 2005
From: skinner at berlios.de (Brian Douglas Skinner at BerliOS)
Date: Wed, 27 Jul 2005 20:52:46 +0200
Subject: [openrecord-svn] r265 - in trunk: documentation source source/model source/view
Message-ID: <200507271852.j6RIqkwg016666@sheep.berlios.de>

Author: skinner
Date: 2005-07-27 20:52:44 +0200 (Wed, 27 Jul 2005)
New Revision: 265

Modified:
   trunk/documentation/release_planning.txt
   trunk/source/base_style.css
   trunk/source/model/DeltaVirtualServer.js
   trunk/source/model/StubVirtualServer.js
   trunk/source/view/EntryView.js
   trunk/source/view/MultiEntriesView.js
   trunk/source/view/NavbarView.js
Log:
Added ability to drag-and-drop menu items to re-order the navbar menu.  Uses the "Sortable" feature in the script.aculo.us dragdrop.js library, as well as our own new ordinal code.

Modified: trunk/documentation/release_planning.txt
===================================================================
--- trunk/documentation/release_planning.txt	2005-07-26 23:36:26 UTC (rev 264)
+++ trunk/documentation/release_planning.txt	2005-07-27 18:52:44 UTC (rev 265)
@@ -260,7 +260,7 @@
 chao   | 0.5  IED | done    | 14. improve keyboard navigation: tab, arrow, and return keys
 mignon |          | done?   | 15. Get data model to pass the ordinal unit tests again
        |          |copy/move? 16. drag-and-drop lozenges
-       |          |       >>| 17. drag-and-drop to re-order navbar menu items
+brian  |          | 0.5     | 17. drag-and-drop to re-order navbar menu items
        |          |         | 18. drag-and-drop to re-order table rows
        |          |       >>| 19. drag-and-drop to re-order table columns
        |          |         | 20. improve UI for "add new attribute" in Table View 
@@ -281,13 +281,13 @@
        |          |         |     config option so that only logged-in users have read-access
        |          |         |     have an "icon" attribute, and use icons in suggestion box and in EntryView
        |          |         |     run in IE as well as Firefox
-chao   |0.25 IED  |         |     Show start time for DateValues if time was entered
-chao   |0.25 IED  |         |     Suppport for relative date entry e.g. "today", "end of day/week", "tomorrow"
-chao   |0.25 IED  |         |     Display relative dates for entries e.g. "today"
-chao   |0.25 IED  |         |     Support for Year/Month entry for DateValue, e.g. 2005/07, July 2005
-chao   |0.25 IED  |         |     Support anchor links to each section on a PageView
-chao   |0.25 IED  |         |     Make currently sorted column to have a special CSS class so that it can look different
-chao   |0.25 IED  |         |     Resolve: How should table cells deal with <enter>, move down a cell or to the right?
+chao   | 0.25 IED |         |     Show start time for DateValues if time was entered
+chao   | 0.25 IED |         |     Suppport for relative date entry e.g. "today", "end of day/week", "tomorrow"
+chao   | 0.25 IED |         |     Display relative dates for entries e.g. "today"
+chao   | 0.25 IED |         |     Support for Year/Month entry for DateValue, e.g. 2005/07, July 2005
+chao   | 0.25 IED |         |     Support anchor links to each section on a PageView
+chao   | 0.25 IED |         |     Make currently sorted column to have a special CSS class so that it can look different
+chao   | 0.25 IED |         |     Resolve: How should table cells deal with <enter>, move down a cell or to the right?
 -------+----------+---------+----------------------------------------------
        |          |         | 26. Set up an OpenRecord.org "dogfood" site & hand-copy info into it
        |          |         | 27. Write one unit test that tests GUI code

Modified: trunk/source/base_style.css
===================================================================
--- trunk/source/base_style.css	2005-07-26 23:36:26 UTC (rev 264)
+++ trunk/source/base_style.css	2005-07-27 18:52:44 UTC (rev 265)
@@ -264,6 +264,7 @@
 .menu_item {
   list-style: none;
   margin: 0;
+  cursor: move;
 }
 
 .menu_item a {
@@ -277,6 +278,32 @@
   color: rgb(0%, 0%, 0%); 
 }
 
+.class_fake_menu {    // PENDING: delete me
+  padding-left: 0;
+  padding-top: 0pt;
+  padding-bottom: 20pt;
+  margin-left: 0;
+  list-style-type: none;
+  width: 80pt;
+}
+
+.class_fake_menu_item {    // PENDING: delete me
+  list-style: none;
+  margin: 0;
+  cursor: move;
+}
+
+.class_fake_menu_item span {    // PENDING: delete me
+  display: block;
+  width: 100%;
+  padding: 5pt 0pt 5pt 5pt;
+  text-decoration: none; 
+  border-left: solid 1pt #CCCCCC;
+  border-top: solid 1pt #CCCCCC;
+  border-bottom: solid 1pt #CCCCCC;
+  color: rgb(0%, 0%, 0%); 
+}
+
 .menu_item a:link {
   color: #0066CC; 
   background-color: rgb(100%, 100%, 100%);

Modified: trunk/source/model/DeltaVirtualServer.js
===================================================================
--- trunk/source/model/DeltaVirtualServer.js	2005-07-26 23:36:26 UTC (rev 264)
+++ trunk/source/model/DeltaVirtualServer.js	2005-07-27 18:52:44 UTC (rev 265)
@@ -252,7 +252,7 @@
 
     if (record instanceof Vote) {
       var vote = record;
-      entryDisplayNameSubstring = this.truncateString(vote.getContentRecord().getDisplayString());
+      entryDisplayNameSubstring = this._getTypedDisplayStringForItem(vote.getContentRecord());
       var deleteVsRetainString = vote.getRetainFlag() ? "RETAIN" : "DELETE";
       listOfStrings.push(indent + '// vote to ' + deleteVsRetainString + " " + entryDisplayNameSubstring + '\n');
       listOfStrings.push(indent + '{ "' + StubVirtualServer.JSON_MEMBER_VOTE_CLASS + '": ' + '{\n');
@@ -265,12 +265,12 @@
 
     if (record instanceof Ordinal) {
       var ordinal = record;
-      entryDisplayNameSubstring = this.truncateString(ordinal.getContentRecord().getDisplayString());
+      entryDisplayNameSubstring = this._getTypedDisplayStringForItem(ordinal.getContentRecord());
       listOfStrings.push(indent + '// ordinal # ' + ordinal.getOrdinalNumber() + " for " + entryDisplayNameSubstring + '\n');
       listOfStrings.push(indent + '{ "' + StubVirtualServer.JSON_MEMBER_ORDINAL_CLASS + '": ' + '{' + '\n');
       listOfStrings.push(indent + '         "' + StubVirtualServer.JSON_MEMBER_UUID + '": "' + ordinal._getUuid() + '",\n');
-      listOfStrings.push(indent + '    "' + StubVirtualServer.JSON_MEMBER_RECORD + '": "' + ordinal.getContentRecord()._getUuid() + '",\n');
-      listOfStrings.push(indent + '    "' + StubVirtualServer.JSON_MEMBER_ORDINAL_NUMBER + '": "' + ordinal.getOrdinalNumber() + '"');
+      listOfStrings.push(indent + '       "' + StubVirtualServer.JSON_MEMBER_RECORD + '": "' + ordinal.getContentRecord()._getUuid() + '",\n');
+      listOfStrings.push(indent + '        "' + StubVirtualServer.JSON_MEMBER_ORDINAL_NUMBER + '": "' + ordinal.getOrdinalNumber() + '"');
       listOfStrings.push('  }\n');
       listOfStrings.push(indent + '}');
     }

Modified: trunk/source/model/StubVirtualServer.js
===================================================================
--- trunk/source/model/StubVirtualServer.js	2005-07-26 23:36:26 UTC (rev 264)
+++ trunk/source/model/StubVirtualServer.js	2005-07-27 18:52:44 UTC (rev 265)
@@ -72,7 +72,7 @@
 StubVirtualServer.JSON_MEMBER_RECORD = "record";
 StubVirtualServer.JSON_MEMBER_ITEM = "item";
 StubVirtualServer.JSON_MEMBER_RETAIN_FLAG = "retainFlag";
-StubVirtualServer.JSON_MEMBER_ORDINAL_NUMBER = "ordinalNumber";
+StubVirtualServer.JSON_MEMBER_ORDINAL_NUMBER = "value";
 
 StubVirtualServer.prototype._generateUuid = function(arg1) {
   return Uuid.generateTimeBasedUuid(arg1);

Modified: trunk/source/view/EntryView.js
===================================================================
--- trunk/source/view/EntryView.js	2005-07-26 23:36:26 UTC (rev 264)
+++ trunk/source/view/EntryView.js	2005-07-27 18:52:44 UTC (rev 265)
@@ -252,9 +252,9 @@
     var connectionType  = this.getWorld().getItemFromUuid(World.UUID_FOR_TYPE_CONNECTION);
     if (dataType == itemType || dataType == connectionType) {
       if (this._isLozenge()) {
-        if (this.isInEditMode() && !this.draggable) {
+        if (this.isInEditMode() && !this._draggable) {
           this._textSpan.or_entryView = this; 
-          this.draggable = new Draggable(this._textSpan, {revert:true});
+          this._draggable = new Draggable(this._textSpan, {revert:true});
         }
       }
       else {

Modified: trunk/source/view/MultiEntriesView.js
===================================================================
--- trunk/source/view/MultiEntriesView.js	2005-07-26 23:36:26 UTC (rev 264)
+++ trunk/source/view/MultiEntriesView.js	2005-07-27 18:52:44 UTC (rev 265)
@@ -329,7 +329,7 @@
   if (this.isInEditMode()) {
     htmlElement.onclick = this._handleOwnClick.bindAsEventListener(this);
     var listener = this;
-    Droppables.add(htmlElement, {accept: [EntryView.CSS_CLASS_CONNECTION_VALUE,EntryView.CSS_ITEM_VALUE,EntryView.CSS_CLASS_SELECTED],
+    Droppables.add(htmlElement, {accept: [EntryView.CSS_CLASS_CONNECTION_VALUE, EntryView.CSS_ITEM_VALUE, EntryView.CSS_CLASS_SELECTED],
       hoverclass: "test",
       onDrop: function(element) {listener._handleDrop(element);}});
   } 

Modified: trunk/source/view/NavbarView.js
===================================================================
--- trunk/source/view/NavbarView.js	2005-07-26 23:36:26 UTC (rev 264)
+++ trunk/source/view/NavbarView.js	2005-07-27 18:52:44 UTC (rev 265)
@@ -36,6 +36,7 @@
 // 
 /*global window */
 /*global RootView */
+/*global Sortable */
 // -------------------------------------------------------------------
 
 
@@ -45,7 +46,12 @@
 NavbarView.CSS_CLASS_MENU      = "menu";
 NavbarView.CSS_CLASS_MENU_ITEM = "menu_item";
 
+// Caution: 
+// In order for us to use the "Sortable" feature in the script.aculo.us 
+// dragdrop.js library, this Id must *not* have an underscore in it.
+NavbarView.ELEMENT_ID_MENU     = "MainMenu";  
 
+
 /**
  * The RootView uses an instance of a NavbarView to display a navigation
  * bar, with links to pages.
@@ -59,6 +65,8 @@
 function NavbarView(superview, htmlElement, htmlElementForAnchors) {
   View.call(this, superview, htmlElement, "NavbarView");
   this._htmlElementForAnchors = htmlElementForAnchors;
+  this._liElementBeingTouched = null;
+  // this._listOfPages = null;
 }
 
 
@@ -81,6 +89,73 @@
 // -------------------------------------------------------------------
 
 /**
+ * Called whenever there is a mousedown event on one of the menu item
+ * html "li" elements.  All we do here is record which element is 
+ * being touched, because we may need that info later on in the 
+ * _sortOrderUpdate() method. 
+ *
+ * @scope    public instance method
+ * @param    event    The mousedown event object. 
+ * @param    liElement    The HTMLElement for this menu item. 
+ */
+NavbarView.prototype._mouseDownOnMenuItem = function(event, liElement) {
+  this._liElementBeingTouched = liElement;
+};
+
+
+/**
+ * Called by the "Sortable" feature in the script.aculo.us dragdrop.js library.
+ * This method gets called when the user drags and drops a menu item in the
+ * Navbar.  We only get called if the new location of the menu item is 
+ * different from the old location.
+ *
+ * @scope    public instance method
+ * @param    ulElement    The "ul" HTMLElement for the menu of menu items. 
+ */
+NavbarView.prototype._sortOrderUpdate = function(ulElement) {
+  Util.assert(this._liElementBeingTouched !== null);
+  
+  var liElementPrefixString = NavbarView.ELEMENT_ID_MENU + '_';
+  var menuItemElementId = this._liElementBeingTouched.id;
+  var pageUuid = menuItemElementId.replace(liElementPrefixString, '');
+  var pageToReorder = this.getWorld().getItemFromUuid(pageUuid);
+  
+  var listOfPages = this._getNewOrderingForPageList(ulElement);
+  
+  var arrayIndex = Util.getArrayIndex(listOfPages, pageToReorder);
+  Util.assert(arrayIndex != -1);
+  var pageAbove = (arrayIndex === 0) ? null : listOfPages[arrayIndex-1];
+  var pageBelow = (arrayIndex > listOfPages.length) ? null : listOfPages[arrayIndex+1];
+  pageToReorder.reorderBetween(pageAbove, pageBelow);
+};
+
+
+/**
+ * Returns a list of page items, arranged in the new order that resulted
+ * from the most recent drag-and-drop re-ordering.
+ *
+ * @scope    public instance method
+ * @param    ulElement    The "ul" HTMLElement for the menu of menu items. 
+ * @return   A list of items representing pages.
+ */
+NavbarView.prototype._getNewOrderingForPageList = function(ulElement) {
+  // The string '[]=' is used by the "Sortable" feature in the script.aculo.us 
+  // dragdrop.js library within each token in the serialization string.
+  var prefixString = NavbarView.ELEMENT_ID_MENU + '[]=';
+  
+  var serializationString = Sortable.serialize(ulElement);
+  var listOfTokens = serializationString.split('&');
+  var listOfPages = [];
+  for (var i in listOfTokens) {
+    var uuidForPage = listOfTokens[i].replace(prefixString, '');
+    var page = this.getWorld().getItemFromUuid(uuidForPage);
+    listOfPages.push(page);
+  }
+  return listOfPages;
+};
+
+
+/**
  * Re-creates the HTML for the view, and hands the HTML to the 
  * browser to be re-drawn.
  *
@@ -98,24 +173,32 @@
     page = listOfPages[key];
     var anchorName = RootView.URL_PAGE_PREFIX + page._getUuid();
     View.appendNewElement(this._htmlElementForAnchors, "a", null, {name: anchorName});
-    // anchor.setAttribute("name", RootView.URL_PAGE_PREFIX + page._getUuid());
   }
   
   var divElement = this.getHtmlElement();
   View.removeChildrenOfElement(divElement); 
-  var ulElement = View.appendNewElement(divElement, "ul", NavbarView.CSS_CLASS_MENU);
+  var ulElement = View.appendNewElement(divElement, "ul", NavbarView.CSS_CLASS_MENU, {id: NavbarView.ELEMENT_ID_MENU});
   var rootView = this.getRootView();
   for (key in listOfPages) {
     page = listOfPages[key];
     page.addObserver(this);
-    var liElement = View.appendNewElement(ulElement, "li", NavbarView.CSS_CLASS_MENU_ITEM);
     var menuUrl = rootView.getUrlForItem(page);
     var menuText = page.getDisplayString();
+    // Caution: 
+    // In order for us to use the "Sortable" feature in the script.aculo.us 
+    // dragdrop.js library, this menuItemId must have exactly one underscore in
+    // it, with the id for the whole menu is to the left of the underscore, and
+    // the id for the individual menu item to the right of the underscore.
+    var menuItemId = NavbarView.ELEMENT_ID_MENU + '_' + page._getUuid();
+    var liElement = View.appendNewElement(ulElement, "li", NavbarView.CSS_CLASS_MENU_ITEM, {id: menuItemId});
     var anchorElement = View.appendNewElement(liElement, "a", null, {href: menuUrl}, menuText);
-    // anchorElement.setAttribute("href", menuUrl);
-    // View.appendNewTextNode(anchorElement, menuText);
-    anchorElement.onclick = RootView.clickOnLocalLink.bindAsEventListener();
+    Event.observe(anchorElement, "click", RootView.clickOnLocalLink.bindAsEventListener());
+    Event.observe(liElement, "mousedown", this._mouseDownOnMenuItem.bindAsEventListener(this, liElement));
   }
+  var listener = this;
+  Sortable.create(NavbarView.ELEMENT_ID_MENU, {
+    onUpdate: function(element){ listener._sortOrderUpdate(element);}
+  });
   
   var newPageButton = View.appendNewElement(divElement, "input", RootView.CSS_CLASS_EDIT_TOOL);
   newPageButton.type = "button";



From skinner at berlios.de  Thu Jul 28 19:35:48 2005
From: skinner at berlios.de (Brian Douglas Skinner at BerliOS)
Date: Thu, 28 Jul 2005 19:35:48 +0200
Subject: [openrecord-svn] r266 - trunk/source/view
Message-ID: <200507281735.j6SHZmHq013089@sheep.berlios.de>

Author: skinner
Date: 2005-07-28 19:35:41 +0200 (Thu, 28 Jul 2005)
New Revision: 266

Modified:
   trunk/source/view/EntryView.js
Log:
We now use non-breaking space characters (same as &nbsp; in HTML) for the text in a lozenge, so that the lozenge does not wrap from one line to the next.

Modified: trunk/source/view/EntryView.js
===================================================================
--- trunk/source/view/EntryView.js	2005-07-27 18:52:44 UTC (rev 265)
+++ trunk/source/view/EntryView.js	2005-07-28 17:35:41 UTC (rev 266)
@@ -218,7 +218,7 @@
   var htmlElement = this.getHtmlElement();
   View.removeChildrenOfElement(htmlElement);
   
-  var textString = this._getText();
+  var textString = this._getText(true);
   var className = (this._isProvisional ? EntryView.CSS_CLASS_PROVISIONAL : '');
   this._textSpan = View.appendNewElement(htmlElement, "span", className, null);
   this._textNode = View.appendNewTextNode(this._textSpan, textString);
@@ -522,9 +522,22 @@
  *
  * @scope    private instance method
  */
-EntryView.prototype._getText = function() {
-  if (this._isProvisional) {return this._provisionalText;}
-  if (this._entry) {return this._item.getDisplayStringForEntry(this._entry);}
+EntryView.prototype._getText = function(useNonBreakingSpaces) {
+  if (this._isProvisional) {
+    return this._provisionalText;
+  }
+  if (this._entry) {
+    var text = this._item.getDisplayStringForEntry(this._entry);
+    if (useNonBreakingSpaces) {
+      var dataType = this._entry.getType();
+      if (dataType != this.getWorld().getTypeCalledText()) {
+        var regExpForAllSpaces = new RegExp(' ','g');
+        var unicodeNonBreakingSpace = '\u00a0'; // The same as &nbsp; in HTML
+        text = text.replace(regExpForAllSpaces, unicodeNonBreakingSpace);
+      }
+    }
+    return text;
+  }
   return '';
 };
 
@@ -535,11 +548,11 @@
  * @scope    private instance method
  */
 EntryView.prototype._restoreText = function(dontSelect) {
-  var oldText = (this._entry) ?  this._getText() : '';
+  var useNonBreakingSpaces = !this._isEditing;
+  var oldText = (this._entry) ?  this._getText(useNonBreakingSpaces) : '';
   if (this._isEditing) {
     this._editField.value = oldText;
-  }
-  else {
+  } else {
     this._textNode.data = oldText;
   }
   if (!dontSelect) {this._editField.select();}



From skinner at berlios.de  Fri Jul 29 07:04:04 2005
From: skinner at berlios.de (Brian Douglas Skinner at BerliOS)
Date: Fri, 29 Jul 2005 07:04:04 +0200
Subject: [openrecord-svn] r267 - in trunk: documentation source source/model source/view
Message-ID: <200507290504.j6T5446M003215@sheep.berlios.de>

Author: skinner
Date: 2005-07-29 07:03:56 +0200 (Fri, 29 Jul 2005)
New Revision: 267

Modified:
   trunk/documentation/release_planning.txt
   trunk/source/TablePlugin.js
   trunk/source/base_style.css
   trunk/source/model/DeltaVirtualServer.js
   trunk/source/view/NavbarView.js
   trunk/source/view/RootView.js
Log:
Added drag-and-drop to re-order table columns.  Plus some minor bug fixing in RootView and NavbarView.

Modified: trunk/documentation/release_planning.txt
===================================================================
--- trunk/documentation/release_planning.txt	2005-07-28 17:35:41 UTC (rev 266)
+++ trunk/documentation/release_planning.txt	2005-07-29 05:03:56 UTC (rev 267)
@@ -262,7 +262,7 @@
        |          |copy/move? 16. drag-and-drop lozenges
 brian  |          | 0.5     | 17. drag-and-drop to re-order navbar menu items
        |          |         | 18. drag-and-drop to re-order table rows
-       |          |       >>| 19. drag-and-drop to re-order table columns
+brian  |          | 0.5     | 19. drag-and-drop to re-order table columns
        |          |         | 20. improve UI for "add new attribute" in Table View 
 brian  | 1    IED |         | 21. Rationalize our CSS style sheet approach
        |          |         | 22. Reach consensus on (colors, padding, and borders) and then implement

Modified: trunk/source/TablePlugin.js
===================================================================
--- trunk/source/TablePlugin.js	2005-07-28 17:35:41 UTC (rev 266)
+++ trunk/source/TablePlugin.js	2005-07-29 05:03:56 UTC (rev 267)
@@ -35,9 +35,11 @@
 // Dependencies, expressed in the syntax that JSLint understands:
 // 
 /*global window, document, HTMLTableRowElement  */
+/*global Draggable, Droppables,  */
 /*global Util  */
 /*global Item  */
-/*global View, MultiEntriesView  */
+/*global CsvParser  */
+/*global View, MultiEntriesView, EntryView, RootView  */
 // -------------------------------------------------------------------
 
 
@@ -117,7 +119,7 @@
  * @param    itemB    One of the two items to be compared. 
  * @return   This method returns 0 if the items are comparable. If _ascendingOrder is true, itemA is less than itemB, this method returns -1, otherwise it returns +1. 
  */
-TablePlugin.prototype.compareItemByAttribute = function(itemA, itemB) {
+TablePlugin.prototype.compareItemsBySortAttribute = function(itemA, itemB) {
   Util.assert(this._sortAttribute !== null);
   var strA = itemA.getSingleStringValueFromAttribute(this._sortAttribute).toLowerCase();
   var strB = itemB.getSingleStringValueFromAttribute(this._sortAttribute).toLowerCase();
@@ -129,63 +131,61 @@
 
 
 /**
- * Creates an array containing all the attributes of the content items 
- * in this table.  Populates list of suggested items for relevant attributes
+ * Returns a list of all the attributes that this table should have columns for.
  *
  * @scope    private instance method
  */
-TablePlugin.prototype._buildAttributes = function() {
-  var repository = this.getWorld();
-  var attrTableColumns = repository.getItemFromUuid(TablePlugin.UUID_FOR_ATTRIBUTE_TABLE_COLUMNS);
-  var entriesTableColumns = this._layout.getEntriesForAttribute(attrTableColumns);
-  var displayAttrs = [];
+TablePlugin.prototype._getListOfColumns = function() {
+  var world = this.getWorld();
+  var attributeTableColumns = world.getItemFromUuid(TablePlugin.UUID_FOR_ATTRIBUTE_TABLE_COLUMNS);
+  var listOfTableColumnEntries = this._layout.getEntriesForAttribute(attributeTableColumns);
+  var displayAttributes = [];
   var anAttribute;
-  if (entriesTableColumns.length > 0) {
-    for (var i=0;i<entriesTableColumns.length;++i) {
-      anAttribute = entriesTableColumns[i].getValue();
+  if (listOfTableColumnEntries.length > 0) {
+    // If we get here, it means this table has a saved list of user-selected
+    // columns, and we just want to use that list.
+    for (var i in listOfTableColumnEntries) {
+      anAttribute = listOfTableColumnEntries[i].getValue();
       Util.assert(anAttribute instanceof Item);
-      displayAttrs.push(anAttribute);
+      displayAttributes.push(anAttribute);
     }
-  }
-  else {
-    var hashTableOfAttributes = this._buildAttributeHashFromScratch();
+  } else {
+    // If we get here, it means this table did not have a saved list of 
+    // user-selected columns, so we need to come up with a list.
+    // We will build a list of display attributes by looking at all the items in 
+    // the table and finding the union of all the attributes of those items.
+    var attributeCalledCategory = this.getWorld().getAttributeCalledCategory();
+    var hashTableOfAttributes = {};
+    for (var j in this._listOfItems) {
+      var contentItem = this._listOfItems[j];
+      var listOfAttributesForItem = contentItem.getAttributes();
+      for (var k in listOfAttributesForItem) {
+        var attribute = listOfAttributesForItem[k];
+        if (attribute != attributeCalledCategory) {
+          var attributeKeyString = attribute.getUniqueKeyString();
+          hashTableOfAttributes[attributeKeyString] = attribute;
+        }
+      }
+    }
+    
+    if (Util.lengthOfHashTable(hashTableOfAttributes) < 1) {
+      // If we have not yet identified any display attributes to use as
+      // column headers, then we'll just use the "Name" attribute so that
+      // our table will have at least one column.
+      var attributeCalledName = this.getWorld().getAttributeCalledName();
+      var keyString = attributeCalledName.getUniqueKeyString();
+      hashTableOfAttributes[keyString] = attributeCalledName;
+    }
     for (var key in hashTableOfAttributes) {
       anAttribute = hashTableOfAttributes[key];
-      displayAttrs.push(anAttribute);
+      displayAttributes.push(anAttribute);
     }
   }
-  this._displayAttributes = displayAttrs;
+  return displayAttributes;
 };
 
 
 /**
- *
- */
-TablePlugin.prototype._buildAttributeHashFromScratch = function() {
-  var attributeCalledCategory = this.getWorld().getAttributeCalledCategory();
-  var hashTableOfAttributes = {};
-  for (var iKey in this._listOfItems) {
-    var contentItem = this._listOfItems[iKey];
-    var listOfAttributesForItem = contentItem.getAttributes();
-    for (var attributeKey in listOfAttributesForItem) {
-      var attribute = listOfAttributesForItem[attributeKey];
-      if (attribute != attributeCalledCategory) {
-        var attributeKeyString = attribute.getUniqueKeyString();
-        hashTableOfAttributes[attributeKeyString] = attribute;
-      }
-    }
-  }
-  
-  if (Util.lengthOfHashTable(hashTableOfAttributes) < 1) {
-    var attributeCalledName = this.getWorld().getAttributeCalledName();
-    var key = attributeCalledName.getUniqueKeyString();
-    hashTableOfAttributes[key] = attributeCalledName;
-  }
-  return hashTableOfAttributes;
-};
-
-
-/**
  * Builds editor to add/remove attribute columns of table
  *
  * @scope    private instance method
@@ -312,10 +312,81 @@
 /**
  *
  */
-TablePlugin.prototype._handleDrop = function(element) {
-  alert('table plugin: ' + element + ' was dropped on ' + this);
+TablePlugin.prototype._handleDrop = function(elementThatWasDragged, droppableObject) {
+  // First figure out what column header was dropped where
+  var world = this.getWorld();
+  var draggedUuid = elementThatWasDragged.getAttribute('uuid');
+  var draggedAttribute = world.getItemFromUuid(draggedUuid);
+  var headerCellElement = droppableObject.element;
+  var headerCellUuid = headerCellElement.getAttribute('uuid');
+  var droppedOnAttribute = world.getItemFromUuid(headerCellUuid);
+  var indexOfDraggedAttribute = Util.getArrayIndex(this._displayAttributes, draggedAttribute);
+  var indexOfDroppedOnAttribute = Util.getArrayIndex(this._displayAttributes, droppedOnAttribute);
+
+  // If the user dragged a column header and dropped it on the same column 
+  // header, then we don't need to change the column order.
+  if (indexOfDraggedAttribute == indexOfDroppedOnAttribute) {
+    return;
+  }
+
+  // This is a little hack that accesses instance variables of the "Draggable"
+  // object in the script.aculo.us dragdrop.js library.
+  // We set "revert" to false to prevent the UI animation where the dragged 
+  // column header goes "flying" home again
+  var draggable = elementThatWasDragged.or_draggable;
+  draggable.options.revert = false;
+
+  // Now we need to save the new column order to the repository.
+  var attributeTableColumns = world.getItemFromUuid(TablePlugin.UUID_FOR_ATTRIBUTE_TABLE_COLUMNS);
+  var listOfTableColumnEntries = this._layout.getEntriesForAttribute(attributeTableColumns);
+  if (listOfTableColumnEntries.length > 0) {
+    // If we get here, it means this table has a saved list of user-selected
+    // columns, and we just want to re-order that list.
+    Util.assert(this._displayAttributes.length == listOfTableColumnEntries.length);
+    var draggedEntry = listOfTableColumnEntries[indexOfDraggedAttribute];
+    var droppedOnEntry = listOfTableColumnEntries[indexOfDroppedOnAttribute];
+    if (indexOfDraggedAttribute > indexOfDroppedOnAttribute) {
+      // the user dragged the column to the left
+      var entryBeforeDroppedOnEntry = null;
+      if (indexOfDroppedOnAttribute > 0) {
+        entryBeforeDroppedOnEntry = listOfTableColumnEntries[indexOfDroppedOnAttribute-1];
+      }
+      draggedEntry.reorderBetween(entryBeforeDroppedOnEntry, droppedOnEntry);
+    }
+    if (indexOfDraggedAttribute < indexOfDroppedOnAttribute) {
+      // the user dragged the column to the right
+      var entryAfterDroppedOnEntry = null;
+      if (indexOfDroppedOnAttribute < (listOfTableColumnEntries.length - 1)) {
+        entryAfterDroppedOnEntry = listOfTableColumnEntries[indexOfDroppedOnAttribute+1];
+      }
+      draggedEntry.reorderBetween(droppedOnEntry, entryAfterDroppedOnEntry);
+    }
+  } else {
+    // If we get here, it means we need to save a newly created list of
+    // user-selected columns.
+    this._displayAttributes.splice(indexOfDraggedAttribute, 1);
+    if (indexOfDraggedAttribute > indexOfDroppedOnAttribute) {
+      // the user dragged the column to the left
+      this._displayAttributes.splice(indexOfDroppedOnAttribute, 0, draggedAttribute);
+    }
+    if (indexOfDraggedAttribute < indexOfDroppedOnAttribute) {
+      // the user dragged the column to the right
+      this._displayAttributes.splice(indexOfDroppedOnAttribute, 0, draggedAttribute);
+    }
+    world.beginTransaction();
+    // alertString = "";
+    for (var i in this._displayAttributes) {
+      var attribute = this._displayAttributes[i];
+      this._layout.addEntryForAttribute(attributeTableColumns, attribute);
+      // alertString += attribute.getDisplayString() + '\n';
+    }
+    // alert(alertString);
+    world.endTransaction();
+  }
+  this.refresh();
 };
 
+
 /**
  * Constructs the table header 
  *
@@ -325,24 +396,28 @@
   // add header row
   var headerRow = this._table.insertRow(0);
   var numCols = 0;
-  for (var i=0; i<this._displayAttributes.length; ++i) {
+  for (var i in this._displayAttributes) {
     var attribute = this._displayAttributes[i];
     if (!this._sortAttribute) {this._sortAttribute = attribute;}
-    var headerElt = View.appendNewElement(headerRow,"th");
-    var aCell = View.appendNewElement(headerElt,"span",null,null,attribute.getDisplayString());
-    //aCell.style.background = "rgb(90%, 90%, 90%)";
+    var headerCell = View.appendNewElement(headerRow, "th", null, {uuid: attribute._getUuid()});
+    var headerCellContentSpan = View.appendNewElement(headerCell, "span", "headerCellContentSpan", {uuid: attribute._getUuid()});
+    var textSpan = View.appendNewElement(headerCellContentSpan, "span", null, null, attribute.getDisplayString());
     if (this._sortAttribute == attribute) {
-      headerElt.appendChild(this.getSortIcon());
+      headerCellContentSpan.appendChild(this.getSortIcon());
     }
-    aCell.onclick = this.clickOnHeader.bindAsEventListener(this, attribute);
+    Event.observe(headerCell, "click", this.clickOnHeader.bindAsEventListener(this, attribute));
     if (this.isInEditMode()) {
-      //new Draggable(aCell, {revert:true});
+      var listener = this;
+      var draggable = new Draggable(headerCellContentSpan, {revert:true});
+      headerCellContentSpan.or_draggable = draggable;
+      Droppables.add(headerCell, {
+        accept: "headerCellContentSpan",
+        hoverclass: 'drophover',
+        onDrop: function(element, droppableObject) {listener._handleDrop(element, droppableObject);}});   
     }
     ++numCols;
   }
   this._numberOfColumns = numCols;
-  var listener = this;
-  //Droppables.add(headerRow, {onDrop: function(element) {listener._handleDrop(element);}});   
 };
 
 
@@ -357,13 +432,14 @@
   // get list of items and attributes
   if (!doNotRebuildHash) {
     this.fetchItems();
-    this._buildAttributes();
+    this._displayAttributes = this._getListOfColumns();
   }
  
   //create new table, remove old table if already exists
   var viewDivElement = this.getHtmlElement();
   View.removeChildrenOfElement(viewDivElement);
   this._buildAttributeEditor();
+  
   this._table = View.appendNewElement(viewDivElement, "table", this._cssClassForTable);
   
   this._buildHeader();
@@ -371,7 +447,7 @@
   // sort the list of items. SIDE EFFECT, table header needs to be built before items are sorted
   // because default _sortAttribute is specified there if not previously specificed
   var staticThis = this;
-  this._listOfItems.sort(function(a,b) {return staticThis.compareItemByAttribute(a,b);}); // need to sort after header row added because default sort attribute is set there
+  this._listOfItems.sort(function(a,b) {return staticThis.compareItemsBySortAttribute(a,b);}); // need to sort after header row added because default sort attribute is set there
 
   this._buildTableBody();
 };
@@ -418,10 +494,8 @@
   aCell.or_entriesView = multiEntriesView;
   multiEntriesView.refresh();
   if (this.isInEditMode()) {
-    //multiEntriesView.setSuggestions(this._hashTableOfEntries[attribute.getUniqueKeyString()]);
     var listener = this;
     multiEntriesView.setKeyPressFunction(function (evt, entryView) {return listener.keyPressOnEditField(evt, entryView);});
-    //multiEntriesView.setClickFunction(function (evt, entryView) {return listener._handleClick(evt, entryView);});
   }
 };
 
@@ -451,11 +525,9 @@
   Util.assert(rowElement instanceof HTMLTableRowElement);
   if (rowElement != this._lastSelectedRow) {
     if (this._lastSelectedRow) {
-      //this._lastSelectedRow.style.background = "";
       this._lastSelectedRow.className = "";
     }
     this._lastSelectedRow = rowElement;
-    //rowElement.style.background = "rgb(100%,100%,0%)"; // PENDING: need to css-ify this selection
     rowElement.className = "selected"; 
     return true;
   }
@@ -517,8 +589,6 @@
   }
   world.endTransaction();
   this.refresh();
-  // fileContents = listOfStrings.join('');
-  // alert(fileContents);
 };
 
 

Modified: trunk/source/base_style.css
===================================================================
--- trunk/source/base_style.css	2005-07-28 17:35:41 UTC (rev 266)
+++ trunk/source/base_style.css	2005-07-29 05:03:56 UTC (rev 267)
@@ -486,13 +486,21 @@
 .simple_table img {
   vertical-align: middle;
 }
+
 .simple_table th {
+  padding: 0.1em;
+  text-align: left;
+  background: #BBCEF1;
+  border: 1pt solid rgb(70%, 70%, 70%);
+}
+
+.simple_table .headerCellContentSpan {
   padding: 0.3em;
   color: #000000;
   background: #BBCEF1;
   font-size: 0.8em;
   text-align: left;
-  border: 1pt solid rgb(70%, 70%, 70%);
+  width: 100%;
 }
 
 .simple_table tr {

Modified: trunk/source/model/DeltaVirtualServer.js
===================================================================
--- trunk/source/model/DeltaVirtualServer.js	2005-07-28 17:35:41 UTC (rev 266)
+++ trunk/source/model/DeltaVirtualServer.js	2005-07-29 05:03:56 UTC (rev 267)
@@ -181,12 +181,16 @@
 DeltaVirtualServer.prototype._getTypedDisplayStringForItem = function(item) {
   var returnString = "(";
   if (item) {
-    Util.assert(item instanceof Item);
-    var category = item.getFirstCategory();
-    if (category) {
-      returnString += this.truncateString(category.getDisplayString("???")) + ": ";
+    if (item instanceof Item) {
+      var category = item.getFirstCategory();
+      if (category) {
+        returnString += this.truncateString(category.getDisplayString("???")) + ": ";
+      }
+      returnString += this.truncateString(item.getDisplayString("???"));
     }
-    returnString += this.truncateString(item.getDisplayString("???"));
+    if (item instanceof Entry) {
+      returnString += "Entry";
+    }
   }
   returnString += ")";
   return returnString;

Modified: trunk/source/view/NavbarView.js
===================================================================
--- trunk/source/view/NavbarView.js	2005-07-28 17:35:41 UTC (rev 266)
+++ trunk/source/view/NavbarView.js	2005-07-29 05:03:56 UTC (rev 267)
@@ -66,7 +66,7 @@
   View.call(this, superview, htmlElement, "NavbarView");
   this._htmlElementForAnchors = htmlElementForAnchors;
   this._liElementBeingTouched = null;
-  // this._listOfPages = null;
+  this._builtForEditMode = false;
 }
 
 
@@ -80,6 +80,10 @@
   if (!this.hasEverBeenDisplayed()) {
     this._rebuildView();
     this._myHasEverBeenDisplayedFlag = true;
+  } else {
+    if (this._builtForEditMode != this.isInEditMode()) {
+      this._rebuildView();
+    }
   }
 };
 
@@ -196,9 +200,12 @@
     Event.observe(liElement, "mousedown", this._mouseDownOnMenuItem.bindAsEventListener(this, liElement));
   }
   var listener = this;
-  Sortable.create(NavbarView.ELEMENT_ID_MENU, {
-    onUpdate: function(element){ listener._sortOrderUpdate(element);}
-  });
+  this._builtForEditMode = this.isInEditMode();
+  if (this._builtForEditMode) {
+    Sortable.create(NavbarView.ELEMENT_ID_MENU, {
+      onUpdate: function(element){ listener._sortOrderUpdate(element);}
+    });
+  }
   
   var newPageButton = View.appendNewElement(divElement, "input", RootView.CSS_CLASS_EDIT_TOOL);
   newPageButton.type = "button";

Modified: trunk/source/view/RootView.js
===================================================================
--- trunk/source/view/RootView.js	2005-07-28 17:35:41 UTC (rev 266)
+++ trunk/source/view/RootView.js	2005-07-29 05:03:56 UTC (rev 267)
@@ -97,6 +97,9 @@
   this._currentContentView = null;
   this._homePage = null;
   this._selections = [];
+  
+  this._currentlyInDisplayMethod = false;
+  
   document.addEventListener("keypress",this._onKeyPress.bindAsEventListener(this),false);
   
   // window.document.body.innerHTML = "";
@@ -356,16 +359,20 @@
  * @scope    public instance method
  */
 RootView.prototype.display = function() {
-  this._rootDiv.className = (this.isInShowToolsMode()) ? RootView.CSS_CLASS_EDIT_MODE : RootView.CSS_CLASS_VIEW_MODE;
-  this._displayLoginSpan();
-  this._displayNavbar();
-  this._displayDebugArea();
-  if (this._currentContentView) {
-    Util.assert(this._currentContentView instanceof Object);
-    document.title = this._currentContentView.getPageTitle() + " - openrecord.org";
-    this._currentContentView.includeOnScreen(true);
+  if (!this._currentlyInDisplayMethod) {
+    this._currentlyInDisplayMethod = true;
+    this._rootDiv.className = (this.isInShowToolsMode()) ? RootView.CSS_CLASS_EDIT_MODE : RootView.CSS_CLASS_VIEW_MODE;
+    this._displayLoginSpan();
+    this._displayNavbar();
+    this._displayDebugArea();
+    if (this._currentContentView) {
+      Util.assert(this._currentContentView instanceof Object);
+      document.title = this._currentContentView.getPageTitle() + " - openrecord.org";
+      this._currentContentView.includeOnScreen(true);
+    }
+    window.focus();
+    this._currentlyInDisplayMethod = false;
   }
-  window.focus();
 };
 
 



From skinner at berlios.de  Fri Jul 29 18:02:18 2005
From: skinner at berlios.de (Brian Douglas Skinner at BerliOS)
Date: Fri, 29 Jul 2005 18:02:18 +0200
Subject: [openrecord-svn] r268 - trunk/documentation
Message-ID: <200507291602.j6TG2IF9008203@sheep.berlios.de>

Author: skinner
Date: 2005-07-29 18:02:17 +0200 (Fri, 29 Jul 2005)
New Revision: 268

Modified:
   trunk/documentation/release_planning.txt
Log:
updated release_planning doc for close of iteration #3 and start of iteration #4

Modified: trunk/documentation/release_planning.txt
===================================================================
--- trunk/documentation/release_planning.txt	2005-07-29 05:03:56 UTC (rev 267)
+++ trunk/documentation/release_planning.txt	2005-07-29 16:02:17 UTC (rev 268)
@@ -246,82 +246,129 @@
 -------+----------+---------+----------------------------------------------
 brian  | 0        | done    |  1. Change "Edit"/"Done Editing" button to "Show Tools"/"Hide Tools"
 brian  | 0.25 IED | 0.25    |  2. Allow editing for any logged in user, even if edit tools aren't shown
-       |          |         |  3. Assign system attributes & categories to a "System" category
-       |          |         |  4. Hide "System" items most of the time
-       |          |         |  5. Attempt to embed an OpenRecord view in a MediaWiki page
-       |          |         |  6. Refactor our observer notification API (and implementation)
-chao   | 0.5  IED |         |  7. Wire up observers & keep views in sync
 chao   |          | done    |  8. be able to select a lozenge 
-       |          |         |  9. be able to select a table row 
-       |          |         | 10. be able to select a non-lozenge literal entry
-       |          |         | 11. be able to select the text within an entry
 chao   |          | done    | 12. be able to delete a selected lozenge 
-       |          |         | 13. be able to delete a selected table row 
 chao   | 0.5  IED | done    | 14. improve keyboard navigation: tab, arrow, and return keys
-mignon |          | done?   | 15. Get data model to pass the ordinal unit tests again
-       |          |copy/move? 16. drag-and-drop lozenges
+mignon |          | done    | 15. Get data model to pass the ordinal unit tests again
+chao   |          | done    | 16. copy lozenges via drag-and-drop
 brian  |          | 0.5     | 17. drag-and-drop to re-order navbar menu items
-       |          |         | 18. drag-and-drop to re-order table rows
 brian  |          | 0.5     | 19. drag-and-drop to re-order table columns
-       |          |         | 20. improve UI for "add new attribute" in Table View 
-brian  | 1    IED |         | 21. Rationalize our CSS style sheet approach
-       |          |         | 22. Reach consensus on (colors, padding, and borders) and then implement
-       |          |         | 23. Make sure view code uses transactions
-       |          |         | 24. Deal with \n in page name or summary fields
 brian  |          | 0.25    | 25. BUG: need to encode reserved characters(<&>\n"') back at client-server layer
+brian  |          | 0.5     | 35. Add support for saving content when used from a file:// URL
+-------+----------+---------+----------------------------------------------
+
+
+---------------------------------------------------------------------------
+   New tasks that we decided to take on for Iteration #3, in July 2005
+-------+----------+---------+----------------------------------------------
+Who    | Estimate | Actual  | Task
+-------+----------+---------+----------------------------------------------
+brian  | 1    IED | 0.75    |     Add a DateValue class that supports dates like "2005"
 brian  |          | 0.25    |     Be able to make html files with just one <script> element, not dozens 
 brian  |          | 0.25    |     Be able to easily create new documents that are empty
 brian  |          | 0.5     |     Import CSV data files when running from a file:/// page
-       |          |       >>|     Create a dozen demo documents (quotes, dictionary, movies, books, oil-change, etc.)
-       |          |       >>|     Have different documents use different style-sheets
-brian  | 1    IED | 0.75    |     Add a DateValue class that supports dates like "2005"
-       |          |         |     Data model: boolean, URL, entries that apply to timespan (e.g. annual population)
-       |          |         |     improve UI for initial "out of the box" experience
-       |          |         |     UI and data model design to support collaboration
-       |          |         |     config option so that only logged-in users have read-access
-       |          |         |     have an "icon" attribute, and use icons in suggestion box and in EntryView
-       |          |         |     run in IE as well as Firefox
-chao   | 0.25 IED |         |     Show start time for DateValues if time was entered
-chao   | 0.25 IED |         |     Suppport for relative date entry e.g. "today", "end of day/week", "tomorrow"
-chao   | 0.25 IED |         |     Display relative dates for entries e.g. "today"
-chao   | 0.25 IED |         |     Support for Year/Month entry for DateValue, e.g. 2005/07, July 2005
-chao   | 0.25 IED |         |     Support anchor links to each section on a PageView
-chao   | 0.25 IED |         |     Make currently sorted column to have a special CSS class so that it can look different
-chao   | 0.25 IED |         |     Resolve: How should table cells deal with <enter>, move down a cell or to the right?
 -------+----------+---------+----------------------------------------------
-       |          |         | 26. Set up an OpenRecord.org "dogfood" site & hand-copy info into it
-       |          |         | 27. Write one unit test that tests GUI code
-       |          |         | 28. Write one performance test that measures the time some code takes
-       |          |         | 29. Pick one file, and do a group code review on it
-       |          |         | 30. Provide GUI feedback about what's editable
-       |          |         | 31. Implement a good URL-to-content mapping, such that URLs won't go bad in future releases
-       |          |         | 32. Convert UI code from DOM level 0 to DOM level 2
-       |          |         | 33. Rationalize the View api and document public api
-       |          |       >>| 34. Improve and document the Data model public api
-brian  |          | 0.5     | 35. Add support for saving content when used from a file:// URL
-       |          |         | 36. Do refactoring wherever needed (e.g. SuggestionBox and AttributeSuggestionBox)
-       |          |         | 37. improve UI for setting the expected data type of an attribute
-       |          |         | 38. improve UI for creating a new category
-       |          |         | 39. improve UI for entering references to categories or to other items
-       |          |         | 40. improve UI for creating a new page
-       |          |         | 41. improve UI for adding a new section to a page
-       |          |         | 42. improve UI for creating a new user
-       |          |         | 43. Check for incorrect dependencies (e.g. a Util dependency on model code)
-       |          |         | 44. Create directories "view" and "plugin"
+
+
+~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+     Summary of Iteration #3
+            July 2005
+     July 4 to August 1, 2005
+~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+  11    = number of PLANNED tasks that were finished 
+   4    = number of ADDITIONAL tasks that were finished 
+  ~9    = total estimated IEDs for PLANNED and ADDITIONAL tasks that were finished
+   4    = number of weeks in June iteration
+ ~ 2.25 = Velocity (in estimated IEDs per week)
+~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+
+   
+
+################################################################################
+################################################################################
+##                                                                            ##
+##                                Iteration #4                                ##
+##                                 August 2005                                ##
+##                                                                            ##
+################################################################################
+################################################################################
+
+---------------------------------------------------------------------------
+   Tasks we originally identified for Iteration #3, in July 2005
 -------+----------+---------+----------------------------------------------
-       |          |         | 45. Add support for repository merging
-       |          |         | 46. BUG: back button is broken
-       |          |         | 47. BUG: "Waiting for localhost..."
-       |          |         | 48. BUG: "Node was not found" exception in EntryView/LoginView?
-       |          |         | 49. Do some testing to find other existing bugs
-       |          |         | 50. Have explicit save instead of (or in addition to) autosave
-       |          |         | 51. Be able to cancel out of creating a new account
-       |          |         | 52. Save view layout choice and user preferences
-       |          |         | 53. Do code reviews
-       |          |         | 54. Write concurrency tests 
-       |          |         | 55. Write scalability tests 
-       |          |         | 56. Ensure that PHP scripts and file I/O works for concurrent multi-user access
+Who    | Estimate | Actual  | Task
 -------+----------+---------+----------------------------------------------
+       |          |         |  0. Do lazy creation of layout data items
+brian  |          |         |  1. Create demo documents (quotes, dictionary, movies, books, oil-change, etc.)
+brian  |          |         |  2. Make demo hand-outs with notes about architecture, data model, use cases
+brian  |          |         |  3. Configure demo machine (install Subversion, Firefox, Apache, PHP, jEdit, etc.)
+       |          |         |  4. Attempt to embed an OpenRecord view in a MediaWiki page
+chao   | 0.25 IED |         |  5. Show start time for DateValues if time was entered
+chao   | 0.25 IED |         |  6. Suppport for relative date entry e.g. "today", "end of day/week", "tomorrow"
+chao   | 0.25 IED |         |  7. Display relative dates for entries e.g. "today"
+chao   | 0.25 IED |         |  8. Support for Year/Month entry for DateValue, e.g. 2005/07, July 2005
+chao   | 0.25 IED |         |  9. Support anchor links to each section on a PageView
+chao   | 0.25 IED |         | 10. Make currently sorted column have a special CSS class so that it can look different
+chao   | 0.25 IED |         | 11. Resolve: How should table cells deal with <enter>, move down a cell or to the right?
+-------+----------+---------+----------------------------------------------
+       |          |         | 12. Assign system attributes & categories to a "System" category
+       |          |         | 13. Hide "System" items most of the time
+       |          |         | 14. rename FileSaver + HttpSaver to FileSystemStorage + HttpStorage
+       |          |         | 15. create a FakeStorage class
+brian  | 1    IED |         | 16. Rationalize our CSS style sheet approach
+       |          |         | 17. Have different documents use different style-sheets
+       |          |         | 18. Improve and document the Data model public api
+       |          |         | 19. Refactor our observer notification API (and implementation)
+chao   | 0.5  IED |         | 20. Wire up observers & keep views in sync
+       |          |         | 21. be able to select a table row 
+       |          |         | 22. be able to select a non-lozenge literal entry
+       |          |         | 23. be able to select the text within an entry
+-------+----------+---------+----------------------------------------------
+       |          |         | 24. be able to delete a selected table row 
+       |          |         | 25. drag-and-drop lozenges: move instead of copy
+       |          |         | 26. drag-and-drop to re-order table rows
+       |          |         | 27. improve UI for "add new attribute" in Table View 
+       |          |         | 28. Reach consensus on (colors, padding, and borders) and then implement
+       |          |         | 29. Make sure view code uses transactions
+       |          |         | 30. Deal with \n in page name or summary fields
+       |          |         | 31. Data model: boolean, URL, entries that apply to timespan (e.g. annual population)
+       |          |         | 32. improve UI for initial "out of the box" experience
+       |          |         | 33. UI and data model design to support collaboration
+       |          |         | 34. config option so that only logged-in users have read-access
+       |          |         | 35. have an "icon" attribute, and use icons in suggestion box and in EntryView
+-------+----------+---------+----------------------------------------------
+       |          |         | 36. run in IE as well as Firefox
+       |          |         | 37. Write one unit test that tests GUI code
+       |          |         | 38. Write one performance test that measures the time some code takes
+       |          |         | 39. Pick one file, and do a group code review on it
+       |          |         | 40. Provide GUI feedback about what's editable
+       |          |         | 41. Implement a good URL-to-content mapping, so that URLs won't go bad in future releases
+       |          |         | 42. Convert UI code from DOM level 0 to DOM level 2
+       |          |         | 43. Rationalize the View api and document public api
+       |          |         | 44. Do refactoring wherever needed (e.g. SuggestionBox and AttributeSuggestionBox)
+       |          |         | 45. improve UI for setting the expected data type of an attribute
+       |          |         | 46. improve UI for creating a new category
+       |          |         | 47. improve UI for entering references to categories or to other items
+-------+----------+---------+----------------------------------------------
+       |          |         | 48. improve UI for creating a new page
+       |          |         | 49. improve UI for adding a new section to a page
+       |          |         | 50. improve UI for creating a new user
+       |          |         | 51. Check for incorrect dependencies (e.g. a Util dependency on model code)
+       |          |         | 52. Create a "plugin" directory 
+       |          |         | 53. Add support for repository merging
+       |          |         | 54. BUG: back button is broken
+       |          |         | 55. BUG: "Waiting for localhost..."
+       |          |         | 56. BUG: "Node was not found" exception in EntryView/LoginView?
+       |          |         | 57. Do some testing to find other existing bugs
+       |          |         | 58. Have explicit save instead of (or in addition to) autosave
+       |          |         | 59. Be able to cancel out of creating a new account
+       |          |         | 60. Save view layout choice and user preferences
+       |          |         | 61. Do code reviews
+       |          |         | 62. Write concurrency tests 
+       |          |         | 63. Write scalability tests 
+       |          |         | 64. Ensure that PHP scripts and file I/O works for concurrent multi-user access
+       |          |         | 65. Set up an OpenRecord.org "dogfood" site & hand-copy info into it
+-------+----------+---------+----------------------------------------------
        
 
 



From skinner at berlios.de  Fri Jul 29 21:26:12 2005
From: skinner at berlios.de (Brian Douglas Skinner at BerliOS)
Date: Fri, 29 Jul 2005 21:26:12 +0200
Subject: [openrecord-svn] r269 - trunk/documentation
Message-ID: <200507291926.j6TJQCQO007741@sheep.berlios.de>

Author: skinner
Date: 2005-07-29 21:26:11 +0200 (Fri, 29 Jul 2005)
New Revision: 269

Modified:
   trunk/documentation/release_planning.txt
Log:
more to-do list futzing

Modified: trunk/documentation/release_planning.txt
===================================================================
--- trunk/documentation/release_planning.txt	2005-07-29 16:02:17 UTC (rev 268)
+++ trunk/documentation/release_planning.txt	2005-07-29 19:26:11 UTC (rev 269)
@@ -310,22 +310,22 @@
 chao   | 0.25 IED |         |  9. Support anchor links to each section on a PageView
 chao   | 0.25 IED |         | 10. Make currently sorted column have a special CSS class so that it can look different
 chao   | 0.25 IED |         | 11. Resolve: How should table cells deal with <enter>, move down a cell or to the right?
+       |          |         | 12. drag-and-drop lozenges: move instead of copy
 -------+----------+---------+----------------------------------------------
-       |          |         | 12. Assign system attributes & categories to a "System" category
-       |          |         | 13. Hide "System" items most of the time
-       |          |         | 14. rename FileSaver + HttpSaver to FileSystemStorage + HttpStorage
-       |          |         | 15. create a FakeStorage class
-brian  | 1    IED |         | 16. Rationalize our CSS style sheet approach
-       |          |         | 17. Have different documents use different style-sheets
-       |          |         | 18. Improve and document the Data model public api
-       |          |         | 19. Refactor our observer notification API (and implementation)
-chao   | 0.5  IED |         | 20. Wire up observers & keep views in sync
-       |          |         | 21. be able to select a table row 
-       |          |         | 22. be able to select a non-lozenge literal entry
-       |          |         | 23. be able to select the text within an entry
+       |          |         | 13. Assign system attributes & categories to a "System" category
+       |          |         | 14. Hide "System" items most of the time
+       |          |         | 15. rename FileSaver + HttpSaver to FileSystemStorage + HttpStorage
+       |          |         | 16. create a FakeStorage class
+brian  | 1    IED |         | 17. Rationalize our CSS style sheet approach
+       |          |         | 18. Have different documents use different style-sheets
+       |          |         | 19. Improve and document the Data model public api
+       |          |         | 20. Refactor our observer notification API (and implementation)
+chao   | 0.5  IED |         | 21. Wire up observers & keep views in sync
+       |          |         | 22. be able to select a table row 
+       |          |         | 23. be able to select a non-lozenge literal entry
+       |          |         | 24. be able to select the text within an entry
 -------+----------+---------+----------------------------------------------
-       |          |         | 24. be able to delete a selected table row 
-       |          |         | 25. drag-and-drop lozenges: move instead of copy
+       |          |         | 25. be able to delete a selected table row 
        |          |         | 26. drag-and-drop to re-order table rows
        |          |         | 27. improve UI for "add new attribute" in Table View 
        |          |         | 28. Reach consensus on (colors, padding, and borders) and then implement



