<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [openrecord-svn] r51 - trunk/source/model
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openrecord-svn/2005-May/index.html" >
   <LINK REL="made" HREF="mailto:openrecord-svn%40lists.berlios.de?Subject=Re%3A%20%5Bopenrecord-svn%5D%20r51%20-%20trunk/source/model&In-Reply-To=%3C200505040344.j443iD5h009429%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000042.html">
   <LINK REL="Next"  HREF="000044.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[openrecord-svn] r51 - trunk/source/model</H1>
    <B>Brian Douglas Skinner at BerliOS</B> 
    <A HREF="mailto:openrecord-svn%40lists.berlios.de?Subject=Re%3A%20%5Bopenrecord-svn%5D%20r51%20-%20trunk/source/model&In-Reply-To=%3C200505040344.j443iD5h009429%40sheep.berlios.de%3E"
       TITLE="[openrecord-svn] r51 - trunk/source/model">skinner at sheep.berlios.de
       </A><BR>
    <I>Wed May  4 05:44:13 CEST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="000042.html">[openrecord-svn] r50 - trunk/documentation
</A></li>
        <LI>Next message: <A HREF="000044.html">[openrecord-svn] r52 - trunk/source/model
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#43">[ date ]</a>
              <a href="thread.html#43">[ thread ]</a>
              <a href="subject.html#43">[ subject ]</a>
              <a href="author.html#43">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: skinner
Date: 2005-05-04 05:44:03 +0200 (Wed, 04 May 2005)
New Revision: 51

Added:
   trunk/source/model/IdentifiedRecord.js
Removed:
   trunk/source/model/Entry.js
Modified:
   trunk/source/model/BigLumpVirtualServer.js
   trunk/source/model/Item.js
   trunk/source/model/LintTest.html
   trunk/source/model/LintTest.js
   trunk/source/model/ModelTest.html
   trunk/source/model/Ordinal.js
   trunk/source/model/StubVirtualServer.js
   trunk/source/model/Value.js
   trunk/source/model/Vote.js
   trunk/source/model/World.js
Log:
Changed data model terminology: what was &quot;Entry&quot; is now &quot;IdentifiedRecord&quot;

Modified: trunk/source/model/BigLumpVirtualServer.js
===================================================================
--- trunk/source/model/BigLumpVirtualServer.js	2005-05-03 23:15:12 UTC (rev 50)
+++ trunk/source/model/BigLumpVirtualServer.js	2005-05-04 03:44:03 UTC (rev 51)
@@ -68,7 +68,7 @@
 BigLumpVirtualServer.JSON_MEMBER_ATTRIBUTE = &quot;attribute&quot;;
 BigLumpVirtualServer.JSON_MEMBER_PREVIOUS_VALUE = &quot;previousValue&quot;;
 BigLumpVirtualServer.JSON_MEMBER_USERSTAMP = &quot;userstamp&quot;;
-BigLumpVirtualServer.JSON_MEMBER_ENTRY = &quot;entry&quot;;
+BigLumpVirtualServer.JSON_MEMBER_RECORD = &quot;record&quot;;
 BigLumpVirtualServer.JSON_MEMBER_ITEM = &quot;item&quot;;
 BigLumpVirtualServer.JSON_MEMBER_RETAIN_FLAG = &quot;retainFlag&quot;;
 BigLumpVirtualServer.JSON_MEMBER_ORDINAL_NUMBER = &quot;ordinalNumber&quot;;
@@ -286,8 +286,8 @@
   var key;
   var itemUuid;
   var item;
-  var entryUuid;
-  var entry;
+  var identifiedRecordUuid;
+  var identifiedRecord;
   
   for (key in inListOfRecords) {
     var dehydratedRecord = inListOfRecords[key];
@@ -312,16 +312,16 @@
     }
     if (dehydratedVote) {
       var retainFlag = dehydratedVote[BigLumpVirtualServer.JSON_MEMBER_RETAIN_FLAG];
-      entryUuid = dehydratedVote[BigLumpVirtualServer.JSON_MEMBER_ENTRY];
-      entry = this.__getEntryFromUuid(entryUuid);
-      var vote = new Vote(entry, userstamp, retainFlag, timestamp);
+      identifiedRecordUuid = dehydratedVote[BigLumpVirtualServer.JSON_MEMBER_RECORD];
+      identifiedRecord = this.__getIdentifiedRecordFromUuid(identifiedRecordUuid);
+      var vote = new Vote(identifiedRecord, userstamp, retainFlag, timestamp);
       this.__myChronologicalListOfRecords.push(vote);
     }
     if (dehydratedOrdinal) {
       var ordinalNumber = dehydratedVote[BigLumpVirtualServer.JSON_MEMBER_ORDINAL_NUMBER];
-      entryUuid = dehydratedVote[BigLumpVirtualServer.JSON_MEMBER_ENTRY];
-      entry = this.__getEntryFromUuid(entryUuid);
-      var ordinal = new Ordinal(entry, userstamp, ordinalNumber, timestamp);
+      identifiedRecordUuid = dehydratedVote[BigLumpVirtualServer.JSON_MEMBER_RECORD];
+      identifiedRecord = this.__getIdentifiedRecordFromUuid(identifiedRecordUuid);
+      var ordinal = new Ordinal(identifiedRecord, userstamp, ordinalNumber, timestamp);
       this.__myChronologicalListOfRecords.push(ordinal);
     }
     if (dehydratedValue) {
@@ -406,11 +406,11 @@
   listOfStrings.push('&quot;' + BigLumpVirtualServer.JSON_MEMBER_FORMAT + '&quot;: &quot;' + BigLumpVirtualServer.JSON_FORMAT_2005_APRIL + '&quot;, ' + '\n');
   //listOfStrings.push('  &quot;' + BigLumpVirtualServer.JSON_MEMBER_TIMESTAMP + '&quot;: &quot;' + fileTimestamp.toString() + '&quot;, ' + '\n');
   listOfStrings.push('  &quot;' + BigLumpVirtualServer.JSON_MEMBER_DATA + '&quot;: ' + '[' + '\n');
-  var firstEntry = true;
+  var firstIdentifiedRecord = true;
   for (key in this.__myChronologicalListOfRecords) {
     var record = this.__myChronologicalListOfRecords[key];
-    if (firstEntry) {
-      firstEntry = false;
+    if (firstIdentifiedRecord) {
+      firstIdentifiedRecord = false;
     } else {
       listOfStrings.push(',\n');
       listOfStrings.push('  // -----------------------------------------------------------------------\n');
@@ -425,13 +425,13 @@
     if (record instanceof Vote) {
       var vote = record;
       listOfStrings.push('  { &quot;' + BigLumpVirtualServer.JSON_MEMBER_VOTE_CLASS + '&quot;: ' + '{' + '\n');
-      listOfStrings.push('      &quot;' + BigLumpVirtualServer.JSON_MEMBER_ENTRY + '&quot;: &quot;' + vote.getEntry()._getUuid() + '&quot;,\n');
+      listOfStrings.push('      &quot;' + BigLumpVirtualServer.JSON_MEMBER_RECORD + '&quot;: &quot;' + vote.getIdentifiedRecord()._getUuid() + '&quot;,\n');
       listOfStrings.push('      &quot;' + BigLumpVirtualServer.JSON_MEMBER_RETAIN_FLAG + '&quot;: &quot;' + vote.getRetainFlag() + '&quot;,\n');
     }
     if (record instanceof Ordinal) {
       var ordinal = record;
       listOfStrings.push('  { &quot;' + BigLumpVirtualServer.JSON_MEMBER_ORDINAL_CLASS + '&quot;: ' + '{' + '\n');
-      listOfStrings.push('      &quot;' + BigLumpVirtualServer.JSON_MEMBER_ENTRY + '&quot;: &quot;' + ordinal.getEntry()._getUuid() + '&quot;,\n');
+      listOfStrings.push('      &quot;' + BigLumpVirtualServer.JSON_MEMBER_RECORD + '&quot;: &quot;' + ordinal.getIdentifiedRecord()._getUuid() + '&quot;,\n');
       listOfStrings.push('      &quot;' + BigLumpVirtualServer.JSON_MEMBER_ORDINAL_NUMBER + '&quot;: &quot;' + ordinal.getOrdinalNumber() + '&quot;,\n');
     }
     if (record instanceof Value) {
@@ -484,11 +484,11 @@
   listOfStrings.push(&quot;  ], \n&quot;);
   listOfStrings.push('  &quot;' + BigLumpVirtualServer.JSON_MEMBER_USERS + '&quot;: ' + '[');
 
-  firstEntry = true;
+  firstIdentifiedRecord = true;
   for (key in this.__myListOfUsers) {
     var user = this.__myListOfUsers[key];
-    if (firstEntry) {
-      firstEntry = false;
+    if (firstIdentifiedRecord) {
+      firstIdentifiedRecord = false;
     } else {
       listOfStrings.push(', ');
     }

Deleted: trunk/source/model/Entry.js
===================================================================
--- trunk/source/model/Entry.js	2005-05-03 23:15:12 UTC (rev 50)
+++ trunk/source/model/Entry.js	2005-05-04 03:44:03 UTC (rev 51)
@@ -1,413 +0,0 @@
-/*****************************************************************************
- Entry.js
- 
-******************************************************************************
- Written in 2005 by Brian Douglas Skinner &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openrecord-svn">brian.skinner at gumption.org</A>&gt;
-  
- Copyright rights relinquished under the Creative Commons  
- Public Domain Dedication:
-    <A HREF="http://creativecommons.org/licenses/publicdomain/">http://creativecommons.org/licenses/publicdomain/</A>
-  
- You can copy freely from this file.  This work may be freely reproduced, 
- distributed, transmitted, used, modified, built upon, or otherwise exploited
- by anyone for any purpose.
-  
- This work is provided on an &quot;AS IS&quot; basis, without warranties or conditions 
- of any kind, either express or implied, including, without limitation, any 
- warranties or conditions of title, non-infringement, merchantability, or 
- fitness for a particular purpose. You are solely responsible for determining 
- the appropriateness of using or distributing the work and assume all risks 
- associated with use of this work, including but not limited to the risks and 
- costs of errors, compliance with applicable laws, damage to or loss of data 
- or equipment, and unavailability or interruption of operations.
-
- In no event shall the authors or contributors have any liability for any 
- direct, indirect, incidental, special, exemplary, or consequential damages,
- however caused and on any theory of liability, whether in contract, strict 
- liability, or tort (including negligence), arising in any way out of or in 
- connection with the use or distribution of the work.
-*****************************************************************************/
-
-
-// -------------------------------------------------------------------
-// Dependencies:
-//   Vote.js
-//   Ordinal.js
-//   Util.js
-//   World.js
-// -------------------------------------------------------------------
-
-/**
- * The Entry class serves as an abstract superclass for the class Item
- * and the class Value.
- *
- * @scope    public instance constructor
- * @syntax   DO NOT CALL THIS CONSTRUCTOR
- */
-function Entry() {
-}
-
-
-// -------------------------------------------------------------------
-// Protected methods
-// -------------------------------------------------------------------
-
-/**
- * Called from the constructor function of each subclass of Entry.
- *
- * @scope    protected instance method
- * @param    inWorld    The world that this value is a part of. 
- * @param    inUuid    The UUID for this value. 
- */
-Entry.prototype._Entry = function (inWorld, inUuid) {
-  Util.assert(!inUuid || Util.isNumeric(inUuid));
-  
-  this.__myWorld = inWorld;
-  this.__myUuid = inUuid;
-  
-  this.__myCreationTimestamp = null;
-  this.__myCreationUserstamp = null;
-
-  // Don't create these properties until we know we need them.
-  // this.__mySetOfVotes = null;
-  // this.__mySetOfOrdinals = null;
-};
-
-
-/**
- * Initializes a new entry that has just been created by a user action.
- *
- * WARNING: This method should be called ONLY from subclasses.
- *
- * @scope    protected instance method
- */
-Entry.prototype._initializeEntry = function () {
-  this.__myCreationTimestamp = new Date();
-  this.__myCreationUserstamp = this.getWorld().getCurrentUser();
-};
-
-
-/**
- * Sets the properties of a newly rehydrated entry object.
- *
- * WARNING: This method should be called ONLY from subclasses.
- *
- * @scope    protected instance method
- * @param    inTimestamp    A Date object with the creation timestamp for this item. 
- * @param    inUserstamp    The user who created this item. 
- */
-Entry.prototype._rehydrateEntry = function (inTimestamp, inUserstamp) {
-  this.__myCreationTimestamp = inTimestamp;
-  this.__myCreationUserstamp = inUserstamp;
-};
-
-
-/**
- * Returns the UUID of the item. 
- *
- * WARNING: This method should be called ONLY from a 
- * VirtualServer implementation.
- *
- * If you're writing code in the view layer, call
- * item.getUniqueKeyString() instead of item._getUuid();
- *
- * @scope    protected instance method
- * @return   The UUID of the item.
- */
-Entry.prototype._getUuid = function () {
-  return this.__myUuid;
-};
-
-
-/**
- * Records a user's vote to retain or delete this value.
- *
- * @scope    protected instance method
- * @param    inVote    A vote to retain or delete this value. 
- */
-Entry.prototype._addVote = function (inVote) {
-  if (!this.__mySetOfVotes) {
-    this.__mySetOfVotes = [];
-  }
-  this.__mySetOfVotes.push(inVote);
-};
-
-
-/**
- * Records the ordinal number that a user sets for this value.
- *
- * @scope    protected instance method
- * @param    inOrdinal    A vote to retain or delete this value. 
- */
-Entry.prototype._addOrdinal = function (inOrdinal) {
-  if (!this.__mySetOfOrdinals) {
-    this.__mySetOfOrdinals = [];
-  }
-  this.__mySetOfOrdinals.push(inOrdinal);
-};
-
-
-// -------------------------------------------------------------------
-// Simple accessor methods
-// -------------------------------------------------------------------
-
-/**
- * Returns the world that this item was created in.
- *
- * @scope    public instance method
- * @return   A world object.
- */
-Entry.prototype.getWorld = function () {
-  return this.__myWorld;
-};
-
-
-/**
- * Returns a Date object with the creation timestamp for this item.
- *
- * @scope    public instance method
- * @return   A Date object.
- */
-Entry.prototype.getTimestamp = function () {
-  return this.__myCreationTimestamp;
-};
-
-
-/**
- * Returns the item representing the user who created this item.
- *
- * @scope    public instance method
- * @return   A user item.
- */
-Entry.prototype.getUserstamp = function () {
-  return this.__myCreationUserstamp;
-};
-
-
-/**
- * Returns a string which can be used as a unique key in a hash table. 
- *
- * @scope    public instance method
- * @return   A string which can serve as a unique key.
- */
-Entry.prototype.getUniqueKeyString = function () {
-  return this.__myUuid;
-};
-
-
-/**
- * Returns the ordinal number that this entry was given at creation. 
- *
- * @scope    public instance method
- * @return   A number.
- */
-Entry.prototype.getOrdinalNumberAtCreation = function () {
-  // return (0 - this.__myCreationTimestamp.valueOf());
-  return (0 - this.__myUuid);
-};
-
-
-// -------------------------------------------------------------------
-// Accessor methods
-// -------------------------------------------------------------------
-
-/**
- * Returns the ordinal number for this entry. 
- *
- * @scope    public instance method
- * @return   A number.
- */
-Entry.prototype.getOrdinalNumber = function () {
-  if (!this.__mySetOfOrdinals || this.__mySetOfOrdinals.length === 0) {
-    return this.getOrdinalNumberAtCreation();
-  }
-
-  var ordinalNumber = this.getOrdinalNumberAtCreation();
-  var key;
-  var ordinal;
-  var filter = this.__myWorld.getRetrievalFilter();
-  
-  switch (filter) {
-    case World.RETRIEVAL_FILTER_LAST_EDIT_WINS:
-      // APPROACH A: 
-      //   I tried this first, but it fails in the unit tests.
-      //   It fails because two objects will have identical timestamps if they
-      //   were created in the same millisecond.  One solution would be to
-      //   create a Timestamp class that offers sub-millisecond timestamp
-      //   resolution.  For example, see scrap_yard/Timestamp.js.  However,
-      //   for now the simplest thing to do is just move on to APPROACH B:
-      /*
-      var mostRecentOrdinal = this.__mySetOfOrdinals[0];
-      for (key in this.__mySetOfOrdinals) {
-        ordinal = this.__mySetOfOrdinals[key];
-        if (ordinal.getTimestamp() &gt; mostRecentOrdinal.getTimestamp()) {
-          mostRecentOrdinal = ordinal;
-        }
-      }
-      */
-      
-      // APPROACH B: 
-      //   This works, provided __mySetOfOrdinals is always initialized in
-      //   chronological order.
-      var mostRecentOrdinal = this.__mySetOfOrdinals[this.__mySetOfOrdinals.length - 1];
-
-      ordinalNumber = mostRecentOrdinal.getOrdinalNumber();
-      break;
-    case World.RETRIEVAL_FILTER_SINGLE_USER:
-      // PENDING: This still needs to be implemented.
-      Util.assert(false);
-      break;
-    case World.RETRIEVAL_FILTER_DEMOCRATIC:
-      // PENDING: This still needs to be implemented.
-      Util.assert(false);
-      break;
-    case World.RETRIEVAL_FILTER_UNABRIDGED:
-      // PENDING: This still needs to be implemented.
-      Util.assert(false);
-      break;
-    default:
-      // We should never get here.  If we get here, it's an error.
-      Util.assert(false);
-      break;
-  }
-  return ordinalNumber;
-};
-
-
-/**
- * Returns true if this entry has been deleted. 
- *
- * @scope    public instance method
- * @return   A boolean.
- */
-Entry.prototype.hasBeenDeleted = function () {
-  if (!this.__mySetOfVotes || this.__mySetOfVotes.length === 0) {
-    return false;
-  }
-  
-  var hasBeenDeleted = false;
-  var key;
-  var vote;
-  var filter = this.__myWorld.getRetrievalFilter();
-  
-  switch (filter) {
-    case World.RETRIEVAL_FILTER_LAST_EDIT_WINS:
-      // APPROACH A: 
-      //   I tried this first, but it fails in the unit tests.
-      //   It fails because two objects will have identical timestamps if they
-      //   were created in the same millisecond.  One solution would be to
-      //   create a Timestamp class that offers sub-millisecond timestamp
-      //   resolution.  For example, see scrap_yard/Timestamp.js.  However,
-      //   for now the simplest thing to do is just move on to APPROACH B:
-      /*
-      var mostRecentVote = this.__mySetOfVotes[0];
-      for (key in this.__mySetOfVotes) {
-        vote = this.__mySetOfVotes[key];
-        if (vote.getTimestamp() &gt; mostRecentVote.getTimestamp()) {
-          mostRecentVote = vote;
-        }
-      }
-      */
-      
-      // APPROACH B: 
-      //   This works, provided __mySetOfVotes is always initialized in
-      //   chronological order.
-      var mostRecentVote = this.__mySetOfVotes[this.__mySetOfVotes.length - 1];
-      
-      hasBeenDeleted = !mostRecentVote.getRetainFlag();
-      break;
-    case World.RETRIEVAL_FILTER_SINGLE_USER:
-      // PENDING: This still needs to be implemented.
-      Util.assert(false);
-      break;
-    case World.RETRIEVAL_FILTER_DEMOCRATIC:
-      // PENDING: This still needs to be implemented.
-      Util.assert(false);
-      break;
-    case World.RETRIEVAL_FILTER_UNABRIDGED:
-      hasBeenDeleted = false;
-      break;
-    default:
-      // We should never get here.  If we get here, it's an error.
-      Util.assert(false);
-      break;
-  }
-  return hasBeenDeleted;
-};
-
-
-/**
- * Moves this entry to a new position in a list, by creating a new
- * ordinal for this entry with an ordinal number that is set such
- * that this entry appears between two other entries.
- *
- * @scope    public instance method
- * @param    inEntryFirst    The entry that should come before this one. 
- * @param    inEntryThird    The entry that should come after this one. 
- */
-Entry.prototype.reorderBetween = function (inEntryFirst, inEntryThird) {
-  var firstOrdinalNumber = null;
-  var secondOrdinalNumber = null;
-  var thirdOrdinalNumber = null;
-  var arbitraryNumberToMoveUsUpOrDownSlightly = 0.01;
-  
-  if (inEntryFirst) {
-    firstOrdinalNumber = inEntryFirst.getOrdinalNumber();
-  }
-  if (inEntryThird) {
-    thirdOrdinalNumber = inEntryThird.getOrdinalNumber();
-  }
-  
-  if (firstOrdinalNumber &amp;&amp; thirdOrdinalNumber) {
-    secondOrdinalNumber = (firstOrdinalNumber + thirdOrdinalNumber) / 2;
-  }
-  if (firstOrdinalNumber &amp;&amp; !thirdOrdinalNumber) {
-    secondOrdinalNumber = (firstOrdinalNumber - arbitraryNumberToMoveUsUpOrDownSlightly);
-  }
-  if (!firstOrdinalNumber &amp;&amp; thirdOrdinalNumber) {
-    secondOrdinalNumber = (firstOrdinalNumber + arbitraryNumberToMoveUsUpOrDownSlightly);
-  }
-
-  this.getWorld()._newOrdinal(this, secondOrdinalNumber);
-};
-
-
-/**
- * Registers a vote to delete this entry. 
- *
- * @scope    public instance method
- */
-Entry.prototype.voteToDelete = function () {
-  this.getWorld()._newVote(this, false);
-};
-
-
-/**
- * Registers a vote to retain this entry. 
- *
- * @scope    public instance method
- */
-Entry.prototype.voteToRetain = function () {
-  this.getWorld()._newVote(this, true);
-};
-
-
-// -------------------------------------------------------------------
-// Class methods
-// -------------------------------------------------------------------
-
-/**
- * Registers a vote to retain this entry. 
- *
- * @scope    public class method
- */
-Entry.compareOrdinals = function (inEntryOne, inEntryTwo) {
-  var ordinalNumberOne = inEntryOne.getOrdinalNumber();
-  var ordinalNumberTwo = inEntryTwo.getOrdinalNumber();
-  return (ordinalNumberTwo - ordinalNumberOne);
-};
-
-
-// -------------------------------------------------------------------
-// End of file
-// -------------------------------------------------------------------

Copied: trunk/source/model/IdentifiedRecord.js (from rev 48, trunk/source/model/Entry.js)
===================================================================
--- trunk/source/model/Entry.js	2005-05-02 03:27:15 UTC (rev 48)
+++ trunk/source/model/IdentifiedRecord.js	2005-05-04 03:44:03 UTC (rev 51)
@@ -0,0 +1,413 @@
+/*****************************************************************************
+ IdentifiedRecord.js
+ 
+******************************************************************************
+ Written in 2005 by Brian Douglas Skinner &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openrecord-svn">brian.skinner at gumption.org</A>&gt;
+  
+ Copyright rights relinquished under the Creative Commons  
+ Public Domain Dedication:
+    <A HREF="http://creativecommons.org/licenses/publicdomain/">http://creativecommons.org/licenses/publicdomain/</A>
+  
+ You can copy freely from this file.  This work may be freely reproduced, 
+ distributed, transmitted, used, modified, built upon, or otherwise exploited
+ by anyone for any purpose.
+  
+ This work is provided on an &quot;AS IS&quot; basis, without warranties or conditions 
+ of any kind, either express or implied, including, without limitation, any 
+ warranties or conditions of title, non-infringement, merchantability, or 
+ fitness for a particular purpose. You are solely responsible for determining 
+ the appropriateness of using or distributing the work and assume all risks 
+ associated with use of this work, including but not limited to the risks and 
+ costs of errors, compliance with applicable laws, damage to or loss of data 
+ or equipment, and unavailability or interruption of operations.
+
+ In no event shall the authors or contributors have any liability for any 
+ direct, indirect, incidental, special, exemplary, or consequential damages,
+ however caused and on any theory of liability, whether in contract, strict 
+ liability, or tort (including negligence), arising in any way out of or in 
+ connection with the use or distribution of the work.
+*****************************************************************************/
+
+
+// -------------------------------------------------------------------
+// Dependencies:
+//   Vote.js
+//   Ordinal.js
+//   Util.js
+//   World.js
+// -------------------------------------------------------------------
+
+/**
+ * The IdentifiedRecord class serves as an abstract superclass for the class Item
+ * and the class Value.
+ *
+ * @scope    public instance constructor
+ * @syntax   DO NOT CALL THIS CONSTRUCTOR
+ */
+function IdentifiedRecord() {
+}
+
+
+// -------------------------------------------------------------------
+// Protected methods
+// -------------------------------------------------------------------
+
+/**
+ * Called from the constructor function of each subclass of IdentifiedRecord.
+ *
+ * @scope    protected instance method
+ * @param    inWorld    The world that this value is a part of. 
+ * @param    inUuid    The UUID for this value. 
+ */
+IdentifiedRecord.prototype._IdentifiedRecord = function (inWorld, inUuid) {
+  Util.assert(!inUuid || Util.isNumeric(inUuid));
+  
+  this.__myWorld = inWorld;
+  this.__myUuid = inUuid;
+  
+  this.__myCreationTimestamp = null;
+  this.__myCreationUserstamp = null;
+
+  // Don't create these properties until we know we need them.
+  // this.__mySetOfVotes = null;
+  // this.__mySetOfOrdinals = null;
+};
+
+
+/**
+ * Initializes a new identifiedRecord that has just been created by a user action.
+ *
+ * WARNING: This method should be called ONLY from subclasses.
+ *
+ * @scope    protected instance method
+ */
+IdentifiedRecord.prototype._initializeIdentifiedRecord = function () {
+  this.__myCreationTimestamp = new Date();
+  this.__myCreationUserstamp = this.getWorld().getCurrentUser();
+};
+
+
+/**
+ * Sets the properties of a newly rehydrated identifiedRecord object.
+ *
+ * WARNING: This method should be called ONLY from subclasses.
+ *
+ * @scope    protected instance method
+ * @param    inTimestamp    A Date object with the creation timestamp for this item. 
+ * @param    inUserstamp    The user who created this item. 
+ */
+IdentifiedRecord.prototype._rehydrateIdentifiedRecord = function (inTimestamp, inUserstamp) {
+  this.__myCreationTimestamp = inTimestamp;
+  this.__myCreationUserstamp = inUserstamp;
+};
+
+
+/**
+ * Returns the UUID of the item. 
+ *
+ * WARNING: This method should be called ONLY from a 
+ * VirtualServer implementation.
+ *
+ * If you're writing code in the view layer, call
+ * item.getUniqueKeyString() instead of item._getUuid();
+ *
+ * @scope    protected instance method
+ * @return   The UUID of the item.
+ */
+IdentifiedRecord.prototype._getUuid = function () {
+  return this.__myUuid;
+};
+
+
+/**
+ * Records a user's vote to retain or delete this value.
+ *
+ * @scope    protected instance method
+ * @param    inVote    A vote to retain or delete this value. 
+ */
+IdentifiedRecord.prototype._addVote = function (inVote) {
+  if (!this.__mySetOfVotes) {
+    this.__mySetOfVotes = [];
+  }
+  this.__mySetOfVotes.push(inVote);
+};
+
+
+/**
+ * Records the ordinal number that a user sets for this value.
+ *
+ * @scope    protected instance method
+ * @param    inOrdinal    A vote to retain or delete this value. 
+ */
+IdentifiedRecord.prototype._addOrdinal = function (inOrdinal) {
+  if (!this.__mySetOfOrdinals) {
+    this.__mySetOfOrdinals = [];
+  }
+  this.__mySetOfOrdinals.push(inOrdinal);
+};
+
+
+// -------------------------------------------------------------------
+// Simple accessor methods
+// -------------------------------------------------------------------
+
+/**
+ * Returns the world that this item was created in.
+ *
+ * @scope    public instance method
+ * @return   A world object.
+ */
+IdentifiedRecord.prototype.getWorld = function () {
+  return this.__myWorld;
+};
+
+
+/**
+ * Returns a Date object with the creation timestamp for this item.
+ *
+ * @scope    public instance method
+ * @return   A Date object.
+ */
+IdentifiedRecord.prototype.getTimestamp = function () {
+  return this.__myCreationTimestamp;
+};
+
+
+/**
+ * Returns the item representing the user who created this item.
+ *
+ * @scope    public instance method
+ * @return   A user item.
+ */
+IdentifiedRecord.prototype.getUserstamp = function () {
+  return this.__myCreationUserstamp;
+};
+
+
+/**
+ * Returns a string which can be used as a unique key in a hash table. 
+ *
+ * @scope    public instance method
+ * @return   A string which can serve as a unique key.
+ */
+IdentifiedRecord.prototype.getUniqueKeyString = function () {
+  return this.__myUuid;
+};
+
+
+/**
+ * Returns the ordinal number that this identifiedRecord was given at creation. 
+ *
+ * @scope    public instance method
+ * @return   A number.
+ */
+IdentifiedRecord.prototype.getOrdinalNumberAtCreation = function () {
+  // return (0 - this.__myCreationTimestamp.valueOf());
+  return (0 - this.__myUuid);
+};
+
+
+// -------------------------------------------------------------------
+// Accessor methods
+// -------------------------------------------------------------------
+
+/**
+ * Returns the ordinal number for this identifiedRecord. 
+ *
+ * @scope    public instance method
+ * @return   A number.
+ */
+IdentifiedRecord.prototype.getOrdinalNumber = function () {
+  if (!this.__mySetOfOrdinals || this.__mySetOfOrdinals.length === 0) {
+    return this.getOrdinalNumberAtCreation();
+  }
+
+  var ordinalNumber = this.getOrdinalNumberAtCreation();
+  var key;
+  var ordinal;
+  var filter = this.__myWorld.getRetrievalFilter();
+  
+  switch (filter) {
+    case World.RETRIEVAL_FILTER_LAST_EDIT_WINS:
+      // APPROACH A: 
+      //   I tried this first, but it fails in the unit tests.
+      //   It fails because two objects will have identical timestamps if they
+      //   were created in the same millisecond.  One solution would be to
+      //   create a Timestamp class that offers sub-millisecond timestamp
+      //   resolution.  For example, see scrap_yard/Timestamp.js.  However,
+      //   for now the simplest thing to do is just move on to APPROACH B:
+      /*
+      var mostRecentOrdinal = this.__mySetOfOrdinals[0];
+      for (key in this.__mySetOfOrdinals) {
+        ordinal = this.__mySetOfOrdinals[key];
+        if (ordinal.getTimestamp() &gt; mostRecentOrdinal.getTimestamp()) {
+          mostRecentOrdinal = ordinal;
+        }
+      }
+      */
+      
+      // APPROACH B: 
+      //   This works, provided __mySetOfOrdinals is always initialized in
+      //   chronological order.
+      var mostRecentOrdinal = this.__mySetOfOrdinals[this.__mySetOfOrdinals.length - 1];
+
+      ordinalNumber = mostRecentOrdinal.getOrdinalNumber();
+      break;
+    case World.RETRIEVAL_FILTER_SINGLE_USER:
+      // PENDING: This still needs to be implemented.
+      Util.assert(false);
+      break;
+    case World.RETRIEVAL_FILTER_DEMOCRATIC:
+      // PENDING: This still needs to be implemented.
+      Util.assert(false);
+      break;
+    case World.RETRIEVAL_FILTER_UNABRIDGED:
+      // PENDING: This still needs to be implemented.
+      Util.assert(false);
+      break;
+    default:
+      // We should never get here.  If we get here, it's an error.
+      Util.assert(false);
+      break;
+  }
+  return ordinalNumber;
+};
+
+
+/**
+ * Returns true if this identifiedRecord has been deleted. 
+ *
+ * @scope    public instance method
+ * @return   A boolean.
+ */
+IdentifiedRecord.prototype.hasBeenDeleted = function () {
+  if (!this.__mySetOfVotes || this.__mySetOfVotes.length === 0) {
+    return false;
+  }
+  
+  var hasBeenDeleted = false;
+  var key;
+  var vote;
+  var filter = this.__myWorld.getRetrievalFilter();
+  
+  switch (filter) {
+    case World.RETRIEVAL_FILTER_LAST_EDIT_WINS:
+      // APPROACH A: 
+      //   I tried this first, but it fails in the unit tests.
+      //   It fails because two objects will have identical timestamps if they
+      //   were created in the same millisecond.  One solution would be to
+      //   create a Timestamp class that offers sub-millisecond timestamp
+      //   resolution.  For example, see scrap_yard/Timestamp.js.  However,
+      //   for now the simplest thing to do is just move on to APPROACH B:
+      /*
+      var mostRecentVote = this.__mySetOfVotes[0];
+      for (key in this.__mySetOfVotes) {
+        vote = this.__mySetOfVotes[key];
+        if (vote.getTimestamp() &gt; mostRecentVote.getTimestamp()) {
+          mostRecentVote = vote;
+        }
+      }
+      */
+      
+      // APPROACH B: 
+      //   This works, provided __mySetOfVotes is always initialized in
+      //   chronological order.
+      var mostRecentVote = this.__mySetOfVotes[this.__mySetOfVotes.length - 1];
+      
+      hasBeenDeleted = !mostRecentVote.getRetainFlag();
+      break;
+    case World.RETRIEVAL_FILTER_SINGLE_USER:
+      // PENDING: This still needs to be implemented.
+      Util.assert(false);
+      break;
+    case World.RETRIEVAL_FILTER_DEMOCRATIC:
+      // PENDING: This still needs to be implemented.
+      Util.assert(false);
+      break;
+    case World.RETRIEVAL_FILTER_UNABRIDGED:
+      hasBeenDeleted = false;
+      break;
+    default:
+      // We should never get here.  If we get here, it's an error.
+      Util.assert(false);
+      break;
+  }
+  return hasBeenDeleted;
+};
+
+
+/**
+ * Moves this identifiedRecord to a new position in a list, by creating a new
+ * ordinal for this identifiedRecord with an ordinal number that is set such
+ * that this identifiedRecord appears between two other entries.
+ *
+ * @scope    public instance method
+ * @param    inIdentifiedRecordFirst    The identifiedRecord that should come before this one. 
+ * @param    inIdentifiedRecordThird    The identifiedRecord that should come after this one. 
+ */
+IdentifiedRecord.prototype.reorderBetween = function (inIdentifiedRecordFirst, inIdentifiedRecordThird) {
+  var firstOrdinalNumber = null;
+  var secondOrdinalNumber = null;
+  var thirdOrdinalNumber = null;
+  var arbitraryNumberToMoveUsUpOrDownSlightly = 0.01;
+  
+  if (inIdentifiedRecordFirst) {
+    firstOrdinalNumber = inIdentifiedRecordFirst.getOrdinalNumber();
+  }
+  if (inIdentifiedRecordThird) {
+    thirdOrdinalNumber = inIdentifiedRecordThird.getOrdinalNumber();
+  }
+  
+  if (firstOrdinalNumber &amp;&amp; thirdOrdinalNumber) {
+    secondOrdinalNumber = (firstOrdinalNumber + thirdOrdinalNumber) / 2;
+  }
+  if (firstOrdinalNumber &amp;&amp; !thirdOrdinalNumber) {
+    secondOrdinalNumber = (firstOrdinalNumber - arbitraryNumberToMoveUsUpOrDownSlightly);
+  }
+  if (!firstOrdinalNumber &amp;&amp; thirdOrdinalNumber) {
+    secondOrdinalNumber = (firstOrdinalNumber + arbitraryNumberToMoveUsUpOrDownSlightly);
+  }
+
+  this.getWorld()._newOrdinal(this, secondOrdinalNumber);
+};
+
+
+/**
+ * Registers a vote to delete this identifiedRecord. 
+ *
+ * @scope    public instance method
+ */
+IdentifiedRecord.prototype.voteToDelete = function () {
+  this.getWorld()._newVote(this, false);
+};
+
+
+/**
+ * Registers a vote to retain this identifiedRecord. 
+ *
+ * @scope    public instance method
+ */
+IdentifiedRecord.prototype.voteToRetain = function () {
+  this.getWorld()._newVote(this, true);
+};
+
+
+// -------------------------------------------------------------------
+// Class methods
+// -------------------------------------------------------------------
+
+/**
+ * Registers a vote to retain this identifiedRecord. 
+ *
+ * @scope    public class method
+ */
+IdentifiedRecord.compareOrdinals = function (inIdentifiedRecordOne, inIdentifiedRecordTwo) {
+  var ordinalNumberOne = inIdentifiedRecordOne.getOrdinalNumber();
+  var ordinalNumberTwo = inIdentifiedRecordTwo.getOrdinalNumber();
+  return (ordinalNumberTwo - ordinalNumberOne);
+};
+
+
+// -------------------------------------------------------------------
+// End of file
+// -------------------------------------------------------------------

Modified: trunk/source/model/Item.js
===================================================================
--- trunk/source/model/Item.js	2005-05-03 23:15:12 UTC (rev 50)
+++ trunk/source/model/Item.js	2005-05-04 03:44:03 UTC (rev 51)
@@ -34,7 +34,7 @@
 //   Util.js
 //   World.js
 //   Value.js
-//   Entry.js
+//   IdentifiedRecord.js
 // -------------------------------------------------------------------
 
 
@@ -52,9 +52,9 @@
  * @param    inWorld    The world that this value is a part of. 
  * @param    inUuid    The UUID for this value. 
  */
-Item.prototype = new Entry();  // makes Item be a subclass of Entry
+Item.prototype = new IdentifiedRecord();  // makes Item be a subclass of IdentifiedRecord
 function Item(inWorld, inUuid) {
-  this._Entry(inWorld, inUuid);
+  this._IdentifiedRecord(inWorld, inUuid);
   
   this.__myListOfValues = null;
 }
@@ -74,7 +74,7 @@
  * @param    inObserver    Optional. An object or method to be registered as an observer of the returned item. 
  */
 Item.prototype._initialize = function (inObserver) {
-  this._initializeEntry();
+  this._initializeIdentifiedRecord();
 
   this.__myListOfValues = [];
   if (inObserver) {
@@ -97,7 +97,7 @@
  * @param    inUserstamp    The user who created this item. 
  */
 Item.prototype._rehydrate = function (inTimestamp, inUserstamp) {
-  this._rehydrateEntry(inTimestamp, inUserstamp);
+  this._rehydrateIdentifiedRecord(inTimestamp, inUserstamp);
   
   this.__myListOfValues = [];
 };
@@ -209,7 +209,7 @@
       listOfValuesForAttribute.push(value);
     }
   }
-  listOfValuesForAttribute.sort(Entry.compareOrdinals);
+  listOfValuesForAttribute.sort(IdentifiedRecord.compareOrdinals);
   return listOfValuesForAttribute;
 };
 
@@ -252,7 +252,7 @@
       Util.assert(false);
       break;
   }
-  filteredListOfValues.sort(Entry.compareOrdinals);
+  filteredListOfValues.sort(IdentifiedRecord.compareOrdinals);
   return filteredListOfValues;
 };
 
@@ -272,7 +272,7 @@
     var attribute = value.getAttribute();
     Util.addObjectToSet(attribute, listOfAttributes);
   }
-  listOfAttributes.sort(Entry.compareOrdinals);
+  listOfAttributes.sort(IdentifiedRecord.compareOrdinals);
   return listOfAttributes;
 };
 

Modified: trunk/source/model/LintTest.html
===================================================================
--- trunk/source/model/LintTest.html	2005-05-03 23:15:12 UTC (rev 50)
+++ trunk/source/model/LintTest.html	2005-05-04 03:44:03 UTC (rev 51)
@@ -18,7 +18,7 @@
     &lt;script type=&quot;text/javascript&quot; src=&quot;../Util.js&quot;&gt;&lt;/script&gt;
     &lt;script type=&quot;text/javascript&quot; src=&quot;Ordinal.js&quot;&gt;&lt;/script&gt;
     &lt;script type=&quot;text/javascript&quot; src=&quot;Vote.js&quot;&gt;&lt;/script&gt;
-    &lt;script type=&quot;text/javascript&quot; src=&quot;Entry.js&quot;&gt;&lt;/script&gt;
+    &lt;script type=&quot;text/javascript&quot; src=&quot;IdentifiedRecord.js&quot;&gt;&lt;/script&gt;
     &lt;script type=&quot;text/javascript&quot; src=&quot;Item.js&quot;&gt;&lt;/script&gt;
     &lt;script type=&quot;text/javascript&quot; src=&quot;Value.js&quot;&gt;&lt;/script&gt;
     &lt;script type=&quot;text/javascript&quot; src=&quot;World.js&quot;&gt;&lt;/script&gt;

Modified: trunk/source/model/LintTest.js
===================================================================
--- trunk/source/model/LintTest.js	2005-05-03 23:15:12 UTC (rev 50)
+++ trunk/source/model/LintTest.js	2005-05-04 03:44:03 UTC (rev 51)
@@ -117,7 +117,7 @@
   var listOfSourceCodeFiles = [
     &quot;Ordinal.js&quot;,
     &quot;Vote.js&quot;,
-    &quot;Entry.js&quot;,
+    &quot;IdentifiedRecord.js&quot;,
     &quot;Item.js&quot;,
     &quot;Value.js&quot;,
     &quot;World.js&quot;,

Modified: trunk/source/model/ModelTest.html
===================================================================
--- trunk/source/model/ModelTest.html	2005-05-03 23:15:12 UTC (rev 50)
+++ trunk/source/model/ModelTest.html	2005-05-04 03:44:03 UTC (rev 51)
@@ -17,7 +17,7 @@
     &lt;script type=&quot;text/javascript&quot; src=&quot;../Util.js&quot;&gt;&lt;/script&gt;
     &lt;script type=&quot;text/javascript&quot; src=&quot;Ordinal.js&quot;&gt;&lt;/script&gt;
     &lt;script type=&quot;text/javascript&quot; src=&quot;Vote.js&quot;&gt;&lt;/script&gt;
-    &lt;script type=&quot;text/javascript&quot; src=&quot;Entry.js&quot;&gt;&lt;/script&gt;
+    &lt;script type=&quot;text/javascript&quot; src=&quot;IdentifiedRecord.js&quot;&gt;&lt;/script&gt;
     &lt;script type=&quot;text/javascript&quot; src=&quot;Item.js&quot;&gt;&lt;/script&gt;
     &lt;script type=&quot;text/javascript&quot; src=&quot;Value.js&quot;&gt;&lt;/script&gt;
     &lt;script type=&quot;text/javascript&quot; src=&quot;World.js&quot;&gt;&lt;/script&gt;

Modified: trunk/source/model/Ordinal.js
===================================================================
--- trunk/source/model/Ordinal.js	2005-05-03 23:15:12 UTC (rev 50)
+++ trunk/source/model/Ordinal.js	2005-05-04 03:44:03 UTC (rev 51)
@@ -32,7 +32,7 @@
 // -------------------------------------------------------------------
 // Dependencies:
 //   User.js
-//   Entry.js
+//   IdentifiedRecord.js
 // -------------------------------------------------------------------
 
 /**
@@ -40,13 +40,13 @@
  * a user set an ordinal number for an item or a value of an item.
  *
  * @scope    public instance constructor
- * @param    inEntry    The item or value that this vote is attached to. 
+ * @param    inIdentifiedRecord    The item or value that this vote is attached to. 
  * @param    inUser    The user who voted. 
  * @param    inOrdinalNumber    The ordinal number itself. 
  * @param    inTimestamp    Optional. The time the vote was made. 
  */
-function Ordinal(inEntry, inUser, inOrdinalNumber, inTimestamp) {
-  this.__myEntry = inEntry;
+function Ordinal(inIdentifiedRecord, inUser, inOrdinalNumber, inTimestamp) {
+  this.__myIdentifiedRecord = inIdentifiedRecord;
   this.__myUserstamp = inUser;
   this.__myOrdinalNumber = inOrdinalNumber;
   if (inTimestamp) {
@@ -54,11 +54,11 @@
   } else {
     this.__myTimestamp = new Date();
   }
-  this.__myEntry._addOrdinal(this);
+  this.__myIdentifiedRecord._addOrdinal(this);
 }
 
-Ordinal.prototype.getEntry = function () {
-  return this.__myEntry;
+Ordinal.prototype.getIdentifiedRecord = function () {
+  return this.__myIdentifiedRecord;
 };
 
 Ordinal.prototype.getTimestamp = function () {

Modified: trunk/source/model/StubVirtualServer.js
===================================================================
--- trunk/source/model/StubVirtualServer.js	2005-05-03 23:15:12 UTC (rev 50)
+++ trunk/source/model/StubVirtualServer.js	2005-05-04 03:44:03 UTC (rev 51)
@@ -34,7 +34,7 @@
 //   Util.js
 //   World.js
 //   Item.js
-//   Entry.js
+//   IdentifiedRecord.js
 //   Ordinal.js
 //   Value.js
 //   Vote.js
@@ -135,12 +135,12 @@
  * Returns a newly created ordinal.
  *
  * @scope    public instance method
- * @param    inEntry    The entry that this is an ordinal for. 
+ * @param    inIdentifiedRecord    The identifiedRecord that this is an ordinal for. 
  * @param    inOrdinalNumber    The ordinal number itself. 
  * @return   A newly created ordinal.
  */
-StubVirtualServer.prototype.newOrdinal = function (inEntry, inOrdinalNumber) {
-  var ordinal = new Ordinal(inEntry, this.__myWorld.getCurrentUser(), inOrdinalNumber);
+StubVirtualServer.prototype.newOrdinal = function (inIdentifiedRecord, inOrdinalNumber) {
+  var ordinal = new Ordinal(inIdentifiedRecord, this.__myWorld.getCurrentUser(), inOrdinalNumber);
   this.__myChronologicalListOfNewlyCreatedRecords.push(ordinal);
   return ordinal;
 };
@@ -150,12 +150,12 @@
  * Returns a newly created vote.
  *
  * @scope    public instance method
- * @param    inEntry    The entry to attach this vote to. 
+ * @param    inIdentifiedRecord    The identifiedRecord to attach this vote to. 
  * @param    inRetainFlag    True if this is a vote to retain. False if this is a vote to delete. 
  * @return   A newly created vote.
  */
-StubVirtualServer.prototype.newVote = function (inEntry, inRetainFlag) {
-  var vote = new Vote(inEntry, this.__myWorld.getCurrentUser(), inRetainFlag);
+StubVirtualServer.prototype.newVote = function (inIdentifiedRecord, inRetainFlag) {
+  var vote = new Vote(inIdentifiedRecord, this.__myWorld.getCurrentUser(), inRetainFlag);
   this.__myChronologicalListOfNewlyCreatedRecords.push(vote);
   return vote;
 };
@@ -368,7 +368,7 @@
     }
   }
   
-  listOfQueryResultItems.sort(Entry.compareOrdinals);
+  listOfQueryResultItems.sort(IdentifiedRecord.compareOrdinals);
   return listOfQueryResultItems; 
 };
 
@@ -432,7 +432,7 @@
       listOfItems.push(item);
     }
   }
-  listOfItems.sort(Entry.compareOrdinals);
+  listOfItems.sort(IdentifiedRecord.compareOrdinals);
   return listOfItems; 
 };
 
@@ -448,7 +448,7 @@
  * @param    inUuid    The UUID of the item or value to be returned. 
  * @return   The item or value identified by the given UUID.
  */
-StubVirtualServer.prototype.__getEntryFromUuid = function (inUuid) {
+StubVirtualServer.prototype.__getIdentifiedRecordFromUuid = function (inUuid) {
   var item = this.getItemFromUuid(inUuid);
   if (item) {
     return item;

Modified: trunk/source/model/Value.js
===================================================================
--- trunk/source/model/Value.js	2005-05-03 23:15:12 UTC (rev 50)
+++ trunk/source/model/Value.js	2005-05-04 03:44:03 UTC (rev 51)
@@ -34,7 +34,7 @@
 //   Util.js
 //   Item.js
 //   World.js
-//   Entry.js
+//   IdentifiedRecord.js
 // -------------------------------------------------------------------
 
 /**
@@ -51,9 +51,9 @@
  * @param    inWorld    The world that this value is a part of. 
  * @param    inUuid    The UUID for this value. 
  */
-Value.prototype = new Entry();  // makes Value be a subclass of Entry
+Value.prototype = new IdentifiedRecord();  // makes Value be a subclass of IdentifiedRecord
 function Value(inWorld, inUuid) {
-  this._Entry(inWorld, inUuid);
+  this._IdentifiedRecord(inWorld, inUuid);
  
   this.__myPreviousValue = null;
   this.__myListOfSubsequentValues = [];
@@ -80,7 +80,7 @@
  * @param    inContentData    The content datat to initialize the value with. 
  */
 Value.prototype._initialize = function (inItemOrValue, inAttribute, inContentData) {
-  this._initializeEntry();
+  this._initializeIdentifiedRecord();
 
   if (inItemOrValue instanceof Value) {
     this.__myPreviousValue = inItemOrValue;
@@ -118,7 +118,7 @@
  * @param    inUserstamp    The user who created this value. 
  */
 Value.prototype._rehydrate = function (inItemOrValue, inAttribute, inContentData, inTimestamp, inUserstamp) {
-  this._rehydrateEntry(inTimestamp, inUserstamp);
+  this._rehydrateIdentifiedRecord(inTimestamp, inUserstamp);
 
   if (inItemOrValue instanceof Value) {
     this.__myPreviousValue = inItemOrValue;

Modified: trunk/source/model/Vote.js
===================================================================
--- trunk/source/model/Vote.js	2005-05-03 23:15:12 UTC (rev 50)
+++ trunk/source/model/Vote.js	2005-05-04 03:44:03 UTC (rev 51)
@@ -32,7 +32,7 @@
 // -------------------------------------------------------------------
 // Dependencies:
 //   User.js
-//   Entry.js
+//   IdentifiedRecord.js
 // -------------------------------------------------------------------
 
 /**
@@ -40,13 +40,13 @@
  * an item or a value of an item.
  *
  * @scope    public instance constructor
- * @param    inEntry    The item or value that this vote is attached to. 
+ * @param    inIdentifiedRecord    The item or value that this vote is attached to. 
  * @param    inUser    The user who voted. 
  * @param    inRetainFlag    True if this is a vote to retain. False if this is a vote to delete. 
  * @param    inTimestamp    Optional. The time the vote was made. 
  */
-function Vote(inEntry, inUser, inRetainFlag, inTimestamp) {
-  this.__myEntry = inEntry;
+function Vote(inIdentifiedRecord, inUser, inRetainFlag, inTimestamp) {
+  this.__myIdentifiedRecord = inIdentifiedRecord;
   this.__myUserstamp = inUser;
   this.__myRetainFlag = inRetainFlag;
   if (inTimestamp) {
@@ -54,11 +54,11 @@
   } else {
     this.__myTimestamp = new Date();
   }
-  this.__myEntry._addVote(this);
+  this.__myIdentifiedRecord._addVote(this);
 }
 
-Vote.prototype.getEntry = function () {
-  return this.__myEntry;
+Vote.prototype.getIdentifiedRecord = function () {
+  return this.__myIdentifiedRecord;
 };
 
 Vote.prototype.getTimestamp = function () {

Modified: trunk/source/model/World.js
===================================================================
--- trunk/source/model/World.js	2005-05-03 23:15:12 UTC (rev 50)
+++ trunk/source/model/World.js	2005-05-04 03:44:03 UTC (rev 51)
@@ -190,7 +190,7 @@
       item = record;
     }
     if ((record instanceof Vote) || (record instanceof Ordinal)) {
-      itemOrValue = record.getEntry();
+      itemOrValue = record.getIdentifiedRecord();
       if (itemOrValue instanceof Item) {
         item = itemOrValue;
       }
@@ -422,7 +422,7 @@
       break;
   }
 
-  filteredListOfUsers.sort(Entry.compareOrdinals);
+  filteredListOfUsers.sort(IdentifiedRecord.compareOrdinals);
   return filteredListOfUsers;
 };
 
@@ -600,13 +600,13 @@
  * Returns a newly created ordinal.
  *
  * @scope    protected instance method
- * @param    inEntry    The entry that this is an ordinal for. 
+ * @param    inIdentifiedRecord    The identifiedRecord that this is an ordinal for. 
  * @param    inOrdinalNumber    The ordinal number itself. 
  * @return   A newly created ordinal.
  */
-World.prototype._newOrdinal = function (inEntry, inOrdinalNumber) {
+World.prototype._newOrdinal = function (inIdentifiedRecord, inOrdinalNumber) {
   this.beginTransaction();
-  var ordinal = this.__myVirtualServer.newOrdinal(inEntry, inOrdinalNumber);
+  var ordinal = this.__myVirtualServer.newOrdinal(inIdentifiedRecord, inOrdinalNumber);
   this.endTransaction();
   return ordinal;
 };
@@ -616,13 +616,13 @@
  * Returns a newly created vote.
  *
  * @scope    protected instance method
- * @param    inEntry    The entry to attach this vote to. 
+ * @param    inIdentifiedRecord    The identifiedRecord to attach this vote to. 
  * @param    inRetainFlag    True if this is a vote to retain. False if this is a vote to delete. 
  * @return   A newly created vote.
  */
-World.prototype._newVote = function (inEntry, inRetainFlag) {
+World.prototype._newVote = function (inIdentifiedRecord, inRetainFlag) {
   this.beginTransaction();
-  var vote = this.__myVirtualServer.newVote(inEntry, inRetainFlag);
+  var vote = this.__myVirtualServer.newVote(inIdentifiedRecord, inRetainFlag);
   this.endTransaction();
   return vote;
 };


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000042.html">[openrecord-svn] r50 - trunk/documentation
</A></li>
	<LI>Next message: <A HREF="000044.html">[openrecord-svn] r52 - trunk/source/model
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#43">[ date ]</a>
              <a href="thread.html#43">[ thread ]</a>
              <a href="subject.html#43">[ subject ]</a>
              <a href="author.html#43">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openrecord-svn">More information about the openrecord-svn
mailing list</a><br>
</body></html>
