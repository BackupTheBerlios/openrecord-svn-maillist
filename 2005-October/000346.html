<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [openrecord-svn] r364 - in trunk: documentation source source/lang source/util source/view tests tests/archive tests/dojo tests/dom tests/lang tests/model tests/storage tests/tests_of_external_code tests/util tests/uuid tests/view
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openrecord-svn/2005-October/index.html" >
   <LINK REL="made" HREF="mailto:openrecord-svn%40lists.berlios.de?Subject=Re%3A%20%5Bopenrecord-svn%5D%20r364%20-%20in%20trunk%3A%20documentation%20source%20source/lang%20source/util%20source/view%20tests%20tests/archive%20tests/dojo%20tests/dom%20tests/lang%20tests/model%20tests/storage%20tests/tests_of_external_code%20tests/util%20tests/uuid%20tests/view&In-Reply-To=%3C200510180215.j9I2FW0L032508%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000345.html">
   <LINK REL="Next"  HREF="000347.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[openrecord-svn] r364 - in trunk: documentation source source/lang source/util source/view tests tests/archive tests/dojo tests/dom tests/lang tests/model tests/storage tests/tests_of_external_code tests/util tests/uuid tests/view</H1>
    <B>Brian Douglas Skinner at BerliOS</B> 
    <A HREF="mailto:openrecord-svn%40lists.berlios.de?Subject=Re%3A%20%5Bopenrecord-svn%5D%20r364%20-%20in%20trunk%3A%20documentation%20source%20source/lang%20source/util%20source/view%20tests%20tests/archive%20tests/dojo%20tests/dom%20tests/lang%20tests/model%20tests/storage%20tests/tests_of_external_code%20tests/util%20tests/uuid%20tests/view&In-Reply-To=%3C200510180215.j9I2FW0L032508%40sheep.berlios.de%3E"
       TITLE="[openrecord-svn] r364 - in trunk: documentation source source/lang source/util source/view tests tests/archive tests/dojo tests/dom tests/lang tests/model tests/storage tests/tests_of_external_code tests/util tests/uuid tests/view">skinner at berlios.de
       </A><BR>
    <I>Tue Oct 18 04:15:32 CEST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="000345.html">[openrecord-svn] r363 - trunk/tests
</A></li>
        <LI>Next message: <A HREF="000347.html">[openrecord-svn] r365 - in trunk/source: . view
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#346">[ date ]</a>
              <a href="thread.html#346">[ thread ]</a>
              <a href="subject.html#346">[ subject ]</a>
              <a href="author.html#346">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: skinner
Date: 2005-10-18 04:15:08 +0200 (Tue, 18 Oct 2005)
New Revision: 364

Added:
   trunk/source/dom.js
   trunk/tests/dom/
   trunk/tests/dom/domTest.html
   trunk/tests/dom/domTest.js
Modified:
   trunk/documentation/release_planning.txt
   trunk/source/OutlinePlugin.js
   trunk/source/TablePlugin.js
   trunk/source/lang/Lang.js
   trunk/source/util/Util.js
   trunk/source/view/EntryView.js
   trunk/source/view/LoginView.js
   trunk/source/view/MultiEntriesView.js
   trunk/source/view/NavbarView.js
   trunk/source/view/PageView.js
   trunk/source/view/RootView.js
   trunk/source/view/SuggestionBox.js
   trunk/source/view/View.js
   trunk/tests/LintTest.js
   trunk/tests/TestSuite.html
   trunk/tests/archive/LintTest.js
   trunk/tests/dojo/SimpleDojoTest.js
   trunk/tests/lang/LangTest.js
   trunk/tests/model/LintTest.js
   trunk/tests/model/ModelTest.js
   trunk/tests/model/RepositoryWritingTest.js
   trunk/tests/model/TestReorderingForSpecialCases.js
   trunk/tests/model/TestReorderingForTypicalOrdinals.js
   trunk/tests/storage/LintTest.js
   trunk/tests/tests_of_external_code/TimingTest.js
   trunk/tests/util/CsvParserTest.js
   trunk/tests/util/DateValueTest.js
   trunk/tests/util/LintTest.js
   trunk/tests/util/UtilTest.js
   trunk/tests/util/XmlConverterMultiplePassesTest.js
   trunk/tests/util/XmlConverterTest.js
   trunk/tests/uuid/LintTest.js
   trunk/tests/uuid/UuidTest.js
   trunk/tests/view/LintTest.js
Log:
Finished replacing calls to orpBindAsEventListener() with calls to dojo.event.connect().  Deleted orpBindAsEventListener().  Added a new orp.lang.bind() method, and a new orp.dom placeholder package.  Updated the unit test JavaScript files to use dojo-rev1759 instead of dojo-0.1.0.

Modified: trunk/documentation/release_planning.txt
===================================================================
--- trunk/documentation/release_planning.txt	2005-10-17 21:30:58 UTC (rev 363)
+++ trunk/documentation/release_planning.txt	2005-10-18 02:15:08 UTC (rev 364)
@@ -403,7 +403,7 @@
 Who    | Estimate | Actual  | Task
 -------+----------+---------+----------------------------------------------
 brian  |          | 1    IED|  1. get djConfig.debugAtAllCosts to work
-brian  |          | (0.25+) |  2. replace orpBindAsEventListener() with dojo.event.connect()
+brian  |          | done (0.25+) |  2. replace orpBindAsEventListener() with dojo.event.connect()
 brian  |          | 0.1  IED|  3. move UUID files from source/util to source/uuid
 brian  | 0.5  IED | (0.5+)  |  4. Make Item.js use namedParameter based API
 brian  |          | 0.5  IED|  5. split half the code in source/model off into source/_____
@@ -411,6 +411,8 @@
        |          |         |  7. merge StubArchive + DeltaArchive, and re-name the result
 brian  |          | 0.25 IED|  8. create a FakeStorage class, + rename FileSaver + HttpSaver
        |          |         |     update unit tests to use the FakeStorage instead of StubArchive
+       |          |         |     try to convert one unit test over to the dojo jum framework
+       |          |         |     move DOM methods from orp.view.View.xxx to orp.dom.xxx
 brian  |          | 0    IED|  9. change &quot;endOfLife()&quot; to &quot;destroy()&quot;
        |          |         | 10. Rationalize the View API and document public API
 mignon | 1    IED |         | 11. Rationalize the ViewPlugin API

Modified: trunk/source/OutlinePlugin.js
===================================================================
--- trunk/source/OutlinePlugin.js	2005-10-17 21:30:58 UTC (rev 363)
+++ trunk/source/OutlinePlugin.js	2005-10-18 02:15:08 UTC (rev 364)
@@ -123,16 +123,12 @@
     var anchorElement = orp.view.View.appendNewElement(liElement, &quot;a&quot;, orp.view.SectionView.cssClass.MORE_LINK);
 
     // PENDING: 
-    //  We shouldn't call the private method _getUuid()
     //  We need a better way to get the URL for a content item
     anchorElement.setAttribute(&quot;href&quot;, orp.view.RootView.URL_HASH_ITEM_PREFIX + contentItem.getUuidString());
 
     // orp.view.View.appendNewTextNode(anchorElement, &quot;(more &#8658;)&quot;);
     anchorElement.innerHTML = &quot;(more &#8658;)&quot;;
-    // orp.util.addEventListener(anchorElement, &quot;click&quot;, orp.view.RootView.clickOnLocalLink);
 
-    // orp.util.addEventListener(optionElement, &quot;click&quot;, function(event) {listener.clickOnPluginSelectionMenu(event);});
-    // optionElement.onclick = this.clickOnAttributeMenu.orpBindAsEventListener(this);    
     dojo.event.connect(anchorElement, &quot;onclick&quot;, orp.view.RootView.clickOnLocalLink);
   }
 };

Modified: trunk/source/TablePlugin.js
===================================================================
--- trunk/source/TablePlugin.js	2005-10-17 21:30:58 UTC (rev 363)
+++ trunk/source/TablePlugin.js	2005-10-18 02:15:08 UTC (rev 364)
@@ -226,7 +226,6 @@
     }
     optionElt.text += attribute.getDisplayString();
     optionElt.value = attribute.getUuidString();
-    // optionElt.onclick = this._attributeEditorChanged.orpBindAsEventListener(this);
     dojo.event.connect(optionElt, &quot;onclick&quot;, this, &quot;_attributeEditorChanged&quot;);
   }
   this._selectElement = selectElt;
@@ -246,7 +245,6 @@
     this._fileImportButton = orp.view.View.appendNewElement(importDiv, &quot;input&quot;);
     this._fileImportButton.type = &quot;file&quot;;
     
-    // this._fileImportButton.onchange = this._importData.orpBindAsEventListener(this);
     dojo.event.connect(this._fileImportButton, &quot;onchange&quot;, this, &quot;_importData&quot;);
   }
 };
@@ -441,9 +439,7 @@
       headerCellContentSpan.appendChild(this.getSortIcon());
     }
     
-    // FIXME: need to figure out how to pass &quot;attribute&quot; via dojo.event.connect()
-    Event.observe(headerCell, &quot;click&quot;, this.clickOnHeader.orpBindAsEventListener(this, attribute));
-    // dojo.event.connect(headerCell, &quot;onclick&quot;, this, &quot;clickOnHeader&quot;);
+    dojo.event.connect(headerCell, &quot;onclick&quot;, orp.lang.bind(this, &quot;clickOnHeader&quot;, attribute));
     
     if (this.isInEditMode()) {
       var listener = this;
@@ -567,7 +563,7 @@
  * 
  * @scope    public instance method
  */
-orp.TablePlugin.prototype.clickOnHeader = function(event, clickAttribute) {
+orp.TablePlugin.prototype.clickOnHeader = function(clickAttribute) {
   if (clickAttribute == this._sortAttribute) {
     this._ascendingOrder = !this._ascendingOrder;
   }

Added: trunk/source/dom.js
===================================================================
--- trunk/source/dom.js	2005-10-17 21:30:58 UTC (rev 363)
+++ trunk/source/dom.js	2005-10-18 02:15:08 UTC (rev 364)
@@ -0,0 +1,98 @@
+/*****************************************************************************
+ dom.js
+ 
+******************************************************************************
+ Written in 2005 by Brian Douglas Skinner &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openrecord-svn">brian.skinner at gumption.org</A>&gt;
+  
+ Copyright rights relinquished under the Creative Commons  
+ Public Domain Dedication:
+    <A HREF="http://creativecommons.org/licenses/publicdomain/">http://creativecommons.org/licenses/publicdomain/</A>
+  
+ You can copy freely from this file.  This work may be freely reproduced, 
+ distributed, transmitted, used, modified, built upon, or otherwise exploited
+ by anyone for any purpose.
+  
+ This work is provided on an &quot;AS IS&quot; basis, without warranties or conditions 
+ of any kind, either express or implied, including, without limitation, any 
+ warranties or conditions of title, non-infringement, merchantability, or 
+ fitness for a particular purpose. You are solely responsible for determining 
+ the appropriateness of using or distributing the work and assume all risks 
+ associated with use of this work, including but not limited to the risks and 
+ costs of errors, compliance with applicable laws, damage to or loss of data 
+ or equipment, and unavailability or interruption of operations.
+
+ In no event shall the authors or contributors have any liability for any 
+ direct, indirect, incidental, special, exemplary, or consequential damages,
+ however caused and on any theory of liability, whether in contract, strict 
+ liability, or tort (including negligence), arising in any way out of or in 
+ connection with the use or distribution of the work.
+*****************************************************************************/
+
+// -------------------------------------------------------------------
+// Provides and Requires
+// -------------------------------------------------------------------
+dojo.provide(&quot;orp.dom&quot;);
+dojo.require(&quot;dojo.dom&quot;);
+dojo.require(&quot;orp.lang.Lang&quot;);
+
+
+// -------------------------------------------------------------------
+// Public functions
+// -------------------------------------------------------------------
+
+/**
+ * Given an HTMLElement, and a keyword-value pair, this method associates
+ * the value with the keyword for the given element.  To get the value
+ * back again, use the orp.dom.getKeywordValueForElement() function.
+ * 
+ * @scope    public function
+ * @param    element    Any HTMLElement.
+ * @param    keyword    A unique key string.
+ * @param    value    Any value.
+ */
+orp.dom.setKeywordValueForElement = function(element, keyword, value) {
+  orp.lang.assert(element instanceof HTMLElement);
+  orp.lang.assertType(keyword, String);
+  
+  if (!element.id) {
+    element.id = dojo.dom.getUniqueId();
+  }
+  if (!orp.dom._ourHashTableOfAssociationsKeyedByElementId) {
+    orp.dom._ourHashTableOfAssociationsKeyedByElementId = {};
+  }
+  if (!orp.dom._ourHashTableOfAssociationsKeyedByElementId[element.id]) {
+    orp.dom._ourHashTableOfAssociationsKeyedByElementId[element.id] = {};
+  }
+  var keyValueTable = orp.dom._ourHashTableOfAssociationsKeyedByElementId[element.id];
+  keyValueTable[keyword] = value;
+};
+
+  
+/**
+ * Given an HTMLElement and a keyword, this method returns the value
+ * that was associated with the keyword for the element using the
+ * orp.dom.setKeywordValueForElement() function.
+ * 
+ * @scope    public function
+ * @param    element    Any HTMLElement.
+ * @param    keyword    A unique key string.
+ * @return   The value associated with the element and keyword.
+ */
+orp.dom.getKeywordValueForElement = function(element, keyword) {
+  orp.lang.assert(element instanceof HTMLElement);
+  orp.lang.assertType(keyword, String);
+  
+  if (!orp.dom._ourHashTableOfAssociationsKeyedByElementId || !element.id) {
+    return null;
+  }
+  var keyValueTable = orp.dom._ourHashTableOfAssociationsKeyedByElementId[element.id];
+  if (!keyValueTable) {
+    return null;
+  }
+  return keyValueTable[keyword];
+};
+
+
+// -------------------------------------------------------------------
+// End of file
+// -------------------------------------------------------------------

Modified: trunk/source/lang/Lang.js
===================================================================
--- trunk/source/lang/Lang.js	2005-10-17 21:30:58 UTC (rev 363)
+++ trunk/source/lang/Lang.js	2005-10-18 02:15:08 UTC (rev 364)
@@ -39,6 +39,21 @@
 // Public Functions
 // -------------------------------------------------------------------
 
+/**
+ * Throws an exception (actually throws a &quot;new Error()&quot;).
+ *
+ * Calling &quot;orp.lang.throwError('foo')&quot; is essentially identical
+ * to doing &quot;throw new Error('foo')&quot;, except that the Error object
+ * thrown by orp.lang.throwError() will include a copy of the stack
+ * trace in the message body, where the lines of text in that copy 
+ * of the stack trace have been abridged so that the stack trace
+ * is more likely to be readable in an alert window that only shows
+ * 40 or 50 characters per line. 
+ *
+ * @scope    public function
+ * @param    message    Optional. A string describing the assertion.
+ * @throws    Always throws an Error.
+ */
 orp.lang.throwError = function(message) {
   var extendedMessage = &quot;&quot;;
   var exception = new Error(message);  // create an exception, just to get a stack trace
@@ -76,6 +91,7 @@
  * @scope    public function
  * @param    booleanValue    A boolean value, which needs to be true for the assertion to succeed. 
  * @param    message    Optional. A string describing the assertion.
+ * @throws    Throws an Error if 'booleanValue' is false.
  */
 orp.lang.assert = function(booleanValue, message) {
   if (dojo.lang.isBoolean(booleanValue)) {
@@ -113,6 +129,7 @@
  * @scope    public function
  * @param    value    Any literal value or object instance. 
  * @param    type    A class of object, or a literal type.
+ * @throws    Throws an Error if 'value' is not of type 'type'.
  */
 orp.lang.assertType = function(value, type) {
   if (!orp.lang.assertType._errorMessage) {
@@ -162,6 +179,7 @@
  * @scope    public function
  * @param    value    Optional.  Any literal value, or any object instance, or the value 'undefined'. 
  * @param    type    A class of object, or a literal type.
+ * @throws    Throws an Error if there is a 'value' AND it is not of type 'type'.
  */
 orp.lang.assertTypeForOptionalValue = function(value, type) {
   if (!dojo.lang.isUndefined(value) &amp;&amp; (value !== null)) {
@@ -169,6 +187,48 @@
   }
 };
 
+
+/**
+ * Given an object, and the name of a method on that object, this
+ * function returns an anonymous function that, when called, will
+ * call the given method of the given object.
+ * 
+ * For example, doing:
+ * &lt;pre&gt;
+ *   foo.bar(a, b, c);
+ * &lt;/pre&gt;
+ * should be the same as doing:
+ * &lt;pre&gt;
+ *   var func = orp.lang.bind(foo, &quot;bar&quot;, a, b, c);
+ *   func();
+ * &lt;/pre&gt;
+ *
+ * For some background about what's going on here, see:
+ * <A HREF="http://www.deepwood.net/writing/method-references.html.utf8">http://www.deepwood.net/writing/method-references.html.utf8</A>
+ *
+ * @scope    public function
+ * @param    object    An object. 
+ * @param    methodName    A string with the name of a method that 'object' implements.
+ * @param    moreParameters    Optional.  As many additional arguments as you like.
+ */
+orp.lang.bind = function(object, methodName, moreParameters) {
+  var suppliedArguments = arguments;
+  if (suppliedArguments.length &gt; 2) {
+    var argumentArray = [];
+    for (var i = 2; i &lt; suppliedArguments.length; ++i) {
+      argumentArray.push(suppliedArguments[i]);
+    }
+    return function() {
+      object[methodName].apply(object, argumentArray);
+    }
+  } else {
+    return function() {
+      object[methodName].apply(object);
+    }
+  }
+};
+
+
 // -------------------------------------------------------------------
 // End of file
 // -------------------------------------------------------------------

Modified: trunk/source/util/Util.js
===================================================================
--- trunk/source/util/Util.js	2005-10-17 21:30:58 UTC (rev 363)
+++ trunk/source/util/Util.js	2005-10-18 02:15:08 UTC (rev 364)
@@ -421,30 +421,6 @@
 };
 
 
-/**
- * When passing an EventListener (e.g. onclick) a function, it is often useful to
- * 1) have the function be called by an instance of an object
- * 2) have additional arguments passed as parameters to the function
- * 3) some of these additional parameters in (2) are known only when the
- *    EventListener function is bound, not when the function is called
- * This utility function returns  a function that satisfies the above 3 reqs.
- * For more details see, <A HREF="http://www.deepwood.net/writing/method-references.html.utf8">http://www.deepwood.net/writing/method-references.html.utf8</A>
- * However, empirically, arguments is not an array in Firefox and cannot be
- * concat'd with an array, hence the mod.
- */
-Function.prototype.orpBindAsEventListener = function(object) {
-  var method = this;
-  var preappliedArguments = arguments;
-  return function (event) {
-    var args = [event || window.event];
-    for (var i = 1; i &lt; preappliedArguments.length; ++i) {
-      args.push(preappliedArguments[i]);
-    }
-    method.apply(object, args);
-  };
-};
-
-
 // -------------------------------------------------------------------
 // HTML document manipulation
 // -------------------------------------------------------------------

Modified: trunk/source/view/EntryView.js
===================================================================
--- trunk/source/view/EntryView.js	2005-10-17 21:30:58 UTC (rev 363)
+++ trunk/source/view/EntryView.js	2005-10-18 02:15:08 UTC (rev 364)
@@ -69,7 +69,6 @@
  * @param    isMultiLine     a boolean indicating if text view is single line or multi-line
  */
 orp.view.EntryView = function(superview, htmlElement, item, attribute, entry, isMultiLine) {
-  // orp.util.assert((!entry) || entry instanceof orp.model.Entry);
   orp.lang.assert(item instanceof orp.model.Item);
   orp.lang.assert(attribute instanceof orp.model.Item); // PENDING need to check that attribute is an attribute
   var FIXME_OCT_7_2005_EXPERIMENT = true;
@@ -197,7 +196,6 @@
  *
  */
 orp.view.EntryView.prototype.setExpectedTypeEntries = function(expectedTypeEntries) {
-  // orp.util.assert(orp.util.isArray(expectedTypeEntries));
   orp.lang.assertType(expectedTypeEntries, Array);
   for (var key in expectedTypeEntries) {
     orp.lang.assert(expectedTypeEntries[key] instanceof orp.model.Entry);
@@ -210,7 +208,6 @@
  *
  */
 orp.view.EntryView.prototype.setSuggestions = function(listOfSuggestions) {
-  // if (listOfSuggestions) {orp.util.assert(orp.util.isArray(listOfSuggestions));}
   orp.lang.assertTypeForOptionalValue(listOfSuggestions, Array);
   this._suggestions = listOfSuggestions;
 };
@@ -256,17 +253,10 @@
   var className = (this._isProvisional ? orp.view.EntryView.cssClass.PROVISIONAL : '');
   this._textSpan = orp.view.View.appendNewElement(htmlElement, &quot;span&quot;, className, null);
   this._textNode = orp.view.View.appendNewTextNode(this._textSpan, textString);
-  // if (this._isProvisional) {
-  //   this._textSpan.className = orp.view.EntryView.cssClass.PROVISIONAL;
-  // }
-  // else if (!this._alwaysUseEditField) {
-  //   this._setClassName();
-  // }
   if (!this._isProvisional &amp;&amp; !this._alwaysUseEditField) {
     this._setClassName();
   }
   
-  // htmlElement.onclick = this.onClick.orpBindAsEventListener(this);
   dojo.event.connect(htmlElement, &quot;onclick&quot;, this, &quot;onClick&quot;);
   if (this._alwaysUseEditField) {
     this.startEditing(true);
@@ -287,7 +277,6 @@
     var connectionType  = this.getWorld().getItemFromUuid(orp.model.World.UUID.TYPE_CONNECTION);
     if (dataType == itemType || dataType == connectionType) {
       if (this._isLozenge()) {
-        // this.getHtmlElement().ondblclick = this.onDoubleClick.orpBindAsEventListener(this);
         var htmlElement = this.getHtmlElement();
         dojo.event.connect(htmlElement, &quot;ondblclick&quot;, this, &quot;onDoubleClick&quot;);
         if (this.isInEditMode() &amp;&amp; !this._draggable) {

Modified: trunk/source/view/LoginView.js
===================================================================
--- trunk/source/view/LoginView.js	2005-10-17 21:30:58 UTC (rev 363)
+++ trunk/source/view/LoginView.js	2005-10-18 02:15:08 UTC (rev 364)
@@ -146,11 +146,9 @@
     this.usernameInput = orp.view.View.appendNewElement(mySpan, &quot;input&quot;, null, {size:20, value:&quot;Albert Einstein&quot;});
     orp.view.View.appendNewTextNode(mySpan,&quot; &quot;);
     this.passwordInput = orp.view.View.appendNewElement(mySpan, &quot;input&quot;, null, {size:10, type:&quot;password&quot;, value:&quot;randomdots&quot;});
-    // this.passwordInput.onkeypress = this._createAccountPasswordKeyPress.orpBindAsEventListener(this);
     dojo.event.connect(this.passwordInput, &quot;onkeypress&quot;, this, &quot;_createAccountPasswordKeyPress&quot;);
     orp.view.View.appendNewTextNode(mySpan, &quot; &quot;);
     var newAccountButton = orp.view.View.appendNewElement(mySpan ,&quot;input&quot;, null, {value:&quot;Create New Account&quot;, type:&quot;button&quot;});
-    // newAccountButton.onclick = this._clickOnNewAcctButton.orpBindAsEventListener(this);
     dojo.event.connect(newAccountButton, &quot;onclick&quot;, this, &quot;_clickOnNewAcctButton&quot;);
     this.usernameInput.select();
   } else if (currentUser) { 
@@ -160,12 +158,10 @@
     
     orp.view.View.appendNewTextNode(mySpan, &quot;Hello &quot; + currentUser.getDisplayString() + &quot;. &quot;);
     var signOutLink = orp.view.View.appendNewElement(mySpan, &quot;a&quot;, null, null, &quot;Sign out&quot;);
-    // signOutLink.onclick = this._clickOnSignoutLink.orpBindAsEventListener(this);
     dojo.event.connect(signOutLink, &quot;onclick&quot;, this, &quot;_clickOnSignoutLink&quot;);
     orp.view.View.appendNewTextNode(mySpan, &quot; &quot;);
     var showToolsButton = orp.view.View.appendNewElement(mySpan, &quot;input&quot;, null, {type:&quot;button&quot;, value:
       (this.getRootView().isInShowToolsMode()) ? &quot;Hide Tools&quot; : &quot;Show Tools&quot;});
-    // showToolsButton.onclick = this._clickOnShowToolsButton.orpBindAsEventListener(this);
     dojo.event.connect(showToolsButton, &quot;onclick&quot;, this, &quot;_clickOnShowToolsButton&quot;);
   }
   else {
@@ -174,20 +170,16 @@
     //   _Create Account_  or sign in:  _username_  _password_  [Sign in]
     
     var createAccountLink = orp.view.View.appendNewElement(mySpan, &quot;a&quot;, null, null, &quot;Create Account&quot;);
-    // createAccountLink.onclick = this._clickOnCreateAccountLink.orpBindAsEventListener(this);
     dojo.event.connect(createAccountLink, &quot;onclick&quot;, this, &quot;_clickOnCreateAccountLink&quot;);
     orp.view.View.appendNewTextNode(mySpan, &quot; or sign in: &quot;);
     this.usernameInput = orp.view.View.appendNewElement(mySpan, &quot;input&quot;, null, {size:20,value:&quot;Albert Einstein&quot;});
     mySpan.appendChild(document.createTextNode(&quot; &quot;));
     this.passwordInput = orp.view.View.appendNewElement(mySpan, &quot;input&quot;, null, {size:10,type:&quot;password&quot;,value:&quot;randomdots&quot;});
-    // this.passwordInput.onkeypress = this._signinPasswordKeyPress.orpBindAsEventListener(this);
-    // this.passwordInput.onfocus = this._signinPasswordFocus.orpBindAsEventListener(this);
     dojo.event.connect(this.passwordInput, &quot;onkeypress&quot;, this, &quot;_signinPasswordKeyPress&quot;);
     dojo.event.connect(this.passwordInput, &quot;onfocus&quot;, this, &quot;_signinPasswordFocus&quot;);
     this._myUsernameSuggestionBox = new orp.view.UserSuggestionBox(this.usernameInput, this.getWorld().getUsers(), this.passwordInput);
     mySpan.appendChild(document.createTextNode(&quot; &quot;));
     var signInButton = orp.view.View.appendNewElement(mySpan, &quot;input&quot;, null, {value:&quot;Sign in&quot;,type:&quot;button&quot;});
-    // signInButton.onclick = this._clickOnSignInButton.orpBindAsEventListener(this);
     dojo.event.connect(signInButton, &quot;onclick&quot;, this, &quot;_clickOnSignInButton&quot;);
   }
   
@@ -404,9 +396,6 @@
   this._userSuggestionBoxDivElement.style.display = &quot;none&quot;;
   document.body.appendChild(this._userSuggestionBoxDivElement);
   
-  // this._inputField.onkeyup = this._keyPressOnInputField.orpBindAsEventListener(this);
-  // this._inputField.onfocus = this._focusOnInputField.orpBindAsEventListener(this);
-  // this._inputField.onblur = this._blurOnInputField.orpBindAsEventListener(this);
   dojo.event.connect(this._inputField, &quot;onkeyup&quot;, this, &quot;_keyPressOnInputField&quot;);
   dojo.event.connect(this._inputField, &quot;onfocus&quot;, this, &quot;_focusOnInputField&quot;);
   dojo.event.connect(this._inputField, &quot;onblur&quot;, this, &quot;_blurOnInputField&quot;);
@@ -466,7 +455,7 @@
 /**
  *
  */
-orp.view.UserSuggestionBox.prototype._clickOnSelection = function(eventObject, string) {
+orp.view.UserSuggestionBox.prototype._clickOnSelection = function(string) {
   this._inputField.value = string;
   this._nextField.select();
 };
@@ -507,7 +496,7 @@
       var row = table.insertRow(rowNumber);
       var cell = row.insertCell(columnNumber);
       cell.appendChild(textNode);
-      cell.onmousedown = this._clickOnSelection.orpBindAsEventListener(this, string);
+      dojo.event.connect(cell, &quot;onmousedown&quot;, orp.lang.bind(this, &quot;_clickOnSelection&quot;, string));
       rowNumber += 1;
     }
     this._userSuggestionBoxDivElement.appendChild(table);

Modified: trunk/source/view/MultiEntriesView.js
===================================================================
--- trunk/source/view/MultiEntriesView.js	2005-10-17 21:30:58 UTC (rev 363)
+++ trunk/source/view/MultiEntriesView.js	2005-10-18 02:15:08 UTC (rev 364)
@@ -368,7 +368,6 @@
   }
   
   if (this.isInEditMode()) {
-    // htmlElement.onclick = this._handleOwnClick.orpBindAsEventListener(this);
     dojo.event.connect(htmlElement, &quot;onclick&quot;, this, &quot;_handleOwnClick&quot;);
     var listener = this;
     Droppables.add(htmlElement, {accept: [orp.view.EntryView.cssClass.CONNECTION_VALUE, orp.view.EntryView.CSS_ITEM_VALUE, orp.view.EntryView.cssClass.SELECTED],

Modified: trunk/source/view/NavbarView.js
===================================================================
--- trunk/source/view/NavbarView.js	2005-10-17 21:30:58 UTC (rev 363)
+++ trunk/source/view/NavbarView.js	2005-10-18 02:15:08 UTC (rev 364)
@@ -236,11 +236,62 @@
   var newPageButton = orp.view.View.appendNewElement(divElement, &quot;input&quot;, orp.view.RootView.cssClass.EDIT_TOOL);
   newPageButton.type = &quot;button&quot;;
   newPageButton.value = &quot;New Page&quot;;
-  // newPageButton.onclick = this._clickOnNewPageButton.orpBindAsEventListener(this);
   dojo.event.connect(newPageButton, &quot;onclick&quot;, this, &quot;_clickOnNewPageButton&quot;);
+
+  var FIXME_OCT_14_2005_EXPERIMENT = false;
+  if (FIXME_OCT_14_2005_EXPERIMENT) {
+    var stage = this;
+    
+    var kermitButton = orp.view.View.appendNewElement(divElement, &quot;input&quot;);
+    kermitButton.type = &quot;button&quot;;
+    kermitButton.value = &quot;Kermit&quot;;
+    // dojo.event.connect(kermitButton, &quot;onclick&quot;, function(evt){stage.addMuppet(&quot;Kermit was added&quot;);});
+    dojo.event.connect(kermitButton, &quot;onclick&quot;, this, &quot;plusMuppet&quot;);
+
+    var elmoButton = orp.view.View.appendNewElement(divElement, &quot;input&quot;);
+    elmoButton.type = &quot;button&quot;;
+    elmoButton.value = &quot;Elmo&quot;;
+    // dojo.event.connect(elmoButton, &quot;onclick&quot;, function(evt){stage.addMuppet(&quot;Elmo was added&quot;);});
+    dojo.event.connect(elmoButton, &quot;onclick&quot;, this, &quot;plusMuppet&quot;);
+
+    kermitButton.muppetName = &quot;Kermit the Frog&quot;;
+    elmoButton.muppetName = &quot;Elmo the Red&quot;;
+    window.kermitButton = kermitButton;
+    window.elmoButton = elmoButton;
+
+    var nobodyButton = orp.view.View.appendNewElement(divElement, &quot;input&quot;);
+    nobodyButton.type = &quot;button&quot;;
+    nobodyButton.value = &quot;nobody&quot;;
+    nobodyButton.orp_name = &quot;nobody :-(&quot;;
+    dojo.event.kwConnect({
+      srcObj:     nobodyButton, 
+      srcFunc:    &quot;onclick&quot;, 
+      targetObj:  stage,
+      targetFunc: &quot;addMuppetEvent&quot; });
+  }
+
 };
 
+var FIXME_OCT_14_2005_EXPERIMENT = false;
+if (FIXME_OCT_14_2005_EXPERIMENT) {
+orp.view.NavbarView.prototype.plusMuppet = function(event) {
+  alert(event.target.muppetName);
+  delete event.target.muppetName;
+  dojo.event.disconnect(window.kermitButton, &quot;onclick&quot;, this, &quot;plusMuppet&quot;);
+};
 
+orp.view.NavbarView.prototype.addMuppet = function(muppetName) {
+  muppetName = muppetName || &quot;nobody :-(&quot;;
+  alert(muppetName);
+};
+
+orp.view.NavbarView.prototype.addMuppetEvent = function(event, muppetName) {
+  
+  muppetName = muppetName || &quot;nobody :-(&quot;;
+  alert(event.target.orp_name);
+};
+}
+
 // -------------------------------------------------------------------
 // Event handler methods
 // -------------------------------------------------------------------

Modified: trunk/source/view/PageView.js
===================================================================
--- trunk/source/view/PageView.js	2005-10-17 21:30:58 UTC (rev 363)
+++ trunk/source/view/PageView.js	2005-10-18 02:15:08 UTC (rev 364)
@@ -272,7 +272,6 @@
     var editButton = orp.view.View.appendNewElement(this._editModeDiv, &quot;input&quot;);
     editButton.type = &quot;Button&quot;;
     editButton.value = &quot;New Section&quot;;
-    // editButton.onclick = this._addNewSection.orpBindAsEventListener(this);
     dojo.event.connect(editButton, &quot;onclick&quot;, this, &quot;_addNewSection&quot;);
   }
 };

Modified: trunk/source/view/RootView.js
===================================================================
--- trunk/source/view/RootView.js	2005-10-17 21:30:58 UTC (rev 363)
+++ trunk/source/view/RootView.js	2005-10-18 02:15:08 UTC (rev 364)
@@ -92,11 +92,8 @@
   
   this._currentlyInDisplayMethod = false;
   
-  // document.addEventListener(&quot;keypress&quot;, this._onKeyPress.orpBindAsEventListener(this),false);
   dojo.event.connect(document, &quot;onkeypress&quot;, this, &quot;_onKeyPress&quot;);
   
-  // window.document.body.innerHTML = &quot;&quot;;
-  // var rootDiv = orp.view.View.appendNewElement(window.document.body, &quot;div&quot;);
   var rootDiv = document.getElementById('OpenRecord');
   if (!rootDiv) {
     alert('Sorry, I could not find my &lt;div id=&quot;OpenRecord&quot;&gt; element');

Modified: trunk/source/view/SuggestionBox.js
===================================================================
--- trunk/source/view/SuggestionBox.js	2005-10-17 21:30:58 UTC (rev 363)
+++ trunk/source/view/SuggestionBox.js	2005-10-18 02:15:08 UTC (rev 364)
@@ -37,6 +37,7 @@
 dojo.provide(&quot;orp.view.SuggestionBox&quot;);
 dojo.require(&quot;orp.util.Util&quot;);
 dojo.require(&quot;dojo.event.*&quot;);
+dojo.require(&quot;orp.dom&quot;);
 
 // -------------------------------------------------------------------
 // Dependencies, expressed in the syntax that JSLint understands:
@@ -195,7 +196,7 @@
 /**
  *
  */
-orp.view.SuggestionBox.prototype._clickOnSelection = function(eventObject, item) {
+orp.view.SuggestionBox.prototype._clickOnSelection = function(item) {
   this._selectedItem = item;
 };
 
@@ -254,12 +255,8 @@
       var row = table.insertRow(rowNumber);
       var cell = row.insertCell(columnNumber);
       row.className = (this._selectedItem == item) ? &quot;selected&quot;:&quot;&quot;;
-      cell.appendChild(textNode);
-      
-      // FIXME: need to figure out how to pass &quot;item&quot; as a parameter via dojo.event.connect()
-      cell.onmousedown = this._clickOnSelection.orpBindAsEventListener(this, item);
-      // dojo.event.connect(cell, &quot;onmousedown&quot;, this, &quot;_clickOnSelection&quot;);
-      
+      cell.appendChild(textNode);    
+      dojo.event.connect(cell, &quot;onmousedown&quot;, orp.lang.bind(this, &quot;_clickOnSelection&quot;, item));
       rowNumber += 1;
     }
     this._suggestionBoxDivElement.appendChild(table);

Modified: trunk/source/view/View.js
===================================================================
--- trunk/source/view/View.js	2005-10-17 21:30:58 UTC (rev 363)
+++ trunk/source/view/View.js	2005-10-18 02:15:08 UTC (rev 364)
@@ -34,6 +34,7 @@
 // -------------------------------------------------------------------
 dojo.provide(&quot;orp.view.View&quot;);
 dojo.require(&quot;orp.util.Util&quot;);
+dojo.require(&quot;orp.uuid.TimeBasedUuid&quot;);
 dojo.require(&quot;orp.lang.Lang&quot;);
 
 // -------------------------------------------------------------------

Modified: trunk/tests/LintTest.js
===================================================================
--- trunk/tests/LintTest.js	2005-10-17 21:30:58 UTC (rev 363)
+++ trunk/tests/LintTest.js	2005-10-18 02:15:08 UTC (rev 364)
@@ -71,6 +71,7 @@
 
 function testJsLintOnOpenRecordCode() {
   var listOfSourceCodeFiles = [
+    &quot;dom.js&quot;,
     &quot;OpenRecordLoaderStepThree.js&quot;,
     &quot;TablePlugin.js&quot;,
     &quot;OutlinePlugin.js&quot;,

Modified: trunk/tests/TestSuite.html
===================================================================
--- trunk/tests/TestSuite.html	2005-10-17 21:30:58 UTC (rev 363)
+++ trunk/tests/TestSuite.html	2005-10-18 02:15:08 UTC (rev 364)
@@ -25,6 +25,7 @@
         var testSuite = new window.top.jsUnitTestSuite();
         testSuite.addTestPage(&quot;../../../tests/SimpleTest.html&quot;);
         testSuite.addTestPage(&quot;../../../tests/dojo/SimpleDojoTest.html&quot;);
+        testSuite.addTestPage(&quot;../../../tests/dom/domTest.html&quot;);
         testSuite.addTestPage(&quot;../../../tests/lang/LangTest.html&quot;);
         testSuite.addTestPage(&quot;../../../tests/util/TestSuite.html&quot;);
         testSuite.addTestPage(&quot;../../../tests/uuid/TestSuite.html&quot;);

Modified: trunk/tests/archive/LintTest.js
===================================================================
--- trunk/tests/archive/LintTest.js	2005-10-17 21:30:58 UTC (rev 363)
+++ trunk/tests/archive/LintTest.js	2005-10-18 02:15:08 UTC (rev 364)
@@ -40,7 +40,7 @@
 // -------------------------------------------------------------------
 
 function setUp() {
-  dojo.hostenv.setModulePrefix(&quot;dojo&quot;, &quot;../../../dojo/dojo-0.1.0/src&quot;);
+  dojo.hostenv.setModulePrefix(&quot;dojo&quot;, &quot;../../../dojo/dojo-rev1759/src&quot;);
   dojo.hostenv.setModulePrefix(&quot;orp&quot;, &quot;../../../../source&quot;);
   dojo.require(&quot;orp.util.LintTool&quot;);
 }

Modified: trunk/tests/dojo/SimpleDojoTest.js
===================================================================
--- trunk/tests/dojo/SimpleDojoTest.js	2005-10-17 21:30:58 UTC (rev 363)
+++ trunk/tests/dojo/SimpleDojoTest.js	2005-10-18 02:15:08 UTC (rev 364)
@@ -33,7 +33,7 @@
 // -------------------------------------------------------------------
 
 function setUp() {
-  dojo.hostenv.setModulePrefix(&quot;dojo&quot;, &quot;../../../dojo/dojo-0.1.0/src&quot;);
+  dojo.hostenv.setModulePrefix(&quot;dojo&quot;, &quot;../../../dojo/dojo-rev1759/src&quot;);
 }
 
 function tearDown() {

Added: trunk/tests/dom/domTest.html
===================================================================
--- trunk/tests/dom/domTest.html	2005-10-17 21:30:58 UTC (rev 363)
+++ trunk/tests/dom/domTest.html	2005-10-18 02:15:08 UTC (rev 364)
@@ -0,0 +1,76 @@
+&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
+&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.1//EN&quot; &quot;<A HREF="http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd</A>&quot;&gt;
+&lt;html xmlns=&quot;<A HREF="http://www.w3.org/1999/xhtml">http://www.w3.org/1999/xhtml</A>&quot; xml:lang=&quot;en&quot; &gt;
+
+&lt;!-- 
+ Written in 2005 by Brian Douglas Skinner &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openrecord-svn">brian.skinner at gumption.org</A>&gt;
+  
+ Copyright rights relinquished under the Creative Commons  
+ Public Domain Dedication:
+    <A HREF="http://creativecommons.org/licenses/publicdomain/">http://creativecommons.org/licenses/publicdomain/</A>
+--&gt;
+
+  &lt;head&gt;
+    &lt;title&gt;Unit tests for orp.dom&lt;/title&gt;
+
+    &lt;script type=&quot;text/javascript&quot; src=&quot;../../third_party/jsunit/jsunit2_1/app/jsUnitCore.js&quot;&gt;&lt;/script&gt;
+    &lt;script type=&quot;text/javascript&quot; src=&quot;../../third_party/dojo/dojo-rev1759/dojo.js&quot;&gt;&lt;/script&gt;
+    &lt;script type=&quot;text/javascript&quot; src=&quot;domTest.js&quot;&gt;&lt;/script&gt;
+  &lt;/head&gt;
+  
+  &lt;body&gt;
+    &lt;h1&gt;Unit tests for orp.dom&lt;/h1&gt;
+
+    &lt;p&gt;This page is used to run unit tests for the JavaScript code in the 
+    OpenRecord project.&lt;/p&gt;
+    
+    &lt;p&gt;&nbsp;&lt;/p&gt;
+    &lt;hr/&gt;
+    &lt;p&gt;You should be able to run these unit tests by going to
+    &lt;a href=&quot;../../third_party/jsunit/jsunit2_1/testRunner.html?testpage=&quot; 
+    onclick=&quot;href+=window.location.href;&quot; rel=&quot;external&quot;&gt;the local testRunner 
+    page&lt;/a&gt;, and hitting the &lt;b&gt;Run&lt;/b&gt; button. &lt;/p&gt;
+
+    &lt;p&gt;To see the tests, open this .html file in a text editor. Or, within a  
+    web browser, you should be able see the source for this file by using 
+    some menu like &lt;b&gt;View&lt;/b&gt; followed by &lt;b&gt;Page Source&lt;/b&gt;. The tests 
+    may be in this file, or they may be in a separate file that has the
+    same name as this one, except with a .js extension instead of a .html
+    extension.&lt;/p&gt;
+ 
+    &lt;p&gt;The unit tests are set up to run in the
+    &lt;a href=&quot;<A HREF="http://www.edwardh.com/jsunit/">http://www.edwardh.com/jsunit/</A>&quot; rel=&quot;external&quot;&gt;JsUnit framework&lt;/a&gt;
+    written by 
+    &lt;a href=&quot;<A HREF="http://www.edwardh.com/">http://www.edwardh.com/</A>&quot; rel=&quot;external&quot;&gt;Edward Hieatt&lt;/a&gt;. &lt;/p&gt;
+
+    &lt;p&gt;&nbsp;&lt;/p&gt;
+    &lt;hr/&gt;
+    &lt;p class=&quot;copyright&quot;&gt;You can copy freely from this work &mdash; copyright 
+    rights relinquished under the Creative Commons  
+    &lt;a rel=&quot;license external&quot; 
+    href=&quot;<A HREF="http://creativecommons.org/licenses/publicdomain/">http://creativecommons.org/licenses/publicdomain/</A>&quot;&gt;Public Domain 
+    Dedication&lt;/a&gt;.&lt;/p&gt;
+
+&lt;!-- Creative Commons metadata for Public Domain License 
+
+&lt;rdf:RDF xmlns=&quot;<A HREF="http://web.resource.org/cc/">http://web.resource.org/cc/</A>&quot;
+    xmlns:dc=&quot;<A HREF="http://purl.org/dc/elements/1.1/">http://purl.org/dc/elements/1.1/</A>&quot;
+    xmlns:rdf=&quot;<A HREF="http://www.w3.org/1999/02/22-rdf-syntax-ns#">http://www.w3.org/1999/02/22-rdf-syntax-ns#</A>&quot;&gt;
+&lt;Work rdf:about=&quot;&quot;&gt;
+   &lt;dc:title&gt;openrecord.org&lt;/dc:title&gt;
+   &lt;dc:type rdf:resource=&quot;<A HREF="http://purl.org/dc/dcmitype/Text">http://purl.org/dc/dcmitype/Text</A>&quot; /&gt;
+   &lt;license rdf:resource=&quot;<A HREF="http://web.resource.org/cc/PublicDomain">http://web.resource.org/cc/PublicDomain</A>&quot; /&gt;
+&lt;/Work&gt;
+
+&lt;License rdf:about=&quot;<A HREF="http://web.resource.org/cc/PublicDomain">http://web.resource.org/cc/PublicDomain</A>&quot;&gt;
+   &lt;permits rdf:resource=&quot;<A HREF="http://web.resource.org/cc/Reproduction">http://web.resource.org/cc/Reproduction</A>&quot; /&gt;
+   &lt;permits rdf:resource=&quot;<A HREF="http://web.resource.org/cc/Distribution">http://web.resource.org/cc/Distribution</A>&quot; /&gt;
+   &lt;permits rdf:resource=&quot;<A HREF="http://web.resource.org/cc/DerivativeWorks">http://web.resource.org/cc/DerivativeWorks</A>&quot; /&gt;
+&lt;/License&gt;
+
+&lt;/rdf:RDF&gt;
+
+--&gt;
+  &lt;/body&gt;
+&lt;/html&gt;
+

Added: trunk/tests/dom/domTest.js
===================================================================
--- trunk/tests/dom/domTest.js	2005-10-17 21:30:58 UTC (rev 363)
+++ trunk/tests/dom/domTest.js	2005-10-18 02:15:08 UTC (rev 364)
@@ -0,0 +1,79 @@
+/*****************************************************************************
+ domTest.js
+ 
+******************************************************************************
+ Written in 2005 by Brian Douglas Skinner &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openrecord-svn">brian.skinner at gumption.org</A>&gt;
+  
+ Copyright rights relinquished under the Creative Commons  
+ Public Domain Dedication:
+    <A HREF="http://creativecommons.org/licenses/publicdomain/">http://creativecommons.org/licenses/publicdomain/</A>
+  
+ You can copy freely from this file.  This work may be freely reproduced, 
+ distributed, transmitted, used, modified, built upon, or otherwise exploited
+ by anyone for any purpose.
+  
+ This work is provided on an &quot;AS IS&quot; basis, without warranties or conditions 
+ of any kind, either express or implied, including, without limitation, any 
+ warranties or conditions of title, non-infringement, merchantability, or 
+ fitness for a particular purpose. You are solely responsible for determining 
+ the appropriateness of using or distributing the work and assume all risks 
+ associated with use of this work, including but not limited to the risks and 
+ costs of errors, compliance with applicable laws, damage to or loss of data 
+ or equipment, and unavailability or interruption of operations.
+
+ In no event shall the authors or contributors have any liability for any 
+ direct, indirect, incidental, special, exemplary, or consequential damages,
+ however caused and on any theory of liability, whether in contract, strict 
+ liability, or tort (including negligence), arising in any way out of or in 
+ connection with the use or distribution of the work.
+*****************************************************************************/
+ 
+
+// -------------------------------------------------------------------
+// setUp and tearDown
+// -------------------------------------------------------------------
+
+function setUp() {
+  dojo.hostenv.setModulePrefix(&quot;dojo&quot;, &quot;../../../dojo/dojo-rev1759/src&quot;);
+  dojo.hostenv.setModulePrefix(&quot;orp&quot;, &quot;../../../../source&quot;);
+  dojo.require(&quot;orp.dom&quot;);
+}
+
+function tearDown() {
+}
+
+
+// -------------------------------------------------------------------
+// Test functions
+// -------------------------------------------------------------------
+
+function testSimpleErrorCatching() {
+  divElementOne = window.document.createElement('div');
+  divElementTwo = window.document.createElement('div');
+  
+  document.body.appendChild(divElementOne);
+  document.body.appendChild(divElementTwo);
+  
+  orp.dom.setKeywordValueForElement(divElementOne, &quot;foo&quot;, 34);
+  var fooValueOne = orp.dom.getKeywordValueForElement(divElementOne, &quot;foo&quot;);
+  var fooValueTwo = orp.dom.getKeywordValueForElement(divElementTwo, &quot;foo&quot;);
+ 
+  assertTrue('divElementOne has a &quot;foo&quot; value of 34', (fooValueOne === 34));
+  assertTrue('divElementTwo does not have a &quot;foo&quot; value', (fooValueTwo === null));
+
+  var barValueOne = {a: 1, b: 2};
+  var barValueTwo = &quot;Kermit the Frog&quot;;
+  orp.dom.setKeywordValueForElement(divElementOne, &quot;bar&quot;, barValueOne);
+  orp.dom.setKeywordValueForElement(divElementTwo, &quot;bar&quot;, barValueTwo);
+  
+  var barOneToo = orp.dom.getKeywordValueForElement(divElementOne, &quot;bar&quot;);
+  var barTwoToo = orp.dom.getKeywordValueForElement(divElementTwo, &quot;bar&quot;);
+  
+  assertTrue('divElementOne has a &quot;foo&quot; value of 34', (barValueOne === barOneToo));
+  assertTrue('divElementTwo does not have a &quot;foo&quot; value', (barValueTwo === barTwoToo));
+
+}
+
+// -------------------------------------------------------------------
+// End of file
+// -------------------------------------------------------------------

Modified: trunk/tests/lang/LangTest.js
===================================================================
--- trunk/tests/lang/LangTest.js	2005-10-17 21:30:58 UTC (rev 363)
+++ trunk/tests/lang/LangTest.js	2005-10-18 02:15:08 UTC (rev 364)
@@ -34,7 +34,7 @@
 // -------------------------------------------------------------------
 
 function setUp() {
-  dojo.hostenv.setModulePrefix(&quot;dojo&quot;, &quot;../../../dojo/dojo-0.1.0/src&quot;);
+  dojo.hostenv.setModulePrefix(&quot;dojo&quot;, &quot;../../../dojo/dojo-rev1759/src&quot;);
   dojo.hostenv.setModulePrefix(&quot;orp&quot;, &quot;../../../../source&quot;);
   dojo.require(&quot;orp.lang.Lang&quot;);
 }
@@ -181,7 +181,50 @@
   orp.lang.assert(false, &quot;This is an example of an assert that fails.&quot;);
 }
 
+function testBind() {
+  function Box(boxName) {
+    this._boxName = boxName;
+  }
+  Box.prototype.setDimensions = function(x, y, z, etc) {
+    this._dimensions = [];
+    for (var i = 0; i &lt; arguments.length; ++i) {
+      this._dimensions[i] = arguments[i];
+    }
+  };
+  Box.prototype.getVolume = function() {
+    var volume = 1;
+    for (var i in this._dimensions) {
+      volume = volume * this._dimensions[i];
+    }
+    return volume;
+  };
+  
+  var box = new Box();
+  
+  // make the box be a two-dimensional square
+  var square = orp.lang.bind(box, &quot;setDimensions&quot;, 2, 3);
+  square();
+  assertTrue(&quot;Bind works with 2 arguments.&quot;, (box.getVolume() == (2 * 3)) );
+  
+  // make the box be a three-dimensional cube
+  var cube = orp.lang.bind(box, &quot;setDimensions&quot;, 2, 3, 4);
+  cube();
+  assertTrue(&quot;Bind works with 3 arguments.&quot;, (box.getVolume() == (2 * 3 * 4)) );
+  
+  // make the box be a one-dimensional line
+  var line = orp.lang.bind(box, &quot;setDimensions&quot;, 2);
+  line();
+  assertTrue(&quot;Bind works with 1 argument.&quot;, (box.getVolume() == (2)) );
+  
+  // make the box be a zero-dimensional point
+  var point = orp.lang.bind(box, &quot;setDimensions&quot;);
+  point();
+  assertTrue(&quot;Bind works with 1 argument.&quot;, (box.getVolume() == (1)) );  
+}
 
+// -------------------------------------------------------------------
+// Helper functions
+// -------------------------------------------------------------------
 
 // -------------------------------------------------------------------
 // End of file

Modified: trunk/tests/model/LintTest.js
===================================================================
--- trunk/tests/model/LintTest.js	2005-10-17 21:30:58 UTC (rev 363)
+++ trunk/tests/model/LintTest.js	2005-10-18 02:15:08 UTC (rev 364)
@@ -40,7 +40,7 @@
 // -------------------------------------------------------------------
 
 function setUp() {
-  dojo.hostenv.setModulePrefix(&quot;dojo&quot;, &quot;../../../dojo/dojo-0.1.0/src&quot;);
+  dojo.hostenv.setModulePrefix(&quot;dojo&quot;, &quot;../../../dojo/dojo-rev1759/src&quot;);
   dojo.hostenv.setModulePrefix(&quot;orp&quot;, &quot;../../../../source&quot;);
   dojo.require(&quot;orp.util.LintTool&quot;);
 }

Modified: trunk/tests/model/ModelTest.js
===================================================================
--- trunk/tests/model/ModelTest.js	2005-10-17 21:30:58 UTC (rev 363)
+++ trunk/tests/model/ModelTest.js	2005-10-18 02:15:08 UTC (rev 364)
@@ -46,7 +46,7 @@
 // -------------------------------------------------------------------
 
 function setUp() {
-  dojo.hostenv.setModulePrefix(&quot;dojo&quot;, &quot;../../../dojo/dojo-0.1.0/src&quot;);
+  dojo.hostenv.setModulePrefix(&quot;dojo&quot;, &quot;../../../dojo/dojo-rev1759/src&quot;);
   dojo.hostenv.setModulePrefix(&quot;orp&quot;, &quot;../../../../source&quot;);
   dojo.require(&quot;orp.model.World&quot;);
   dojo.require(&quot;orp.archive.StubArchive&quot;);

Modified: trunk/tests/model/RepositoryWritingTest.js
===================================================================
--- trunk/tests/model/RepositoryWritingTest.js	2005-10-17 21:30:58 UTC (rev 363)
+++ trunk/tests/model/RepositoryWritingTest.js	2005-10-18 02:15:08 UTC (rev 364)
@@ -42,7 +42,7 @@
 // -------------------------------------------------------------------
 
 function setUp() {
-  dojo.hostenv.setModulePrefix(&quot;dojo&quot;, &quot;../../../dojo/dojo-0.1.0/src&quot;);
+  dojo.hostenv.setModulePrefix(&quot;dojo&quot;, &quot;../../../dojo/dojo-rev1759/src&quot;);
   dojo.hostenv.setModulePrefix(&quot;orp&quot;, &quot;../../../../source&quot;);
   dojo.require(&quot;orp.archive.DeltaArchive&quot;);
   dojo.require(&quot;orp.model.World&quot;);

Modified: trunk/tests/model/TestReorderingForSpecialCases.js
===================================================================
--- trunk/tests/model/TestReorderingForSpecialCases.js	2005-10-17 21:30:58 UTC (rev 363)
+++ trunk/tests/model/TestReorderingForSpecialCases.js	2005-10-18 02:15:08 UTC (rev 364)
@@ -48,7 +48,7 @@
 // -------------------------------------------------------------------
 
 function setUp() {
-  dojo.hostenv.setModulePrefix(&quot;dojo&quot;, &quot;../../../dojo/dojo-0.1.0/src&quot;);
+  dojo.hostenv.setModulePrefix(&quot;dojo&quot;, &quot;../../../dojo/dojo-rev1759/src&quot;);
   dojo.hostenv.setModulePrefix(&quot;orp&quot;, &quot;../../../../source&quot;);
   dojo.require(&quot;orp.archive.StubArchive&quot;);
   dojo.require(&quot;orp.model.World&quot;);

Modified: trunk/tests/model/TestReorderingForTypicalOrdinals.js
===================================================================
--- trunk/tests/model/TestReorderingForTypicalOrdinals.js	2005-10-17 21:30:58 UTC (rev 363)
+++ trunk/tests/model/TestReorderingForTypicalOrdinals.js	2005-10-18 02:15:08 UTC (rev 364)
@@ -52,7 +52,7 @@
 // -------------------------------------------------------------------
 
 function setUp() {
-  dojo.hostenv.setModulePrefix(&quot;dojo&quot;, &quot;../../../dojo/dojo-0.1.0/src&quot;);
+  dojo.hostenv.setModulePrefix(&quot;dojo&quot;, &quot;../../../dojo/dojo-rev1759/src&quot;);
   dojo.hostenv.setModulePrefix(&quot;orp&quot;, &quot;../../../../source&quot;);
   dojo.require(&quot;orp.archive.StubArchive&quot;);
   dojo.require(&quot;orp.model.World&quot;);

Modified: trunk/tests/storage/LintTest.js
===================================================================
--- trunk/tests/storage/LintTest.js	2005-10-17 21:30:58 UTC (rev 363)
+++ trunk/tests/storage/LintTest.js	2005-10-18 02:15:08 UTC (rev 364)
@@ -40,7 +40,7 @@
 // -------------------------------------------------------------------
 
 function setUp() {
-  dojo.hostenv.setModulePrefix(&quot;dojo&quot;, &quot;../../../dojo/dojo-0.1.0/src&quot;);
+  dojo.hostenv.setModulePrefix(&quot;dojo&quot;, &quot;../../../dojo/dojo-rev1759/src&quot;);
   dojo.hostenv.setModulePrefix(&quot;orp&quot;, &quot;../../../../source&quot;);
   dojo.require(&quot;orp.util.LintTool&quot;);
 }

Modified: trunk/tests/tests_of_external_code/TimingTest.js
===================================================================
--- trunk/tests/tests_of_external_code/TimingTest.js	2005-10-17 21:30:58 UTC (rev 363)
+++ trunk/tests/tests_of_external_code/TimingTest.js	2005-10-18 02:15:08 UTC (rev 364)
@@ -78,7 +78,7 @@
 // -------------------------------------------------------------------
 
 function setUp() {
-  dojo.hostenv.setModulePrefix(&quot;dojo&quot;, &quot;../../../dojo/dojo-0.1.0/src&quot;);
+  dojo.hostenv.setModulePrefix(&quot;dojo&quot;, &quot;../../../dojo/dojo-rev1759/src&quot;);
   dojo.hostenv.setModulePrefix(&quot;orp&quot;, &quot;../../../../source&quot;);
   dojo.require(&quot;orp.util.Util&quot;);
 }

Modified: trunk/tests/util/CsvParserTest.js
===================================================================
--- trunk/tests/util/CsvParserTest.js	2005-10-17 21:30:58 UTC (rev 363)
+++ trunk/tests/util/CsvParserTest.js	2005-10-18 02:15:08 UTC (rev 364)
@@ -36,7 +36,7 @@
 // -------------------------------------------------------------------
 
 function setUp() {
-  dojo.hostenv.setModulePrefix(&quot;dojo&quot;, &quot;../../../dojo/dojo-0.1.0/src&quot;);
+  dojo.hostenv.setModulePrefix(&quot;dojo&quot;, &quot;../../../dojo/dojo-rev1759/src&quot;);
   dojo.hostenv.setModulePrefix(&quot;orp&quot;, &quot;../../../../source&quot;);
   dojo.require(&quot;dojo.lang.*&quot;);
   dojo.require(&quot;orp.util.CsvParser&quot;);

Modified: trunk/tests/util/DateValueTest.js
===================================================================
--- trunk/tests/util/DateValueTest.js	2005-10-17 21:30:58 UTC (rev 363)
+++ trunk/tests/util/DateValueTest.js	2005-10-18 02:15:08 UTC (rev 364)
@@ -36,7 +36,7 @@
 // -------------------------------------------------------------------
 
 function setUp() {
-  dojo.hostenv.setModulePrefix(&quot;dojo&quot;, &quot;../../../dojo/dojo-0.1.0/src&quot;);
+  dojo.hostenv.setModulePrefix(&quot;dojo&quot;, &quot;../../../dojo/dojo-rev1759/src&quot;);
   dojo.hostenv.setModulePrefix(&quot;orp&quot;, &quot;../../../../source&quot;);
   dojo.require(&quot;orp.util.Util&quot;);
   dojo.require(&quot;orp.util.DateValue&quot;);

Modified: trunk/tests/util/LintTest.js
===================================================================
--- trunk/tests/util/LintTest.js	2005-10-17 21:30:58 UTC (rev 363)
+++ trunk/tests/util/LintTest.js	2005-10-18 02:15:08 UTC (rev 364)
@@ -40,7 +40,7 @@
 // -------------------------------------------------------------------
 
 function setUp() {
-  dojo.hostenv.setModulePrefix(&quot;dojo&quot;, &quot;../../../dojo/dojo-0.1.0/src&quot;);
+  dojo.hostenv.setModulePrefix(&quot;dojo&quot;, &quot;../../../dojo/dojo-rev1759/src&quot;);
   dojo.hostenv.setModulePrefix(&quot;orp&quot;, &quot;../../../../source&quot;);
   dojo.require(&quot;orp.util.LintTool&quot;);
 }

Modified: trunk/tests/util/UtilTest.js
===================================================================
--- trunk/tests/util/UtilTest.js	2005-10-17 21:30:58 UTC (rev 363)
+++ trunk/tests/util/UtilTest.js	2005-10-18 02:15:08 UTC (rev 364)
@@ -38,7 +38,7 @@
 // -------------------------------------------------------------------
 
 function setUp() {
-  dojo.hostenv.setModulePrefix(&quot;dojo&quot;, &quot;../../../dojo/dojo-0.1.0/src&quot;);
+  dojo.hostenv.setModulePrefix(&quot;dojo&quot;, &quot;../../../dojo/dojo-rev1759/src&quot;);
   dojo.hostenv.setModulePrefix(&quot;orp&quot;, &quot;../../../../source&quot;);
   dojo.require(&quot;orp.util.Util&quot;);
   dojo.require(&quot;dojo.lang.*&quot;);

Modified: trunk/tests/util/XmlConverterMultiplePassesTest.js
===================================================================
--- trunk/tests/util/XmlConverterMultiplePassesTest.js	2005-10-17 21:30:58 UTC (rev 363)
+++ trunk/tests/util/XmlConverterMultiplePassesTest.js	2005-10-18 02:15:08 UTC (rev 364)
@@ -39,7 +39,7 @@
 
 function setUp() {
   dojo.hostenv.setModulePrefix(&quot;orp&quot;, &quot;../../../../source&quot;);
-  dojo.hostenv.setModulePrefix(&quot;dojo&quot;, &quot;../../../dojo/dojo-0.1.0/src&quot;);
+  dojo.hostenv.setModulePrefix(&quot;dojo&quot;, &quot;../../../dojo/dojo-rev1759/src&quot;);
   dojo.require(&quot;orp.util.XmlConverter&quot;);
   dojo.require(&quot;orp.util.Util&quot;);
   dojo.require(&quot;orp.archive.StubArchive&quot;);

Modified: trunk/tests/util/XmlConverterTest.js
===================================================================
--- trunk/tests/util/XmlConverterTest.js	2005-10-17 21:30:58 UTC (rev 363)
+++ trunk/tests/util/XmlConverterTest.js	2005-10-18 02:15:08 UTC (rev 364)
@@ -37,7 +37,7 @@
 
 function setUp() {
   dojo.hostenv.setModulePrefix(&quot;orp&quot;, &quot;../../../../source&quot;);
-  dojo.hostenv.setModulePrefix(&quot;dojo&quot;, &quot;../../../dojo/dojo-0.1.0/src&quot;);
+  dojo.hostenv.setModulePrefix(&quot;dojo&quot;, &quot;../../../dojo/dojo-rev1759/src&quot;);
   dojo.require(&quot;orp.util.XmlConverter&quot;);
   dojo.require(&quot;orp.util.Util&quot;);
   dojo.require(&quot;orp.archive.StubArchive&quot;);

Modified: trunk/tests/uuid/LintTest.js
===================================================================
--- trunk/tests/uuid/LintTest.js	2005-10-17 21:30:58 UTC (rev 363)
+++ trunk/tests/uuid/LintTest.js	2005-10-18 02:15:08 UTC (rev 364)
@@ -40,7 +40,7 @@
 // -------------------------------------------------------------------
 
 function setUp() {
-  dojo.hostenv.setModulePrefix(&quot;dojo&quot;, &quot;../../../dojo/dojo-0.1.0/src&quot;);
+  dojo.hostenv.setModulePrefix(&quot;dojo&quot;, &quot;../../../dojo/dojo-rev1759/src&quot;);
   dojo.hostenv.setModulePrefix(&quot;orp&quot;, &quot;../../../../source&quot;);
   dojo.require(&quot;orp.util.LintTool&quot;);
 }

Modified: trunk/tests/uuid/UuidTest.js
===================================================================
--- trunk/tests/uuid/UuidTest.js	2005-10-17 21:30:58 UTC (rev 363)
+++ trunk/tests/uuid/UuidTest.js	2005-10-18 02:15:08 UTC (rev 364)
@@ -40,7 +40,7 @@
 
 function setUp() {
   dojo.hostenv.setModulePrefix(&quot;orp&quot;, &quot;../../../../source&quot;);
-  dojo.hostenv.setModulePrefix(&quot;dojo&quot;, &quot;../../../dojo/dojo-0.1.0/src&quot;);
+  dojo.hostenv.setModulePrefix(&quot;dojo&quot;, &quot;../../../dojo/dojo-rev1759/src&quot;);
   dojo.require(&quot;orp.uuid.factory&quot;);
   dojo.require(&quot;orp.uuid.Uuid&quot;);
   dojo.require(&quot;orp.uuid.RandomUuid&quot;);

Modified: trunk/tests/view/LintTest.js
===================================================================
--- trunk/tests/view/LintTest.js	2005-10-17 21:30:58 UTC (rev 363)
+++ trunk/tests/view/LintTest.js	2005-10-18 02:15:08 UTC (rev 364)
@@ -40,7 +40,7 @@
 // -------------------------------------------------------------------
 
 function setUp() {
-  dojo.hostenv.setModulePrefix(&quot;dojo&quot;, &quot;../../../dojo/dojo-0.1.0/src&quot;);
+  dojo.hostenv.setModulePrefix(&quot;dojo&quot;, &quot;../../../dojo/dojo-rev1759/src&quot;);
   dojo.hostenv.setModulePrefix(&quot;orp&quot;, &quot;../../../../source&quot;);
   dojo.require(&quot;orp.util.LintTool&quot;);
 }


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000345.html">[openrecord-svn] r363 - trunk/tests
</A></li>
	<LI>Next message: <A HREF="000347.html">[openrecord-svn] r365 - in trunk/source: . view
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#346">[ date ]</a>
              <a href="thread.html#346">[ thread ]</a>
              <a href="subject.html#346">[ subject ]</a>
              <a href="author.html#346">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openrecord-svn">More information about the openrecord-svn
mailing list</a><br>
</body></html>
