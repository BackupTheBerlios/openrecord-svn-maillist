<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [openrecord-svn] r312 - in trunk/source: scrap_yard util
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openrecord-svn/2005-September/index.html" >
   <LINK REL="made" HREF="mailto:openrecord-svn%40lists.berlios.de?Subject=Re%3A%20%5Bopenrecord-svn%5D%20r312%20-%20in%20trunk/source%3A%20scrap_yard%20util&In-Reply-To=%3C200509012301.j81N1Sj0011566%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000296.html">
   <LINK REL="Next"  HREF="000298.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[openrecord-svn] r312 - in trunk/source: scrap_yard util</H1>
    <B>Brian Douglas Skinner at BerliOS</B> 
    <A HREF="mailto:openrecord-svn%40lists.berlios.de?Subject=Re%3A%20%5Bopenrecord-svn%5D%20r312%20-%20in%20trunk/source%3A%20scrap_yard%20util&In-Reply-To=%3C200509012301.j81N1Sj0011566%40sheep.berlios.de%3E"
       TITLE="[openrecord-svn] r312 - in trunk/source: scrap_yard util">skinner at berlios.de
       </A><BR>
    <I>Fri Sep  2 01:01:28 CEST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="000296.html">[openrecord-svn] r311 - trunk/documentation
</A></li>
        <LI>Next message: <A HREF="000298.html">[openrecord-svn] r313 - trunk/source/model
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#297">[ date ]</a>
              <a href="thread.html#297">[ thread ]</a>
              <a href="subject.html#297">[ subject ]</a>
              <a href="author.html#297">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: skinner
Date: 2005-09-02 01:01:19 +0200 (Fri, 02 Sep 2005)
New Revision: 312

Modified:
   trunk/source/scrap_yard/TimingTest.html
   trunk/source/scrap_yard/TimingTest.js
   trunk/source/util/UtilTest.html
Log:
Timing tests for different object definition idioms. 

Modified: trunk/source/scrap_yard/TimingTest.html
===================================================================
--- trunk/source/scrap_yard/TimingTest.html	2005-09-01 20:59:54 UTC (rev 311)
+++ trunk/source/scrap_yard/TimingTest.html	2005-09-01 23:01:19 UTC (rev 312)
@@ -15,7 +15,6 @@
 
     &lt;script type=&quot;text/javascript&quot; src=&quot;../../third_party/jsunit/jsunit2_1/app/jsUnitCore.js&quot;&gt;&lt;/script&gt;
     &lt;script type=&quot;text/javascript&quot; src=&quot;../Util.js&quot;&gt;&lt;/script&gt;
-    &lt;script type=&quot;text/javascript&quot; src=&quot;../model/Entry.js&quot;&gt;&lt;/script&gt;
     &lt;script type=&quot;text/javascript&quot; src=&quot;TimingTest.js&quot;&gt;&lt;/script&gt;
   &lt;/head&gt;
   
@@ -27,6 +26,11 @@
     
     &lt;p&gt;&nbsp;&lt;/p&gt;
     &lt;hr/&gt;
+    &lt;p&gt;You should be able to run these unit tests by going to
+    &lt;a href=&quot;../../third_party/jsunit/jsunit2_1/testRunner.html?testpage=&quot; 
+    onclick=&quot;href+=window.location.href;&quot; rel=&quot;external&quot;&gt;the local testRunner 
+    page&lt;/a&gt;, and hitting the &lt;b&gt;Run&lt;/b&gt; button.&lt;/p&gt;
+
     &lt;p&gt;To see the tests, open this .html file in a text editor. Or, within a  
     web browser, you should be able see the source for this file by using 
     some menu like &lt;b&gt;View&lt;/b&gt; followed by &lt;b&gt;Page Source&lt;/b&gt;. The tests 
@@ -39,19 +43,6 @@
     written by 
     &lt;a href=&quot;<A HREF="http://www.edwardh.com/">http://www.edwardh.com/</A>&quot; rel=&quot;external&quot;&gt;Edward Hieatt&lt;/a&gt;. &lt;/p&gt;
 
-    &lt;p&gt;If you're looking at this page across an &quot;<A HREF="http://">http://</A>&quot; connection, rather
-    than having loaded it as a &quot;<A HREF="file:///">file:///</A>&quot;, then you may be able to run the
-    unit tests. The web server that served you this page may also have a
-    JsUnit testRunner available. If so, you should be able to run these unit
-    tests by going to
-    &lt;a href=&quot;../../../../third_party/jsunit/testRunner.html?testpage=&quot; 
-    onclick=&quot;href+=window.location.href;&quot; rel=&quot;external&quot;&gt;the local testRunner 
-    page&lt;/a&gt;, and hitting the &lt;b&gt;Run&lt;/b&gt; button.&lt;/p&gt;
-
-    &lt;p&gt;You can also run these unit tests on your local computer. To do that you 
-    first need to download &lt;a href=&quot;<A HREF="http://www.edwardh.com/jsunit/">http://www.edwardh.com/jsunit/</A>&quot; 
-    rel=&quot;external&quot;&gt;JsUnit&lt;/a&gt;.&lt;/p&gt;
-    
     &lt;p&gt;&nbsp;&lt;/p&gt;
     &lt;hr/&gt;
     &lt;p class=&quot;copyright&quot;&gt;You can copy freely from this work &mdash; copyright 

Modified: trunk/source/scrap_yard/TimingTest.js
===================================================================
--- trunk/source/scrap_yard/TimingTest.js	2005-09-01 20:59:54 UTC (rev 311)
+++ trunk/source/scrap_yard/TimingTest.js	2005-09-01 23:01:19 UTC (rev 312)
@@ -28,8 +28,20 @@
  connection with the use or distribution of the work.
 *****************************************************************************/
 
-// Results from running this test, using Brian's Dell 4600:
+// Results from running this test circa Sept 2005, using Brian's Dell Inspiron 9300:
 //  0   microseconds for EMPTY_LOOP
+//  6.0 microseconds for ARRAY_CREATION
+//  4.4 microseconds for OBJECT_CREATION
+//  4.3 microseconds for OBJECT_CREATION_WITH_STRINGS
+//  2.9 microseconds for DATE_CREATION
+//  1.3 microseconds for METHOD_CALL
+//  1.1 microseconds for GLOBAL_VARIABLE_LOOKUP
+//  0.7 microseconds for DATE_VALUEOF
+//  7.5 microseconds for TEST_TYPE_ONE_BOX
+//  5.9 microseconds for TEST_TYPE_TWO_BOX
+
+// Results from running this test circa May 2005, using Brian's Dell Dimension 4600:
+//  0   microseconds for EMPTY_LOOP
 // 16   microseconds for ARRAY_CREATION
 // 15   microseconds for OBJECT_CREATION
 // 14   microseconds for OBJECT_CREATION_WITH_STRINGS
@@ -39,7 +51,7 @@
 //  1.2 microseconds for DATE_VALUEOF
 // 16    microseconds for ENTRY_COMPAREORDINALS
 
-// Results from a different test program, using Brian's Dell 4600:
+// Results from a different test program circa May 2005, using Brian's Dell Dimension 4600:
 //  0.78 microseconds to create a new Array:   var a = [x, y];
 //  0.59 microseconds to create a new Object:  var o = {here: x, there: y};
 //  0.59 microseconds to create a new Object:  var o = {&quot;here&quot;: x, &quot;there&quot;: y};
@@ -57,7 +69,9 @@
 var TEST_METHOD_CALL = &quot;METHOD_CALL&quot;;
 var TEST_GLOBAL_VARIABLE_LOOKUP = &quot;GLOBAL_VARIABLE_LOOKUP&quot;;
 var TEST_DATE_VALUEOF = &quot;DATE_VALUEOF&quot;;
-var TEST_ENTRY_COMPAREORDINALS = &quot;ENTRY_COMPAREORDINALS&quot;;
+// var TEST_ENTRY_COMPAREORDINALS = &quot;ENTRY_COMPAREORDINALS&quot;;
+var TEST_TYPE_ONE_BOX = &quot;TYPE_ONE_BOX&quot;;
+var TEST_TYPE_TWO_BOX = &quot;TYPE_TWO_BOX&quot;;
 
 function testTimes() {
   var testName;
@@ -70,7 +84,9 @@
   hashTableOfOperationsPerMillisecondKeyedByTestName[TEST_METHOD_CALL] = null;
   hashTableOfOperationsPerMillisecondKeyedByTestName[TEST_GLOBAL_VARIABLE_LOOKUP] = null;
   hashTableOfOperationsPerMillisecondKeyedByTestName[TEST_DATE_VALUEOF] = null;
-  hashTableOfOperationsPerMillisecondKeyedByTestName[TEST_ENTRY_COMPAREORDINALS] = null;
+  // hashTableOfOperationsPerMillisecondKeyedByTestName[TEST_ENTRY_COMPAREORDINALS] = null;
+  hashTableOfOperationsPerMillisecondKeyedByTestName[TEST_TYPE_ONE_BOX] = null;
+  hashTableOfOperationsPerMillisecondKeyedByTestName[TEST_TYPE_TWO_BOX] = null;
   for (testName in hashTableOfOperationsPerMillisecondKeyedByTestName) {
     var opsPerMS = getOpsPerMS(testName);
     hashTableOfOperationsPerMillisecondKeyedByTestName[testName] = opsPerMS;
@@ -100,6 +116,7 @@
   var operationsPerWhileLoopIteration = numberOfForLoopIterations * operationsPerForLoopIteration;
   var totalOperations = 0;
   
+/*
   if (inTestName == TEST_ENTRY_COMPAREORDINALS) {
     var world = {};
     world.getCurrentUser = function () { return this; };
@@ -110,7 +127,7 @@
     e1._initializeEntry();
     e2._initializeEntry();
   }
-
+*/
   var start = new Date();
   var startMS = start.valueOf();
   var nowMS = startMS;
@@ -229,6 +246,7 @@
         foo = now.valueOf();
       }
     }
+/*
     if (inTestName == TEST_ENTRY_COMPAREORDINALS) {
       for (i = 0; i &lt; numberOfForLoopIterations; i += 1) {
         foo = Entry.compareOrdinals(e1, e2);
@@ -243,6 +261,35 @@
         foo = Entry.compareOrdinals(e1, e2);
       }
     }
+ */
+    if (inTestName == TEST_TYPE_ONE_BOX) {
+      for (i = 0; i &lt; numberOfForLoopIterations; i += 1) {
+        foo = new shapes.TypeOneBox(10, 10);
+        foo = new shapes.TypeOneBox(10, 10);
+        foo = new shapes.TypeOneBox(10, 10);
+        foo = new shapes.TypeOneBox(10, 10);
+        foo = new shapes.TypeOneBox(10, 10);
+        foo = new shapes.TypeOneBox(10, 10);
+        foo = new shapes.TypeOneBox(10, 10);
+        foo = new shapes.TypeOneBox(10, 10);
+        foo = new shapes.TypeOneBox(10, 10);
+        foo = new shapes.TypeOneBox(10, 10);
+      }
+    }
+    if (inTestName == TEST_TYPE_TWO_BOX) {
+      for (i = 0; i &lt; numberOfForLoopIterations; i += 1) {
+        foo = new shapes.TypeTwoBox(10, 10);
+        foo = new shapes.TypeTwoBox(10, 10);
+        foo = new shapes.TypeTwoBox(10, 10);
+        foo = new shapes.TypeTwoBox(10, 10);
+        foo = new shapes.TypeTwoBox(10, 10);
+        foo = new shapes.TypeTwoBox(10, 10);
+        foo = new shapes.TypeTwoBox(10, 10);
+        foo = new shapes.TypeTwoBox(10, 10);
+        foo = new shapes.TypeTwoBox(10, 10);
+        foo = new shapes.TypeTwoBox(10, 10);
+      }
+    }
     now = new Date();
     nowMS = now.valueOf();
     totalOperations += operationsPerWhileLoopIteration;
@@ -258,6 +305,47 @@
   return operationsPerMillisecond;  
 }
 
+function testBoxConstruction() {
+  var boxA = new shapes.TypeOneBox(10, 10);
+  var boxB = new shapes.TypeOneBox(10, 10);
+  assertTrue(&quot;'TypeOneBox' objects each have their own 'getValue' method&quot;, boxA.getArea != boxB.getArea);
+  
+  boxA = new shapes.TypeTwoBox(10, 10);
+  boxB = new shapes.TypeTwoBox(10, 10);
+  assertTrue(&quot;'TypeTwoBox' objects share a common 'getValue' method&quot;, boxA.getArea == boxB.getArea);
+}
+
+shapes = {
+  TypeOneBox: function(width, height) {
+    this._width = width;
+    this._height = height;
+    
+    this.getArea = function() {
+      // do some busy work
+      var foo = [10];
+      for (var i in foo) {
+        var area = (this._width * this._height);
+      }
+      return area;
+    }
+  }
+};
+
+shapes.TypeTwoBox = function(width, height) {
+  this._width = width;
+  this._height = height;
+}
+
+shapes.TypeTwoBox.prototype.getArea = function() {
+  // do some busy work
+  var foo = [10];
+  for (var i in foo) {
+    var area = (this._width * this._height);
+  }
+  return area;
+};
+
+
 // -------------------------------------------------------------------
 // End of file
 // -------------------------------------------------------------------

Modified: trunk/source/util/UtilTest.html
===================================================================
--- trunk/source/util/UtilTest.html	2005-09-01 20:59:54 UTC (rev 311)
+++ trunk/source/util/UtilTest.html	2005-09-01 23:01:19 UTC (rev 312)
@@ -30,6 +30,11 @@
     
     &lt;p&gt;&nbsp;&lt;/p&gt;
     &lt;hr/&gt;
+    &lt;p&gt;You should be able to run these unit tests by going to
+    &lt;a href=&quot;../../third_party/jsunit/jsunit2_1/testRunner.html?testpage=&quot; 
+    onclick=&quot;href+=window.location.href;&quot; rel=&quot;external&quot;&gt;the local testRunner 
+    page&lt;/a&gt;, and hitting the &lt;b&gt;Run&lt;/b&gt; button. &lt;/p&gt;
+
     &lt;p&gt;To see the tests, open this .html file in a text editor. Or, within a  
     web browser, you should be able see the source for this file by using 
     some menu like &lt;b&gt;View&lt;/b&gt; followed by &lt;b&gt;Page Source&lt;/b&gt;. The tests 
@@ -42,19 +47,6 @@
     written by 
     &lt;a href=&quot;<A HREF="http://www.edwardh.com/">http://www.edwardh.com/</A>&quot; rel=&quot;external&quot;&gt;Edward Hieatt&lt;/a&gt;. &lt;/p&gt;
 
-    &lt;p&gt;If you're looking at this page across an &quot;<A HREF="http://">http://</A>&quot; connection, rather
-    than having loaded it as a &quot;<A HREF="file:///">file:///</A>&quot;, then you may be able to run the
-    unit tests. The web server that served you this page may also have a
-    JsUnit testRunner available. If so, you should be able to run these unit
-    tests by going to
-    &lt;a href=&quot;../../third_party/jsunit/jsunit2_1/testRunner.html?testpage=&quot; 
-    onclick=&quot;href+=window.location.href;&quot; rel=&quot;external&quot;&gt;the local testRunner 
-    page&lt;/a&gt;, and hitting the &lt;b&gt;Run&lt;/b&gt; button.&lt;/p&gt;
-
-    &lt;p&gt;You can also run these unit tests on your local computer. To do that you 
-    first need to download &lt;a href=&quot;<A HREF="http://www.edwardh.com/jsunit/">http://www.edwardh.com/jsunit/</A>&quot; 
-    rel=&quot;external&quot;&gt;JsUnit&lt;/a&gt;.&lt;/p&gt;
-    
     &lt;p&gt;&nbsp;&lt;/p&gt;
     &lt;hr/&gt;
     &lt;p class=&quot;copyright&quot;&gt;You can copy freely from this work &mdash; copyright 


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000296.html">[openrecord-svn] r311 - trunk/documentation
</A></li>
	<LI>Next message: <A HREF="000298.html">[openrecord-svn] r313 - trunk/source/model
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#297">[ date ]</a>
              <a href="thread.html#297">[ thread ]</a>
              <a href="subject.html#297">[ subject ]</a>
              <a href="author.html#297">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openrecord-svn">More information about the openrecord-svn
mailing list</a><br>
</body></html>
